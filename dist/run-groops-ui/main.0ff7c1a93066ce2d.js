"use strict";(self.webpackChunkRunGroopsUI=self.webpackChunkRunGroopsUI||[]).push([[179],{835:()=>{function Lt(n){return"function"==typeof n}function Xd(n){const t=n(i=>{Error.call(i),i.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}const yf=Xd(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((i,r)=>`${r+1}) ${i.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function Hl(n,e){if(n){const t=n.indexOf(e);0<=t&&n.splice(t,1)}}class di{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const o of t)o.remove(this);else t.remove(this);const{initialTeardown:i}=this;if(Lt(i))try{i()}catch(o){e=o instanceof yf?o.errors:[o]}const{_finalizers:r}=this;if(r){this._finalizers=null;for(const o of r)try{KM(o)}catch(s){e=e??[],s instanceof yf?e=[...e,...s.errors]:e.push(s)}}if(e)throw new yf(e)}}add(e){var t;if(e&&e!==this)if(this.closed)KM(e);else{if(e instanceof di){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(e)}}_hasParent(e){const{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){const{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Hl(t,e)}remove(e){const{_finalizers:t}=this;t&&Hl(t,e),e instanceof di&&e._removeParent(this)}}di.EMPTY=(()=>{const n=new di;return n.closed=!0,n})();const YM=di.EMPTY;function ZM(n){return n instanceof di||n&&"closed"in n&&Lt(n.remove)&&Lt(n.add)&&Lt(n.unsubscribe)}function KM(n){Lt(n)?n():n.unsubscribe()}const Ca={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},xf={setTimeout(n,e,...t){const{delegate:i}=xf;return i?.setTimeout?i.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){const{delegate:e}=xf;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function QM(n){xf.setTimeout(()=>{const{onUnhandledError:e}=Ca;if(!e)throw n;e(n)})}function B_(){}const RL=U_("C",void 0,void 0);function U_(n,e,t){return{kind:n,value:e,error:t}}let Ma=null;function Cf(n){if(Ca.useDeprecatedSynchronousErrorHandling){const e=!Ma;if(e&&(Ma={errorThrown:!1,error:null}),n(),e){const{errorThrown:t,error:i}=Ma;if(Ma=null,t)throw i}}else n()}class V_ extends di{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,ZM(e)&&e.add(this)):this.destination=BL}static create(e,t,i){return new Yd(e,t,i)}next(e){this.isStopped?z_(function OL(n){return U_("N",n,void 0)}(e),this):this._next(e)}error(e){this.isStopped?z_(function PL(n){return U_("E",void 0,n)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?z_(RL,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const FL=Function.prototype.bind;function H_(n,e){return FL.call(n,e)}class NL{constructor(e){this.partialObserver=e}next(e){const{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(i){Mf(i)}}error(e){const{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(i){Mf(i)}else Mf(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Mf(t)}}}class Yd extends V_{constructor(e,t,i){let r;if(super(),Lt(e)||!e)r={next:e??void 0,error:t??void 0,complete:i??void 0};else{let o;this&&Ca.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),r={next:e.next&&H_(e.next,o),error:e.error&&H_(e.error,o),complete:e.complete&&H_(e.complete,o)}):r=e}this.destination=new NL(r)}}function Mf(n){Ca.useDeprecatedSynchronousErrorHandling?function kL(n){Ca.useDeprecatedSynchronousErrorHandling&&Ma&&(Ma.errorThrown=!0,Ma.error=n)}(n):QM(n)}function z_(n,e){const{onStoppedNotification:t}=Ca;t&&xf.setTimeout(()=>t(n,e))}const BL={closed:!0,next:B_,error:function LL(n){throw n},complete:B_},G_="function"==typeof Symbol&&Symbol.observable||"@@observable";function Bs(n){return n}function JM(n){return 0===n.length?Bs:1===n.length?n[0]:function(t){return n.reduce((i,r)=>r(i),t)}}let sn=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){const i=new n;return i.source=this,i.operator=t,i}subscribe(t,i,r){const o=function HL(n){return n&&n instanceof V_||function VL(n){return n&&Lt(n.next)&&Lt(n.error)&&Lt(n.complete)}(n)&&ZM(n)}(t)?t:new Yd(t,i,r);return Cf(()=>{const{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(i){t.error(i)}}forEach(t,i){return new(i=ew(i))((r,o)=>{const s=new Yd({next:a=>{try{t(a)}catch(l){o(l),s.unsubscribe()}},error:o,complete:r});this.subscribe(s)})}_subscribe(t){var i;return null===(i=this.source)||void 0===i?void 0:i.subscribe(t)}[G_](){return this}pipe(...t){return JM(t)(this)}toPromise(t){return new(t=ew(t))((i,r)=>{let o;this.subscribe(s=>o=s,s=>r(s),()=>i(o))})}}return n.create=e=>new n(e),n})();function ew(n){var e;return null!==(e=n??Ca.Promise)&&void 0!==e?e:Promise}const zL=Xd(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let Kt=(()=>{class n extends sn{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const i=new tw(this,this);return i.operator=t,i}_throwIfClosed(){if(this.closed)throw new zL}next(t){Cf(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const i of this.currentObservers)i.next(t)}})}error(t){Cf(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:i}=this;for(;i.length;)i.shift().error(t)}})}complete(){Cf(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:i,isStopped:r,observers:o}=this;return i||r?YM:(this.currentObservers=null,o.push(t),new di(()=>{this.currentObservers=null,Hl(o,t)}))}_checkFinalizedStatuses(t){const{hasError:i,thrownError:r,isStopped:o}=this;i?t.error(r):o&&t.complete()}asObservable(){const t=new sn;return t.source=this,t}}return n.create=(e,t)=>new tw(e,t),n})();class tw extends Kt{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,i;null===(i=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===i||i.call(t,e)}error(e){var t,i;null===(i=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===i||i.call(t,e)}complete(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)}_subscribe(e){var t,i;return null!==(i=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==i?i:YM}}class ui extends Kt{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:i}=this;if(e)throw t;return this._throwIfClosed(),i}next(e){super.next(this._value=e)}}function nw(n){return Lt(n?.lift)}function Dn(n){return e=>{if(nw(e))return e.lift(function(t){try{return n(t,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function mn(n,e,t,i,r){return new GL(n,e,t,i,r)}class GL extends V_{constructor(e,t,i,r,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(l){e.error(l)}}:super._next,this._error=r?function(a){try{r(a)}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function wt(n,e){return Dn((t,i)=>{let r=0;t.subscribe(mn(i,o=>{i.next(n.call(e,o,r++))}))})}function Us(n){return this instanceof Us?(this.v=n,this):new Us(n)}function sw(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,e=n[Symbol.asyncIterator];return e?e.call(n):(n=function q_(n){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(n),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(o){t[o]=n[o]&&function(s){return new Promise(function(a,l){!function r(o,s,a,l){Promise.resolve(l).then(function(c){o({value:c,done:a})},s)}(a,l,(s=n[o](s)).done,s.value)})}}}const X_=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function aw(n){return Lt(n?.then)}function lw(n){return Lt(n[G_])}function cw(n){return Symbol.asyncIterator&&Lt(n?.[Symbol.asyncIterator])}function dw(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const uw=function lB(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function hw(n){return Lt(n?.[uw])}function fw(n){return function ow(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=t.apply(n,e||[]),o=[];return r={},s("next"),s("throw"),s("return"),r[Symbol.asyncIterator]=function(){return this},r;function s(h){i[h]&&(r[h]=function(f){return new Promise(function(p,_){o.push([h,f,p,_])>1||a(h,f)})})}function a(h,f){try{!function l(h){h.value instanceof Us?Promise.resolve(h.value.v).then(c,d):u(o[0][2],h)}(i[h](f))}catch(p){u(o[0][3],p)}}function c(h){a("next",h)}function d(h){a("throw",h)}function u(h,f){h(f),o.shift(),o.length&&a(o[0][0],o[0][1])}}(this,arguments,function*(){const t=n.getReader();try{for(;;){const{value:i,done:r}=yield Us(t.read());if(r)return yield Us(void 0);yield yield Us(i)}}finally{t.releaseLock()}})}function pw(n){return Lt(n?.getReader)}function Ri(n){if(n instanceof sn)return n;if(null!=n){if(lw(n))return function cB(n){return new sn(e=>{const t=n[G_]();if(Lt(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(X_(n))return function dB(n){return new sn(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}(n);if(aw(n))return function uB(n){return new sn(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,QM)})}(n);if(cw(n))return mw(n);if(hw(n))return function hB(n){return new sn(e=>{for(const t of n)if(e.next(t),e.closed)return;e.complete()})}(n);if(pw(n))return function fB(n){return mw(fw(n))}(n)}throw dw(n)}function mw(n){return new sn(e=>{(function pB(n,e){var t,i,r,o;return function iw(n,e,t,i){return new(t||(t=Promise))(function(o,s){function a(d){try{c(i.next(d))}catch(u){s(u)}}function l(d){try{c(i.throw(d))}catch(u){s(u)}}function c(d){d.done?o(d.value):function r(o){return o instanceof t?o:new t(function(s){s(o)})}(d.value).then(a,l)}c((i=i.apply(n,e||[])).next())})}(this,void 0,void 0,function*(){try{for(t=sw(n);!(i=yield t.next()).done;)if(e.next(i.value),e.closed)return}catch(s){r={error:s}}finally{try{i&&!i.done&&(o=t.return)&&(yield o.call(t))}finally{if(r)throw r.error}}e.complete()})})(n,e).catch(t=>e.error(t))})}function Zo(n,e,t,i=0,r=!1){const o=e.schedule(function(){t(),r?n.add(this.schedule(null,i)):this.unsubscribe()},i);if(n.add(o),!r)return o}function ei(n,e,t=1/0){return Lt(e)?ei((i,r)=>wt((o,s)=>e(i,o,r,s))(Ri(n(i,r))),t):("number"==typeof e&&(t=e),Dn((i,r)=>function mB(n,e,t,i,r,o,s,a){const l=[];let c=0,d=0,u=!1;const h=()=>{u&&!l.length&&!c&&e.complete()},f=_=>c<i?p(_):l.push(_),p=_=>{o&&e.next(_),c++;let m=!1;Ri(t(_,d++)).subscribe(mn(e,g=>{r?.(g),o?f(g):e.next(g)},()=>{m=!0},void 0,()=>{if(m)try{for(c--;l.length&&c<i;){const g=l.shift();s?Zo(e,s,()=>p(g)):p(g)}h()}catch(g){e.error(g)}}))};return n.subscribe(mn(e,f,()=>{u=!0,h()})),()=>{a?.()}}(i,r,n,t)))}function zl(n=1/0){return ei(Bs,n)}const _o=new sn(n=>n.complete());function gw(n){return n&&Lt(n.schedule)}function Y_(n){return n[n.length-1]}function _w(n){return Lt(Y_(n))?n.pop():void 0}function Zd(n){return gw(Y_(n))?n.pop():void 0}function vw(n,e=0){return Dn((t,i)=>{t.subscribe(mn(i,r=>Zo(i,n,()=>i.next(r),e),()=>Zo(i,n,()=>i.complete(),e),r=>Zo(i,n,()=>i.error(r),e)))})}function bw(n,e=0){return Dn((t,i)=>{i.add(n.schedule(()=>t.subscribe(i),e))})}function yw(n,e){if(!n)throw new Error("Iterable cannot be null");return new sn(t=>{Zo(t,e,()=>{const i=n[Symbol.asyncIterator]();Zo(t,e,()=>{i.next().then(r=>{r.done?t.complete():t.next(r.value)})},0,!0)})})}function kn(n,e){return e?function MB(n,e){if(null!=n){if(lw(n))return function vB(n,e){return Ri(n).pipe(bw(e),vw(e))}(n,e);if(X_(n))return function yB(n,e){return new sn(t=>{let i=0;return e.schedule(function(){i===n.length?t.complete():(t.next(n[i++]),t.closed||this.schedule())})})}(n,e);if(aw(n))return function bB(n,e){return Ri(n).pipe(bw(e),vw(e))}(n,e);if(cw(n))return yw(n,e);if(hw(n))return function xB(n,e){return new sn(t=>{let i;return Zo(t,e,()=>{i=n[uw](),Zo(t,e,()=>{let r,o;try{({value:r,done:o}=i.next())}catch(s){return void t.error(s)}o?t.complete():t.next(r)},0,!0)}),()=>Lt(i?.return)&&i.return()})}(n,e);if(pw(n))return function CB(n,e){return yw(fw(n),e)}(n,e)}throw dw(n)}(n,e):Ri(n)}function xw(...n){const e=Zd(n),t=function _B(n,e){return"number"==typeof Y_(n)?n.pop():e}(n,1/0),i=n;return i.length?1===i.length?Ri(i[0]):zl(t)(kn(i,e)):_o}function Ye(...n){return kn(n,Zd(n))}function Z_(n={}){const{connector:e=(()=>new Kt),resetOnError:t=!0,resetOnComplete:i=!0,resetOnRefCountZero:r=!0}=n;return o=>{let s,a,l,c=0,d=!1,u=!1;const h=()=>{a?.unsubscribe(),a=void 0},f=()=>{h(),s=l=void 0,d=u=!1},p=()=>{const _=s;f(),_?.unsubscribe()};return Dn((_,m)=>{c++,!u&&!d&&h();const g=l=l??e();m.add(()=>{c--,0===c&&!u&&!d&&(a=K_(p,r))}),g.subscribe(m),!s&&c>0&&(s=new Yd({next:b=>g.next(b),error:b=>{u=!0,h(),a=K_(f,t,b),g.error(b)},complete:()=>{d=!0,h(),a=K_(f,i),g.complete()}}),Ri(_).subscribe(s))})(o)}}function K_(n,e,...t){if(!0===e)return void n();if(!1===e)return;const i=new Yd({next:()=>{i.unsubscribe(),n()}});return Ri(e(...t)).subscribe(i)}function jr(n,e){return Dn((t,i)=>{let r=null,o=0,s=!1;const a=()=>s&&!r&&i.complete();t.subscribe(mn(i,l=>{r?.unsubscribe();let c=0;const d=o++;Ri(n(l,d)).subscribe(r=mn(i,u=>i.next(e?e(l,u,d,c++):u),()=>{r=null,a()}))},()=>{s=!0,a()}))})}function SB(n,e){return n===e}function Yt(n){for(let e in n)if(n[e]===Yt)return e;throw Error("Could not find renamed property on target object.")}function wf(n,e){for(const t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Wn(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(Wn).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const e=n.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function Q_(n,e){return null==n||""===n?null===e?"":e:null==e||""===e?n:n+" "+e}const EB=Yt({__forward_ref__:Yt});function tn(n){return n.__forward_ref__=tn,n.toString=function(){return Wn(this())},n}function at(n){return J_(n)?n():n}function J_(n){return"function"==typeof n&&n.hasOwnProperty(EB)&&n.__forward_ref__===tn}function ev(n){return n&&!!n.\u0275providers}const Cw="https://g.co/ng/security#xss";class ne extends Error{constructor(e,t){super(function Sf(n,e){return`NG0${Math.abs(n)}${e?": "+e:""}`}(e,t)),this.code=e}}function dt(n){return"string"==typeof n?n:null==n?"":String(n)}function Ef(n,e){throw new ne(-201,!1)}function Sr(n,e){null==n&&function Xt(n,e,t,i){throw new Error(`ASSERTION ERROR: ${n}`+(null==i?"":` [Expected=> ${t} ${i} ${e} <=Actual]`))}(e,n,null,"!=")}function ye(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function St(n){return{providers:n.providers||[],imports:n.imports||[]}}function Tf(n){return Mw(n,Df)||Mw(n,Sw)}function Mw(n,e){return n.hasOwnProperty(e)?n[e]:null}function ww(n){return n&&(n.hasOwnProperty(tv)||n.hasOwnProperty(kB))?n[tv]:null}const Df=Yt({\u0275prov:Yt}),tv=Yt({\u0275inj:Yt}),Sw=Yt({ngInjectableDef:Yt}),kB=Yt({ngInjectorDef:Yt});var Je=(()=>((Je=Je||{})[Je.Default=0]="Default",Je[Je.Host=1]="Host",Je[Je.Self=2]="Self",Je[Je.SkipSelf=4]="SkipSelf",Je[Je.Optional=8]="Optional",Je))();let nv;function Wi(n){const e=nv;return nv=n,e}function Tw(n,e,t){const i=Tf(n);return i&&"root"==i.providedIn?void 0===i.value?i.value=i.factory():i.value:t&Je.Optional?null:void 0!==e?e:void Ef(Wn(n))}const nn=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Kd={},iv="__NG_DI_FLAG__",Af="ngTempTokenPath",NB=/\n/gm,Dw="__source";let Gl;function Hs(n){const e=Gl;return Gl=n,e}function UB(n,e=Je.Default){if(void 0===Gl)throw new ne(-203,!1);return null===Gl?Tw(n,void 0,e):Gl.get(n,e&Je.Optional?null:void 0,e)}function J(n,e=Je.Default){return(function Ew(){return nv}()||UB)(at(n),e)}function Te(n,e=Je.Default){return J(n,If(e))}function If(n){return typeof n>"u"||"number"==typeof n?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function rv(n){const e=[];for(let t=0;t<n.length;t++){const i=at(n[t]);if(Array.isArray(i)){if(0===i.length)throw new ne(900,!1);let r,o=Je.Default;for(let s=0;s<i.length;s++){const a=i[s],l=VB(a);"number"==typeof l?-1===l?r=a.token:o|=l:r=a}e.push(J(r,o))}else e.push(J(i))}return e}function Qd(n,e){return n[iv]=e,n.prototype[iv]=e,n}function VB(n){return n[iv]}function Ko(n){return{toString:n}.toString()}var vo=(()=>((vo=vo||{})[vo.OnPush=0]="OnPush",vo[vo.Default=1]="Default",vo))(),$i=(()=>{return(n=$i||($i={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",$i;var n})();const bo={},Gt=[],Rf=Yt({\u0275cmp:Yt}),ov=Yt({\u0275dir:Yt}),sv=Yt({\u0275pipe:Yt}),Iw=Yt({\u0275mod:Yt}),Qo=Yt({\u0275fac:Yt}),Jd=Yt({__NG_ELEMENT_ID__:Yt}),Rw=Yt({__NG_ENV_ID__:Yt});function Pw(n,e,t){let i=n.length;for(;;){const r=n.indexOf(e,t);if(-1===r)return r;if(0===r||n.charCodeAt(r-1)<=32){const o=e.length;if(r+o===i||n.charCodeAt(r+o)<=32)return r}t=r+1}}function av(n,e,t){let i=0;for(;i<t.length;){const r=t[i];if("number"==typeof r){if(0!==r)break;i++;const o=t[i++],s=t[i++],a=t[i++];n.setAttribute(e,s,a,o)}else{const o=r,s=t[++i];kw(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),i++}}return i}function Ow(n){return 3===n||4===n||6===n}function kw(n){return 64===n.charCodeAt(0)}function eu(n,e){if(null!==e&&0!==e.length)if(null===n||0===n.length)n=e.slice();else{let t=-1;for(let i=0;i<e.length;i++){const r=e[i];"number"==typeof r?t=r:0===t||Fw(n,t,r,null,-1===t||2===t?e[++i]:null)}}return n}function Fw(n,e,t,i,r){let o=0,s=n.length;if(-1===e)s=-1;else for(;o<n.length;){const a=n[o++];if("number"==typeof a){if(a===e){s=-1;break}if(a>e){s=o-1;break}}}for(;o<n.length;){const a=n[o];if("number"==typeof a)break;if(a===t){if(null===i)return void(null!==r&&(n[o+1]=r));if(i===n[o+1])return void(n[o+2]=r)}o++,null!==i&&o++,null!==r&&o++}-1!==s&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),null!==i&&n.splice(o++,0,i),null!==r&&n.splice(o++,0,r)}const Nw="ng-template";function GB(n,e,t){let i=0,r=!0;for(;i<n.length;){let o=n[i++];if("string"==typeof o&&r){const s=n[i++];if(t&&"class"===o&&-1!==Pw(s.toLowerCase(),e,0))return!0}else{if(1===o){for(;i<n.length&&"string"==typeof(o=n[i++]);)if(o.toLowerCase()===e)return!0;return!1}"number"==typeof o&&(r=!1)}}return!1}function Lw(n){return 4===n.type&&n.value!==Nw}function jB(n,e,t){return e===(4!==n.type||t?n.value:Nw)}function WB(n,e,t){let i=4;const r=n.attrs||[],o=function XB(n){for(let e=0;e<n.length;e++)if(Ow(n[e]))return e;return n.length}(r);let s=!1;for(let a=0;a<e.length;a++){const l=e[a];if("number"!=typeof l){if(!s)if(4&i){if(i=2|1&i,""!==l&&!jB(n,l,t)||""===l&&1===e.length){if(Wr(i))return!1;s=!0}}else{const c=8&i?l:e[++a];if(8&i&&null!==n.attrs){if(!GB(n.attrs,c,t)){if(Wr(i))return!1;s=!0}continue}const u=$B(8&i?"class":l,r,Lw(n),t);if(-1===u){if(Wr(i))return!1;s=!0;continue}if(""!==c){let h;h=u>o?"":r[u+1].toLowerCase();const f=8&i?h:null;if(f&&-1!==Pw(f,c,0)||2&i&&c!==h){if(Wr(i))return!1;s=!0}}}}else{if(!s&&!Wr(i)&&!Wr(l))return!1;if(s&&Wr(l))continue;s=!1,i=l|1&i}}return Wr(i)||s}function Wr(n){return 0==(1&n)}function $B(n,e,t,i){if(null===e)return-1;let r=0;if(i||!t){let o=!1;for(;r<e.length;){const s=e[r];if(s===n)return r;if(3===s||6===s)o=!0;else{if(1===s||2===s){let a=e[++r];for(;"string"==typeof a;)a=e[++r];continue}if(4===s)break;if(0===s){r+=4;continue}}r+=o?1:2}return-1}return function YB(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){const i=n[t];if("number"==typeof i)return-1;if(i===e)return t;t++}return-1}(e,n)}function Bw(n,e,t=!1){for(let i=0;i<e.length;i++)if(WB(n,e[i],t))return!0;return!1}function ZB(n,e){e:for(let t=0;t<e.length;t++){const i=e[t];if(n.length===i.length){for(let r=0;r<n.length;r++)if(n[r]!==i[r])continue e;return!0}}return!1}function Uw(n,e){return n?":not("+e.trim()+")":e}function KB(n){let e=n[0],t=1,i=2,r="",o=!1;for(;t<n.length;){let s=n[t];if("string"==typeof s)if(2&i){const a=n[++t];r+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else 8&i?r+="."+s:4&i&&(r+=" "+s);else""!==r&&!Wr(s)&&(e+=Uw(o,r),r=""),i=s,o=o||!Wr(i);t++}return""!==r&&(e+=Uw(o,r)),e}function yt(n){return Ko(()=>{const e=Hw(n),t={...e,decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===vo.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||$i.Emulated,styles:n.styles||Gt,_:null,schemas:n.schemas||null,tView:null,id:""};zw(t);const i=n.dependencies;return t.directiveDefs=Pf(i,!1),t.pipeDefs=Pf(i,!0),t.id=function s3(n){let e=0;const t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(const r of t)e=Math.imul(31,e)+r.charCodeAt(0)<<0;return e+=2147483648,"c"+e}(t),t})}function t3(n){return $t(n)||_i(n)}function n3(n){return null!==n}function At(n){return Ko(()=>({type:n.type,bootstrap:n.bootstrap||Gt,declarations:n.declarations||Gt,imports:n.imports||Gt,exports:n.exports||Gt,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function Vw(n,e){if(null==n)return bo;const t={};for(const i in n)if(n.hasOwnProperty(i)){let r=n[i],o=r;Array.isArray(r)&&(o=r[1],r=r[0]),t[r]=i,e&&(e[r]=o)}return t}function xe(n){return Ko(()=>{const e=Hw(n);return zw(e),e})}function $t(n){return n[Rf]||null}function _i(n){return n[ov]||null}function Xi(n){return n[sv]||null}function or(n,e){const t=n[Iw]||null;if(!t&&!0===e)throw new Error(`Type ${Wn(n)} does not have '\u0275mod' property.`);return t}function Hw(n){const e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||bo,exportAs:n.exportAs||null,standalone:!0===n.standalone,signals:!0===n.signals,selectors:n.selectors||Gt,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Vw(n.inputs,e),outputs:Vw(n.outputs)}}function zw(n){n.features?.forEach(e=>e(n))}function Pf(n,e){if(!n)return null;const t=e?Xi:t3;return()=>("function"==typeof n?n():n).map(i=>t(i)).filter(n3)}const $n=0,Le=1,ht=2,gn=3,$r=4,tu=5,vi=6,Wl=7,Fn=8,$l=9,wa=10,ft=11,nu=12,Gw=13,ql=14,Nn=15,iu=16,Xl=17,yo=18,ru=19,jw=20,zs=21,Jo=22,Of=23,kf=24,Ft=25,lv=1,Ww=2,xo=7,Yl=9,bi=11;function sr(n){return Array.isArray(n)&&"object"==typeof n[lv]}function Yi(n){return Array.isArray(n)&&!0===n[lv]}function cv(n){return 0!=(4&n.flags)}function Sa(n){return n.componentOffset>-1}function Nf(n){return 1==(1&n.flags)}function qr(n){return!!n.template}function dv(n){return 0!=(512&n[ht])}function Ea(n,e){return n.hasOwnProperty(Qo)?n[Qo]:null}let h3=nn.WeakRef??class u3{constructor(e){this.ref=e}deref(){return this.ref}},p3=0,Co=null,Lf=!1;function ti(n){const e=Co;return Co=n,e}class Zw{constructor(){this.id=p3++,this.ref=function f3(n){return new h3(n)}(this),this.producers=new Map,this.consumers=new Map,this.trackingVersion=0,this.valueVersion=0}consumerPollProducersForChange(){for(const[e,t]of this.producers){const i=t.producerNode.deref();if(void 0!==i&&t.atTrackingVersion===this.trackingVersion){if(i.producerPollStatus(t.seenValueVersion))return!0}else this.producers.delete(e),i?.consumers.delete(this.id)}return!1}producerMayHaveChanged(){const e=Lf;Lf=!0;try{for(const[t,i]of this.consumers){const r=i.consumerNode.deref();void 0!==r&&r.trackingVersion===i.atTrackingVersion?r.onConsumerDependencyMayHaveChanged():(this.consumers.delete(t),r?.producers.delete(this.id))}}finally{Lf=e}}producerAccessed(){if(Lf)throw new Error("");if(null===Co)return;let e=Co.producers.get(this.id);void 0===e?(e={consumerNode:Co.ref,producerNode:this.ref,seenValueVersion:this.valueVersion,atTrackingVersion:Co.trackingVersion},Co.producers.set(this.id,e),this.consumers.set(Co.id,e)):(e.seenValueVersion=this.valueVersion,e.atTrackingVersion=Co.trackingVersion)}get hasProducers(){return this.producers.size>0}get producerUpdatesAllowed(){return!1!==Co?.consumerAllowSignalWrites}producerPollStatus(e){return this.valueVersion!==e||(this.onProducerUpdateValueVersion(),this.valueVersion!==e)}}let Kw=null;const Jw=()=>{};class v3 extends Zw{constructor(e,t,i){super(),this.watch=e,this.schedule=t,this.dirty=!1,this.cleanupFn=Jw,this.registerOnCleanup=r=>{this.cleanupFn=r},this.consumerAllowSignalWrites=i}notify(){this.dirty||this.schedule(this),this.dirty=!0}onConsumerDependencyMayHaveChanged(){this.notify()}onProducerUpdateValueVersion(){}run(){if(this.dirty=!1,0!==this.trackingVersion&&!this.consumerPollProducersForChange())return;const e=ti(this);this.trackingVersion++;try{this.cleanupFn(),this.cleanupFn=Jw,this.watch(this.registerOnCleanup)}finally{ti(e)}}cleanup(){this.cleanupFn()}}class b3{constructor(e,t,i){this.previousValue=e,this.currentValue=t,this.firstChange=i}isFirstChange(){return this.firstChange}}function yi(){return eS}function eS(n){return n.type.prototype.ngOnChanges&&(n.setInput=x3),y3}function y3(){const n=nS(this),e=n?.current;if(e){const t=n.previous;if(t===bo)n.previous=e;else for(let i in e)t[i]=e[i];n.current=null,this.ngOnChanges(e)}}function x3(n,e,t,i){const r=this.declaredInputs[t],o=nS(n)||function C3(n,e){return n[tS]=e}(n,{previous:bo,current:null}),s=o.current||(o.current={}),a=o.previous,l=a[r];s[r]=new b3(l&&l.currentValue,e,a===bo),n[i]=e}yi.ngInherit=!0;const tS="__ngSimpleChanges__";function nS(n){return n[tS]||null}const Mo=function(n,e,t){},iS="svg";function an(n){for(;Array.isArray(n);)n=n[$n];return n}function Vf(n,e){return an(e[n])}function Zi(n,e){return an(e[n.index])}function oS(n,e){return n.data[e]}function ar(n,e){const t=e[n];return sr(t)?t:t[$n]}function Gs(n,e){return null==e?null:n[e]}function sS(n){n[Xl]=0}function A3(n){1024&n[ht]||(n[ht]|=1024,lS(n,1))}function aS(n){1024&n[ht]&&(n[ht]&=-1025,lS(n,-1))}function lS(n,e){let t=n[gn];if(null===t)return;t[tu]+=e;let i=t;for(t=t[gn];null!==t&&(1===e&&1===i[tu]||-1===e&&0===i[tu]);)t[tu]+=e,i=t,t=t[gn]}const it={lFrame:bS(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function uS(){return it.bindingsEnabled}function Kl(){return null!==it.skipHydrationRootTNode}function fe(){return it.lFrame.lView}function Vt(){return it.lFrame.tView}function ni(n){return it.lFrame.contextLView=n,n[Fn]}function ii(n){return it.lFrame.contextLView=null,n}function hi(){let n=hS();for(;null!==n&&64===n.type;)n=n.parent;return n}function hS(){return it.lFrame.currentTNode}function wo(n,e){const t=it.lFrame;t.currentTNode=n,t.isParent=e}function gv(){return it.lFrame.isParent}function _v(){it.lFrame.isParent=!1}function Pi(){const n=it.lFrame;let e=n.bindingRootIndex;return-1===e&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function Ql(){return it.lFrame.bindingIndex++}function ts(n){const e=it.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function H3(n,e){const t=it.lFrame;t.bindingIndex=t.bindingRootIndex=n,vv(e)}function vv(n){it.lFrame.currentDirectiveIndex=n}function bv(n){const e=it.lFrame.currentDirectiveIndex;return-1===e?null:n[e]}function gS(){return it.lFrame.currentQueryIndex}function yv(n){it.lFrame.currentQueryIndex=n}function G3(n){const e=n[Le];return 2===e.type?e.declTNode:1===e.type?n[vi]:null}function _S(n,e,t){if(t&Je.SkipSelf){let r=e,o=n;for(;!(r=r.parent,null!==r||t&Je.Host||(r=G3(o),null===r||(o=o[ql],10&r.type))););if(null===r)return!1;e=r,n=o}const i=it.lFrame=vS();return i.currentTNode=e,i.lView=n,!0}function xv(n){const e=vS(),t=n[Le];it.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function vS(){const n=it.lFrame,e=null===n?null:n.child;return null===e?bS(n):e}function bS(n){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=e),e}function yS(){const n=it.lFrame;return it.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const xS=yS;function Cv(){const n=yS();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Oi(){return it.lFrame.selectedIndex}function Ta(n){it.lFrame.selectedIndex=n}function _n(){const n=it.lFrame;return oS(n.tView,n.selectedIndex)}function Da(){it.lFrame.currentNamespace=iS}function Aa(){!function q3(){it.lFrame.currentNamespace=null}()}let MS=!0;function Hf(){return MS}function js(n){MS=n}function zf(n,e){for(let t=e.directiveStart,i=e.directiveEnd;t<i;t++){const o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:d}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),l&&(n.viewHooks??=[]).push(-t,l),c&&((n.viewHooks??=[]).push(t,c),(n.viewCheckHooks??=[]).push(t,c)),null!=d&&(n.destroyHooks??=[]).push(t,d)}}function Gf(n,e,t){wS(n,e,3,t)}function jf(n,e,t,i){(3&n[ht])===t&&wS(n,e,t,i)}function Mv(n,e){let t=n[ht];(3&t)===e&&(t&=8191,t+=1,n[ht]=t)}function wS(n,e,t,i){const o=i??-1,s=e.length-1;let a=0;for(let l=void 0!==i?65535&n[Xl]:0;l<s;l++)if("number"==typeof e[l+1]){if(a=e[l],null!=i&&a>=i)break}else e[l]<0&&(n[Xl]+=65536),(a<o||-1==o)&&(Y3(n,t,e,l),n[Xl]=(4294901760&n[Xl])+l+2),l++}function SS(n,e){Mo(4,n,e);const t=ti(null);try{e.call(n)}finally{ti(t),Mo(5,n,e)}}function Y3(n,e,t,i){const r=t[i]<0,o=t[i+1],a=n[r?-t[i]:t[i]];r?n[ht]>>13<n[Xl]>>16&&(3&n[ht])===e&&(n[ht]+=8192,SS(a,o)):SS(a,o)}const Jl=-1;class au{constructor(e,t,i){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=i}}function ES(n){return n!==Jl}function Wf(n){return 32767&n}function $f(n,e){let t=function J3(n){return n>>16}(n),i=e;for(;t>0;)i=i[ql],t--;return i}let Sv=!0;function qf(n){const e=Sv;return Sv=n,e}const TS=255,DS=5;let eU=0;const So={};function Xf(n,e){const t=AS(n,e);if(-1!==t)return t;const i=e[Le];i.firstCreatePass&&(n.injectorIndex=e.length,Ev(i.data,n),Ev(e,null),Ev(i.blueprint,null));const r=Tv(n,e),o=n.injectorIndex;if(ES(r)){const s=Wf(r),a=$f(r,e),l=a[Le].data;for(let c=0;c<8;c++)e[o+c]=a[s+c]|l[s+c]}return e[o+8]=r,o}function Ev(n,e){n.push(0,0,0,0,0,0,0,0,e)}function AS(n,e){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===e[n.injectorIndex+8]?-1:n.injectorIndex}function Tv(n,e){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let t=0,i=null,r=e;for(;null!==r;){if(i=NS(r),null===i)return Jl;if(t++,r=r[ql],-1!==i.injectorIndex)return i.injectorIndex|t<<16}return Jl}function Dv(n,e,t){!function tU(n,e,t){let i;"string"==typeof t?i=t.charCodeAt(0)||0:t.hasOwnProperty(Jd)&&(i=t[Jd]),null==i&&(i=t[Jd]=eU++);const r=i&TS;e.data[n+(r>>DS)]|=1<<r}(n,e,t)}function IS(n,e,t){if(t&Je.Optional||void 0!==n)return n;Ef()}function RS(n,e,t,i){if(t&Je.Optional&&void 0===i&&(i=null),!(t&(Je.Self|Je.Host))){const r=n[$l],o=Wi(void 0);try{return r?r.get(e,i,t&Je.Optional):Tw(e,i,t&Je.Optional)}finally{Wi(o)}}return IS(i,0,t)}function PS(n,e,t,i=Je.Default,r){if(null!==n){if(2048&e[ht]&&!(i&Je.Self)){const s=function sU(n,e,t,i,r){let o=n,s=e;for(;null!==o&&null!==s&&2048&s[ht]&&!(512&s[ht]);){const a=OS(o,s,t,i|Je.Self,So);if(a!==So)return a;let l=o.parent;if(!l){const c=s[jw];if(c){const d=c.get(t,So,i);if(d!==So)return d}l=NS(s),s=s[ql]}o=l}return r}(n,e,t,i,So);if(s!==So)return s}const o=OS(n,e,t,i,So);if(o!==So)return o}return RS(e,t,i,r)}function OS(n,e,t,i,r){const o=function rU(n){if("string"==typeof n)return n.charCodeAt(0)||0;const e=n.hasOwnProperty(Jd)?n[Jd]:void 0;return"number"==typeof e?e>=0?e&TS:oU:e}(t);if("function"==typeof o){if(!_S(e,n,i))return i&Je.Host?IS(r,0,i):RS(e,t,i,r);try{const s=o(i);if(null!=s||i&Je.Optional)return s;Ef()}finally{xS()}}else if("number"==typeof o){let s=null,a=AS(n,e),l=Jl,c=i&Je.Host?e[Nn][vi]:null;for((-1===a||i&Je.SkipSelf)&&(l=-1===a?Tv(n,e):e[a+8],l!==Jl&&FS(i,!1)?(s=e[Le],a=Wf(l),e=$f(l,e)):a=-1);-1!==a;){const d=e[Le];if(kS(o,a,d.data)){const u=iU(a,e,t,s,i,c);if(u!==So)return u}l=e[a+8],l!==Jl&&FS(i,e[Le].data[a+8]===c)&&kS(o,a,e)?(s=d,a=Wf(l),e=$f(l,e)):a=-1}}return r}function iU(n,e,t,i,r,o){const s=e[Le],a=s.data[n+8],d=Yf(a,s,t,null==i?Sa(a)&&Sv:i!=s&&0!=(3&a.type),r&Je.Host&&o===a);return null!==d?Ia(e,s,d,a):So}function Yf(n,e,t,i,r){const o=n.providerIndexes,s=e.data,a=1048575&o,l=n.directiveStart,d=o>>20,h=r?a+d:n.directiveEnd;for(let f=i?a:a+d;f<h;f++){const p=s[f];if(f<l&&t===p||f>=l&&p.type===t)return f}if(r){const f=s[l];if(f&&qr(f)&&f.type===t)return l}return null}function Ia(n,e,t,i){let r=n[t];const o=e.data;if(function Z3(n){return n instanceof au}(r)){const s=r;s.resolving&&function TB(n,e){const t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new ne(-200,`Circular dependency in DI detected for ${n}${t}`)}(function qt(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():dt(n)}(o[t]));const a=qf(s.canSeeViewProviders);s.resolving=!0;const l=s.injectImpl?Wi(s.injectImpl):null;_S(n,i,Je.Default);try{r=n[t]=s.factory(void 0,o,n,i),e.firstCreatePass&&t>=i.directiveStart&&function X3(n,e,t){const{ngOnChanges:i,ngOnInit:r,ngDoCheck:o}=e.type.prototype;if(i){const s=eS(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}r&&(t.preOrderHooks??=[]).push(0-n,r),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}(t,o[t],e)}finally{null!==l&&Wi(l),qf(a),s.resolving=!1,xS()}}return r}function kS(n,e,t){return!!(t[e+(n>>DS)]&1<<n)}function FS(n,e){return!(n&Je.Self||n&Je.Host&&e)}class ec{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,i){return PS(this._tNode,this._lView,e,If(i),t)}}function oU(){return new ec(hi(),fe())}function zt(n){return Ko(()=>{const e=n.prototype.constructor,t=e[Qo]||Av(e),i=Object.prototype;let r=Object.getPrototypeOf(n.prototype).constructor;for(;r&&r!==i;){const o=r[Qo]||Av(r);if(o&&o!==t)return o;r=Object.getPrototypeOf(r)}return o=>new o})}function Av(n){return J_(n)?()=>{const e=Av(at(n));return e&&e()}:Ea(n)}function NS(n){const e=n[Le],t=e.type;return 2===t?e.declTNode:1===t?n[vi]:null}function tc(n){return function nU(n,e){if("class"===e)return n.classes;if("style"===e)return n.styles;const t=n.attrs;if(t){const i=t.length;let r=0;for(;r<i;){const o=t[r];if(Ow(o))break;if(0===o)r+=2;else if("number"==typeof o)for(r++;r<i&&"string"==typeof t[r];)r++;else{if(o===e)return t[r+1];r+=2}}}return null}(hi(),n)}const ic="__parameters__";function oc(n,e,t){return Ko(()=>{const i=function Iv(n){return function(...t){if(n){const i=n(...t);for(const r in i)this[r]=i[r]}}}(e);function r(...o){if(this instanceof r)return i.apply(this,o),this;const s=new r(...o);return a.annotation=s,a;function a(l,c,d){const u=l.hasOwnProperty(ic)?l[ic]:Object.defineProperty(l,ic,{value:[]})[ic];for(;u.length<=d;)u.push(null);return(u[d]=u[d]||[]).push(s),l}}return t&&(r.prototype=Object.create(t.prototype)),r.prototype.ngMetadataName=n,r.annotationCls=r,r})}function du(n,e){n.forEach(t=>Array.isArray(t)?du(t,e):e(t))}function BS(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Zf(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function uu(n,e){const t=[];for(let i=0;i<n;i++)t.push(e);return t}function lr(n,e,t){let i=sc(n,e);return i>=0?n[1|i]=t:(i=~i,function uU(n,e,t,i){let r=n.length;if(r==e)n.push(t,i);else if(1===r)n.push(i,n[0]),n[0]=t;else{for(r--,n.push(n[r-1],n[r]);r>e;)n[r]=n[r-2],r--;n[e]=t,n[e+1]=i}}(n,i,e,t)),i}function Rv(n,e){const t=sc(n,e);if(t>=0)return n[1|t]}function sc(n,e){return function US(n,e,t){let i=0,r=n.length>>t;for(;r!==i;){const o=i+(r-i>>1),s=n[o<<t];if(e===s)return o<<t;s>e?r=o:i=o+1}return~(r<<t)}(n,e,1)}const Ws=Qd(oc("Optional"),8),ac=Qd(oc("SkipSelf"),4);function tp(n){return 128==(128&n.flags)}var Ki=(()=>((Ki=Ki||{})[Ki.Important=1]="Important",Ki[Ki.DashCase=2]="DashCase",Ki))();const PU=/^>|^->|<!--|-->|--!>|<!-$/g,OU=/(<|>)/,kU="\u200b$1\u200b";const Lv=new Map;let FU=0;const Uv="__ngContext__";function xi(n,e){sr(e)?(n[Uv]=e[ru],function LU(n){Lv.set(n[ru],n)}(e)):n[Uv]=e}let Vv;function Hv(n,e){return Vv(n,e)}function pu(n){const e=n[gn];return Yi(e)?e[gn]:e}function oE(n){return aE(n[nu])}function sE(n){return aE(n[$r])}function aE(n){for(;null!==n&&!Yi(n);)n=n[$r];return n}function dc(n,e,t,i,r){if(null!=i){let o,s=!1;Yi(i)?o=i:sr(i)&&(s=!0,i=i[$n]);const a=an(i);0===n&&null!==t?null==r?hE(e,t,a):Ra(e,t,a,r||null,!0):1===n&&null!==t?Ra(e,t,a,r||null,!0):2===n?function ap(n,e,t){const i=op(n,e);i&&function nV(n,e,t,i){n.removeChild(e,t,i)}(n,i,e,t)}(e,a,s):3===n&&e.destroyNode(a),null!=o&&function oV(n,e,t,i,r){const o=t[xo];o!==an(t)&&dc(e,n,i,o,r);for(let a=bi;a<t.length;a++){const l=t[a];gu(l[Le],l,n,e,i,o)}}(e,n,o,t,r)}}function zv(n,e){return n.createComment(function KS(n){return n.replace(PU,e=>e.replace(OU,kU))}(e))}function rp(n,e,t){return n.createElement(e,t)}function cE(n,e){const t=n[Yl],i=t.indexOf(e);aS(e),t.splice(i,1)}function Gv(n,e){if(n.length<=bi)return;const t=bi+e,i=n[t];if(i){const r=i[iu];null!==r&&r!==n&&cE(r,i),e>0&&(n[t-1][$r]=i[$r]);const o=Zf(n,bi+e);!function XU(n,e){gu(n,e,e[ft],2,null,null),e[$n]=null,e[vi]=null}(i[Le],i);const s=o[yo];null!==s&&s.detachView(o[Le]),i[gn]=null,i[$r]=null,i[ht]&=-129}return i}function dE(n,e){if(!(256&e[ht])){const t=e[ft];e[Of]?.destroy(),e[kf]?.destroy(),t.destroyNode&&gu(n,e,t,3,null,null),function KU(n){let e=n[nu];if(!e)return jv(n[Le],n);for(;e;){let t=null;if(sr(e))t=e[nu];else{const i=e[bi];i&&(t=i)}if(!t){for(;e&&!e[$r]&&e!==n;)sr(e)&&jv(e[Le],e),e=e[gn];null===e&&(e=n),sr(e)&&jv(e[Le],e),t=e&&e[$r]}e=t}}(e)}}function jv(n,e){if(!(256&e[ht])){e[ht]&=-129,e[ht]|=256,function tV(n,e){let t;if(null!=n&&null!=(t=n.destroyHooks))for(let i=0;i<t.length;i+=2){const r=e[t[i]];if(!(r instanceof au)){const o=t[i+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){const a=r[o[s]],l=o[s+1];Mo(4,a,l);try{l.call(a)}finally{Mo(5,a,l)}}else{Mo(4,r,o);try{o.call(r)}finally{Mo(5,r,o)}}}}}(n,e),function eV(n,e){const t=n.cleanup,i=e[Wl];if(null!==t)for(let o=0;o<t.length-1;o+=2)if("string"==typeof t[o]){const s=t[o+3];s>=0?i[s]():i[-s].unsubscribe(),o+=2}else t[o].call(i[t[o+1]]);null!==i&&(e[Wl]=null);const r=e[zs];if(null!==r){e[zs]=null;for(let o=0;o<r.length;o++)(0,r[o])()}}(n,e),1===e[Le].type&&e[ft].destroy();const t=e[iu];if(null!==t&&Yi(e[gn])){t!==e[gn]&&cE(t,e);const i=e[yo];null!==i&&i.detachView(n)}!function BU(n){Lv.delete(n[ru])}(e)}}function Wv(n,e,t){return function uE(n,e,t){let i=e;for(;null!==i&&40&i.type;)i=(e=i).parent;if(null===i)return t[$n];{const{componentOffset:r}=i;if(r>-1){const{encapsulation:o}=n.data[i.directiveStart+r];if(o===$i.None||o===$i.Emulated)return null}return Zi(i,t)}}(n,e.parent,t)}function Ra(n,e,t,i,r){n.insertBefore(e,t,i,r)}function hE(n,e,t){n.appendChild(e,t)}function fE(n,e,t,i,r){null!==i?Ra(n,e,t,i,r):hE(n,e,t)}function op(n,e){return n.parentNode(e)}function pE(n,e,t){return gE(n,e,t)}let $v,lp,Zv,cp,gE=function mE(n,e,t){return 40&n.type?Zi(n,t):null};function sp(n,e,t,i){const r=Wv(n,i,e),o=e[ft],a=pE(i.parent||e[vi],i,e);if(null!=r)if(Array.isArray(t))for(let l=0;l<t.length;l++)fE(o,r,t[l],a,!1);else fE(o,r,t,a,!1);void 0!==$v&&$v(o,i,e,t,r)}function mu(n,e){if(null!==e){const t=e.type;if(3&t)return Zi(e,n);if(4&t)return qv(-1,n[e.index]);if(8&t){const i=e.child;if(null!==i)return mu(n,i);{const r=n[e.index];return Yi(r)?qv(-1,r):an(r)}}if(32&t)return Hv(e,n)()||an(n[e.index]);{const i=vE(n,e);return null!==i?Array.isArray(i)?i[0]:mu(pu(n[Nn]),i):mu(n,e.next)}}return null}function vE(n,e){return null!==e?n[Nn][vi].projection[e.projection]:null}function qv(n,e){const t=bi+n+1;if(t<e.length){const i=e[t],r=i[Le].firstChild;if(null!==r)return mu(i,r)}return e[xo]}function Xv(n,e,t,i,r,o,s){for(;null!=t;){const a=i[t.index],l=t.type;if(s&&0===e&&(a&&xi(an(a),i),t.flags|=2),32!=(32&t.flags))if(8&l)Xv(n,e,t.child,i,r,o,!1),dc(e,n,r,a,o);else if(32&l){const c=Hv(t,i);let d;for(;d=c();)dc(e,n,r,d,o);dc(e,n,r,a,o)}else 16&l?yE(n,e,i,t,r,o):dc(e,n,r,a,o);t=s?t.projectionNext:t.next}}function gu(n,e,t,i,r,o){Xv(t,i,n.firstChild,e,r,o,!1)}function yE(n,e,t,i,r,o){const s=t[Nn],l=s[vi].projection[i.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++)dc(e,n,r,l[c],o);else{let c=l;const d=s[gn];tp(i)&&(c.flags|=128),Xv(n,e,c,d,r,o,!0)}}function xE(n,e,t){""===t?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function CE(n,e,t){const{mergedAttrs:i,classes:r,styles:o}=t;null!==i&&av(n,e,i),null!==r&&xE(n,e,r),null!==o&&function aV(n,e,t){n.setAttribute(e,"style",t)}(n,e,o)}function uc(n){return function Yv(){if(void 0===lp&&(lp=null,nn.trustedTypes))try{lp=nn.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return lp}()?.createHTML(n)||n}function _u(){if(void 0!==Zv)return Zv;if(typeof document<"u")return document;throw new ne(210,!1)}function Kv(){if(void 0===cp&&(cp=null,nn.trustedTypes))try{cp=nn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return cp}function ME(n){return Kv()?.createHTML(n)||n}function SE(n){return Kv()?.createScriptURL(n)||n}class Pa{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Cw})`}}class hV extends Pa{getTypeName(){return"HTML"}}class fV extends Pa{getTypeName(){return"Style"}}class pV extends Pa{getTypeName(){return"Script"}}class mV extends Pa{getTypeName(){return"URL"}}class gV extends Pa{getTypeName(){return"ResourceURL"}}function cr(n){return n instanceof Pa?n.changingThisBreaksApplicationSecurity:n}function Eo(n,e){const t=function _V(n){return n instanceof Pa&&n.getTypeName()||null}(n);if(null!=t&&t!==e){if("ResourceURL"===t&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${Cw})`)}return t===e}class MV{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{const t=(new window.DOMParser).parseFromString(uc(e),"text/html").body;return null===t?this.inertDocumentHelper.getInertBodyElement(e):(t.removeChild(t.firstChild),t)}catch{return null}}}class wV{constructor(e){this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(e){const t=this.inertDocument.createElement("template");return t.innerHTML=uc(e),t}}const EV=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function dp(n){return(n=String(n)).match(EV)?n:"unsafe:"+n}function ns(n){const e={};for(const t of n.split(","))e[t]=!0;return e}function vu(...n){const e={};for(const t of n)for(const i in t)t.hasOwnProperty(i)&&(e[i]=!0);return e}const TE=ns("area,br,col,hr,img,wbr"),DE=ns("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),AE=ns("rp,rt"),Qv=vu(TE,vu(DE,ns("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),vu(AE,ns("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),vu(AE,DE)),Jv=ns("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),IE=vu(Jv,ns("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),ns("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),TV=ns("script,style,template");class DV{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let t=e.firstChild,i=!0;for(;t;)if(t.nodeType===Node.ELEMENT_NODE?i=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,i&&t.firstChild)t=t.firstChild;else for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let r=this.checkClobberedElement(t,t.nextSibling);if(r){t=r;break}t=this.checkClobberedElement(t,t.parentNode)}return this.buf.join("")}startElement(e){const t=e.nodeName.toLowerCase();if(!Qv.hasOwnProperty(t))return this.sanitizedSomething=!0,!TV.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);const i=e.attributes;for(let r=0;r<i.length;r++){const o=i.item(r),s=o.name,a=s.toLowerCase();if(!IE.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let l=o.value;Jv[a]&&(l=dp(l)),this.buf.push(" ",s,'="',RE(l),'"')}return this.buf.push(">"),!0}endElement(e){const t=e.nodeName.toLowerCase();Qv.hasOwnProperty(t)&&!TE.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(RE(e))}checkClobberedElement(e,t){if(t&&(e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${e.outerHTML}`);return t}}const AV=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,IV=/([^\#-~ |!])/g;function RE(n){return n.replace(/&/g,"&amp;").replace(AV,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(IV,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let up;function PE(n,e){let t=null;try{up=up||function EE(n){const e=new wV(n);return function SV(){try{return!!(new window.DOMParser).parseFromString(uc(""),"text/html")}catch{return!1}}()?new MV(e):e}(n);let i=e?String(e):"";t=up.getInertBodyElement(i);let r=5,o=i;do{if(0===r)throw new Error("Failed to sanitize html because the input is unstable");r--,i=o,o=t.innerHTML,t=up.getInertBodyElement(i)}while(i!==o);return uc((new DV).sanitizeChildren(eb(t)||t))}finally{if(t){const i=eb(t)||t;for(;i.firstChild;)i.removeChild(i.firstChild)}}}function eb(n){return"content"in n&&function RV(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}var jt=(()=>((jt=jt||{})[jt.NONE=0]="NONE",jt[jt.HTML=1]="HTML",jt[jt.STYLE=2]="STYLE",jt[jt.SCRIPT=3]="SCRIPT",jt[jt.URL=4]="URL",jt[jt.RESOURCE_URL=5]="RESOURCE_URL",jt))();function tb(n){const e=bu();return e?ME(e.sanitize(jt.HTML,n)||""):Eo(n,"HTML")?ME(cr(n)):PE(_u(),dt(n))}function dr(n){const e=bu();return e?e.sanitize(jt.URL,n)||"":Eo(n,"URL")?cr(n):dp(dt(n))}function OE(n){const e=bu();if(e)return SE(e.sanitize(jt.RESOURCE_URL,n)||"");if(Eo(n,"ResourceURL"))return SE(cr(n));throw new ne(904,!1)}function bu(){const n=fe();return n&&n[wa].sanitizer}class he{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=ye({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const yu=new he("ENVIRONMENT_INITIALIZER"),FE=new he("INJECTOR",-1),NE=new he("INJECTOR_DEF_TYPES");class LE{get(e,t=Kd){if(t===Kd){const i=new Error(`NullInjectorError: No provider for ${Wn(e)}!`);throw i.name="NullInjectorError",i}return t}}function hp(n){return{\u0275providers:n}}function LV(...n){return{\u0275providers:BE(0,n),\u0275fromNgModule:!0}}function BE(n,...e){const t=[],i=new Set;let r;return du(e,o=>{const s=o;nb(s,t,[],i)&&(r||=[],r.push(s))}),void 0!==r&&UE(r,t),t}function UE(n,e){for(let t=0;t<n.length;t++){const{providers:r}=n[t];ib(r,o=>{e.push(o)})}}function nb(n,e,t,i){if(!(n=at(n)))return!1;let r=null,o=ww(n);const s=!o&&$t(n);if(o||s){if(s&&!s.standalone)return!1;r=n}else{const l=n.ngModule;if(o=ww(l),!o)return!1;r=l}const a=i.has(r);if(s){if(a)return!1;if(i.add(r),s.dependencies){const l="function"==typeof s.dependencies?s.dependencies():s.dependencies;for(const c of l)nb(c,e,t,i)}}else{if(!o)return!1;{if(null!=o.imports&&!a){let c;i.add(r);try{du(o.imports,d=>{nb(d,e,t,i)&&(c||=[],c.push(d))})}finally{}void 0!==c&&UE(c,e)}if(!a){const c=Ea(r)||(()=>new r);e.push({provide:r,useFactory:c,deps:Gt},{provide:NE,useValue:r,multi:!0},{provide:yu,useValue:()=>J(r),multi:!0})}const l=o.providers;null==l||a||ib(l,d=>{e.push(d)})}}return r!==n&&void 0!==n.providers}function ib(n,e){for(let t of n)ev(t)&&(t=t.\u0275providers),Array.isArray(t)?ib(t,e):e(t)}const BV=Yt({provide:String,useValue:Yt});function rb(n){return null!==n&&"object"==typeof n&&BV in n}function Oa(n){return"function"==typeof n}const ob=new he("Set Injector scope."),fp={},VV={};let sb;function pp(){return void 0===sb&&(sb=new LE),sb}class To{}class ab extends To{get destroyed(){return this._destroyed}constructor(e,t,i,r){super(),this.parent=t,this.source=i,this.scopes=r,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,cb(e,s=>this.processProvider(s)),this.records.set(FE,hc(void 0,this)),r.has("environment")&&this.records.set(To,hc(void 0,this));const o=this.records.get(ob);null!=o&&"string"==typeof o.value&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(NE.multi,Gt,Je.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const t of this._ngOnDestroyHooks)t.ngOnDestroy();const e=this._onDestroyHooks;this._onDestroyHooks=[];for(const t of e)t()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();const t=Hs(this),i=Wi(void 0);try{return e()}finally{Hs(t),Wi(i)}}get(e,t=Kd,i=Je.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(Rw))return e[Rw](this);i=If(i);const r=Hs(this),o=Wi(void 0);try{if(!(i&Je.SkipSelf)){let a=this.records.get(e);if(void 0===a){const l=function WV(n){return"function"==typeof n||"object"==typeof n&&n instanceof he}(e)&&Tf(e);a=l&&this.injectableDefInScope(l)?hc(lb(e),fp):null,this.records.set(e,a)}if(null!=a)return this.hydrate(e,a)}return(i&Je.Self?pp():this.parent).get(e,t=i&Je.Optional&&t===Kd?null:t)}catch(s){if("NullInjectorError"===s.name){if((s[Af]=s[Af]||[]).unshift(Wn(e)),r)throw s;return function HB(n,e,t,i){const r=n[Af];throw e[Dw]&&r.unshift(e[Dw]),n.message=function zB(n,e,t,i=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let r=Wn(e);if(Array.isArray(e))r=e.map(Wn).join(" -> ");else if("object"==typeof e){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+("string"==typeof a?JSON.stringify(a):Wn(a)))}r=`{${o.join(", ")}}`}return`${t}${i?"("+i+")":""}[${r}]: ${n.replace(NB,"\n  ")}`}("\n"+n.message,r,t,i),n.ngTokenPath=r,n[Af]=null,n}(s,e,"R3InjectorError",this.source)}throw s}finally{Wi(o),Hs(r)}}resolveInjectorInitializers(){const e=Hs(this),t=Wi(void 0);try{const i=this.get(yu.multi,Gt,Je.Self);for(const r of i)r()}finally{Hs(e),Wi(t)}}toString(){const e=[],t=this.records;for(const i of t.keys())e.push(Wn(i));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ne(205,!1)}processProvider(e){let t=Oa(e=at(e))?e:at(e&&e.provide);const i=function zV(n){return rb(n)?hc(void 0,n.useValue):hc(zE(n),fp)}(e);if(Oa(e)||!0!==e.multi)this.records.get(t);else{let r=this.records.get(t);r||(r=hc(void 0,fp,!0),r.factory=()=>rv(r.multi),this.records.set(t,r)),t=e,r.multi.push(e)}this.records.set(t,i)}hydrate(e,t){return t.value===fp&&(t.value=VV,t.value=t.factory()),"object"==typeof t.value&&t.value&&function jV(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;const t=at(e.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){const t=this._onDestroyHooks.indexOf(e);-1!==t&&this._onDestroyHooks.splice(t,1)}}function lb(n){const e=Tf(n),t=null!==e?e.factory:Ea(n);if(null!==t)return t;if(n instanceof he)throw new ne(204,!1);if(n instanceof Function)return function HV(n){const e=n.length;if(e>0)throw uu(e,"?"),new ne(204,!1);const t=function OB(n){return n&&(n[Df]||n[Sw])||null}(n);return null!==t?()=>t.factory(n):()=>new n}(n);throw new ne(204,!1)}function zE(n,e,t){let i;if(Oa(n)){const r=at(n);return Ea(r)||lb(r)}if(rb(n))i=()=>at(n.useValue);else if(function HE(n){return!(!n||!n.useFactory)}(n))i=()=>n.useFactory(...rv(n.deps||[]));else if(function VE(n){return!(!n||!n.useExisting)}(n))i=()=>J(at(n.useExisting));else{const r=at(n&&(n.useClass||n.provide));if(!function GV(n){return!!n.deps}(n))return Ea(r)||lb(r);i=()=>new r(...rv(n.deps))}return i}function hc(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function cb(n,e){for(const t of n)Array.isArray(t)?cb(t,e):t&&ev(t)?cb(t.\u0275providers,e):e(t)}const mp=new he("AppId",{providedIn:"root",factory:()=>$V}),$V="ng",GE=new he("Platform Initializer"),$s=new he("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),db=new he("AnimationModuleType"),ub=new he("CSP nonce",{providedIn:"root",factory:()=>_u().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let WE=(n,e)=>null;function $E(n,e){return WE(n,e)}class tH{}class YE{}class iH{resolveComponentFactory(e){throw function nH(n){const e=Error(`No component factory found for ${Wn(n)}.`);return e.ngComponent=n,e}(e)}}let fc=(()=>{class n{}return n.NULL=new iH,n})();function rH(){return pc(hi(),fe())}function pc(n,e){return new ln(Zi(n,e))}let ln=(()=>{class n{constructor(t){this.nativeElement=t}}return n.__NG_ELEMENT_ID__=rH,n})();function oH(n){return n instanceof ln?n.nativeElement:n}class wu{}let is=(()=>{class n{constructor(){this.destroyNode=null}}return n.__NG_ELEMENT_ID__=()=>function sH(){const n=fe(),t=ar(hi().index,n);return(sr(t)?t:n)[ft]}(),n})(),aH=(()=>{class n{}return n.\u0275prov=ye({token:n,providedIn:"root",factory:()=>null}),n})();class ka{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const lH=new ka("16.1.2"),Cb={};function Su(n){for(;n;){n[ht]|=64;const e=pu(n);if(dv(n)&&!e)return n;n=e}return null}function Mb(n){return n.ngOriginalError}class Do{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&Mb(e);for(;t&&Mb(t);)t=Mb(t);return t||null}}const JE=new he("",{providedIn:"root",factory:()=>!1});function rs(n){return n instanceof Function?n():n}class rT extends Zw{constructor(){super(...arguments),this.consumerAllowSignalWrites=!1,this._lView=null}set lView(e){this._lView=e}onConsumerDependencyMayHaveChanged(){Su(this._lView)}onProducerUpdateValueVersion(){}get hasReadASignal(){return this.hasProducers}runInContext(e,t,i){const r=ti(this);this.trackingVersion++;try{e(t,i)}finally{ti(r)}}destroy(){this.trackingVersion++}}let xp=null;function oT(){return xp??=new rT,xp}function sT(n,e){return n[e]??oT()}function aT(n,e){const t=oT();t.hasReadASignal&&(n[e]=xp,t.lView=n,xp=new rT)}const pt={};function B(n){lT(Vt(),fe(),Oi()+n,!1)}function lT(n,e,t,i){if(!i)if(3==(3&e[ht])){const o=n.preOrderCheckHooks;null!==o&&Gf(e,o,t)}else{const o=n.preOrderHooks;null!==o&&jf(e,o,0,t)}Ta(t)}function hT(n,e=null,t=null,i){const r=fT(n,e,t,i);return r.resolveInjectorInitializers(),r}function fT(n,e=null,t=null,i,r=new Set){const o=[t||Gt,LV(n)];return i=i||("object"==typeof n?void 0:Wn(n)),new ab(o,e||pp(),i||null,r)}let ki=(()=>{class n{static create(t,i){if(Array.isArray(t))return hT({name:""},i,t,"");{const r=t.name??"";return hT({name:r},t.parent,t.providers,r)}}}return n.THROW_IF_NOT_FOUND=Kd,n.NULL=new LE,n.\u0275prov=ye({token:n,providedIn:"any",factory:()=>J(FE)}),n.__NG_ELEMENT_ID__=-1,n})();function L(n,e=Je.Default){const t=fe();return null===t?J(n,e):PS(hi(),t,at(n),e)}function Cp(n,e,t,i,r,o,s,a,l,c,d){const u=e.blueprint.slice();return u[$n]=r,u[ht]=140|i,(null!==c||n&&2048&n[ht])&&(u[ht]|=2048),sS(u),u[gn]=u[ql]=n,u[Fn]=t,u[wa]=s||n&&n[wa],u[ft]=a||n&&n[ft],u[$l]=l||n&&n[$l]||null,u[vi]=o,u[ru]=function NU(){return FU++}(),u[Jo]=d,u[jw]=c,u[Nn]=2==e.type?n[Nn]:u,u}function gc(n,e,t,i,r){let o=n.data[e];if(null===o)o=function wb(n,e,t,i,r){const o=hS(),s=gv(),l=n.data[e]=function AH(n,e,t,i,r,o){let s=e?e.injectorIndex:-1,a=0;return Kl()&&(a|=128),{type:t,index:i,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:r,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,t,e,i,r);return null===n.firstChild&&(n.firstChild=l),null!==o&&(s?null==o.child&&null!==l.parent&&(o.child=l):null===o.next&&(o.next=l,l.prev=o)),l}(n,e,t,i,r),function V3(){return it.lFrame.inI18n}()&&(o.flags|=32);else if(64&o.type){o.type=t,o.value=i,o.attrs=r;const s=function su(){const n=it.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}();o.injectorIndex=null===s?-1:s.injectorIndex}return wo(o,!0),o}function Eu(n,e,t,i){if(0===t)return-1;const r=e.length;for(let o=0;o<t;o++)e.push(i),n.blueprint.push(i),n.data.push(null);return r}function mT(n,e,t,i,r){const o=sT(e,Of),s=Oi(),a=2&i;try{if(Ta(-1),a&&e.length>Ft&&lT(n,e,Ft,!1),Mo(a?2:0,r),a)o.runInContext(t,i,r);else{const c=ti(null);try{t(i,r)}finally{ti(c)}}}finally{a&&null===e[Of]&&aT(e,Of),Ta(s),Mo(a?3:1,r)}}function Sb(n,e,t){if(cv(e)){const i=ti(null);try{const o=e.directiveEnd;for(let s=e.directiveStart;s<o;s++){const a=n.data[s];a.contentQueries&&a.contentQueries(1,t[s],s)}}finally{ti(i)}}}function Eb(n,e,t){uS()&&(function NH(n,e,t,i){const r=t.directiveStart,o=t.directiveEnd;Sa(t)&&function GH(n,e,t){const i=Zi(e,n),r=gT(t);let s=16;t.signals?s=4096:t.onPush&&(s=64);const a=Mp(n,Cp(n,r,null,s,i,e,null,n[wa].rendererFactory.createRenderer(i,t),null,null,null));n[e.index]=a}(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||Xf(t,e),xi(i,e);const s=t.initialInputs;for(let a=r;a<o;a++){const l=n.data[a],c=Ia(e,n,a,t);xi(c,e),null!==s&&jH(0,a-r,c,l,0,s),qr(l)&&(ar(t.index,e)[Fn]=Ia(e,n,a,t))}}(n,e,t,Zi(t,e)),64==(64&t.flags)&&xT(n,e,t))}function Tb(n,e,t=Zi){const i=e.localNames;if(null!==i){let r=e.index+1;for(let o=0;o<i.length;o+=2){const s=i[o+1],a=-1===s?t(e,n):n[s];n[r++]=a}}}function gT(n){const e=n.tView;return null===e||e.incompleteFirstPass?n.tView=Db(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function Db(n,e,t,i,r,o,s,a,l,c,d){const u=Ft+i,h=u+r,f=function MH(n,e){const t=[];for(let i=0;i<e;i++)t.push(i<n?null:pt);return t}(u,h),p="function"==typeof c?c():c;return f[Le]={type:n,blueprint:f,template:t,queries:null,viewQuery:a,declTNode:e,data:f.slice().fill(null,u),bindingStartIndex:u,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:l,consts:p,incompleteFirstPass:!1,ssrId:d}}let _T=n=>null;function vT(n,e,t,i){for(let r in n)if(n.hasOwnProperty(r)){t=null===t?{}:t;const o=n[r];null===i?bT(t,e,r,o):i.hasOwnProperty(r)&&bT(t,e,i[r],o)}return t}function bT(n,e,t,i){n.hasOwnProperty(t)?n[t].push(e,i):n[t]=[e,i]}function ur(n,e,t,i,r,o,s,a){const l=Zi(e,t);let d,c=e.inputs;!a&&null!=c&&(d=c[i])?(Ob(n,t,d,i,r),Sa(e)&&function PH(n,e){const t=ar(e,n);16&t[ht]||(t[ht]|=64)}(t,e.index)):3&e.type&&(i=function RH(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(i),r=null!=s?s(r,e.value||"",i):r,o.setProperty(l,i,r))}function Ab(n,e,t,i){if(uS()){const r=null===i?null:{"":-1},o=function BH(n,e){const t=n.directiveRegistry;let i=null,r=null;if(t)for(let o=0;o<t.length;o++){const s=t[o];if(Bw(e,s.selectors,!1))if(i||(i=[]),qr(s))if(null!==s.findHostDirectiveDefs){const a=[];r=r||new Map,s.findHostDirectiveDefs(s,a,r),i.unshift(...a,s),Ib(n,e,a.length)}else i.unshift(s),Ib(n,e,0);else r=r||new Map,s.findHostDirectiveDefs?.(s,i,r),i.push(s)}return null===i?null:[i,r]}(n,t);let s,a;null===o?s=a=null:[s,a]=o,null!==s&&yT(n,e,t,s,r,a),r&&function UH(n,e,t){if(e){const i=n.localNames=[];for(let r=0;r<e.length;r+=2){const o=t[e[r+1]];if(null==o)throw new ne(-301,!1);i.push(e[r],o)}}}(t,i,r)}t.mergedAttrs=eu(t.mergedAttrs,t.attrs)}function yT(n,e,t,i,r,o){for(let c=0;c<i.length;c++)Dv(Xf(t,e),n,i[c].type);!function HH(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}(t,n.data.length,i.length);for(let c=0;c<i.length;c++){const d=i[c];d.providersResolver&&d.providersResolver(d)}let s=!1,a=!1,l=Eu(n,e,i.length,null);for(let c=0;c<i.length;c++){const d=i[c];t.mergedAttrs=eu(t.mergedAttrs,d.hostAttrs),zH(n,t,e,l,d),VH(l,d,r),null!==d.contentQueries&&(t.flags|=4),(null!==d.hostBindings||null!==d.hostAttrs||0!==d.hostVars)&&(t.flags|=64);const u=d.type.prototype;!s&&(u.ngOnChanges||u.ngOnInit||u.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),s=!0),!a&&(u.ngOnChanges||u.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),l++}!function IH(n,e,t){const r=e.directiveEnd,o=n.data,s=e.attrs,a=[];let l=null,c=null;for(let d=e.directiveStart;d<r;d++){const u=o[d],h=t?t.get(u):null,p=h?h.outputs:null;l=vT(u.inputs,d,l,h?h.inputs:null),c=vT(u.outputs,d,c,p);const _=null===l||null===s||Lw(e)?null:WH(l,d,s);a.push(_)}null!==l&&(l.hasOwnProperty("class")&&(e.flags|=8),l.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=l,e.outputs=c}(n,t,o)}function xT(n,e,t){const i=t.directiveStart,r=t.directiveEnd,o=t.index,s=function z3(){return it.lFrame.currentDirectiveIndex}();try{Ta(o);for(let a=i;a<r;a++){const l=n.data[a],c=e[a];vv(a),(null!==l.hostBindings||0!==l.hostVars||null!==l.hostAttrs)&&LH(l,c)}}finally{Ta(-1),vv(s)}}function LH(n,e){null!==n.hostBindings&&n.hostBindings(1,e)}function Ib(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function VH(n,e,t){if(t){if(e.exportAs)for(let i=0;i<e.exportAs.length;i++)t[e.exportAs[i]]=n;qr(e)&&(t[""]=n)}}function zH(n,e,t,i,r){n.data[i]=r;const o=r.factory||(r.factory=Ea(r.type)),s=new au(o,qr(r),L);n.blueprint[i]=s,t[i]=s,function kH(n,e,t,i,r){const o=r.hostBindings;if(o){let s=n.hostBindingOpCodes;null===s&&(s=n.hostBindingOpCodes=[]);const a=~e.index;(function FH(n){let e=n.length;for(;e>0;){const t=n[--e];if("number"==typeof t&&t<0)return t}return 0})(s)!=a&&s.push(a),s.push(t,i,o)}}(n,e,i,Eu(n,t,r.hostVars,pt),r)}function Ao(n,e,t,i,r,o){const s=Zi(n,e);!function Rb(n,e,t,i,r,o,s){if(null==o)n.removeAttribute(e,r,t);else{const a=null==s?dt(o):s(o,i||"",r);n.setAttribute(e,r,a,t)}}(e[ft],s,o,n.value,t,i,r)}function jH(n,e,t,i,r,o){const s=o[e];if(null!==s)for(let a=0;a<s.length;)CT(i,t,s[a++],s[a++],s[a++])}function CT(n,e,t,i,r){const o=ti(null);try{const s=n.inputTransforms;null!==s&&s.hasOwnProperty(i)&&(r=s[i].call(e,r)),null!==n.setInput?n.setInput(e,r,t,i):e[i]=r}finally{ti(o)}}function WH(n,e,t){let i=null,r=0;for(;r<t.length;){const o=t[r];if(0!==o)if(5!==o){if("number"==typeof o)break;if(n.hasOwnProperty(o)){null===i&&(i=[]);const s=n[o];for(let a=0;a<s.length;a+=2)if(s[a]===e){i.push(o,s[a+1],t[r+1]);break}}r+=2}else r+=2;else r+=4}return i}function MT(n,e,t,i){return[n,!0,!1,e,null,0,i,t,null,null,null]}function wT(n,e){const t=n.contentQueries;if(null!==t)for(let i=0;i<t.length;i+=2){const o=t[i+1];if(-1!==o){const s=n.data[o];yv(t[i]),s.contentQueries(2,e[o],o)}}}function Mp(n,e){return n[nu]?n[Gw][$r]=e:n[nu]=e,n[Gw]=e,e}function Pb(n,e,t){yv(0);const i=ti(null);try{e(n,t)}finally{ti(i)}}function ST(n){return n[Wl]||(n[Wl]=[])}function ET(n){return n.cleanup||(n.cleanup=[])}function DT(n,e){const t=n[$l],i=t?t.get(Do,null):null;i&&i.handleError(e)}function Ob(n,e,t,i,r){for(let o=0;o<t.length;){const s=t[o++],a=t[o++];CT(n.data[s],e[s],i,a,r)}}function os(n,e,t){const i=Vf(e,n);!function lE(n,e,t){n.setValue(e,t)}(n[ft],i,t)}function $H(n,e){const t=ar(e,n),i=t[Le];!function qH(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}(i,t);const r=t[$n];null!==r&&null===t[Jo]&&(t[Jo]=$E(r,t[$l])),kb(i,t,t[Fn])}function kb(n,e,t){xv(e);try{const i=n.viewQuery;null!==i&&Pb(1,i,t);const r=n.template;null!==r&&mT(n,e,r,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&wT(n,e),n.staticViewQueries&&Pb(2,n.viewQuery,t);const o=n.components;null!==o&&function XH(n,e){for(let t=0;t<e.length;t++)$H(n,e[t])}(e,o)}catch(i){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),i}finally{e[ht]&=-5,Cv()}}let AT=(()=>{class n{constructor(){this.all=new Set,this.queue=new Map}create(t,i,r){const o=typeof Zone>"u"?null:Zone.current,s=new v3(t,c=>{this.all.has(c)&&this.queue.set(c,o)},r);let a;this.all.add(s),s.notify();const l=()=>{s.cleanup(),a?.(),this.all.delete(s),this.queue.delete(s)};return a=i?.onDestroy(l),{destroy:l}}flush(){if(0!==this.queue.size)for(const[t,i]of this.queue)this.queue.delete(t),i?i.run(()=>t.run()):t.run()}get isQueueEmpty(){return 0===this.queue.size}}return n.\u0275prov=ye({token:n,providedIn:"root",factory:()=>new n}),n})();function wp(n,e,t){let i=t?n.styles:null,r=t?n.classes:null,o=0;if(null!==e)for(let s=0;s<e.length;s++){const a=e[s];"number"==typeof a?o=a:1==o?r=Q_(r,a):2==o&&(i=Q_(i,a+": "+e[++s]+";"))}t?n.styles=i:n.stylesWithoutHost=i,t?n.classes=r:n.classesWithoutHost=r}function Tu(n,e,t,i,r=!1){for(;null!==t;){const o=e[t.index];if(null!==o&&i.push(an(o)),Yi(o)){for(let a=bi;a<o.length;a++){const l=o[a],c=l[Le].firstChild;null!==c&&Tu(l[Le],l,c,i)}o[xo]!==o[$n]&&i.push(o[xo])}const s=t.type;if(8&s)Tu(n,e,t.child,i);else if(32&s){const a=Hv(t,e);let l;for(;l=a();)i.push(l)}else if(16&s){const a=vE(e,t);if(Array.isArray(a))i.push(...a);else{const l=pu(e[Nn]);Tu(l[Le],l,a,i,!0)}}t=r?t.projectionNext:t.next}return i}function Sp(n,e,t,i=!0){const r=e[wa].rendererFactory;r.begin&&r.begin();try{IT(n,e,n.template,t)}catch(s){throw i&&DT(e,s),s}finally{r.end&&r.end(),e[wa].effectManager?.flush()}}function IT(n,e,t,i){const r=e[ht];if(256!=(256&r)){e[wa].effectManager?.flush(),xv(e);try{sS(e),function pS(n){return it.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&mT(n,e,t,2,i);const s=3==(3&r);if(s){const c=n.preOrderCheckHooks;null!==c&&Gf(e,c,null)}else{const c=n.preOrderHooks;null!==c&&jf(e,c,0,null),Mv(e,0)}if(function JH(n){for(let e=oE(n);null!==e;e=sE(e)){if(!e[Ww])continue;const t=e[Yl];for(let i=0;i<t.length;i++){A3(t[i])}}}(e),RT(e,2),null!==n.contentQueries&&wT(n,e),s){const c=n.contentCheckHooks;null!==c&&Gf(e,c)}else{const c=n.contentHooks;null!==c&&jf(e,c,1),Mv(e,1)}!function CH(n,e){const t=n.hostBindingOpCodes;if(null===t)return;const i=sT(e,kf);try{for(let r=0;r<t.length;r++){const o=t[r];if(o<0)Ta(~o);else{const s=o,a=t[++r],l=t[++r];H3(a,s),i.runInContext(l,2,e[s])}}}finally{null===e[kf]&&aT(e,kf),Ta(-1)}}(n,e);const a=n.components;null!==a&&OT(e,a,0);const l=n.viewQuery;if(null!==l&&Pb(2,l,i),s){const c=n.viewCheckHooks;null!==c&&Gf(e,c)}else{const c=n.viewHooks;null!==c&&jf(e,c,2),Mv(e,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),e[ht]&=-73,aS(e)}finally{Cv()}}}function RT(n,e){for(let t=oE(n);null!==t;t=sE(t))for(let i=bi;i<t.length;i++)PT(t[i],e)}function ez(n,e,t){PT(ar(e,n),t)}function PT(n,e){if(!function T3(n){return 128==(128&n[ht])}(n))return;const t=n[Le];if(80&n[ht]&&0===e||1024&n[ht]||2===e)IT(t,n,t.template,n[Fn]);else if(n[tu]>0){RT(n,1);const r=n[Le].components;null!==r&&OT(n,r,1)}}function OT(n,e,t){for(let i=0;i<e.length;i++)ez(n,e[i],t)}class Du{get rootNodes(){const e=this._lView,t=e[Le];return Tu(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Fn]}set context(e){this._lView[Fn]=e}get destroyed(){return 256==(256&this._lView[ht])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[gn];if(Yi(e)){const t=e[8],i=t?t.indexOf(this):-1;i>-1&&(Gv(e,i),Zf(t,i))}this._attachedToViewContainer=!1}dE(this._lView[Le],this._lView)}onDestroy(e){!function cS(n,e){if(256==(256&n[ht]))throw new ne(911,!1);null===n[zs]&&(n[zs]=[]),n[zs].push(e)}(this._lView,e)}markForCheck(){Su(this._cdRefInjectingView||this._lView)}detach(){this._lView[ht]&=-129}reattach(){this._lView[ht]|=128}detectChanges(){Sp(this._lView[Le],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ne(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function ZU(n,e){gu(n,e,e[ft],2,null,null)}(this._lView[Le],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new ne(902,!1);this._appRef=e}}class tz extends Du{constructor(e){super(e),this._view=e}detectChanges(){const e=this._view;Sp(e[Le],e,e[Fn],!1)}checkNoChanges(){}get context(){return null}}class kT extends fc{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=$t(e);return new Au(t,this.ngModule)}}function FT(n){const e=[];for(let t in n)n.hasOwnProperty(t)&&e.push({propName:n[t],templateName:t});return e}class iz{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,i){i=If(i);const r=this.injector.get(e,Cb,i);return r!==Cb||t===Cb?r:this.parentInjector.get(e,t,i)}}class Au extends YE{get inputs(){return FT(this.componentDef.inputs)}get outputs(){return FT(this.componentDef.outputs)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function QB(n){return n.map(KB).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,i,r){let o=(r=r||this.ngModule)instanceof To?r:r?.injector;o&&null!==this.componentDef.getStandaloneInjector&&(o=this.componentDef.getStandaloneInjector(o)||o);const s=o?new iz(e,o):e,a=s.get(wu,null);if(null===a)throw new ne(407,!1);const d={rendererFactory:a,sanitizer:s.get(aH,null),effectManager:s.get(AT,null)},u=a.createRenderer(null,this.componentDef),h=this.componentDef.selectors[0][0]||"div",f=i?function wH(n,e,t,i){const o=i.get(JE,!1)||t===$i.ShadowDom,s=n.selectRootElement(e,o);return function SH(n){_T(n)}(s),s}(u,i,this.componentDef.encapsulation,s):rp(u,h,function nz(n){const e=n.toLowerCase();return"svg"===e?iS:"math"===e?"math":null}(h)),m=this.componentDef.signals?4608:this.componentDef.onPush?576:528,g=Db(0,null,null,1,0,null,null,null,null,null,null),b=Cp(null,g,null,m,null,null,d,u,s,null,null);let v,y;xv(b);try{const x=this.componentDef;let S,D=null;x.findHostDirectiveDefs?(S=[],D=new Map,x.findHostDirectiveDefs(x,S,D),S.push(x)):S=[x];const I=function oz(n,e){const t=n[Le],i=Ft;return n[i]=e,gc(t,i,2,"#host",null)}(b,f),C=function sz(n,e,t,i,r,o,s){const a=r[Le];!function az(n,e,t,i){for(const r of n)e.mergedAttrs=eu(e.mergedAttrs,r.hostAttrs);null!==e.mergedAttrs&&(wp(e,e.mergedAttrs,!0),null!==t&&CE(i,t,e))}(i,n,e,s);let l=null;null!==e&&(l=$E(e,r[$l]));const c=o.rendererFactory.createRenderer(e,t);let d=16;t.signals?d=4096:t.onPush&&(d=64);const u=Cp(r,gT(t),null,d,r[n.index],n,o,c,null,null,l);return a.firstCreatePass&&Ib(a,n,i.length-1),Mp(r,u),r[n.index]=u}(I,f,x,S,b,d,u);y=oS(g,Ft),f&&function cz(n,e,t,i){if(i)av(n,t,["ng-version",lH.full]);else{const{attrs:r,classes:o}=function JB(n){const e=[],t=[];let i=1,r=2;for(;i<n.length;){let o=n[i];if("string"==typeof o)2===r?""!==o&&e.push(o,n[++i]):8===r&&t.push(o);else{if(!Wr(r))break;r=o}i++}return{attrs:e,classes:t}}(e.selectors[0]);r&&av(n,t,r),o&&o.length>0&&xE(n,t,o.join(" "))}}(u,x,f,i),void 0!==t&&function dz(n,e,t){const i=n.projection=[];for(let r=0;r<e.length;r++){const o=t[r];i.push(null!=o?Array.from(o):null)}}(y,this.ngContentSelectors,t),v=function lz(n,e,t,i,r,o){const s=hi(),a=r[Le],l=Zi(s,r);yT(a,r,s,t,null,i);for(let d=0;d<t.length;d++)xi(Ia(r,a,s.directiveStart+d,s),r);xT(a,r,s),l&&xi(l,r);const c=Ia(r,a,s.directiveStart+s.componentOffset,s);if(n[Fn]=r[Fn]=c,null!==o)for(const d of o)d(c,e);return Sb(a,s,n),c}(C,x,S,D,b,[uz]),kb(g,b,null)}finally{Cv()}return new rz(this.componentType,v,pc(y,b),b,y)}}class rz extends tH{constructor(e,t,i,r,o){super(),this.location=i,this._rootLView=r,this._tNode=o,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new tz(r),this.componentType=e}setInput(e,t){const i=this._tNode.inputs;let r;if(null!==i&&(r=i[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;const o=this._rootLView;Ob(o[Le],o,r,e,t),this.previousInputValues.set(e,t),Su(ar(this._tNode.index,o))}}get injector(){return new ec(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function uz(){const n=hi();zf(fe()[Le],n)}function Qe(n){let e=function NT(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),t=!0;const i=[n];for(;e;){let r;if(qr(n))r=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new ne(903,!1);r=e.\u0275dir}if(r){if(t){i.push(r);const s=n;s.inputs=Ep(n.inputs),s.inputTransforms=Ep(n.inputTransforms),s.declaredInputs=Ep(n.declaredInputs),s.outputs=Ep(n.outputs);const a=r.hostBindings;a&&mz(n,a);const l=r.viewQuery,c=r.contentQueries;if(l&&fz(n,l),c&&pz(n,c),wf(n.inputs,r.inputs),wf(n.declaredInputs,r.declaredInputs),wf(n.outputs,r.outputs),null!==r.inputTransforms&&(null===s.inputTransforms&&(s.inputTransforms={}),wf(s.inputTransforms,r.inputTransforms)),qr(r)&&r.data.animation){const d=n.data;d.animation=(d.animation||[]).concat(r.data.animation)}}const o=r.features;if(o)for(let s=0;s<o.length;s++){const a=o[s];a&&a.ngInherit&&a(n),a===Qe&&(t=!1)}}e=Object.getPrototypeOf(e)}!function hz(n){let e=0,t=null;for(let i=n.length-1;i>=0;i--){const r=n[i];r.hostVars=e+=r.hostVars,r.hostAttrs=eu(r.hostAttrs,t=eu(t,r.hostAttrs))}}(i)}function Ep(n){return n===bo?{}:n===Gt?[]:n}function fz(n,e){const t=n.viewQuery;n.viewQuery=t?(i,r)=>{e(i,r),t(i,r)}:e}function pz(n,e){const t=n.contentQueries;n.contentQueries=t?(i,r,o)=>{e(i,r,o),t(i,r,o)}:e}function mz(n,e){const t=n.hostBindings;n.hostBindings=t?(i,r)=>{e(i,r),t(i,r)}:e}function VT(n){const e=n.inputConfig,t={};for(const i in e)if(e.hasOwnProperty(i)){const r=e[i];Array.isArray(r)&&r[2]&&(t[i]=r[2])}n.inputTransforms=t}function Tp(n){return!!Fb(n)&&(Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n)}function Fb(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function Io(n,e,t){return n[e]=t}function Ci(n,e,t){return!Object.is(n[e],t)&&(n[e]=t,!0)}function Fi(n,e,t,i){const r=fe();return Ci(r,Ql(),e)&&(Vt(),Ao(_n(),r,n,e,t,i)),Fi}function vc(n,e,t,i){return Ci(n,Ql(),t)?e+dt(t)+i:pt}function bc(n,e,t,i,r,o){const a=function Fa(n,e,t,i){const r=Ci(n,e,t);return Ci(n,e+1,i)||r}(n,function es(){return it.lFrame.bindingIndex}(),t,r);return ts(2),a?e+dt(t)+i+dt(r)+o:pt}function rt(n,e,t,i,r,o,s,a){const l=fe(),c=Vt(),d=n+Ft,u=c.firstCreatePass?function Vz(n,e,t,i,r,o,s,a,l){const c=e.consts,d=gc(e,n,4,s||null,Gs(c,a));Ab(e,t,d,Gs(c,l)),zf(e,d);const u=d.tView=Db(2,d,i,r,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c,null);return null!==e.queries&&(e.queries.template(e,d),u.queries=e.queries.embeddedTView(d)),d}(d,c,l,e,t,i,r,o,s):c.data[d];wo(u,!1);const h=JT(c,l,u,n);Hf()&&sp(c,l,h,u),xi(h,l),Mp(l,l[d]=MT(h,l,h,u)),Nf(u)&&Eb(c,l,u),null!=s&&Tb(l,u,a)}let JT=function eD(n,e,t,i){return js(!0),e[ft].createComment("")};function ss(n){return function Zl(n,e){return n[e]}(function U3(){return it.lFrame.contextLView}(),Ft+n)}function Q(n,e,t){const i=fe();return Ci(i,Ql(),e)&&ur(Vt(),_n(),i,n,e,i[ft],t,!1),Q}function Hb(n,e,t,i,r){const s=r?"class":"style";Ob(n,t,e.inputs[s],s,i)}function M(n,e,t,i){const r=fe(),o=Vt(),s=Ft+n,a=r[ft],l=o.firstCreatePass?function jz(n,e,t,i,r,o){const s=e.consts,l=gc(e,n,2,i,Gs(s,r));return Ab(e,t,l,Gs(s,o)),null!==l.attrs&&wp(l,l.attrs,!1),null!==l.mergedAttrs&&wp(l,l.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,l),l}(s,o,r,e,t,i):o.data[s],c=tD(o,r,l,a,e,n);r[s]=c;const d=Nf(l);return wo(l,!0),CE(a,c,l),32!=(32&l.flags)&&Hf()&&sp(o,r,c,l),0===function R3(){return it.lFrame.elementDepthCount}()&&xi(c,r),function P3(){it.lFrame.elementDepthCount++}(),d&&(Eb(o,r,l),Sb(o,l,r)),null!==i&&Tb(r,l),M}function w(){let n=hi();gv()?_v():(n=n.parent,wo(n,!1));const e=n;(function k3(n){return it.skipHydrationRootTNode===n})(e)&&function B3(){it.skipHydrationRootTNode=null}(),function O3(){it.lFrame.elementDepthCount--}();const t=Vt();return t.firstCreatePass&&(zf(t,n),cv(n)&&t.queries.elementEnd(n)),null!=e.classesWithoutHost&&function K3(n){return 0!=(8&n.flags)}(e)&&Hb(t,e,fe(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function Q3(n){return 0!=(16&n.flags)}(e)&&Hb(t,e,fe(),e.stylesWithoutHost,!1),w}function Ie(n,e,t,i){return M(n,e,t,i),w(),Ie}let tD=(n,e,t,i,r,o)=>(js(!0),rp(i,r,function CS(){return it.lFrame.currentNamespace}()));function Na(n,e,t){const i=fe(),r=Vt(),o=n+Ft,s=r.firstCreatePass?function qz(n,e,t,i,r){const o=e.consts,s=Gs(o,i),a=gc(e,n,8,"ng-container",s);return null!==s&&wp(a,s,!0),Ab(e,t,a,Gs(o,r)),null!==e.queries&&e.queries.elementStart(e,a),a}(o,r,i,e,t):r.data[o];wo(s,!0);const a=nD(r,i,s,n);return i[o]=a,Hf()&&sp(r,i,a,s),xi(a,i),Nf(s)&&(Eb(r,i,s),Sb(r,s,i)),null!=t&&Tb(i,s),Na}function La(){let n=hi();const e=Vt();return gv()?_v():(n=n.parent,wo(n,!1)),e.firstCreatePass&&(zf(e,n),cv(n)&&e.queries.elementEnd(n)),La}function Dr(n,e,t){return Na(n,e,t),La(),Dr}let nD=(n,e,t,i)=>(js(!0),zv(e[ft],""));function Ni(){return fe()}function ku(n){return!!n&&"function"==typeof n.then}function iD(n){return!!n&&"function"==typeof n.subscribe}function Oe(n,e,t,i){const r=fe(),o=Vt(),s=hi();return function oD(n,e,t,i,r,o,s){const a=Nf(i),c=n.firstCreatePass&&ET(n),d=e[Fn],u=ST(e);let h=!0;if(3&i.type||s){const _=Zi(i,e),m=s?s(_):_,g=u.length,b=s?y=>s(an(y[i.index])):i.index;let v=null;if(!s&&a&&(v=function Zz(n,e,t,i){const r=n.cleanup;if(null!=r)for(let o=0;o<r.length-1;o+=2){const s=r[o];if(s===t&&r[o+1]===i){const a=e[Wl],l=r[o+2];return a.length>l?a[l]:null}"string"==typeof s&&(o+=2)}return null}(n,e,r,i.index)),null!==v)(v.__ngLastListenerFn__||v).__ngNextListenerFn__=o,v.__ngLastListenerFn__=o,h=!1;else{o=aD(i,e,d,o,!1);const y=t.listen(m,r,o);u.push(o,y),c&&c.push(r,b,g,g+1)}}else o=aD(i,e,d,o,!1);const f=i.outputs;let p;if(h&&null!==f&&(p=f[r])){const _=p.length;if(_)for(let m=0;m<_;m+=2){const x=e[p[m]][p[m+1]].subscribe(o),S=u.length;u.push(o,x),c&&c.push(r,i.index,S,-(S+1))}}}(o,r,r[ft],s,n,e,i),Oe}function sD(n,e,t,i){try{return Mo(6,e,t),!1!==t(i)}catch(r){return DT(n,r),!1}finally{Mo(7,e,t)}}function aD(n,e,t,i,r){return function o(s){if(s===Function)return i;Su(n.componentOffset>-1?ar(n.index,e):e);let l=sD(e,t,i,s),c=o.__ngNextListenerFn__;for(;c;)l=sD(e,t,c,s)&&l,c=c.__ngNextListenerFn__;return r&&!1===l&&s.preventDefault(),l}}function Et(n=1){return function j3(n){return(it.lFrame.contextLView=function W3(n,e){for(;n>0;)e=e[ql],n--;return e}(n,it.lFrame.contextLView))[Fn]}(n)}function Kz(n,e){let t=null;const i=function qB(n){const e=n.attrs;if(null!=e){const t=e.indexOf(5);if(!(1&t))return e[t+1]}return null}(n);for(let r=0;r<e.length;r++){const o=e[r];if("*"!==o){if(null===i?Bw(n,o,!0):ZB(i,o))return r}else t=r}return t}function Ar(n,e,t){return zb(n,"",e,"",t),Ar}function zb(n,e,t,i,r){const o=fe(),s=vc(o,e,t,i);return s!==pt&&ur(Vt(),_n(),o,n,s,o[ft],r,!1),zb}function Pp(n,e){return n<<17|e<<2}function qs(n){return n>>17&32767}function Gb(n){return 2|n}function Ua(n){return(131068&n)>>2}function jb(n,e){return-131069&n|e<<2}function Wb(n){return 1|n}function gD(n,e,t,i,r){const o=n[t+1],s=null===e;let a=i?qs(o):Ua(o),l=!1;for(;0!==a&&(!1===l||s);){const d=n[a+1];r4(n[a],e)&&(l=!0,n[a+1]=i?Wb(d):Gb(d)),a=i?qs(d):Ua(d)}l&&(n[t+1]=i?Gb(o):Wb(o))}function r4(n,e){return null===n||null==e||(Array.isArray(n)?n[1]:n)===e||!(!Array.isArray(n)||"string"!=typeof e)&&sc(n,e)>=0}const Xn={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function _D(n){return n.substring(Xn.key,Xn.keyEnd)}function vD(n,e){const t=Xn.textEnd;return t===e?-1:(e=Xn.keyEnd=function l4(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}(n,Xn.key=e,t),Ec(n,e,t))}function Ec(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function Mi(n,e,t){return Xr(n,e,t,!1),Mi}function Ir(n,e){return Xr(n,e,null,!0),Ir}function Rr(n){Yr(_4,Po,n,!0)}function Po(n,e){for(let t=function s4(n){return function yD(n){Xn.key=0,Xn.keyEnd=0,Xn.value=0,Xn.valueEnd=0,Xn.textEnd=n.length}(n),vD(n,Ec(n,0,Xn.textEnd))}(e);t>=0;t=vD(e,t))lr(n,_D(e),!0)}function Xr(n,e,t,i){const r=fe(),o=Vt(),s=ts(2);o.firstUpdatePass&&wD(o,n,s,i),e!==pt&&Ci(r,s,e)&&ED(o,o.data[Oi()],r,r[ft],n,r[s+1]=function b4(n,e){return null==n||""===n||("string"==typeof e?n+=e:"object"==typeof n&&(n=Wn(cr(n)))),n}(e,t),i,s)}function Yr(n,e,t,i){const r=Vt(),o=ts(2);r.firstUpdatePass&&wD(r,null,o,i);const s=fe();if(t!==pt&&Ci(s,o,t)){const a=r.data[Oi()];if(DD(a,i)&&!MD(r,o)){let l=i?a.classesWithoutHost:a.stylesWithoutHost;null!==l&&(t=Q_(l,t||"")),Hb(r,a,s,t,i)}else!function v4(n,e,t,i,r,o,s,a){r===pt&&(r=Gt);let l=0,c=0,d=0<r.length?r[0]:null,u=0<o.length?o[0]:null;for(;null!==d||null!==u;){const h=l<r.length?r[l+1]:void 0,f=c<o.length?o[c+1]:void 0;let _,p=null;d===u?(l+=2,c+=2,h!==f&&(p=u,_=f)):null===u||null!==d&&d<u?(l+=2,p=d):(c+=2,p=u,_=f),null!==p&&ED(n,e,t,i,p,_,s,a),d=l<r.length?r[l]:null,u=c<o.length?o[c]:null}}(r,a,s,s[ft],s[o+1],s[o+1]=function g4(n,e,t){if(null==t||""===t)return Gt;const i=[],r=cr(t);if(Array.isArray(r))for(let o=0;o<r.length;o++)n(i,r[o],!0);else if("object"==typeof r)for(const o in r)r.hasOwnProperty(o)&&n(i,o,r[o]);else"string"==typeof r&&e(i,r);return i}(n,e,t),i,o)}}function MD(n,e){return e>=n.expandoStartIndex}function wD(n,e,t,i){const r=n.data;if(null===r[t+1]){const o=r[Oi()],s=MD(n,t);DD(o,i)&&null===e&&!s&&(e=!1),e=function h4(n,e,t,i){const r=bv(n);let o=i?e.residualClasses:e.residualStyles;if(null===r)0===(i?e.classBindings:e.styleBindings)&&(t=Fu(t=$b(null,n,e,t,i),e.attrs,i),o=null);else{const s=e.directiveStylingLast;if(-1===s||n[s]!==r)if(t=$b(r,n,e,t,i),null===o){let l=function f4(n,e,t){const i=t?e.classBindings:e.styleBindings;if(0!==Ua(i))return n[qs(i)]}(n,e,i);void 0!==l&&Array.isArray(l)&&(l=$b(null,n,e,l[1],i),l=Fu(l,e.attrs,i),function p4(n,e,t,i){n[qs(t?e.classBindings:e.styleBindings)]=i}(n,e,i,l))}else o=function m4(n,e,t){let i;const r=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<r;o++)i=Fu(i,n[o].hostAttrs,t);return Fu(i,e.attrs,t)}(n,e,i)}return void 0!==o&&(i?e.residualClasses=o:e.residualStyles=o),t}(r,o,e,i),function t4(n,e,t,i,r,o){let s=o?e.classBindings:e.styleBindings,a=qs(s),l=Ua(s);n[i]=t;let d,c=!1;if(Array.isArray(t)?(d=t[1],(null===d||sc(t,d)>0)&&(c=!0)):d=t,r)if(0!==l){const h=qs(n[a+1]);n[i+1]=Pp(h,a),0!==h&&(n[h+1]=jb(n[h+1],i)),n[a+1]=function Jz(n,e){return 131071&n|e<<17}(n[a+1],i)}else n[i+1]=Pp(a,0),0!==a&&(n[a+1]=jb(n[a+1],i)),a=i;else n[i+1]=Pp(l,0),0===a?a=i:n[l+1]=jb(n[l+1],i),l=i;c&&(n[i+1]=Gb(n[i+1])),gD(n,d,i,!0),gD(n,d,i,!1),function n4(n,e,t,i,r){const o=r?n.residualClasses:n.residualStyles;null!=o&&"string"==typeof e&&sc(o,e)>=0&&(t[i+1]=Wb(t[i+1]))}(e,d,n,i,o),s=Pp(a,l),o?e.classBindings=s:e.styleBindings=s}(r,o,e,t,s,i)}}function $b(n,e,t,i,r){let o=null;const s=t.directiveEnd;let a=t.directiveStylingLast;for(-1===a?a=t.directiveStart:a++;a<s&&(o=e[a],i=Fu(i,o.hostAttrs,r),o!==n);)a++;return null!==n&&(t.directiveStylingLast=a),i}function Fu(n,e,t){const i=t?1:2;let r=-1;if(null!==e)for(let o=0;o<e.length;o++){const s=e[o];"number"==typeof s?r=s:r===i&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),lr(n,s,!!t||e[++o]))}return void 0===n?null:n}function _4(n,e,t){const i=String(e);""!==i&&!i.includes(" ")&&lr(n,i,t)}function ED(n,e,t,i,r,o,s,a){if(!(3&e.type))return;const l=n.data,c=l[a+1],d=function e4(n){return 1==(1&n)}(c)?TD(l,e,t,r,Ua(c),s):void 0;Op(d)||(Op(o)||function Qz(n){return 2==(2&n)}(c)&&(o=TD(l,null,t,r,a,s)),function sV(n,e,t,i,r){if(e)r?n.addClass(t,i):n.removeClass(t,i);else{let o=-1===i.indexOf("-")?void 0:Ki.DashCase;null==r?n.removeStyle(t,i,o):("string"==typeof r&&r.endsWith("!important")&&(r=r.slice(0,-10),o|=Ki.Important),n.setStyle(t,i,r,o))}}(i,s,Vf(Oi(),t),r,o))}function TD(n,e,t,i,r,o){const s=null===e;let a;for(;r>0;){const l=n[r],c=Array.isArray(l),d=c?l[1]:l,u=null===d;let h=t[r+1];h===pt&&(h=u?Gt:void 0);let f=u?Rv(h,i):d===i?h:void 0;if(c&&!Op(f)&&(f=Rv(l,i)),Op(f)&&(a=f,s))return a;const p=n[r+1];r=s?qs(p):Ua(p)}if(null!==e){let l=o?e.residualClasses:e.residualStyles;null!=l&&(a=Rv(l,i))}return a}function Op(n){return void 0!==n}function DD(n,e){return 0!=(n.flags&(e?8:16))}function O(n,e=""){const t=fe(),i=Vt(),r=n+Ft,o=i.firstCreatePass?gc(i,r,1,e,null):i.data[r],s=AD(i,t,o,e,n);t[r]=s,Hf()&&sp(i,t,s,o),wo(o,!1)}let AD=(n,e,t,i,r)=>(js(!0),function ip(n,e){return n.createText(e)}(e[ft],i));function Yn(n){return cn("",n,""),Yn}function cn(n,e,t){const i=fe(),r=vc(i,n,e,t);return r!==pt&&os(i,Oi(),r),cn}function Tc(n,e,t,i,r){const o=fe(),s=bc(o,n,e,t,i,r);return s!==pt&&os(o,Oi(),s),Tc}function Va(n,e,t){Yr(lr,Po,vc(fe(),n,e,t),!0)}function qb(n,e,t){const i=fe();if(Ci(i,Ql(),e)){const o=Vt(),s=_n();ur(o,s,i,n,e,function TT(n,e,t){return(null===n||qr(n))&&(t=function w3(n){for(;Array.isArray(n);){if("object"==typeof n[lv])return n;n=n[$n]}return null}(t[e.index])),t[ft]}(bv(o.data),s,i),t,!0)}return qb}const Ac="en-US";let YD=Ac;function Zb(n,e,t,i,r){if(n=at(n),Array.isArray(n))for(let o=0;o<n.length;o++)Zb(n[o],e,t,i,r);else{const o=Vt(),s=fe();let a=Oa(n)?n:at(n.provide),l=zE(n);const c=hi(),d=1048575&c.providerIndexes,u=c.directiveStart,h=c.providerIndexes>>20;if(Oa(n)||!n.multi){const f=new au(l,r,L),p=Qb(a,e,r?d:d+h,u);-1===p?(Dv(Xf(c,s),o,a),Kb(o,n,e.length),e.push(a),c.directiveStart++,c.directiveEnd++,r&&(c.providerIndexes+=1048576),t.push(f),s.push(f)):(t[p]=f,s[p]=f)}else{const f=Qb(a,e,d+h,u),p=Qb(a,e,d,d+h),m=p>=0&&t[p];if(r&&!m||!r&&!(f>=0&&t[f])){Dv(Xf(c,s),o,a);const g=function U5(n,e,t,i,r){const o=new au(n,t,L);return o.multi=[],o.index=e,o.componentProviders=0,x1(o,r,i&&!t),o}(r?B5:L5,t.length,r,i,l);!r&&m&&(t[p].providerFactory=g),Kb(o,n,e.length,0),e.push(a),c.directiveStart++,c.directiveEnd++,r&&(c.providerIndexes+=1048576),t.push(g),s.push(g)}else Kb(o,n,f>-1?f:p,x1(t[r?p:f],l,!r&&i));!r&&i&&m&&t[p].componentProviders++}}}function Kb(n,e,t,i){const r=Oa(e),o=function UV(n){return!!n.useClass}(e);if(r||o){const l=(o?at(e.useClass):e).prototype.ngOnDestroy;if(l){const c=n.destroyHooks||(n.destroyHooks=[]);if(!r&&e.multi){const d=c.indexOf(t);-1===d?c.push(t,[i,l]):c[d+1].push(i,l)}else c.push(t,l)}}}function x1(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function Qb(n,e,t,i){for(let r=t;r<i;r++)if(e[r]===n)return r;return-1}function L5(n,e,t,i){return Jb(this.multi,[])}function B5(n,e,t,i){const r=this.multi;let o;if(this.providerFactory){const s=this.providerFactory.componentProviders,a=Ia(t,t[Le],this.providerFactory.index,i);o=a.slice(0,s),Jb(r,o);for(let l=s;l<a.length;l++)o.push(a[l])}else o=[],Jb(r,o);return o}function Jb(n,e){for(let t=0;t<n.length;t++)e.push((0,n[t])());return e}function xt(n,e=[]){return t=>{t.providersResolver=(i,r)=>function N5(n,e,t){const i=Vt();if(i.firstCreatePass){const r=qr(n);Zb(t,i.data,i.blueprint,r,!0),Zb(e,i.data,i.blueprint,r,!1)}}(i,r?r(n):n,e)}}class Ic{}class C1{}class e0 extends Ic{constructor(e,t,i){super(),this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new kT(this);const r=or(e);this._bootstrapComponents=rs(r.bootstrap),this._r3Injector=fT(e,t,[{provide:Ic,useValue:this},{provide:fc,useValue:this.componentFactoryResolver},...i],Wn(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class t0 extends C1{constructor(e){super(),this.moduleType=e}create(e){return new e0(this.moduleType,e,[])}}class M1 extends Ic{constructor(e){super(),this.componentFactoryResolver=new kT(this),this.instance=null;const t=new ab([...e.providers,{provide:Ic,useValue:this},{provide:fc,useValue:this.componentFactoryResolver}],e.parent||pp(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function n0(n,e,t=null){return new M1({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}let z5=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t.id)){const i=BE(0,t.type),r=i.length>0?n0([i],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t.id,r)}return this.cachedInjectors.get(t.id)}ngOnDestroy(){try{for(const t of this.cachedInjectors.values())null!==t&&t.destroy()}finally{this.cachedInjectors.clear()}}}return n.\u0275prov=ye({token:n,providedIn:"environment",factory:()=>new n(J(To))}),n})();function Bp(n){n.getStandaloneInjector=e=>e.get(z5).getOrCreateStandaloneInjector(n)}function Ln(n,e,t){const i=Pi()+n,r=fe();return r[i]===pt?Io(r,i,t?e.call(t):e()):function Iu(n,e){return n[e]}(r,i)}function Xs(n,e,t,i){return function I1(n,e,t,i,r,o){const s=e+t;return Ci(n,s,r)?Io(n,s+1,o?i.call(o,r):i(r)):function Hu(n,e){const t=n[e];return t===pt?void 0:t}(n,s+1)}(fe(),Pi(),n,e,t,i)}function o0(n){return e=>{setTimeout(n,void 0,e)}}const hn=class hG extends Kt{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,i){let r=e,o=t||(()=>null),s=i;if(e&&"object"==typeof e){const l=e;r=l.next?.bind(l),o=l.error?.bind(l),s=l.complete?.bind(l)}this.__isAsync&&(o=o0(o),r&&(r=o0(r)),s&&(s=o0(s)));const a=super.subscribe({next:r,error:o,complete:s});return e instanceof di&&e.add(a),a}};function fG(){return this._results[Symbol.iterator]()}class s0{get changes(){return this._changes||(this._changes=new hn)}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const t=s0.prototype;t[Symbol.iterator]||(t[Symbol.iterator]=fG)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){const i=this;i.dirty=!1;const r=function Er(n){return n.flat(Number.POSITIVE_INFINITY)}(e);(this._changesDetected=!function cU(n,e,t){if(n.length!==e.length)return!1;for(let i=0;i<n.length;i++){let r=n[i],o=e[i];if(t&&(r=t(r),o=t(o)),o!==r)return!1}return!0}(i._results,r,t))&&(i._results=r,i.length=r.length,i.last=r[this.length-1],i.first=r[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let fi=(()=>{class n{}return n.__NG_ELEMENT_ID__=gG,n})();const pG=fi,mG=class extends pG{constructor(e,t,i){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t,null)}createEmbeddedViewImpl(e,t,i){const s=this._declarationTContainer.tView,a=Cp(this._declarationLView,s,e,4096&this._declarationLView[ht]?4096:16,null,s.declTNode,null,null,null,t||null,i||null);a[iu]=this._declarationLView[this._declarationTContainer.index];const c=this._declarationLView[yo];return null!==c&&(a[yo]=c.createEmbeddedView(s)),kb(s,a,e),new Du(a)}};function gG(){return Up(hi(),fe())}function Up(n,e){return 4&n.type?new mG(e,n,pc(n,e)):null}let wi=(()=>{class n{}return n.__NG_ELEMENT_ID__=MG,n})();function MG(){return V1(hi(),fe())}const wG=wi,B1=class extends wG{constructor(e,t,i){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=i}get element(){return pc(this._hostTNode,this._hostLView)}get injector(){return new ec(this._hostTNode,this._hostLView)}get parentInjector(){const e=Tv(this._hostTNode,this._hostLView);if(ES(e)){const t=$f(e,this._hostLView),i=Wf(e);return new ec(t[Le].data[i+8],t)}return new ec(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=U1(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-bi}createEmbeddedView(e,t,i){let r,o;"number"==typeof i?r=i:null!=i&&(r=i.index,o=i.injector);const a=e.createEmbeddedViewImpl(t||{},o,null);return this.insertImpl(a,r,false),a}createComponent(e,t,i,r,o){const s=e&&!function cu(n){return"function"==typeof n}(e);let a;if(s)a=t;else{const _=t||{};a=_.index,i=_.injector,r=_.projectableNodes,o=_.environmentInjector||_.ngModuleRef}const l=s?e:new Au($t(e)),c=i||this.parentInjector;if(!o&&null==l.ngModule){const m=(s?c:this.parentInjector).get(To,null);m&&(o=m)}$t(l.componentType??{});const f=l.create(c,r,null,o);return this.insertImpl(f.hostView,a,false),f}insert(e,t){return this.insertImpl(e,t,!1)}insertImpl(e,t,i){const r=e._lView,o=r[Le];if(function D3(n){return Yi(n[gn])}(r)){const l=this.indexOf(e);if(-1!==l)this.detach(l);else{const c=r[gn],d=new B1(c,c[vi],c[gn]);d.detach(d.indexOf(e))}}const s=this._adjustIndex(t),a=this._lContainer;if(function QU(n,e,t,i){const r=bi+i,o=t.length;i>0&&(t[r-1][$r]=e),i<o-bi?(e[$r]=t[r],BS(t,bi+i,e)):(t.push(e),e[$r]=null),e[gn]=t;const s=e[iu];null!==s&&t!==s&&function JU(n,e){const t=n[Yl];e[Nn]!==e[gn][gn][Nn]&&(n[Ww]=!0),null===t?n[Yl]=[e]:t.push(e)}(s,e);const a=e[yo];null!==a&&a.insertView(n),e[ht]|=128}(o,r,a,s),!i){const l=qv(s,a),c=r[ft],d=op(c,a[xo]);null!==d&&function YU(n,e,t,i,r,o){i[$n]=r,i[vi]=e,gu(n,i,t,1,r,o)}(o,a[vi],c,r,d,l)}return e.attachToViewContainerRef(),BS(l0(a),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=U1(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),i=Gv(this._lContainer,t);i&&(Zf(l0(this._lContainer),t),dE(i[Le],i))}detach(e){const t=this._adjustIndex(e,-1),i=Gv(this._lContainer,t);return i&&null!=Zf(l0(this._lContainer),t)?new Du(i):null}_adjustIndex(e,t=0){return e??this.length+t}};function U1(n){return n[8]}function l0(n){return n[8]||(n[8]=[])}function V1(n,e){let t;const i=e[n.index];return Yi(i)?t=i:(t=MT(i,e,null,n),e[n.index]=t,Mp(e,t)),H1(t,e,n,i),new B1(t,n,e)}let H1=function z1(n,e,t,i){if(n[xo])return;let r;r=8&t.type?an(i):function SG(n,e){const t=n[ft],i=t.createComment(""),r=Zi(e,n);return Ra(t,op(t,r),i,function iV(n,e){return n.nextSibling(e)}(t,r),!1),i}(e,t),n[xo]=r};class c0{constructor(e){this.queryList=e,this.matches=null}clone(){return new c0(this.queryList)}setDirty(){this.queryList.setDirty()}}class d0{constructor(e=[]){this.queries=e}createEmbeddedView(e){const t=e.queries;if(null!==t){const i=null!==e.contentQueries?e.contentQueries[0]:t.length,r=[];for(let o=0;o<i;o++){const s=t.getByIndex(o);r.push(this.queries[s.indexInDeclarationView].clone())}return new d0(r)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)null!==q1(e,t).matches&&this.queries[t].setDirty()}}class G1{constructor(e,t,i=null){this.predicate=e,this.flags=t,this.read=i}}class u0{constructor(e=[]){this.queries=e}elementStart(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let i=0;i<this.length;i++){const r=null!==t?t.length:0,o=this.getByIndex(i).embeddedTView(e,r);o&&(o.indexInDeclarationView=i,null!==t?t.push(o):t=[o])}return null!==t?new u0(t):null}template(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class h0{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new h0(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const t=this._declarationNodeIndex;let i=e.parent;for(;null!==i&&8&i.type&&i.index!==t;)i=i.parent;return t===(null!==i?i.index:-1)}return this._appliesToNextNode}matchTNode(e,t){const i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){const o=i[r];this.matchTNodeWithReadOption(e,t,DG(t,o)),this.matchTNodeWithReadOption(e,t,Yf(t,e,o,!1,!1))}else i===fi?4&t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,Yf(t,e,i,!1,!1))}matchTNodeWithReadOption(e,t,i){if(null!==i){const r=this.metadata.read;if(null!==r)if(r===ln||r===wi||r===fi&&4&t.type)this.addMatch(t.index,-2);else{const o=Yf(t,e,r,!1,!1);null!==o&&this.addMatch(t.index,o)}else this.addMatch(t.index,i)}}addMatch(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}function DG(n,e){const t=n.localNames;if(null!==t)for(let i=0;i<t.length;i+=2)if(t[i]===e)return t[i+1];return null}function IG(n,e,t,i){return-1===t?function AG(n,e){return 11&n.type?pc(n,e):4&n.type?Up(n,e):null}(e,n):-2===t?function RG(n,e,t){return t===ln?pc(e,n):t===fi?Up(e,n):t===wi?V1(e,n):void 0}(n,e,i):Ia(n,n[Le],t,e)}function j1(n,e,t,i){const r=e[yo].queries[i];if(null===r.matches){const o=n.data,s=t.matches,a=[];for(let l=0;l<s.length;l+=2){const c=s[l];a.push(c<0?null:IG(e,o[c],s[l+1],t.metadata.read))}r.matches=a}return r.matches}function f0(n,e,t,i){const r=n.queries.getByIndex(t),o=r.matches;if(null!==o){const s=j1(n,e,r,t);for(let a=0;a<o.length;a+=2){const l=o[a];if(l>0)i.push(s[a/2]);else{const c=o[a+1],d=e[-l];for(let u=bi;u<d.length;u++){const h=d[u];h[iu]===h[gn]&&f0(h[Le],h,c,i)}if(null!==d[Yl]){const u=d[Yl];for(let h=0;h<u.length;h++){const f=u[h];f0(f[Le],f,c,i)}}}}}return i}function pi(n){const e=fe(),t=Vt(),i=gS();yv(i+1);const r=q1(t,i);if(n.dirty&&function E3(n){return 4==(4&n[ht])}(e)===(2==(2&r.metadata.flags))){if(null===r.matches)n.reset([]);else{const o=r.crossesNgTemplate?f0(t,e,i,[]):j1(t,e,r,i);n.reset(o,oH),n.notifyOnChanges()}return!0}return!1}function Oo(n,e,t,i){const r=Vt();if(r.firstCreatePass){const o=hi();(function $1(n,e,t){null===n.queries&&(n.queries=new u0),n.queries.track(new h0(e,t))})(r,new G1(e,t,i),o.index),function OG(n,e){const t=n.contentQueries||(n.contentQueries=[]);e!==(t.length?t[t.length-1]:-1)&&t.push(n.queries.length-1,e)}(r,n),2==(2&t)&&(r.staticContentQueries=!0)}!function W1(n,e,t){const i=new s0(4==(4&t));(function DH(n,e,t,i){const r=ST(e);r.push(t),n.firstCreatePass&&ET(n).push(i,r.length-1)})(n,e,i,i.destroy),null===e[yo]&&(e[yo]=new d0),e[yo].queries.push(new c0(i))}(r,fe(),t)}function q1(n,e){return n.queries.getByIndex(e)}function p0(n,e){return Up(n,e)}const y0=new he("Application Initializer");let x0=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,i)=>{this.resolve=t,this.reject=i}),this.appInits=Te(y0,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const t=[];for(const r of this.appInits){const o=r();if(ku(o))t.push(o);else if(iD(o)){const s=new Promise((a,l)=>{o.subscribe({complete:a,error:l})});t.push(s)}}const i=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{i()}).catch(r=>{this.reject(r)}),0===t.length&&i(),this.initialized=!0}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),dA=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const ko=new he("LocaleId",{providedIn:"root",factory:()=>Te(ko,Je.Optional|Je.SkipSelf)||function ej(){return typeof $localize<"u"&&$localize.locale||Ac}()});let Hp=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new ui(!1)}add(){this.hasPendingTasks.next(!0);const t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class nj{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}let uA=(()=>{class n{compileModuleSync(t){return new t0(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const i=this.compileModuleSync(t),o=rs(or(t).declarations).reduce((s,a)=>{const l=$t(a);return l&&s.push(new Au(l)),s},[]);return new nj(i,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function pA(...n){}class Rt{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:i=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new hn(!1),this.onMicrotaskEmpty=new hn(!1),this.onStable=new hn(!1),this.onError=new hn(!1),typeof Zone>"u")throw new ne(908,!1);Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!i&&t,r.shouldCoalesceRunChangeDetection=i,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function oj(){let n=nn.requestAnimationFrame,e=nn.cancelAnimationFrame;if(typeof Zone<"u"&&n&&e){const t=n[Zone.__symbol__("OriginalDelegate")];t&&(n=t);const i=e[Zone.__symbol__("OriginalDelegate")];i&&(e=i)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function lj(n){const e=()=>{!function aj(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(nn,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,M0(n),n.isCheckStableRunning=!0,C0(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),M0(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,i,r,o,s,a)=>{try{return mA(n),t.invokeTask(r,o,s,a)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||n.shouldCoalesceRunChangeDetection)&&e(),gA(n)}},onInvoke:(t,i,r,o,s,a,l)=>{try{return mA(n),t.invoke(r,o,s,a,l)}finally{n.shouldCoalesceRunChangeDetection&&e(),gA(n)}},onHasTask:(t,i,r,o)=>{t.hasTask(r,o),i===r&&("microTask"==o.change?(n._hasPendingMicrotasks=o.microTask,M0(n),C0(n)):"macroTask"==o.change&&(n.hasPendingMacrotasks=o.macroTask))},onHandleError:(t,i,r,o)=>(t.handleError(r,o),n.runOutsideAngular(()=>n.onError.emit(o)),!1)})}(r)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Rt.isInAngularZone())throw new ne(909,!1)}static assertNotInAngularZone(){if(Rt.isInAngularZone())throw new ne(909,!1)}run(e,t,i){return this._inner.run(e,t,i)}runTask(e,t,i,r){const o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+r,e,sj,pA,pA);try{return o.runTask(s,t,i)}finally{o.cancelTask(s)}}runGuarded(e,t,i){return this._inner.runGuarded(e,t,i)}runOutsideAngular(e){return this._outer.run(e)}}const sj={};function C0(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function M0(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function mA(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function gA(n){n._nesting--,C0(n)}class cj{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new hn,this.onMicrotaskEmpty=new hn,this.onStable=new hn,this.onError=new hn}run(e,t,i){return e.apply(t,i)}runGuarded(e,t,i){return e.apply(t,i)}runOutsideAngular(e){return e()}runTask(e,t,i,r){return e.apply(t,i)}}const _A=new he("",{providedIn:"root",factory:vA});function vA(){const n=Te(Rt);let e=!0;return xw(new sn(r=>{e=n.isStable&&!n.hasPendingMacrotasks&&!n.hasPendingMicrotasks,n.runOutsideAngular(()=>{r.next(e),r.complete()})}),new sn(r=>{let o;n.runOutsideAngular(()=>{o=n.onStable.subscribe(()=>{Rt.assertNotInAngularZone(),queueMicrotask(()=>{!e&&!n.hasPendingMacrotasks&&!n.hasPendingMicrotasks&&(e=!0,r.next(!0))})})});const s=n.onUnstable.subscribe(()=>{Rt.assertInAngularZone(),e&&(e=!1,n.runOutsideAngular(()=>{r.next(!1)}))});return()=>{o.unsubscribe(),s.unsubscribe()}}).pipe(Z_()))}const bA=new he(""),zp=new he("");let E0,w0=(()=>{class n{constructor(t,i,r){this._ngZone=t,this.registry=i,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,E0||(function dj(n){E0=n}(r),r.addToWindow(i)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Rt.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>!i.updateCb||!i.updateCb(t)||(clearTimeout(i.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,i,r){let o=-1;i&&i>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==o),t(this._didWork,this.getPendingTasks())},i)),this._callbacks.push({doneCb:t,timeoutId:o,updateCb:r})}whenStable(t,i,r){if(r&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,i,r),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,i,r){return[]}}return n.\u0275fac=function(t){return new(t||n)(J(Rt),J(S0),J(zp))},n.\u0275prov=ye({token:n,factory:n.\u0275fac}),n})(),S0=(()=>{class n{constructor(){this._applications=new Map}registerApplication(t,i){this._applications.set(t,i)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,i=!0){return E0?.findTestabilityInTree(this,t,i)??null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})(),Zs=null;const yA=new he("AllowMultipleToken"),T0=new he("PlatformDestroyListeners"),D0=new he("appBootstrapListener");class CA{constructor(e,t){this.name=e,this.token=t}}function wA(n,e,t=[]){const i=`Platform: ${e}`,r=new he(i);return(o=[])=>{let s=A0();if(!s||s.injector.get(yA,!1)){const a=[...t,...o,{provide:r,useValue:!0}];n?n(a):function fj(n){if(Zs&&!Zs.get(yA,!1))throw new ne(400,!1);(function xA(){!function g3(n){Kw=n}(()=>{throw new ne(600,!1)})})(),Zs=n;const e=n.get(EA);(function MA(n){n.get(GE,null)?.forEach(t=>t())})(n)}(function SA(n=[],e){return ki.create({name:e,providers:[{provide:ob,useValue:"platform"},{provide:T0,useValue:new Set([()=>Zs=null])},...n]})}(a,i))}return function mj(n){const e=A0();if(!e)throw new ne(401,!1);return e}()}}function A0(){return Zs?.get(EA)??null}let EA=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,i){const r=function gj(n="zone.js",e){return"noop"===n?new cj:"zone.js"===n?new Rt(e):n}(i?.ngZone,function TA(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}({eventCoalescing:i?.ngZoneEventCoalescing,runCoalescing:i?.ngZoneRunCoalescing}));return r.run(()=>{const o=function H5(n,e,t){return new e0(n,e,t)}(t.moduleType,this.injector,function PA(n){return[{provide:Rt,useFactory:n},{provide:yu,multi:!0,useFactory:()=>{const e=Te(vj,{optional:!0});return()=>e.initialize()}},{provide:RA,useFactory:_j},{provide:_A,useFactory:vA}]}(()=>r)),s=o.injector.get(Do,null);return r.runOutsideAngular(()=>{const a=r.onError.subscribe({next:l=>{s.handleError(l)}});o.onDestroy(()=>{Gp(this._modules,o),a.unsubscribe()})}),function DA(n,e,t){try{const i=t();return ku(i)?i.catch(r=>{throw e.runOutsideAngular(()=>n.handleError(r)),r}):i}catch(i){throw e.runOutsideAngular(()=>n.handleError(i)),i}}(s,r,()=>{const a=o.injector.get(x0);return a.runInitializers(),a.donePromise.then(()=>(function ZD(n){Sr(n,"Expected localeId to be defined"),"string"==typeof n&&(YD=n.toLowerCase().replace(/_/g,"-"))}(o.injector.get(ko,Ac)||Ac),this._moduleDoBootstrap(o),o))})})}bootstrapModule(t,i=[]){const r=AA({},i);return function uj(n,e,t){const i=new t0(t);return Promise.resolve(i)}(0,0,t).then(o=>this.bootstrapModuleFactory(o,r))}_moduleDoBootstrap(t){const i=t.injector.get(Fo);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(r=>i.bootstrap(r));else{if(!t.instance.ngDoBootstrap)throw new ne(-403,!1);t.instance.ngDoBootstrap(i)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new ne(404,!1);this._modules.slice().forEach(i=>i.destroy()),this._destroyListeners.forEach(i=>i());const t=this._injector.get(T0,null);t&&(t.forEach(i=>i()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(t){return new(t||n)(J(ki))},n.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();function AA(n,e){return Array.isArray(e)?e.reduce(AA,n):{...n,...e}}let Fo=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=Te(RA),this.zoneIsStable=Te(_A),this.componentTypes=[],this.components=[],this.isStable=Te(Hp).hasPendingTasks.pipe(jr(t=>t?Ye(!1):this.zoneIsStable),function wB(n,e=Bs){return n=n??SB,Dn((t,i)=>{let r,o=!0;t.subscribe(mn(i,s=>{const a=e(s);(o||!n(r,a))&&(o=!1,r=a,i.next(s))}))})}(),Z_()),this._injector=Te(To)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(t,i){const r=t instanceof YE;if(!this._injector.get(x0).done)throw!r&&function jl(n){const e=$t(n)||_i(n)||Xi(n);return null!==e&&e.standalone}(t),new ne(405,!1);let s;s=r?t:this._injector.get(fc).resolveComponentFactory(t),this.componentTypes.push(s.componentType);const a=function hj(n){return n.isBoundToModule}(s)?void 0:this._injector.get(Ic),c=s.create(ki.NULL,[],i||s.selector,a),d=c.location.nativeElement,u=c.injector.get(bA,null);return u?.registerApplication(d),c.onDestroy(()=>{this.detachView(c.hostView),Gp(this.components,c),u?.unregisterApplication(d)}),this._loadComponent(c),c}tick(){if(this._runningTick)throw new ne(101,!1);try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this.internalErrorHandler(t)}finally{this._runningTick=!1}}attachView(t){const i=t;this._views.push(i),i.attachToAppRef(this)}detachView(t){const i=t;Gp(this._views,i),i.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);const i=this._injector.get(D0,[]);i.push(...this._bootstrapListeners),i.forEach(r=>r(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Gp(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new ne(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Gp(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const RA=new he("",{providedIn:"root",factory:()=>Te(Do).handleError.bind(void 0)});function _j(){const n=Te(Rt),e=Te(Do);return t=>n.runOutsideAngular(()=>e.handleError(t))}let vj=(()=>{class n{constructor(){this.zone=Te(Rt),this.applicationRef=Te(Fo)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();let Oc=(()=>{class n{}return n.__NG_ELEMENT_ID__=yj,n})();function yj(n){return function xj(n,e,t){if(Sa(n)&&!t){const i=ar(n.index,e);return new Du(i,i)}return 47&n.type?new Du(e[Nn],e):null}(hi(),fe(),16==(16&n))}class NA{constructor(){}supports(e){return Tp(e)}create(e){return new Tj(e)}}const Ej=(n,e)=>e;class Tj{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||Ej}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,i=this._removalsHead,r=0,o=null;for(;t||i;){const s=!i||t&&t.currentIndex<BA(i,r,o)?t:i,a=BA(s,r,o),l=s.currentIndex;if(s===i)r--,i=i._nextRemoved;else if(t=t._next,null==s.previousIndex)r++;else{o||(o=[]);const c=a-r,d=l-r;if(c!=d){for(let h=0;h<c;h++){const f=h<o.length?o[h]:o[h]=0,p=f+h;d<=p&&p<c&&(o[h]=f+1)}o[s.previousIndex]=d-c}}a!==l&&e(s,a,l)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!Tp(e))throw new ne(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let r,o,s,t=this._itHead,i=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),null!==t&&Object.is(t.trackById,s)?(i&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)):(t=this._mismatch(t,o,s,a),i=!0),t=t._next}else r=0,function Cz(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{const t=n[Symbol.iterator]();let i;for(;!(i=t.next()).done;)e(i.value)}}(e,a=>{s=this._trackByFn(r,a),null!==t&&Object.is(t.trackById,s)?(i&&(t=this._verifyReinsertion(t,a,s,r)),Object.is(t.item,a)||this._addIdentityChange(t,a)):(t=this._mismatch(t,a,s,r),i=!0),t=t._next,r++}),this.length=r;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,i,r){let o;return null===e?o=this._itTail:(o=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,r)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(i,r))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,r)):e=this._addAfter(new Dj(t,i),o,r),e}_verifyReinsertion(e,t,i,r){let o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null);return null!==o?e=this._reinsertAfter(o,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,i){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const r=e._prevRemoved,o=e._nextRemoved;return null===r?this._removalsHead=o:r._nextRemoved=o,null===o?this._removalsTail=r:o._prevRemoved=r,this._insertAfter(e,t,i),this._addToMoves(e,i),e}_moveAfter(e,t,i){return this._unlink(e),this._insertAfter(e,t,i),this._addToMoves(e,i),e}_addAfter(e,t,i){return this._insertAfter(e,t,i),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,i){const r=null===t?this._itHead:t._next;return e._next=r,e._prev=t,null===r?this._itTail=e:r._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new LA),this._linkedRecords.put(e),e.currentIndex=i,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,i=e._next;return null===t?this._itHead=i:t._next=i,null===i?this._itTail=t:i._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new LA),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class Dj{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Aj{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let i;for(i=this._head;null!==i;i=i._nextDup)if((null===t||t<=i.currentIndex)&&Object.is(i.trackById,e))return i;return null}remove(e){const t=e._prevDup,i=e._nextDup;return null===t?this._head=i:t._nextDup=i,null===i?this._tail=t:i._prevDup=t,null===this._head}}class LA{constructor(){this.map=new Map}put(e){const t=e.trackById;let i=this.map.get(t);i||(i=new Aj,this.map.set(t,i)),i.add(e)}get(e,t){const r=this.map.get(e);return r?r.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function BA(n,e,t){const i=n.previousIndex;if(null===i)return i;let r=0;return t&&i<t.length&&(r=t[i]),i+e+r}class UA{constructor(){}supports(e){return e instanceof Map||Fb(e)}create(){return new Ij}}class Ij{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let t;for(t=this._mapHead;null!==t;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}diff(e){if(e){if(!(e instanceof Map||Fb(e)))throw new ne(900,!1)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(i,r)=>{if(t&&t.key===r)this._maybeAddToChanges(t,i),this._appendAfter=t,t=t._next;else{const o=this._getOrCreateRecordForKey(r,i);t=this._insertBeforeOrAppend(t,o)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let i=t;null!==i;i=i._nextRemoved)i===this._mapHead&&(this._mapHead=null),this._records.delete(i.key),i._nextRemoved=i._next,i.previousValue=i.currentValue,i.currentValue=null,i._prev=null,i._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){const i=e._prev;return t._next=e,t._prev=i,e._prev=t,i&&(i._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){const r=this._records.get(e);this._maybeAddToChanges(r,t);const o=r._prev,s=r._next;return o&&(o._next=s),s&&(s._prev=o),r._next=null,r._prev=null,r}const i=new Rj(e);return this._records.set(e,i),i.currentValue=t,this._addToAdditions(i),i}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(i=>t(e[i],i))}}class Rj{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function VA(){return new as([new NA])}let as=(()=>{class n{constructor(t){this.factories=t}static create(t,i){if(null!=i){const r=i.factories.slice();t=t.concat(r)}return new n(t)}static extend(t){return{provide:n,useFactory:i=>n.create(t,i||VA()),deps:[[n,new ac,new Ws]]}}find(t){const i=this.factories.find(r=>r.supports(t));if(null!=i)return i;throw new ne(901,!1)}}return n.\u0275prov=ye({token:n,providedIn:"root",factory:VA}),n})();function HA(){return new ju([new UA])}let ju=(()=>{class n{constructor(t){this.factories=t}static create(t,i){if(i){const r=i.factories.slice();t=t.concat(r)}return new n(t)}static extend(t){return{provide:n,useFactory:i=>n.create(t,i||HA()),deps:[[n,new ac,new Ws]]}}find(t){const i=this.factories.find(r=>r.supports(t));if(i)return i;throw new ne(901,!1)}}return n.\u0275prov=ye({token:n,providedIn:"root",factory:HA}),n})();const kj=wA(null,"core",[]);let Fj=(()=>{class n{constructor(t){}}return n.\u0275fac=function(t){return new(t||n)(J(Fo))},n.\u0275mod=At({type:n}),n.\u0275inj=St({}),n})();function kc(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}let N0=null;function Ks(){return N0}class qj{}const Bt=new he("DocumentToken");let L0=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=ye({token:n,factory:function(){return Te(Yj)},providedIn:"platform"}),n})();const Xj=new he("Location Initialized");let Yj=(()=>{class n extends L0{constructor(){super(),this._doc=Te(Bt),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Ks().getBaseHref(this._doc)}onPopState(t){const i=Ks().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",t,!1),()=>i.removeEventListener("popstate",t)}onHashChange(t){const i=Ks().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",t,!1),()=>i.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,i,r){this._history.pushState(t,i,r)}replaceState(t,i,r){this._history.replaceState(t,i,r)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=ye({token:n,factory:function(){return new n},providedIn:"platform"}),n})();function B0(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function XA(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function ls(n){return n&&"?"!==n[0]?"?"+n:n}let Ga=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=ye({token:n,factory:function(){return Te(ZA)},providedIn:"root"}),n})();const YA=new he("appBaseHref");let ZA=(()=>{class n extends Ga{constructor(t,i){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??Te(Bt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return B0(this._baseHref,t)}path(t=!1){const i=this._platformLocation.pathname+ls(this._platformLocation.search),r=this._platformLocation.hash;return r&&t?`${i}${r}`:i}pushState(t,i,r,o){const s=this.prepareExternalUrl(r+ls(o));this._platformLocation.pushState(t,i,s)}replaceState(t,i,r,o){const s=this.prepareExternalUrl(r+ls(o));this._platformLocation.replaceState(t,i,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(J(L0),J(YA,8))},n.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Zj=(()=>{class n extends Ga{constructor(t,i){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=i&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let i=this._platformLocation.hash;return null==i&&(i="#"),i.length>0?i.substring(1):i}prepareExternalUrl(t){const i=B0(this._baseHref,t);return i.length>0?"#"+i:i}pushState(t,i,r,o){let s=this.prepareExternalUrl(r+ls(o));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.pushState(t,i,s)}replaceState(t,i,r,o){let s=this.prepareExternalUrl(r+ls(o));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(t,i,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(J(L0),J(YA,8))},n.\u0275prov=ye({token:n,factory:n.\u0275fac}),n})(),qp=(()=>{class n{constructor(t){this._subject=new hn,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const i=this._locationStrategy.getBaseHref();this._basePath=function Jj(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(XA(KA(i))),this._locationStrategy.onPopState(r=>{this._subject.emit({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,i=""){return this.path()==this.normalize(t+ls(i))}normalize(t){return n.stripTrailingSlash(function Qj(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,KA(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,i="",r=null){this._locationStrategy.pushState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ls(i)),r)}replaceState(t,i="",r=null){this._locationStrategy.replaceState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ls(i)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)})),()=>{const i=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(i,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",i){this._urlChangeListeners.forEach(r=>r(t,i))}subscribe(t,i,r){return this._subject.subscribe({next:t,error:i,complete:r})}}return n.normalizeQueryParams=ls,n.joinWithSlash=B0,n.stripTrailingSlash=XA,n.\u0275fac=function(t){return new(t||n)(J(Ga))},n.\u0275prov=ye({token:n,factory:function(){return function Kj(){return new qp(J(Ga))}()},providedIn:"root"}),n})();function KA(n){return n.replace(/\/index.html$/,"")}function sI(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const i=t.indexOf("="),[r,o]=-1==i?[t,""]:[t.slice(0,i),t.slice(i+1)];if(r.trim()===e)return decodeURIComponent(o)}return null}const X0=/\s+/,aI=[];let qu=(()=>{class n{constructor(t,i,r,o){this._iterableDiffers=t,this._keyValueDiffers=i,this._ngEl=r,this._renderer=o,this.initialClasses=aI,this.stateMap=new Map}set klass(t){this.initialClasses=null!=t?t.trim().split(X0):aI}set ngClass(t){this.rawClass="string"==typeof t?t.trim().split(X0):t}ngDoCheck(){for(const i of this.initialClasses)this._updateState(i,!0);const t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(const i of t)this._updateState(i,!0);else if(null!=t)for(const i of Object.keys(t))this._updateState(i,!!t[i]);this._applyStateDiff()}_updateState(t,i){const r=this.stateMap.get(t);void 0!==r?(r.enabled!==i&&(r.changed=!0,r.enabled=i),r.touched=!0):this.stateMap.set(t,{enabled:i,changed:!0,touched:!0})}_applyStateDiff(){for(const t of this.stateMap){const i=t[0],r=t[1];r.changed?(this._toggleClass(i,r.enabled),r.changed=!1):r.touched||(r.enabled&&this._toggleClass(i,!1),this.stateMap.delete(i)),r.touched=!1}}_toggleClass(t,i){(t=t.trim()).length>0&&t.split(X0).forEach(r=>{i?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}}return n.\u0275fac=function(t){return new(t||n)(L(as),L(ju),L(ln),L(is))},n.\u0275dir=xe({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),n})();class B8{constructor(e,t,i,r){this.$implicit=e,this.ngForOf=t,this.index=i,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let ja=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,i,r){this._viewContainer=t,this._template=i,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const i=this._viewContainer;t.forEachOperation((r,o,s)=>{if(null==r.previousIndex)i.createEmbeddedView(this._template,new B8(r.item,this._ngForOf,-1,-1),null===s?void 0:s);else if(null==s)i.remove(null===o?void 0:o);else if(null!==o){const a=i.get(o);i.move(a,s),cI(a,r)}});for(let r=0,o=i.length;r<o;r++){const a=i.get(r).context;a.index=r,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(r=>{cI(i.get(r.currentIndex),r)})}static ngTemplateContextGuard(t,i){return!0}}return n.\u0275fac=function(t){return new(t||n)(L(wi),L(fi),L(as))},n.\u0275dir=xe({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function cI(n,e){n.context.$implicit=e.item}let No=(()=>{class n{constructor(t,i){this._viewContainer=t,this._context=new U8,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){dI("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){dI("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,i){return!0}}return n.\u0275fac=function(t){return new(t||n)(L(wi),L(fi))},n.\u0275dir=xe({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class U8{constructor(){this.$implicit=null,this.ngIf=null}}function dI(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${Wn(e)}'.`)}let hI=(()=>{class n{constructor(t){this._viewContainerRef=t,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(t){if(t.ngTemplateOutlet||t.ngTemplateOutletInjector){const i=this._viewContainerRef;if(this._viewRef&&i.remove(i.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:r,ngTemplateOutletContext:o,ngTemplateOutletInjector:s}=this;this._viewRef=i.createEmbeddedView(r,o,s?{injector:s}:void 0)}else this._viewRef=null}else this._viewRef&&t.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return n.\u0275fac=function(t){return new(t||n)(L(wi))},n.\u0275dir=xe({type:n,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[yi]}),n})(),ds=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=At({type:n}),n.\u0275inj=St({}),n})();const pI="browser";function mI(n){return"server"===n}let gW=(()=>{class n{}return n.\u0275prov=ye({token:n,providedIn:"root",factory:()=>new _W(J(Bt),window)}),n})();class _W{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function vW(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&"function"==typeof n.body.attachShadow){const i=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let r=i.currentNode;for(;r;){const o=r.shadowRoot;if(o){const s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}r=i.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),i=t.left+this.window.pageXOffset,r=t.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(i-o[0],r-o[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=gI(this.window.history)||gI(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function gI(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class _I{}class HW extends qj{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class ty extends HW{static makeCurrent(){!function $j(n){N0||(N0=n)}(new ty)}onAndCancel(e,t,i){return e.addEventListener(t,i),()=>{e.removeEventListener(t,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function zW(){return Yu=Yu||document.querySelector("base"),Yu?Yu.getAttribute("href"):null}();return null==t?null:function GW(n){om=om||document.createElement("a"),om.setAttribute("href",n);const e=om.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Yu=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return sI(document.cookie,e)}}let om,Yu=null,WW=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=ye({token:n,factory:n.\u0275fac}),n})();const ny=new he("EventManagerPlugins");let CI=(()=>{class n{constructor(t,i){this._zone=i,this._eventNameToPlugin=new Map,t.forEach(r=>{r.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,i,r){return this._findPluginFor(i).addEventListener(t,i,r)}getZone(){return this._zone}_findPluginFor(t){let i=this._eventNameToPlugin.get(t);if(i)return i;if(i=this._plugins.find(o=>o.supports(t)),!i)throw new ne(5101,!1);return this._eventNameToPlugin.set(t,i),i}}return n.\u0275fac=function(t){return new(t||n)(J(ny),J(Rt))},n.\u0275prov=ye({token:n,factory:n.\u0275fac}),n})();class MI{constructor(e){this._doc=e}}const iy="ng-app-id";let wI=(()=>{class n{constructor(t,i,r,o={}){this.doc=t,this.appId=i,this.nonce=r,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=mI(o),this.resetHostNodes()}addStyles(t){for(const i of t)1===this.changeUsageCount(i,1)&&this.onStyleAdded(i)}removeStyles(t){for(const i of t)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){const t=this.styleNodesInDOM;t&&(t.forEach(i=>i.remove()),t.clear());for(const i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const i of this.getAllStyles())this.addStyleToHost(t,i)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(const i of this.hostNodes)this.addStyleToHost(i,t)}onStyleRemoved(t){const i=this.styleRef;i.get(t)?.elements?.forEach(r=>r.remove()),i.delete(t)}collectServerRenderedStyles(){const t=this.doc.head?.querySelectorAll(`style[${iy}="${this.appId}"]`);if(t?.length){const i=new Map;return t.forEach(r=>{null!=r.textContent&&i.set(r.textContent,r)}),i}return null}changeUsageCount(t,i){const r=this.styleRef;if(r.has(t)){const o=r.get(t);return o.usage+=i,o.usage}return r.set(t,{usage:i,elements:[]}),i}getStyleElement(t,i){const r=this.styleNodesInDOM,o=r?.get(i);if(o?.parentNode===t)return r.delete(i),o.removeAttribute(iy),o;{const s=this.doc.createElement("style");return this.nonce&&s.setAttribute("nonce",this.nonce),s.textContent=i,this.platformIsServer&&s.setAttribute(iy,this.appId),s}}addStyleToHost(t,i){const r=this.getStyleElement(t,i);t.appendChild(r);const o=this.styleRef,s=o.get(i)?.elements;s?s.push(r):o.set(i,{elements:[r],usage:1})}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}}return n.\u0275fac=function(t){return new(t||n)(J(Bt),J(mp),J(ub,8),J($s))},n.\u0275prov=ye({token:n,factory:n.\u0275fac}),n})();const ry={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},oy=/%COMP%/g,YW=new he("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function EI(n,e){return e.map(t=>t.replace(oy,n))}let sy=(()=>{class n{constructor(t,i,r,o,s,a,l,c=null){this.eventManager=t,this.sharedStylesHost=i,this.appId=r,this.removeStylesOnCompDestory=o,this.doc=s,this.platformId=a,this.ngZone=l,this.nonce=c,this.rendererByCompId=new Map,this.platformIsServer=mI(a),this.defaultRenderer=new ay(t,s,l,this.platformIsServer)}createRenderer(t,i){if(!t||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===$i.ShadowDom&&(i={...i,encapsulation:$i.Emulated});const r=this.getOrCreateRenderer(t,i);return r instanceof DI?r.applyToHost(t):r instanceof ly&&r.applyStyles(),r}getOrCreateRenderer(t,i){const r=this.rendererByCompId;let o=r.get(i.id);if(!o){const s=this.doc,a=this.ngZone,l=this.eventManager,c=this.sharedStylesHost,d=this.removeStylesOnCompDestory,u=this.platformIsServer;switch(i.encapsulation){case $i.Emulated:o=new DI(l,c,i,this.appId,d,s,a,u);break;case $i.ShadowDom:return new JW(l,c,t,i,s,a,this.nonce,u);default:o=new ly(l,c,i,d,s,a,u)}o.onDestroy=()=>r.delete(i.id),r.set(i.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}}return n.\u0275fac=function(t){return new(t||n)(J(CI),J(wI),J(mp),J(YW),J(Bt),J($s),J(Rt),J(ub))},n.\u0275prov=ye({token:n,factory:n.\u0275fac}),n})();class ay{constructor(e,t,i,r){this.eventManager=e,this.doc=t,this.ngZone=i,this.platformIsServer=r,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(ry[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(TI(e)?e.content:e).appendChild(t)}insertBefore(e,t,i){e&&(TI(e)?e.content:e).insertBefore(t,i)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let i="string"==typeof e?this.doc.querySelector(e):e;if(!i)throw new ne(5104,!1);return t||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,i,r){if(r){t=r+":"+t;const o=ry[r];o?e.setAttributeNS(o,t,i):e.setAttribute(t,i)}else e.setAttribute(t,i)}removeAttribute(e,t,i){if(i){const r=ry[i];r?e.removeAttributeNS(r,t):e.removeAttribute(`${i}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,i,r){r&(Ki.DashCase|Ki.Important)?e.style.setProperty(t,i,r&Ki.Important?"important":""):e.style[t]=i}removeStyle(e,t,i){i&Ki.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,i){e[t]=i}setValue(e,t){e.nodeValue=t}listen(e,t,i){if("string"==typeof e&&!(e=Ks().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(i))}decoratePreventDefault(e){return t=>{if("__ngUnwrap__"===t)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))&&t.preventDefault()}}}function TI(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class JW extends ay{constructor(e,t,i,r,o,s,a,l){super(e,o,s,l),this.sharedStylesHost=t,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const c=EI(r.id,r.styles);for(const d of c){const u=document.createElement("style");a&&u.setAttribute("nonce",a),u.textContent=d,this.shadowRoot.appendChild(u)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,i){return super.insertBefore(this.nodeOrShadowRoot(e),t,i)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class ly extends ay{constructor(e,t,i,r,o,s,a,l){super(e,o,s,a),this.sharedStylesHost=t,this.removeStylesOnCompDestory=r,this.rendererUsageCount=0,this.styles=l?EI(l,i.styles):i.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount&&this.onDestroy?.())}}class DI extends ly{constructor(e,t,i,r,o,s,a,l){const c=r+"-"+i.id;super(e,t,i,o,s,a,l,c),this.contentAttr=function ZW(n){return"_ngcontent-%COMP%".replace(oy,n)}(c),this.hostAttr=function KW(n){return"_nghost-%COMP%".replace(oy,n)}(c)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const i=super.createElement(e,t);return super.setAttribute(i,this.contentAttr,""),i}}let e6=(()=>{class n extends MI{constructor(t){super(t)}supports(t){return!0}addEventListener(t,i,r){return t.addEventListener(i,r,!1),()=>this.removeEventListener(t,i,r)}removeEventListener(t,i,r){return t.removeEventListener(i,r)}}return n.\u0275fac=function(t){return new(t||n)(J(Bt))},n.\u0275prov=ye({token:n,factory:n.\u0275fac}),n})();const AI=["alt","control","meta","shift"],t6={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},n6={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let r6=(()=>{class n extends MI{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,i,r){const o=n.parseEventName(i),s=n.eventCallback(o.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Ks().onAndCancel(t,o.domEventName,s))}static parseEventName(t){const i=t.toLowerCase().split("."),r=i.shift();if(0===i.length||"keydown"!==r&&"keyup"!==r)return null;const o=n._normalizeKey(i.pop());let s="",a=i.indexOf("code");if(a>-1&&(i.splice(a,1),s="code."),AI.forEach(c=>{const d=i.indexOf(c);d>-1&&(i.splice(d,1),s+=c+".")}),s+=o,0!=i.length||0===o.length)return null;const l={};return l.domEventName=r,l.fullKey=s,l}static matchEventFullKeyCode(t,i){let r=t6[t.key]||t.key,o="";return i.indexOf("code.")>-1&&(r=t.code,o="code."),!(null==r||!r)&&(r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),AI.forEach(s=>{s!==r&&(0,n6[s])(t)&&(o+=s+".")}),o+=r,o===i)}static eventCallback(t,i,r){return o=>{n.matchEventFullKeyCode(o,t)&&r.runGuarded(()=>i(o))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(J(Bt))},n.\u0275prov=ye({token:n,factory:n.\u0275fac}),n})();const l6=wA(kj,"browser",[{provide:$s,useValue:pI},{provide:GE,useValue:function o6(){ty.makeCurrent()},multi:!0},{provide:Bt,useFactory:function a6(){return function uV(n){Zv=n}(document),document},deps:[]}]),c6=new he(""),PI=[{provide:zp,useClass:class jW{addToWindow(e){nn.getAngularTestability=(i,r=!0)=>{const o=e.findTestabilityInTree(i,r);if(null==o)throw new ne(5103,!1);return o},nn.getAllAngularTestabilities=()=>e.getAllTestabilities(),nn.getAllAngularRootElements=()=>e.getAllRootElements(),nn.frameworkStabilizers||(nn.frameworkStabilizers=[]),nn.frameworkStabilizers.push(i=>{const r=nn.getAllAngularTestabilities();let o=r.length,s=!1;const a=function(l){s=s||l,o--,0==o&&i(s)};r.forEach(function(l){l.whenStable(a)})})}findTestabilityInTree(e,t,i){return null==t?null:e.getTestability(t)??(i?Ks().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:bA,useClass:w0,deps:[Rt,S0,zp]},{provide:w0,useClass:w0,deps:[Rt,S0,zp]}],OI=[{provide:ob,useValue:"root"},{provide:Do,useFactory:function s6(){return new Do},deps:[]},{provide:ny,useClass:e6,multi:!0,deps:[Bt,Rt,$s]},{provide:ny,useClass:r6,multi:!0,deps:[Bt]},sy,wI,CI,{provide:wu,useExisting:sy},{provide:_I,useClass:WW,deps:[]},[]];let kI=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:mp,useValue:t.appId}]}}}return n.\u0275fac=function(t){return new(t||n)(J(c6,12))},n.\u0275mod=At({type:n}),n.\u0275inj=St({providers:[...OI,...PI],imports:[ds,Fj]}),n})(),FI=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(J(Bt))},n.\u0275prov=ye({token:n,factory:function(t){let i=null;return i=t?new t:function u6(){return new FI(J(Bt))}(),i},providedIn:"root"}),n})();typeof window<"u"&&window;let Zu=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=ye({token:n,factory:function(t){let i=null;return i=t?new(t||n):J(BI),i},providedIn:"root"}),n})(),BI=(()=>{class n extends Zu{constructor(t){super(),this._doc=t}sanitize(t,i){if(null==i)return null;switch(t){case jt.NONE:return i;case jt.HTML:return Eo(i,"HTML")?cr(i):PE(this._doc,String(i)).toString();case jt.STYLE:return Eo(i,"Style")?cr(i):i;case jt.SCRIPT:if(Eo(i,"Script"))return cr(i);throw new ne(5200,!1);case jt.URL:return Eo(i,"URL")?cr(i):dp(String(i));case jt.RESOURCE_URL:if(Eo(i,"ResourceURL"))return cr(i);throw new ne(5201,!1);default:throw new ne(5202,!1)}}bypassSecurityTrustHtml(t){return function vV(n){return new hV(n)}(t)}bypassSecurityTrustStyle(t){return function bV(n){return new fV(n)}(t)}bypassSecurityTrustScript(t){return function yV(n){return new pV(n)}(t)}bypassSecurityTrustUrl(t){return function xV(n){return new mV(n)}(t)}bypassSecurityTrustResourceUrl(t){return function CV(n){return new gV(n)}(t)}}return n.\u0275fac=function(t){return new(t||n)(J(Bt))},n.\u0275prov=ye({token:n,factory:function(t){let i=null;return i=t?new t:function m6(n){return new BI(n.get(Bt))}(J(ki)),i},providedIn:"root"}),n})();const{isArray:g6}=Array,{getPrototypeOf:_6,prototype:v6,keys:b6}=Object;function HI(n){if(1===n.length){const e=n[0];if(g6(e))return{args:e,keys:null};if(function y6(n){return n&&"object"==typeof n&&_6(n)===v6}(e)){const t=b6(e);return{args:t.map(i=>e[i]),keys:t}}}return{args:n,keys:null}}const{isArray:x6}=Array;function dy(n){return wt(e=>function C6(n,e){return x6(e)?n(...e):n(e)}(n,e))}function zI(n,e){return n.reduce((t,i,r)=>(t[i]=e[r],t),{})}function sm(...n){const e=Zd(n),t=_w(n),{args:i,keys:r}=HI(n);if(0===i.length)return kn([],e);const o=new sn(function M6(n,e,t=Bs){return i=>{GI(e,()=>{const{length:r}=n,o=new Array(r);let s=r,a=r;for(let l=0;l<r;l++)GI(e,()=>{const c=kn(n[l],e);let d=!1;c.subscribe(mn(i,u=>{o[l]=u,d||(d=!0,a--),a||i.next(t(o.slice()))},()=>{--s||i.complete()}))},i)},i)}}(i,e,r?s=>zI(r,s):Bs));return t?o.pipe(dy(t)):o}function GI(n,e,t){n?Zo(t,n,e):e()}const am=Xd(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function lm(...n){return function w6(){return zl(1)}()(kn(n,Zd(n)))}function jI(n){return new sn(e=>{Ri(n()).subscribe(e)})}function Fc(n,e){const t=Lt(n)?n:()=>n,i=r=>r.error(t());return new sn(e?r=>e.schedule(i,0,r):i)}function uy(){return Dn((n,e)=>{let t=null;n._refCount++;const i=mn(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const r=n._connection,o=t;t=null,r&&(!o||r===o)&&r.unsubscribe(),e.unsubscribe()});n.subscribe(i),i.closed||(t=n.connect())})}class hy extends sn{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,nw(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new di;const t=this.getSubject();e.add(this.source.subscribe(mn(t,void 0,()=>{this._teardown(),t.complete()},i=>{this._teardown(),t.error(i)},()=>this._teardown()))),e.closed&&(this._connection=null,e=di.EMPTY)}return e}refCount(){return uy()(this)}}function Jr(n){return n<=0?()=>_o:Dn((e,t)=>{let i=0;e.subscribe(mn(t,r=>{++i<=n&&(t.next(r),n<=i&&t.complete())}))})}function WI(...n){const e=Zd(n);return Dn((t,i)=>{(e?lm(n,t,e):lm(n,t)).subscribe(i)})}function Si(n,e){return Dn((t,i)=>{let r=0;t.subscribe(mn(i,o=>n.call(e,o,r++)&&i.next(o)))})}function cm(n){return Dn((e,t)=>{let i=!1;e.subscribe(mn(t,r=>{i=!0,t.next(r)},()=>{i||t.next(n),t.complete()}))})}function $I(n=S6){return Dn((e,t)=>{let i=!1;e.subscribe(mn(t,r=>{i=!0,t.next(r)},()=>i?t.complete():t.error(n())))})}function S6(){return new am}function Wa(n,e){const t=arguments.length>=2;return i=>i.pipe(n?Si((r,o)=>n(r,o,i)):Bs,Jr(1),t?cm(e):$I(()=>new am))}function Nc(n,e){return Lt(e)?ei(n,e,1):ei(n,1)}function ri(n,e,t){const i=Lt(n)||e||t?{next:n,error:e,complete:t}:n;return i?Dn((r,o)=>{var s;null===(s=i.subscribe)||void 0===s||s.call(i);let a=!0;r.subscribe(mn(o,l=>{var c;null===(c=i.next)||void 0===c||c.call(i,l),o.next(l)},()=>{var l;a=!1,null===(l=i.complete)||void 0===l||l.call(i),o.complete()},l=>{var c;a=!1,null===(c=i.error)||void 0===c||c.call(i,l),o.error(l)},()=>{var l,c;a&&(null===(l=i.unsubscribe)||void 0===l||l.call(i)),null===(c=i.finalize)||void 0===c||c.call(i)}))}):Bs}function Js(n){return Dn((e,t)=>{let o,i=null,r=!1;i=e.subscribe(mn(t,void 0,void 0,s=>{o=Ri(n(s,Js(n)(e))),i?(i.unsubscribe(),i=null,o.subscribe(t)):r=!0})),r&&(i.unsubscribe(),i=null,o.subscribe(t))})}function fy(n){return n<=0?()=>_o:Dn((e,t)=>{let i=[];e.subscribe(mn(t,r=>{i.push(r),n<i.length&&i.shift()},()=>{for(const r of i)t.next(r);t.complete()},void 0,()=>{i=null}))})}function $a(n){return Dn((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const _t="primary",Ku=Symbol("RouteTitle");class I6{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Lc(n){return new I6(n)}function R6(n,e,t){const i=t.path.split("/");if(i.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||i.length<n.length))return null;const r={};for(let o=0;o<i.length;o++){const s=i[o],a=n[o];if(s.startsWith(":"))r[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function Lo(n,e){const t=n?Object.keys(n):void 0,i=e?Object.keys(e):void 0;if(!t||!i||t.length!=i.length)return!1;let r;for(let o=0;o<t.length;o++)if(r=t[o],!qI(n[r],e[r]))return!1;return!0}function qI(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),i=[...e].sort();return t.every((r,o)=>i[o]===r)}return n===e}function XI(n){return n.length>0?n[n.length-1]:null}function ea(n){return function VI(n){return!!n&&(n instanceof sn||Lt(n.lift)&&Lt(n.subscribe))}(n)?n:ku(n)?kn(Promise.resolve(n)):Ye(n)}const O6={exact:function KI(n,e,t){if(!qa(n.segments,e.segments)||!dm(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const i in e.children)if(!n.children[i]||!KI(n.children[i],e.children[i],t))return!1;return!0},subset:QI},YI={exact:function k6(n,e){return Lo(n,e)},subset:function F6(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>qI(n[t],e[t]))},ignored:()=>!0};function ZI(n,e,t){return O6[t.paths](n.root,e.root,t.matrixParams)&&YI[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function QI(n,e,t){return JI(n,e,e.segments,t)}function JI(n,e,t,i){if(n.segments.length>t.length){const r=n.segments.slice(0,t.length);return!(!qa(r,t)||e.hasChildren()||!dm(r,t,i))}if(n.segments.length===t.length){if(!qa(n.segments,t)||!dm(n.segments,t,i))return!1;for(const r in e.children)if(!n.children[r]||!QI(n.children[r],e.children[r],i))return!1;return!0}{const r=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!!(qa(n.segments,r)&&dm(n.segments,r,i)&&n.children[_t])&&JI(n.children[_t],e,o,i)}}function dm(n,e,t){return e.every((i,r)=>YI[t](n[r].parameters,i.parameters))}class Bc{constructor(e=new Zt([],{}),t={},i=null){this.root=e,this.queryParams=t,this.fragment=i}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Lc(this.queryParams)),this._queryParamMap}toString(){return B6.serialize(this)}}class Zt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return um(this)}}class Qu{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Lc(this.parameters)),this._parameterMap}toString(){return nR(this)}}function qa(n,e){return n.length===e.length&&n.every((t,i)=>t.path===e[i].path)}let Ju=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=ye({token:n,factory:function(){return new py},providedIn:"root"}),n})();class py{parse(e){const t=new Y6(e);return new Bc(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${eh(e.root,!0)}`,i=function H6(n){const e=Object.keys(n).map(t=>{const i=n[t];return Array.isArray(i)?i.map(r=>`${hm(t)}=${hm(r)}`).join("&"):`${hm(t)}=${hm(i)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${i}${"string"==typeof e.fragment?`#${function U6(n){return encodeURI(n)}(e.fragment)}`:""}`}}const B6=new py;function um(n){return n.segments.map(e=>nR(e)).join("/")}function eh(n,e){if(!n.hasChildren())return um(n);if(e){const t=n.children[_t]?eh(n.children[_t],!1):"",i=[];return Object.entries(n.children).forEach(([r,o])=>{r!==_t&&i.push(`${r}:${eh(o,!1)}`)}),i.length>0?`${t}(${i.join("//")})`:t}{const t=function L6(n,e){let t=[];return Object.entries(n.children).forEach(([i,r])=>{i===_t&&(t=t.concat(e(r,i)))}),Object.entries(n.children).forEach(([i,r])=>{i!==_t&&(t=t.concat(e(r,i)))}),t}(n,(i,r)=>r===_t?[eh(n.children[_t],!1)]:[`${r}:${eh(i,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[_t]?`${um(n)}/${t[0]}`:`${um(n)}/(${t.join("//")})`}}function eR(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function hm(n){return eR(n).replace(/%3B/gi,";")}function my(n){return eR(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function fm(n){return decodeURIComponent(n)}function tR(n){return fm(n.replace(/\+/g,"%20"))}function nR(n){return`${my(n.path)}${function V6(n){return Object.keys(n).map(e=>`;${my(e)}=${my(n[e])}`).join("")}(n.parameters)}`}const z6=/^[^\/()?;#]+/;function gy(n){const e=n.match(z6);return e?e[0]:""}const G6=/^[^\/()?;=#]+/,W6=/^[^=?&#]+/,q6=/^[^&#]+/;class Y6{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Zt([],{}):new Zt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(i[_t]=new Zt(e,t)),i}parseSegment(){const e=gy(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new ne(4009,!1);return this.capture(e),new Qu(fm(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=function j6(n){const e=n.match(G6);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){const r=gy(this.remaining);r&&(i=r,this.capture(i))}e[fm(t)]=fm(i)}parseQueryParam(e){const t=function $6(n){const e=n.match(W6);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){const s=function X6(n){const e=n.match(q6);return e?e[0]:""}(this.remaining);s&&(i=s,this.capture(i))}const r=tR(t),o=tR(i);if(e.hasOwnProperty(r)){let s=e[r];Array.isArray(s)||(s=[s],e[r]=s),s.push(o)}else e[r]=o}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const i=gy(this.remaining),r=this.remaining[i.length];if("/"!==r&&")"!==r&&";"!==r)throw new ne(4010,!1);let o;i.indexOf(":")>-1?(o=i.slice(0,i.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=_t);const s=this.parseChildren();t[o]=1===Object.keys(s).length?s[_t]:new Zt([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new ne(4011,!1)}}function iR(n){return n.segments.length>0?new Zt([],{[_t]:n}):n}function rR(n){const e={};for(const i of Object.keys(n.children)){const o=rR(n.children[i]);if(i===_t&&0===o.segments.length&&o.hasChildren())for(const[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[i]=o)}return function Z6(n){if(1===n.numberOfChildren&&n.children[_t]){const e=n.children[_t];return new Zt(n.segments.concat(e.segments),e.children)}return n}(new Zt(n.segments,e))}function Xa(n){return n instanceof Bc}function oR(n){let e;const r=iR(function t(o){const s={};for(const l of o.children){const c=t(l);s[l.outlet]=c}const a=new Zt(o.url,s);return o===n&&(e=a),a}(n.root));return e??r}function sR(n,e,t,i){let r=n;for(;r.parent;)r=r.parent;if(0===e.length)return _y(r,r,r,t,i);const o=function Q6(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new lR(!0,0,n);let e=0,t=!1;const i=n.reduce((r,o,s)=>{if("object"==typeof o&&null!=o){if(o.outlets){const a={};return Object.entries(o.outlets).forEach(([l,c])=>{a[l]="string"==typeof c?c.split("/"):c}),[...r,{outlets:a}]}if(o.segmentPath)return[...r,o.segmentPath]}return"string"!=typeof o?[...r,o]:0===s?(o.split("/").forEach((a,l)=>{0==l&&"."===a||(0==l&&""===a?t=!0:".."===a?e++:""!=a&&r.push(a))}),r):[...r,o]},[]);return new lR(t,e,i)}(e);if(o.toRoot())return _y(r,r,new Zt([],{}),t,i);const s=function J6(n,e,t){if(n.isAbsolute)return new mm(e,!0,0);if(!t)return new mm(e,!1,NaN);if(null===t.parent)return new mm(t,!0,0);const i=pm(n.commands[0])?0:1;return function e$(n,e,t){let i=n,r=e,o=t;for(;o>r;){if(o-=r,i=i.parent,!i)throw new ne(4005,!1);r=i.segments.length}return new mm(i,!1,r-o)}(t,t.segments.length-1+i,n.numberOfDoubleDots)}(o,r,n),a=s.processChildren?nh(s.segmentGroup,s.index,o.commands):cR(s.segmentGroup,s.index,o.commands);return _y(r,s.segmentGroup,a,t,i)}function pm(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function th(n){return"object"==typeof n&&null!=n&&n.outlets}function _y(n,e,t,i,r){let s,o={};i&&Object.entries(i).forEach(([l,c])=>{o[l]=Array.isArray(c)?c.map(d=>`${d}`):`${c}`}),s=n===e?t:aR(n,e,t);const a=iR(rR(s));return new Bc(a,o,r)}function aR(n,e,t){const i={};return Object.entries(n.children).forEach(([r,o])=>{i[r]=o===e?t:aR(o,e,t)}),new Zt(n.segments,i)}class lR{constructor(e,t,i){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=i,e&&i.length>0&&pm(i[0]))throw new ne(4003,!1);const r=i.find(th);if(r&&r!==XI(i))throw new ne(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class mm{constructor(e,t,i){this.segmentGroup=e,this.processChildren=t,this.index=i}}function cR(n,e,t){if(n||(n=new Zt([],{})),0===n.segments.length&&n.hasChildren())return nh(n,e,t);const i=function n$(n,e,t){let i=0,r=e;const o={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=t.length)return o;const s=n.segments[r],a=t[i];if(th(a))break;const l=`${a}`,c=i<t.length-1?t[i+1]:null;if(r>0&&void 0===l)break;if(l&&c&&"object"==typeof c&&void 0===c.outlets){if(!uR(l,c,s))return o;i+=2}else{if(!uR(l,{},s))return o;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}(n,e,t),r=t.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){const o=new Zt(n.segments.slice(0,i.pathIndex),{});return o.children[_t]=new Zt(n.segments.slice(i.pathIndex),n.children),nh(o,0,r)}return i.match&&0===r.length?new Zt(n.segments,{}):i.match&&!n.hasChildren()?vy(n,e,t):i.match?nh(n,0,r):vy(n,e,t)}function nh(n,e,t){if(0===t.length)return new Zt(n.segments,{});{const i=function t$(n){return th(n[0])?n[0].outlets:{[_t]:n}}(t),r={};if(!i[_t]&&n.children[_t]&&1===n.numberOfChildren&&0===n.children[_t].segments.length){const o=nh(n.children[_t],e,t);return new Zt(n.segments,o.children)}return Object.entries(i).forEach(([o,s])=>{"string"==typeof s&&(s=[s]),null!==s&&(r[o]=cR(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{void 0===i[o]&&(r[o]=s)}),new Zt(n.segments,r)}}function vy(n,e,t){const i=n.segments.slice(0,e);let r=0;for(;r<t.length;){const o=t[r];if(th(o)){const l=i$(o.outlets);return new Zt(i,l)}if(0===r&&pm(t[0])){i.push(new Qu(n.segments[e].path,dR(t[0]))),r++;continue}const s=th(o)?o.outlets[_t]:`${o}`,a=r<t.length-1?t[r+1]:null;s&&a&&pm(a)?(i.push(new Qu(s,dR(a))),r+=2):(i.push(new Qu(s,{})),r++)}return new Zt(i,{})}function i$(n){const e={};return Object.entries(n).forEach(([t,i])=>{"string"==typeof i&&(i=[i]),null!==i&&(e[t]=vy(new Zt([],{}),0,i))}),e}function dR(n){const e={};return Object.entries(n).forEach(([t,i])=>e[t]=`${i}`),e}function uR(n,e,t){return n==t.path&&Lo(e,t.parameters)}const ih="imperative";class Bo{constructor(e,t){this.id=e,this.url=t}}class by extends Bo{constructor(e,t,i="imperative",r=null){super(e,t),this.type=0,this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Ya extends Bo{constructor(e,t,i){super(e,t),this.urlAfterRedirects=i,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class gm extends Bo{constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class rh extends Bo{constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r,this.type=16}}class yy extends Bo{constructor(e,t,i,r){super(e,t),this.error=i,this.target=r,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class r$ extends Bo{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class o$ extends Bo{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class s$ extends Bo{constructor(e,t,i,r,o){super(e,t),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=o,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class a$ extends Bo{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class l$ extends Bo{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class c${constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class d${constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class u${constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class h${constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class f${constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class p${constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class hR{constructor(e,t,i){this.routerEvent=e,this.position=t,this.anchor=i,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class m${constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new oh,this.attachRef=null}}let oh=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,i){const r=this.getOrCreateContext(t);r.outlet=i,this.contexts.set(t,r)}onChildOutletDestroyed(t){const i=this.getContext(t);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let i=this.getContext(t);return i||(i=new m$,this.contexts.set(t,i)),i}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class fR{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=xy(e,this._root);return t?t.children.map(i=>i.value):[]}firstChild(e){const t=xy(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Cy(e,this._root);return t.length<2?[]:t[t.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return Cy(e,this._root).map(t=>t.value)}}function xy(n,e){if(n===e.value)return e;for(const t of e.children){const i=xy(n,t);if(i)return i}return null}function Cy(n,e){if(n===e.value)return[e];for(const t of e.children){const i=Cy(n,t);if(i.length)return i.unshift(e),i}return[]}class us{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Uc(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class pR extends fR{constructor(e,t){super(e),this.snapshot=t,My(this,e)}toString(){return this.snapshot.toString()}}function mR(n,e){const t=function g$(n,e){const s=new _m([],{},{},"",{},_t,e,null,{});return new _R("",new us(s,[]))}(0,e),i=new ui([new Qu("",{})]),r=new ui({}),o=new ui({}),s=new ui({}),a=new ui(""),l=new eo(i,r,s,a,o,_t,e,t.root);return l.snapshot=t.root,new pR(new us(l,[]),t)}class eo{constructor(e,t,i,r,o,s,a,l){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=i,this.fragmentSubject=r,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(wt(c=>c[Ku]))??Ye(void 0),this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(wt(e=>Lc(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(wt(e=>Lc(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function gR(n,e="emptyOnly"){const t=n.pathFromRoot;let i=0;if("always"!==e)for(i=t.length-1;i>=1;){const r=t[i],o=t[i-1];if(r.routeConfig&&""===r.routeConfig.path)i--;else{if(o.component)break;i--}}return function _$(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(i))}class _m{get title(){return this.data?.[Ku]}constructor(e,t,i,r,o,s,a,l,c){this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=o,this.outlet=s,this.component=a,this.routeConfig=l,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Lc(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Lc(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(i=>i.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class _R extends fR{constructor(e,t){super(t),this.url=e,My(this,t)}toString(){return vR(this._root)}}function My(n,e){e.value._routerState=n,e.children.forEach(t=>My(n,t))}function vR(n){const e=n.children.length>0?` { ${n.children.map(vR).join(", ")} } `:"";return`${n.value}${e}`}function wy(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Lo(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Lo(e.params,t.params)||n.paramsSubject.next(t.params),function P6(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Lo(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.urlSubject.next(t.url),Lo(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function Sy(n,e){const t=Lo(n.params,e.params)&&function N6(n,e){return qa(n,e)&&n.every((t,i)=>Lo(t.parameters,e[i].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||Sy(n.parent,e.parent))}let Ey=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=_t,this.activateEvents=new hn,this.deactivateEvents=new hn,this.attachEvents=new hn,this.detachEvents=new hn,this.parentContexts=Te(oh),this.location=Te(wi),this.changeDetector=Te(Oc),this.environmentInjector=Te(To),this.inputBinder=Te(vm,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){const{firstChange:i,previousValue:r}=t.name;if(i)return;this.isTrackedInParentContexts(r)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(r)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new ne(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new ne(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new ne(4012,!1);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,i){this.activated=t,this._activatedRoute=i,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,i){if(this.isActivated)throw new ne(4013,!1);this._activatedRoute=t;const r=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,l=new v$(t,a,r.injector);this.activated=r.createComponent(s,{index:r.length,injector:l,environmentInjector:i??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=xe({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[yi]}),n})();class v${constructor(e,t,i){this.route=e,this.childContexts=t,this.parent=i}get(e,t){return e===eo?this.route:e===oh?this.childContexts:this.parent.get(e,t)}}const vm=new he("");let bR=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){const{activatedRoute:i}=t,r=sm([i.queryParams,i.params,i.data]).pipe(jr(([o,s,a],l)=>(a={...o,...s,...a},0===l?Ye(a):Promise.resolve(a)))).subscribe(o=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==i||null===i.component)return void this.unsubscribeFromRouteData(t);const s=function Wj(n){const e=$t(n);if(!e)return null;const t=new Au(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}(i.component);if(s)for(const{templateName:a}of s.inputs)t.activatedComponentRef.setInput(a,o[a]);else this.unsubscribeFromRouteData(t)});this.outletDataSubscriptions.set(t,r)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=ye({token:n,factory:n.\u0275fac}),n})();function sh(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const i=t.value;i._futureSnapshot=e.value;const r=function y$(n,e,t){return e.children.map(i=>{for(const r of t.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return sh(n,i,r);return sh(n,i)})}(n,e,t);return new us(i,r)}{if(n.shouldAttach(e.value)){const o=n.retrieve(e.value);if(null!==o){const s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>sh(n,a)),s}}const i=function x$(n){return new eo(new ui(n.url),new ui(n.params),new ui(n.queryParams),new ui(n.fragment),new ui(n.data),n.outlet,n.component,n)}(e.value),r=e.children.map(o=>sh(n,o));return new us(i,r)}}const Ty="ngNavigationCancelingError";function yR(n,e){const{redirectTo:t,navigationBehaviorOptions:i}=Xa(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,r=xR(!1,0,e);return r.url=t,r.navigationBehaviorOptions=i,r}function xR(n,e,t){const i=new Error("NavigationCancelingError: "+(n||""));return i[Ty]=!0,i.cancellationCode=e,t&&(i.url=t),i}function CR(n){return MR(n)&&Xa(n.url)}function MR(n){return n&&n[Ty]}let wR=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=yt({type:n,selectors:[["ng-component"]],standalone:!0,features:[Bp],decls:1,vars:0,template:function(t,i){1&t&&Ie(0,"router-outlet")},dependencies:[Ey],encapsulation:2}),n})();function Dy(n){const e=n.children&&n.children.map(Dy),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==_t&&(t.component=wR),t}function to(n){return n.outlet||_t}function ah(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class D${constructor(e,t,i,r,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=i,this.forwardEvent=r,this.inputBindingEnabled=o}activate(e){const t=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,i,e),wy(this.futureState.root),this.activateChildRoutes(t,i,e)}deactivateChildRoutes(e,t,i){const r=Uc(t);e.children.forEach(o=>{const s=o.value.outlet;this.deactivateRoutes(o,r[s],i),delete r[s]}),Object.values(r).forEach(o=>{this.deactivateRouteAndItsChildren(o,i)})}deactivateRoutes(e,t,i){const r=e.value,o=t?t.value:null;if(r===o)if(r.component){const s=i.getContext(r.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,i);else o&&this.deactivateRouteAndItsChildren(t,i)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,o=Uc(e);for(const s of Object.keys(o))this.deactivateRouteAndItsChildren(o[s],r);if(i&&i.outlet){const s=i.outlet.detach(),a=i.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){const i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,o=Uc(e);for(const s of Object.keys(o))this.deactivateRouteAndItsChildren(o[s],r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(e,t,i){const r=Uc(t);e.children.forEach(o=>{this.activateRoutes(o,r[o.value.outlet],i),this.forwardEvent(new p$(o.value.snapshot))}),e.children.length&&this.forwardEvent(new h$(e.value.snapshot))}activateRoutes(e,t,i){const r=e.value,o=t?t.value:null;if(wy(r),r===o)if(r.component){const s=i.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,i);else if(r.component){const s=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),wy(a.route.value),this.activateChildRoutes(e,null,s.children)}else{const a=ah(r.snapshot);s.attachRef=null,s.route=r,s.injector=a,s.outlet&&s.outlet.activateWith(r,s.injector),this.activateChildRoutes(e,null,s.children)}}else this.activateChildRoutes(e,null,i)}}class SR{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class bm{constructor(e,t){this.component=e,this.route=t}}function A$(n,e,t){const i=n._root;return lh(i,e?e._root:null,t,[i.value])}function Vc(n,e){const t=Symbol(),i=e.get(n,t);return i===t?"function"!=typeof n||function PB(n){return null!==Tf(n)}(n)?e.get(n):n:i}function lh(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const o=Uc(e);return n.children.forEach(s=>{(function R$(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){const l=function P$(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!qa(n.url,e.url);case"pathParamsOrQueryParamsChange":return!qa(n.url,e.url)||!Lo(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Sy(n,e)||!Lo(n.queryParams,e.queryParams);default:return!Sy(n,e)}}(s,o,o.routeConfig.runGuardsAndResolvers);l?r.canActivateChecks.push(new SR(i)):(o.data=s.data,o._resolvedData=s._resolvedData),lh(n,e,o.component?a?a.children:null:t,i,r),l&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new bm(a.outlet.component,s))}else s&&ch(e,a,r),r.canActivateChecks.push(new SR(i)),lh(n,null,o.component?a?a.children:null:t,i,r)})(s,o[s.value.outlet],t,i.concat([s.value]),r),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>ch(a,t.getContext(s),r)),r}function ch(n,e,t){const i=Uc(n),r=n.value;Object.entries(i).forEach(([o,s])=>{ch(s,r.component?e?e.children.getContext(o):null:e,t)}),t.canDeactivateChecks.push(new bm(r.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,r))}function dh(n){return"function"==typeof n}function ER(n){return n instanceof am||"EmptyError"===n?.name}const ym=Symbol("INITIAL_VALUE");function Hc(){return jr(n=>sm(n.map(e=>e.pipe(Jr(1),WI(ym)))).pipe(wt(e=>{for(const t of e)if(!0!==t){if(t===ym)return ym;if(!1===t||t instanceof Bc)return t}return!0}),Si(e=>e!==ym),Jr(1)))}function TR(n){return function UL(...n){return JM(n)}(ri(e=>{if(Xa(e))throw yR(0,e)}),wt(e=>!0===e))}class xm{constructor(e){this.segmentGroup=e||null}}class DR{constructor(e){this.urlTree=e}}function zc(n){return Fc(new xm(n))}function AR(n){return Fc(new DR(n))}class Q${constructor(e,t){this.urlSerializer=e,this.urlTree=t}noMatchError(e){return new ne(4002,!1)}lineralizeSegments(e,t){let i=[],r=t.root;for(;;){if(i=i.concat(r.segments),0===r.numberOfChildren)return Ye(i);if(r.numberOfChildren>1||!r.children[_t])return Fc(new ne(4e3,!1));r=r.children[_t]}}applyRedirectCommands(e,t,i){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,i)}applyRedirectCreateUrlTree(e,t,i,r){const o=this.createSegmentGroup(e,t.root,i,r);return new Bc(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const i={};return Object.entries(e).forEach(([r,o])=>{if("string"==typeof o&&o.startsWith(":")){const a=o.substring(1);i[r]=t[a]}else i[r]=o}),i}createSegmentGroup(e,t,i,r){const o=this.createSegments(e,t.segments,i,r);let s={};return Object.entries(t.children).forEach(([a,l])=>{s[a]=this.createSegmentGroup(e,l,i,r)}),new Zt(o,s)}createSegments(e,t,i,r){return t.map(o=>o.path.startsWith(":")?this.findPosParam(e,o,r):this.findOrReturn(o,i))}findPosParam(e,t,i){const r=i[t.path.substring(1)];if(!r)throw new ne(4001,!1);return r}findOrReturn(e,t){let i=0;for(const r of t){if(r.path===e.path)return t.splice(i),r;i++}return e}}const Ay={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function J$(n,e,t,i,r){const o=Iy(n,e,t);return o.matched?(i=function C$(n,e){return n.providers&&!n._injector&&(n._injector=n0(n.providers,e,`Route: ${n.path}`)),n._injector??e}(e,i),function Y$(n,e,t,i){const r=e.canMatch;return r&&0!==r.length?Ye(r.map(s=>{const a=Vc(s,n);return ea(function B$(n){return n&&dh(n.canMatch)}(a)?a.canMatch(e,t):n.runInContext(()=>a(e,t)))})).pipe(Hc(),TR()):Ye(!0)}(i,e,t).pipe(wt(s=>!0===s?o:{...Ay}))):Ye(o)}function Iy(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...Ay}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const r=(e.matcher||R6)(t,n,e);if(!r)return{...Ay};const o={};Object.entries(r.posParams??{}).forEach(([a,l])=>{o[a]=l.path});const s=r.consumed.length>0?{...o,...r.consumed[r.consumed.length-1].parameters}:o;return{matched:!0,consumedSegments:r.consumed,remainingSegments:t.slice(r.consumed.length),parameters:s,positionalParamSegments:r.posParams??{}}}function IR(n,e,t,i){return t.length>0&&function n9(n,e,t){return t.some(i=>Cm(n,e,i)&&to(i)!==_t)}(n,t,i)?{segmentGroup:new Zt(e,t9(i,new Zt(t,n.children))),slicedSegments:[]}:0===t.length&&function i9(n,e,t){return t.some(i=>Cm(n,e,i))}(n,t,i)?{segmentGroup:new Zt(n.segments,e9(n,0,t,i,n.children)),slicedSegments:t}:{segmentGroup:new Zt(n.segments,n.children),slicedSegments:t}}function e9(n,e,t,i,r){const o={};for(const s of i)if(Cm(n,t,s)&&!r[to(s)]){const a=new Zt([],{});o[to(s)]=a}return{...r,...o}}function t9(n,e){const t={};t[_t]=e;for(const i of n)if(""===i.path&&to(i)!==_t){const r=new Zt([],{});t[to(i)]=r}return t}function Cm(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}class a9{constructor(e,t,i,r,o,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=i,this.config=r,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.allowRedirects=!0,this.applyRedirects=new Q$(this.urlSerializer,this.urlTree)}noMatchError(e){return new ne(4002,!1)}recognize(){const e=IR(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,_t).pipe(Js(t=>{if(t instanceof DR)return this.allowRedirects=!1,this.urlTree=t.urlTree,this.match(t.urlTree);throw t instanceof xm?this.noMatchError(t):t}),wt(t=>{const i=new _m([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},_t,this.rootComponentType,null,{}),r=new us(i,t),o=new _R("",r),s=function K6(n,e,t=null,i=null){return sR(oR(n),e,t,i)}(i,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),this.inheritParamsAndData(o._root),{state:o,tree:s}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e.root,_t).pipe(Js(i=>{throw i instanceof xm?this.noMatchError(i):i}))}inheritParamsAndData(e){const t=e.value,i=gR(t,this.paramsInheritanceStrategy);t.params=Object.freeze(i.params),t.data=Object.freeze(i.data),e.children.forEach(r=>this.inheritParamsAndData(r))}processSegmentGroup(e,t,i,r){return 0===i.segments.length&&i.hasChildren()?this.processChildren(e,t,i):this.processSegment(e,t,i,i.segments,r,!0)}processChildren(e,t,i){const r=[];for(const o of Object.keys(i.children))"primary"===o?r.unshift(o):r.push(o);return kn(r).pipe(Nc(o=>{const s=i.children[o],a=function E$(n,e){const t=n.filter(i=>to(i)===e);return t.push(...n.filter(i=>to(i)!==e)),t}(t,o);return this.processSegmentGroup(e,a,s,o)}),function T6(n,e){return Dn(function E6(n,e,t,i,r){return(o,s)=>{let a=t,l=e,c=0;o.subscribe(mn(s,d=>{const u=c++;l=a?n(l,d,u):(a=!0,d),i&&s.next(l)},r&&(()=>{a&&s.next(l),s.complete()})))}}(n,e,arguments.length>=2,!0))}((o,s)=>(o.push(...s),o)),cm(null),function D6(n,e){const t=arguments.length>=2;return i=>i.pipe(n?Si((r,o)=>n(r,o,i)):Bs,fy(1),t?cm(e):$I(()=>new am))}(),ei(o=>{if(null===o)return zc(i);const s=RR(o);return function l9(n){n.sort((e,t)=>e.value.outlet===_t?-1:t.value.outlet===_t?1:e.value.outlet.localeCompare(t.value.outlet))}(s),Ye(s)}))}processSegment(e,t,i,r,o,s){return kn(t).pipe(Nc(a=>this.processSegmentAgainstRoute(a._injector??e,t,a,i,r,o,s).pipe(Js(l=>{if(l instanceof xm)return Ye(null);throw l}))),Wa(a=>!!a),Js(a=>{if(ER(a))return function o9(n,e,t){return 0===e.length&&!n.children[t]}(i,r,o)?Ye([]):zc(i);throw a}))}processSegmentAgainstRoute(e,t,i,r,o,s,a){return function r9(n,e,t,i){return!!(to(n)===i||i!==_t&&Cm(e,t,n))&&("**"===n.path||Iy(e,n,t).matched)}(i,r,o,s)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,r,i,o,s,a):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,r,t,i,o,s):zc(r):zc(r)}expandSegmentAgainstRouteUsingRedirect(e,t,i,r,o,s){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,i,r,s):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,i,r,o,s)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,i,r){const o=this.applyRedirects.applyRedirectCommands([],i.redirectTo,{});return i.redirectTo.startsWith("/")?AR(o):this.applyRedirects.lineralizeSegments(i,o).pipe(ei(s=>{const a=new Zt(s,{});return this.processSegment(e,t,a,s,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,i,r,o,s){const{matched:a,consumedSegments:l,remainingSegments:c,positionalParamSegments:d}=Iy(t,r,o);if(!a)return zc(t);const u=this.applyRedirects.applyRedirectCommands(l,r.redirectTo,d);return r.redirectTo.startsWith("/")?AR(u):this.applyRedirects.lineralizeSegments(r,u).pipe(ei(h=>this.processSegment(e,i,t,h.concat(c),s,!1)))}matchSegmentAgainstRoute(e,t,i,r,o,s){let a;if("**"===i.path){const l=r.length>0?XI(r).parameters:{};a=Ye({snapshot:new _m(r,l,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,PR(i),to(i),i.component??i._loadedComponent??null,i,OR(i)),consumedSegments:[],remainingSegments:[]}),t.children={}}else a=J$(t,i,r,e).pipe(wt(({matched:l,consumedSegments:c,remainingSegments:d,parameters:u})=>l?{snapshot:new _m(c,u,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,PR(i),to(i),i.component??i._loadedComponent??null,i,OR(i)),consumedSegments:c,remainingSegments:d}:null));return a.pipe(jr(l=>null===l?zc(t):this.getChildConfig(e=i._injector??e,i,r).pipe(jr(({routes:c})=>{const d=i._loadedInjector??e,{snapshot:u,consumedSegments:h,remainingSegments:f}=l,{segmentGroup:p,slicedSegments:_}=IR(t,h,f,c);if(0===_.length&&p.hasChildren())return this.processChildren(d,c,p).pipe(wt(g=>null===g?null:[new us(u,g)]));if(0===c.length&&0===_.length)return Ye([new us(u,[])]);const m=to(i)===o;return this.processSegment(d,c,p,_,m?_t:o,!0).pipe(wt(g=>[new us(u,g)]))}))))}getChildConfig(e,t,i){return t.children?Ye({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?Ye({routes:t._loadedRoutes,injector:t._loadedInjector}):function X$(n,e,t,i){const r=e.canLoad;return void 0===r||0===r.length?Ye(!0):Ye(r.map(s=>{const a=Vc(s,n);return ea(function k$(n){return n&&dh(n.canLoad)}(a)?a.canLoad(e,t):n.runInContext(()=>a(e,t)))})).pipe(Hc(),TR())}(e,t,i).pipe(ei(r=>r?this.configLoader.loadChildren(e,t).pipe(ri(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):function K$(n){return Fc(xR(!1,3))}())):Ye({routes:[],injector:e})}}function c9(n){const e=n.value.routeConfig;return e&&""===e.path}function RR(n){const e=[],t=new Set;for(const i of n){if(!c9(i)){e.push(i);continue}const r=e.find(o=>i.value.routeConfig===o.value.routeConfig);void 0!==r?(r.children.push(...i.children),t.add(r)):e.push(i)}for(const i of t){const r=RR(i.children);e.push(new us(i.value,r))}return e.filter(i=>!t.has(i))}function PR(n){return n.data||{}}function OR(n){return n.resolve||{}}function kR(n){return"string"==typeof n.title||null===n.title}function Ry(n){return jr(e=>{const t=n(e);return t?kn(t).pipe(wt(()=>e)):Ye(e)})}const Gc=new he("ROUTES");let Py=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=Te(uA)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return Ye(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const i=ea(t.loadComponent()).pipe(wt(FR),ri(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),$a(()=>{this.componentLoaders.delete(t)})),r=new hy(i,()=>new Kt).pipe(uy());return this.componentLoaders.set(t,r),r}loadChildren(t,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return Ye({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);const o=this.loadModuleFactoryOrRoutes(i.loadChildren).pipe(wt(a=>{this.onLoadEndListener&&this.onLoadEndListener(i);let l,c;return Array.isArray(a)?c=a:(l=a.create(t).injector,c=l.get(Gc,[],Je.Self|Je.Optional).flat()),{routes:c.map(Dy),injector:l}}),$a(()=>{this.childrenLoaders.delete(i)})),s=new hy(o,()=>new Kt).pipe(uy());return this.childrenLoaders.set(i,s),s}loadModuleFactoryOrRoutes(t){return ea(t()).pipe(wt(FR),ei(i=>i instanceof C1||Array.isArray(i)?Ye(i):kn(this.compiler.compileModuleAsync(i))))}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function FR(n){return function g9(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let Mm=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new Kt,this.configLoader=Te(Py),this.environmentInjector=Te(To),this.urlSerializer=Te(Ju),this.rootContexts=Te(oh),this.inputBindingEnabled=null!==Te(vm,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>Ye(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=r=>this.events.next(new d$(r)),this.configLoader.onLoadStartListener=r=>this.events.next(new c$(r))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const i=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:i})}setupNavigations(t){return this.transitions=new ui({id:0,currentUrlTree:t.currentUrlTree,currentRawUrl:t.currentUrlTree,extractedUrl:t.urlHandlingStrategy.extract(t.currentUrlTree),urlAfterRedirects:t.urlHandlingStrategy.extract(t.currentUrlTree),rawUrl:t.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:ih,restoredState:null,currentSnapshot:t.routerState.snapshot,targetSnapshot:null,currentRouterState:t.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Si(i=>0!==i.id),wt(i=>({...i,extractedUrl:t.urlHandlingStrategy.extract(i.rawUrl)})),jr(i=>{let r=!1,o=!1;return Ye(i).pipe(ri(s=>{this.currentNavigation={id:s.id,initialUrl:s.rawUrl,extractedUrl:s.extractedUrl,trigger:s.source,extras:s.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),jr(s=>{const a=t.browserUrlTree.toString(),l=!t.navigated||s.extractedUrl.toString()!==a||a!==t.currentUrlTree.toString();if(!l&&"reload"!==(s.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const d="";return this.events.next(new rh(s.id,t.serializeUrl(i.rawUrl),d,0)),t.rawUrlTree=s.rawUrl,s.resolve(null),_o}if(t.urlHandlingStrategy.shouldProcessUrl(s.rawUrl))return NR(s.source)&&(t.browserUrlTree=s.extractedUrl),Ye(s).pipe(jr(d=>{const u=this.transitions?.getValue();return this.events.next(new by(d.id,this.urlSerializer.serialize(d.extractedUrl),d.source,d.restoredState)),u!==this.transitions?.getValue()?_o:Promise.resolve(d)}),function d9(n,e,t,i,r,o){return ei(s=>function s9(n,e,t,i,r,o,s="emptyOnly"){return new a9(n,e,t,i,r,s,o).recognize()}(n,e,t,i,s.extractedUrl,r,o).pipe(wt(({state:a,tree:l})=>({...s,targetSnapshot:a,urlAfterRedirects:l}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),ri(d=>{if(i.targetSnapshot=d.targetSnapshot,i.urlAfterRedirects=d.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:d.urlAfterRedirects},"eager"===t.urlUpdateStrategy){if(!d.extras.skipLocationChange){const h=t.urlHandlingStrategy.merge(d.urlAfterRedirects,d.rawUrl);t.setBrowserUrl(h,d)}t.browserUrlTree=d.urlAfterRedirects}const u=new r$(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(u)}));if(l&&t.urlHandlingStrategy.shouldProcessUrl(t.rawUrlTree)){const{id:d,extractedUrl:u,source:h,restoredState:f,extras:p}=s,_=new by(d,this.urlSerializer.serialize(u),h,f);this.events.next(_);const m=mR(0,this.rootComponentType).snapshot;return Ye(i={...s,targetSnapshot:m,urlAfterRedirects:u,extras:{...p,skipLocationChange:!1,replaceUrl:!1}})}{const d="";return this.events.next(new rh(s.id,t.serializeUrl(i.extractedUrl),d,1)),t.rawUrlTree=s.rawUrl,s.resolve(null),_o}}),ri(s=>{const a=new o$(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),wt(s=>i={...s,guards:A$(s.targetSnapshot,s.currentSnapshot,this.rootContexts)}),function V$(n,e){return ei(t=>{const{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return 0===s.length&&0===o.length?Ye({...t,guardsResult:!0}):function H$(n,e,t,i){return kn(n).pipe(ei(r=>function q$(n,e,t,i,r){const o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return o&&0!==o.length?Ye(o.map(a=>{const l=ah(e)??r,c=Vc(a,l);return ea(function L$(n){return n&&dh(n.canDeactivate)}(c)?c.canDeactivate(n,e,t,i):l.runInContext(()=>c(n,e,t,i))).pipe(Wa())})).pipe(Hc()):Ye(!0)}(r.component,r.route,t,e,i)),Wa(r=>!0!==r,!0))}(s,i,r,n).pipe(ei(a=>a&&function O$(n){return"boolean"==typeof n}(a)?function z$(n,e,t,i){return kn(e).pipe(Nc(r=>lm(function j$(n,e){return null!==n&&e&&e(new u$(n)),Ye(!0)}(r.route.parent,i),function G$(n,e){return null!==n&&e&&e(new f$(n)),Ye(!0)}(r.route,i),function $$(n,e,t){const i=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>function I$(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(s)).filter(s=>null!==s).map(s=>jI(()=>Ye(s.guards.map(l=>{const c=ah(s.node)??t,d=Vc(l,c);return ea(function N$(n){return n&&dh(n.canActivateChild)}(d)?d.canActivateChild(i,n):c.runInContext(()=>d(i,n))).pipe(Wa())})).pipe(Hc())));return Ye(o).pipe(Hc())}(n,r.path,t),function W$(n,e,t){const i=e.routeConfig?e.routeConfig.canActivate:null;if(!i||0===i.length)return Ye(!0);const r=i.map(o=>jI(()=>{const s=ah(e)??t,a=Vc(o,s);return ea(function F$(n){return n&&dh(n.canActivate)}(a)?a.canActivate(e,n):s.runInContext(()=>a(e,n))).pipe(Wa())}));return Ye(r).pipe(Hc())}(n,r.route,t))),Wa(r=>!0!==r,!0))}(i,o,n,e):Ye(a)),wt(a=>({...t,guardsResult:a})))})}(this.environmentInjector,s=>this.events.next(s)),ri(s=>{if(i.guardsResult=s.guardsResult,Xa(s.guardsResult))throw yR(0,s.guardsResult);const a=new s$(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot,!!s.guardsResult);this.events.next(a)}),Si(s=>!!s.guardsResult||(t.restoreHistory(s),this.cancelNavigationTransition(s,"",3),!1)),Ry(s=>{if(s.guards.canActivateChecks.length)return Ye(s).pipe(ri(a=>{const l=new a$(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(l)}),jr(a=>{let l=!1;return Ye(a).pipe(function u9(n,e){return ei(t=>{const{targetSnapshot:i,guards:{canActivateChecks:r}}=t;if(!r.length)return Ye(t);let o=0;return kn(r).pipe(Nc(s=>function h9(n,e,t,i){const r=n.routeConfig,o=n._resolve;return void 0!==r?.title&&!kR(r)&&(o[Ku]=r.title),function f9(n,e,t,i){const r=function p9(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===r.length)return Ye({});const o={};return kn(r).pipe(ei(s=>function m9(n,e,t,i){const r=ah(e)??i,o=Vc(n,r);return ea(o.resolve?o.resolve(e,t):r.runInContext(()=>o(e,t)))}(n[s],e,t,i).pipe(Wa(),ri(a=>{o[s]=a}))),fy(1),function A6(n){return wt(()=>n)}(o),Js(s=>ER(s)?_o:Fc(s)))}(o,n,e,i).pipe(wt(s=>(n._resolvedData=s,n.data=gR(n,t).resolve,r&&kR(r)&&(n.data[Ku]=r.title),null)))}(s.route,i,n,e)),ri(()=>o++),fy(1),ei(s=>o===r.length?Ye(t):_o))})}(t.paramsInheritanceStrategy,this.environmentInjector),ri({next:()=>l=!0,complete:()=>{l||(t.restoreHistory(a),this.cancelNavigationTransition(a,"",2))}}))}),ri(a=>{const l=new l$(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(l)}))}),Ry(s=>{const a=l=>{const c=[];l.routeConfig?.loadComponent&&!l.routeConfig._loadedComponent&&c.push(this.configLoader.loadComponent(l.routeConfig).pipe(ri(d=>{l.component=d}),wt(()=>{})));for(const d of l.children)c.push(...a(d));return c};return sm(a(s.targetSnapshot.root)).pipe(cm(),Jr(1))}),Ry(()=>this.afterPreactivation()),wt(s=>{const a=function b$(n,e,t){const i=sh(n,e._root,t?t._root:void 0);return new pR(i,e)}(t.routeReuseStrategy,s.targetSnapshot,s.currentRouterState);return i={...s,targetRouterState:a}}),ri(s=>{t.currentUrlTree=s.urlAfterRedirects,t.rawUrlTree=t.urlHandlingStrategy.merge(s.urlAfterRedirects,s.rawUrl),t.routerState=s.targetRouterState,"deferred"===t.urlUpdateStrategy&&(s.extras.skipLocationChange||t.setBrowserUrl(t.rawUrlTree,s),t.browserUrlTree=s.urlAfterRedirects)}),((n,e,t,i)=>wt(r=>(new D$(e,r.targetRouterState,r.currentRouterState,t,i).activate(n),r)))(this.rootContexts,t.routeReuseStrategy,s=>this.events.next(s),this.inputBindingEnabled),Jr(1),ri({next:s=>{r=!0,this.lastSuccessfulNavigation=this.currentNavigation,t.navigated=!0,this.events.next(new Ya(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(t.currentUrlTree))),t.titleStrategy?.updateTitle(s.targetRouterState.snapshot),s.resolve(!0)},complete:()=>{r=!0}}),$a(()=>{r||o||this.cancelNavigationTransition(i,"",1),this.currentNavigation?.id===i.id&&(this.currentNavigation=null)}),Js(s=>{if(o=!0,MR(s)){CR(s)||(t.navigated=!0,t.restoreHistory(i,!0));const a=new gm(i.id,this.urlSerializer.serialize(i.extractedUrl),s.message,s.cancellationCode);if(this.events.next(a),CR(s)){const l=t.urlHandlingStrategy.merge(s.url,t.rawUrlTree),c={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===t.urlUpdateStrategy||NR(i.source)};t.scheduleNavigation(l,ih,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}else i.resolve(!1)}else{t.restoreHistory(i,!0);const a=new yy(i.id,this.urlSerializer.serialize(i.extractedUrl),s,i.targetSnapshot??void 0);this.events.next(a);try{i.resolve(t.errorHandler(s))}catch(l){i.reject(l)}}return _o}))}))}cancelNavigationTransition(t,i,r){const o=new gm(t.id,this.urlSerializer.serialize(t.extractedUrl),i,r);this.events.next(o),t.resolve(!1)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function NR(n){return n!==ih}let LR=(()=>{class n{buildTitle(t){let i,r=t.root;for(;void 0!==r;)i=this.getResolvedTitleForRoute(r)??i,r=r.children.find(o=>o.outlet===_t);return i}getResolvedTitleForRoute(t){return t.data[Ku]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=ye({token:n,factory:function(){return Te(_9)},providedIn:"root"}),n})(),_9=(()=>{class n extends LR{constructor(t){super(),this.title=t}updateTitle(t){const i=this.buildTitle(t);void 0!==i&&this.title.setTitle(i)}}return n.\u0275fac=function(t){return new(t||n)(J(FI))},n.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),v9=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=ye({token:n,factory:function(){return Te(y9)},providedIn:"root"}),n})();class b9{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let y9=(()=>{class n extends b9{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=zt(n)))(i||n)}}(),n.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const wm=new he("",{providedIn:"root",factory:()=>({})});let x9=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=ye({token:n,factory:function(){return Te(C9)},providedIn:"root"}),n})(),C9=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,i){return t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var fr=(()=>((fr=fr||{})[fr.COMPLETE=0]="COMPLETE",fr[fr.FAILED=1]="FAILED",fr[fr.REDIRECTING=2]="REDIRECTING",fr))();function BR(n,e){n.events.pipe(Si(t=>t instanceof Ya||t instanceof gm||t instanceof yy||t instanceof rh),wt(t=>t instanceof Ya||t instanceof rh?fr.COMPLETE:t instanceof gm&&(0===t.code||1===t.code)?fr.REDIRECTING:fr.FAILED),Si(t=>t!==fr.REDIRECTING),Jr(1)).subscribe(()=>{e()})}function M9(n){throw n}function w9(n,e,t){return e.parse("/")}const S9={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},E9={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let dn=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){if("computed"===this.canceledNavigationResolution)return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=Te(dA),this.isNgZoneEnabled=!1,this.options=Te(wm,{optional:!0})||{},this.pendingTasks=Te(Hp),this.errorHandler=this.options.errorHandler||M9,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||w9,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=Te(x9),this.routeReuseStrategy=Te(v9),this.titleStrategy=Te(LR),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=Te(Gc,{optional:!0})?.flat()??[],this.navigationTransitions=Te(Mm),this.urlSerializer=Te(Ju),this.location=Te(qp),this.componentInputBindingEnabled=!!Te(vm,{optional:!0}),this.isNgZoneEnabled=Te(Rt)instanceof Rt&&Rt.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new Bc,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=mR(0,null),this.navigationTransitions.setupNavigations(this).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId??0},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),ih,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const i="popstate"===t.type?"popstate":"hashchange";"popstate"===i&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,i,t.state)},0)}))}navigateToSyncWithBrowser(t,i,r){const o={replaceUrl:!0},s=r?.navigationId?r:null;if(r){const l={...r};delete l.navigationId,delete l.\u0275routerPageId,0!==Object.keys(l).length&&(o.state=l)}const a=this.parseUrl(t);this.scheduleNavigation(a,i,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(Dy),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,i={}){const{relativeTo:r,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:l}=i,c=l?this.currentUrlTree.fragment:s;let u,d=null;switch(a){case"merge":d={...this.currentUrlTree.queryParams,...o};break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=o||null}null!==d&&(d=this.removeEmptyProps(d));try{u=oR(r?r.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof t[0]||!t[0].startsWith("/"))&&(t=[]),u=this.currentUrlTree.root}return sR(u,t,d,c??null)}navigateByUrl(t,i={skipLocationChange:!1}){const r=Xa(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(o,ih,null,i)}navigate(t,i={skipLocationChange:!1}){return function T9(n){for(let e=0;e<n.length;e++)if(null==n[e])throw new ne(4008,!1)}(t),this.navigateByUrl(this.createUrlTree(t,i),i)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let i;try{i=this.urlSerializer.parse(t)}catch(r){i=this.malformedUriErrorHandler(r,this.urlSerializer,t)}return i}isActive(t,i){let r;if(r=!0===i?{...S9}:!1===i?{...E9}:i,Xa(t))return ZI(this.currentUrlTree,t,r);const o=this.parseUrl(t);return ZI(this.currentUrlTree,o,r)}removeEmptyProps(t){return Object.keys(t).reduce((i,r)=>{const o=t[r];return null!=o&&(i[r]=o),i},{})}scheduleNavigation(t,i,r,o,s){if(this.disposed)return Promise.resolve(!1);let a,l,c;s?(a=s.resolve,l=s.reject,c=s.promise):c=new Promise((u,h)=>{a=u,l=h});const d=this.pendingTasks.add();return BR(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:l,promise:c,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),c.catch(u=>Promise.reject(u))}setBrowserUrl(t,i){const r=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(r)||i.extras.replaceUrl){const s={...i.extras.state,...this.generateNgRouterState(i.id,this.browserPageId)};this.location.replaceState(r,"",s)}else{const o={...i.extras.state,...this.generateNgRouterState(i.id,(this.browserPageId??0)+1)};this.location.go(r,"",o)}}restoreHistory(t,i=!1){if("computed"===this.canceledNavigationResolution){const o=this.currentPageId-(this.browserPageId??this.currentPageId);0!==o?this.location.historyGo(o):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===o&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(i&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,i){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:i}:{navigationId:t}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),er=(()=>{class n{constructor(t,i,r,o,s,a){this.router=t,this.route=i,this.tabIndexAttribute=r,this.renderer=o,this.el=s,this.locationStrategy=a,this.href=null,this.commands=null,this.onChanges=new Kt,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const l=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===l||"area"===l,this.isAnchorElement?this.subscription=t.events.subscribe(c=>{c instanceof Ya&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(t,i,r,o,s){return!!(null===this.urlTree||this.isAnchorElement&&(0!==t||i||r||o||s||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const t=null===this.href?null:function kE(n,e,t){return function NV(n,e){return"src"===e&&("embed"===n||"frame"===n||"iframe"===n||"media"===n||"script"===n)||"href"===e&&("base"===n||"link"===n)?OE:dr}(e,t)(n)}(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",t)}applyAttributeValue(t,i){const r=this.renderer,o=this.el.nativeElement;null!==i?r.setAttribute(o,t,i):r.removeAttribute(o,t)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(L(dn),L(eo),tc("tabindex"),L(is),L(ln),L(Ga))},n.\u0275dir=xe({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(t,i){1&t&&Oe("click",function(o){return i.onClick(o.button,o.ctrlKey,o.shiftKey,o.altKey,o.metaKey)}),2&t&&Fi("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:["preserveFragment","preserveFragment",kc],skipLocationChange:["skipLocationChange","skipLocationChange",kc],replaceUrl:["replaceUrl","replaceUrl",kc],routerLink:"routerLink"},standalone:!0,features:[VT,yi]}),n})(),no=(()=>{class n{get isActive(){return this._isActive}constructor(t,i,r,o,s){this.router=t,this.element=i,this.renderer=r,this.cdr=o,this.link=s,this.classes=[],this._isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new hn,this.routerEventsSubscription=t.events.subscribe(a=>{a instanceof Ya&&this.update()})}ngAfterContentInit(){Ye(this.links.changes,Ye(null)).pipe(zl()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const t=[...this.links.toArray(),this.link].filter(i=>!!i).map(i=>i.onChanges);this.linkInputChangesSubscription=kn(t).pipe(zl()).subscribe(i=>{this._isActive!==this.isLinkActive(this.router)(i)&&this.update()})}set routerLinkActive(t){const i=Array.isArray(t)?t:t.split(" ");this.classes=i.filter(r=>!!r)}ngOnChanges(t){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{const t=this.hasActiveLinks();this._isActive!==t&&(this._isActive=t,this.cdr.markForCheck(),this.classes.forEach(i=>{t?this.renderer.addClass(this.element.nativeElement,i):this.renderer.removeClass(this.element.nativeElement,i)}),t&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this.isActiveChange.emit(t))})}isLinkActive(t){const i=function D9(n){return!!n.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return r=>!!r.urlTree&&t.isActive(r.urlTree,i)}hasActiveLinks(){const t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.links.some(t)}}return n.\u0275fac=function(t){return new(t||n)(L(dn),L(ln),L(is),L(Oc),L(er,8))},n.\u0275dir=xe({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(t,i,r){if(1&t&&Oo(r,er,5),2&t){let o;pi(o=function mi(){return function PG(n,e){return n[yo].queries[e].queryList}(fe(),gS())}())&&(i.links=o)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[yi]}),n})();class UR{}let A9=(()=>{class n{constructor(t,i,r,o,s){this.router=t,this.injector=r,this.preloadingStrategy=o,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(Si(t=>t instanceof Ya),Nc(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,i){const r=[];for(const o of i){o.providers&&!o._injector&&(o._injector=n0(o.providers,t,`Route: ${o.path}`));const s=o._injector??t,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&void 0===o.canLoad||o.loadComponent&&!o._loadedComponent)&&r.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&r.push(this.processRoutes(a,o.children??o._loadedRoutes))}return kn(r).pipe(zl())}preloadConfig(t,i){return this.preloadingStrategy.preload(i,()=>{let r;r=i.loadChildren&&void 0===i.canLoad?this.loader.loadChildren(t,i):Ye(null);const o=r.pipe(ei(s=>null===s?Ye(void 0):(i._loadedRoutes=s.routes,i._loadedInjector=s.injector,this.processRoutes(s.injector??t,s.routes))));return i.loadComponent&&!i._loadedComponent?kn([o,this.loader.loadComponent(i)]).pipe(zl()):o})}}return n.\u0275fac=function(t){return new(t||n)(J(dn),J(uA),J(To),J(UR),J(Py))},n.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Oy=new he("");let VR=(()=>{class n{constructor(t,i,r,o,s={}){this.urlSerializer=t,this.transitions=i,this.viewportScroller=r,this.zone=o,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},s.scrollPositionRestoration=s.scrollPositionRestoration||"disabled",s.anchorScrolling=s.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof by?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Ya?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof rh&&0===t.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof hR&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new hR(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return n.\u0275fac=function(t){!function pT(){throw new Error("invalid")}()},n.\u0275prov=ye({token:n,factory:n.\u0275fac}),n})();function hs(n,e){return{\u0275kind:n,\u0275providers:e}}function zR(){const n=Te(ki);return e=>{const t=n.get(Fo);if(e!==t.components[0])return;const i=n.get(dn),r=n.get(GR);1===n.get(ky)&&i.initialNavigation(),n.get(jR,null,Je.Optional)?.setUpPreloading(),n.get(Oy,null,Je.Optional)?.init(),i.resetRootComponentType(t.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}const GR=new he("",{factory:()=>new Kt}),ky=new he("",{providedIn:"root",factory:()=>1}),jR=new he("");function O9(n){return hs(0,[{provide:jR,useExisting:A9},{provide:UR,useExisting:n}])}const WR=new he("ROUTER_FORROOT_GUARD"),F9=[qp,{provide:Ju,useClass:py},dn,oh,{provide:eo,useFactory:function HR(n){return n.routerState.root},deps:[dn]},Py,[]];function N9(){return new CA("Router",dn)}let $R=(()=>{class n{constructor(t){}static forRoot(t,i){return{ngModule:n,providers:[F9,[],{provide:Gc,multi:!0,useValue:t},{provide:WR,useFactory:V9,deps:[[dn,new Ws,new ac]]},{provide:wm,useValue:i||{}},i?.useHash?{provide:Ga,useClass:Zj}:{provide:Ga,useClass:ZA},{provide:Oy,useFactory:()=>{const n=Te(gW),e=Te(Rt),t=Te(wm),i=Te(Mm),r=Te(Ju);return t.scrollOffset&&n.setOffset(t.scrollOffset),new VR(r,i,n,e,t)}},i?.preloadingStrategy?O9(i.preloadingStrategy).\u0275providers:[],{provide:CA,multi:!0,useFactory:N9},i?.initialNavigation?H9(i):[],i?.bindToComponentInputs?hs(8,[bR,{provide:vm,useExisting:bR}]).\u0275providers:[],[{provide:qR,useFactory:zR},{provide:D0,multi:!0,useExisting:qR}]]}}static forChild(t){return{ngModule:n,providers:[{provide:Gc,multi:!0,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)(J(WR,8))},n.\u0275mod=At({type:n}),n.\u0275inj=St({}),n})();function V9(n){return"guarded"}function H9(n){return["disabled"===n.initialNavigation?hs(3,[{provide:y0,multi:!0,useFactory:()=>{const e=Te(dn);return()=>{e.setUpLocationChangeListener()}}},{provide:ky,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?hs(2,[{provide:ky,useValue:0},{provide:y0,multi:!0,deps:[ki],useFactory:e=>{const t=e.get(Xj,Promise.resolve());return()=>t.then(()=>new Promise(i=>{const r=e.get(dn),o=e.get(GR);BR(r,()=>{i(!0)}),e.get(Mm).afterPreactivation=()=>(i(!0),o.closed?Ye(void 0):o),r.initialNavigation()}))}}]).\u0275providers:[]]}const qR=new he("");class Sm{}class Em{}class io{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?"string"==typeof e?this.lazyInit=()=>{this.headers=new Map,e.split("\n").forEach(t=>{const i=t.indexOf(":");if(i>0){const r=t.slice(0,i),o=r.toLowerCase(),s=t.slice(i+1).trim();this.maybeSetNormalizedName(r,o),this.headers.has(o)?this.headers.get(o).push(s):this.headers.set(o,[s])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,i)=>{this.setHeaderEntries(i,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,i])=>{this.setHeaderEntries(t,i)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof io?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new io;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof io?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let i=e.value;if("string"==typeof i&&(i=[i]),0===i.length)return;this.maybeSetNormalizedName(e.name,t);const r=("a"===e.op?this.headers.get(t):void 0)||[];r.push(...i),this.headers.set(t,r);break;case"d":const o=e.value;if(o){let s=this.headers.get(t);if(!s)return;s=s.filter(a=>-1===o.indexOf(a)),0===s.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,s)}else this.headers.delete(t),this.normalizedNames.delete(t)}}setHeaderEntries(e,t){const i=(Array.isArray(t)?t:[t]).map(o=>o.toString()),r=e.toLowerCase();this.headers.set(r,i),this.maybeSetNormalizedName(e,r)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class G9{encodeKey(e){return XR(e)}encodeValue(e){return XR(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const W9=/%(\d[a-f0-9])/gi,$9={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function XR(n){return encodeURIComponent(n).replace(W9,(e,t)=>$9[t]??e)}function Tm(n){return`${n}`}class ta{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new G9,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function j9(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(r=>{const o=r.indexOf("="),[s,a]=-1==o?[e.decodeKey(r),""]:[e.decodeKey(r.slice(0,o)),e.decodeValue(r.slice(o+1))],l=t.get(s)||[];l.push(a),t.set(s,l)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const i=e.fromObject[t],r=Array.isArray(i)?i.map(Tm):[Tm(i)];this.map.set(t,r)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(i=>{const r=e[i];Array.isArray(r)?r.forEach(o=>{t.push({param:i,value:o,op:"a"})}):t.push({param:i,value:r,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(i=>t+"="+this.encoder.encodeValue(i)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new ta({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(Tm(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let i=this.map.get(e.param)||[];const r=i.indexOf(Tm(e.value));-1!==r&&i.splice(r,1),i.length>0?this.map.set(e.param,i):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class q9{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function YR(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function ZR(n){return typeof Blob<"u"&&n instanceof Blob}function KR(n){return typeof FormData<"u"&&n instanceof FormData}class uh{constructor(e,t,i,r){let o;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function X9(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==i?i:null,o=r):o=i,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params)),this.headers||(this.headers=new io),this.context||(this.context=new q9),this.params){const s=this.params.toString();if(0===s.length)this.urlWithParams=t;else{const a=t.indexOf("?");this.urlWithParams=t+(-1===a?"?":a<t.length-1?"&":"")+s}}else this.params=new ta,this.urlWithParams=t}serializeBody(){return null===this.body?null:YR(this.body)||ZR(this.body)||KR(this.body)||function Y9(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof ta?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||KR(this.body)?null:ZR(this.body)?this.body.type||null:YR(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof ta?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,i=e.url||this.url,r=e.responseType||this.responseType,o=void 0!==e.body?e.body:this.body,s=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,a=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let l=e.headers||this.headers,c=e.params||this.params;const d=e.context??this.context;return void 0!==e.setHeaders&&(l=Object.keys(e.setHeaders).reduce((u,h)=>u.set(h,e.setHeaders[h]),l)),e.setParams&&(c=Object.keys(e.setParams).reduce((u,h)=>u.set(h,e.setParams[h]),c)),new uh(t,i,o,{params:c,headers:l,context:d,reportProgress:a,responseType:r,withCredentials:s})}}var Vn=(()=>((Vn=Vn||{})[Vn.Sent=0]="Sent",Vn[Vn.UploadProgress=1]="UploadProgress",Vn[Vn.ResponseHeader=2]="ResponseHeader",Vn[Vn.DownloadProgress=3]="DownloadProgress",Vn[Vn.Response=4]="Response",Vn[Vn.User=5]="User",Vn))();class Fy{constructor(e,t=200,i="OK"){this.headers=e.headers||new io,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||i,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class Ny extends Fy{constructor(e={}){super(e),this.type=Vn.ResponseHeader}clone(e={}){return new Ny({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class jc extends Fy{constructor(e={}){super(e),this.type=Vn.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new jc({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class QR extends Fy{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function Ly(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let na=(()=>{class n{constructor(t){this.handler=t}request(t,i,r={}){let o;if(t instanceof uh)o=t;else{let l,c;l=r.headers instanceof io?r.headers:new io(r.headers),r.params&&(c=r.params instanceof ta?r.params:new ta({fromObject:r.params})),o=new uh(t,i,void 0!==r.body?r.body:null,{headers:l,context:r.context,params:c,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials})}const s=Ye(o).pipe(Nc(l=>this.handler.handle(l)));if(t instanceof uh||"events"===r.observe)return s;const a=s.pipe(Si(l=>l instanceof jc));switch(r.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return a.pipe(wt(l=>{if(null!==l.body&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return a.pipe(wt(l=>{if(null!==l.body&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return a.pipe(wt(l=>{if(null!==l.body&&"string"!=typeof l.body)throw new Error("Response is not a string.");return l.body}));default:return a.pipe(wt(l=>l.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${r.observe}}`)}}delete(t,i={}){return this.request("DELETE",t,i)}get(t,i={}){return this.request("GET",t,i)}head(t,i={}){return this.request("HEAD",t,i)}jsonp(t,i){return this.request("JSONP",t,{params:(new ta).append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,i={}){return this.request("OPTIONS",t,i)}patch(t,i,r={}){return this.request("PATCH",t,Ly(r,i))}post(t,i,r={}){return this.request("POST",t,Ly(r,i))}put(t,i,r={}){return this.request("PUT",t,Ly(r,i))}}return n.\u0275fac=function(t){return new(t||n)(J(Sm))},n.\u0275prov=ye({token:n,factory:n.\u0275fac}),n})();function tP(n,e){return e(n)}function K9(n,e){return(t,i)=>e.intercept(t,{handle:r=>n(r,i)})}const nP=new he(""),hh=new he(""),iP=new he("");function J9(){let n=null;return(e,t)=>{null===n&&(n=(Te(nP,{optional:!0})??[]).reduceRight(K9,tP));const i=Te(Hp),r=i.add();return n(e,t).pipe($a(()=>i.remove(r)))}}let rP=(()=>{class n extends Sm{constructor(t,i){super(),this.backend=t,this.injector=i,this.chain=null,this.pendingTasks=Te(Hp)}handle(t){if(null===this.chain){const r=Array.from(new Set([...this.injector.get(hh),...this.injector.get(iP,[])]));this.chain=r.reduceRight((o,s)=>function Q9(n,e,t){return(i,r)=>t.runInContext(()=>e(i,o=>n(o,r)))}(o,s,this.injector),tP)}const i=this.pendingTasks.add();return this.chain(t,r=>this.backend.handle(r)).pipe($a(()=>this.pendingTasks.remove(i)))}}return n.\u0275fac=function(t){return new(t||n)(J(Em),J(To))},n.\u0275prov=ye({token:n,factory:n.\u0275fac}),n})();const r7=/^\)\]\}',?\n/;let sP=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new ne(-2800,!1);const i=this.xhrFactory;return(i.\u0275loadImpl?kn(i.\u0275loadImpl()):Ye(null)).pipe(jr(()=>new sn(o=>{const s=i.build();if(s.open(t.method,t.urlWithParams),t.withCredentials&&(s.withCredentials=!0),t.headers.forEach((_,m)=>s.setRequestHeader(_,m.join(","))),t.headers.has("Accept")||s.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const _=t.detectContentTypeHeader();null!==_&&s.setRequestHeader("Content-Type",_)}if(t.responseType){const _=t.responseType.toLowerCase();s.responseType="json"!==_?_:"text"}const a=t.serializeBody();let l=null;const c=()=>{if(null!==l)return l;const _=s.statusText||"OK",m=new io(s.getAllResponseHeaders()),g=function o7(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(s)||t.url;return l=new Ny({headers:m,status:s.status,statusText:_,url:g}),l},d=()=>{let{headers:_,status:m,statusText:g,url:b}=c(),v=null;204!==m&&(v=typeof s.response>"u"?s.responseText:s.response),0===m&&(m=v?200:0);let y=m>=200&&m<300;if("json"===t.responseType&&"string"==typeof v){const x=v;v=v.replace(r7,"");try{v=""!==v?JSON.parse(v):null}catch(S){v=x,y&&(y=!1,v={error:S,text:v})}}y?(o.next(new jc({body:v,headers:_,status:m,statusText:g,url:b||void 0})),o.complete()):o.error(new QR({error:v,headers:_,status:m,statusText:g,url:b||void 0}))},u=_=>{const{url:m}=c(),g=new QR({error:_,status:s.status||0,statusText:s.statusText||"Unknown Error",url:m||void 0});o.error(g)};let h=!1;const f=_=>{h||(o.next(c()),h=!0);let m={type:Vn.DownloadProgress,loaded:_.loaded};_.lengthComputable&&(m.total=_.total),"text"===t.responseType&&s.responseText&&(m.partialText=s.responseText),o.next(m)},p=_=>{let m={type:Vn.UploadProgress,loaded:_.loaded};_.lengthComputable&&(m.total=_.total),o.next(m)};return s.addEventListener("load",d),s.addEventListener("error",u),s.addEventListener("timeout",u),s.addEventListener("abort",u),t.reportProgress&&(s.addEventListener("progress",f),null!==a&&s.upload&&s.upload.addEventListener("progress",p)),s.send(a),o.next({type:Vn.Sent}),()=>{s.removeEventListener("error",u),s.removeEventListener("abort",u),s.removeEventListener("load",d),s.removeEventListener("timeout",u),t.reportProgress&&(s.removeEventListener("progress",f),null!==a&&s.upload&&s.upload.removeEventListener("progress",p)),s.readyState!==s.DONE&&s.abort()}})))}}return n.\u0275fac=function(t){return new(t||n)(J(_I))},n.\u0275prov=ye({token:n,factory:n.\u0275fac}),n})();const By=new he("XSRF_ENABLED"),aP=new he("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),lP=new he("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class cP{}let l7=(()=>{class n{constructor(t,i,r){this.doc=t,this.platform=i,this.cookieName=r,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=sI(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return n.\u0275fac=function(t){return new(t||n)(J(Bt),J($s),J(aP))},n.\u0275prov=ye({token:n,factory:n.\u0275fac}),n})();function c7(n,e){const t=n.url.toLowerCase();if(!Te(By)||"GET"===n.method||"HEAD"===n.method||t.startsWith("http://")||t.startsWith("https://"))return e(n);const i=Te(cP).getToken(),r=Te(lP);return null!=i&&!n.headers.has(r)&&(n=n.clone({headers:n.headers.set(r,i)})),e(n)}var fn=(()=>((fn=fn||{})[fn.Interceptors=0]="Interceptors",fn[fn.LegacyInterceptors=1]="LegacyInterceptors",fn[fn.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",fn[fn.NoXsrfProtection=3]="NoXsrfProtection",fn[fn.JsonpSupport=4]="JsonpSupport",fn[fn.RequestsMadeViaParent=5]="RequestsMadeViaParent",fn[fn.Fetch=6]="Fetch",fn))();function Za(n,e){return{\u0275kind:n,\u0275providers:e}}function d7(...n){const e=[na,sP,rP,{provide:Sm,useExisting:rP},{provide:Em,useExisting:sP},{provide:hh,useValue:c7,multi:!0},{provide:By,useValue:!0},{provide:cP,useClass:l7}];for(const t of n)e.push(...t.\u0275providers);return hp(e)}const dP=new he("LEGACY_INTERCEPTOR_FN");let h7=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=At({type:n}),n.\u0275inj=St({providers:[d7(Za(fn.LegacyInterceptors,[{provide:dP,useFactory:J9},{provide:hh,useExisting:dP,multi:!0}]))]}),n})();const Ka_apiURL="http://rungroops.somee.com/api",v7=new he("JWT_OPTIONS");let Am=(()=>{class n{constructor(t=null){this.tokenGetter=t&&t.tokenGetter||function(){}}urlBase64Decode(t){let i=t.replace(/-/g,"+").replace(/_/g,"/");switch(i.length%4){case 0:break;case 2:i+="==";break;case 3:i+="=";break;default:throw new Error("Illegal base64url string!")}return this.b64DecodeUnicode(i)}b64decode(t){let r="";if((t=String(t).replace(/=+$/,"")).length%4==1)throw new Error("'atob' failed: The string to be decoded is not correctly encoded.");for(let s,a,o=0,l=0;a=t.charAt(l++);~a&&(s=o%4?64*s+a:a,o++%4)?r+=String.fromCharCode(255&s>>(-2*o&6)):0)a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a);return r}b64DecodeUnicode(t){return decodeURIComponent(Array.prototype.map.call(this.b64decode(t),i=>"%"+("00"+i.charCodeAt(0).toString(16)).slice(-2)).join(""))}decodeToken(t=this.tokenGetter()){return t instanceof Promise?t.then(i=>this._decodeToken(i)):this._decodeToken(t)}_decodeToken(t){if(!t||""===t)return null;const i=t.split(".");if(3!==i.length)throw new Error("The inspected token doesn't appear to be a JWT. Check to make sure it has three parts and see https://jwt.io for more.");const r=this.urlBase64Decode(i[1]);if(!r)throw new Error("Cannot decode the token.");return JSON.parse(r)}getTokenExpirationDate(t=this.tokenGetter()){return t instanceof Promise?t.then(i=>this._getTokenExpirationDate(i)):this._getTokenExpirationDate(t)}_getTokenExpirationDate(t){let i;if(i=this.decodeToken(t),!i||!i.hasOwnProperty("exp"))return null;const r=new Date(0);return r.setUTCSeconds(i.exp),r}isTokenExpired(t=this.tokenGetter(),i){return t instanceof Promise?t.then(r=>this._isTokenExpired(r,i)):this._isTokenExpired(t,i)}_isTokenExpired(t,i){if(!t||""===t)return!0;const r=this.getTokenExpirationDate(t);return i=i||0,null!==r&&!(r.valueOf()>(new Date).valueOf()+1e3*i)}getAuthScheme(t,i){return"function"==typeof t?t(i):t}}return n.\u0275fac=function(t){return new(t||n)(J(v7))},n.\u0275prov=ye({token:n,factory:n.\u0275fac}),n})();class Wc{}class Uy{constructor(){this.address=new Wc}}let kr=(()=>{class n{constructor(t,i){this.httpClient=t,this.router=i,this.currentUser=new Uy,this.baseURL=Ka_apiURL,this.helper=new Am,this.decodeToken()}login(t){return this.httpClient.post(this.baseURL+"/account/login",t).pipe(wt(i=>{localStorage.setItem("token",i.token)}))}register(t){return this.httpClient.post(this.baseURL+"/account/register",t)}logout(){localStorage.removeItem("token"),this.router.navigate(["/"])}loggedIn(){const t=localStorage.getItem("token");return!this.helper.isTokenExpired(t)}getHttpOptions(){return{headers:new io({Authorization:"Bearer "+localStorage.getItem("token")})}}getUserId(){const t=localStorage.getItem("token");if(t)return this.helper.decodeToken(t).nameid}decodeToken(){const t=localStorage.getItem("token");if(t){let i=this.helper.decodeToken(t);this.currentUser.id=i.nameid,this.currentUser.userName=i.given_name,this.currentUser.email=i.email}}}return n.\u0275fac=function(t){return new(t||n)(J(na),J(dn))},n.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function fh(n){return(fh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(n)}function _e(n,e,t){return(e=function y7(n){var e=function b7(n,e){if("object"!==fh(n)||null===n)return n;var t=n[Symbol.toPrimitive];if(void 0!==t){var i=t.call(n,e||"default");if("object"!==fh(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(n)}(n,"string");return"symbol"===fh(e)?e:String(e)}(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}class uP{}class x7{}const fs="*";function Qa(n,e){return{type:7,name:n,definitions:e,options:{}}}function Kn(n,e=null){return{type:4,styles:e,timings:n}}function Im(n,e=null){return{type:3,steps:n,options:e}}function hP(n,e=null){return{type:2,steps:n,options:e}}function Qt(n){return{type:6,styles:n,offset:null}}function ps(n,e,t){return{type:0,name:n,styles:e,options:t}}function Fr(n,e,t=null){return{type:1,expr:n,animation:e,options:t}}function Rm(n,e=null){return{type:8,animation:n,options:e}}function ms(n,e,t=null){return{type:11,selector:n,animation:e,options:t}}class ph{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}class fP{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,i=0,r=0;const o=this.players.length;0==o?queueMicrotask(()=>this._onFinish()):this.players.forEach(s=>{s.onDone(()=>{++t==o&&this._onFinish()}),s.onDestroy(()=>{++i==o&&this._onDestroy()}),s.onStart(()=>{++r==o&&this._onStart()})}),this.totalTime=this.players.reduce((s,a)=>Math.max(s,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(i=>{const r=i.totalTime?Math.min(1,t/i.totalTime):1;i.setPosition(r)})}getPosition(){const e=this.players.reduce((t,i)=>null===t||i.totalTime>t.totalTime?i:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}const pP=["toast-component",""];function M7(n,e){if(1&n){const t=Ni();M(0,"button",5),Oe("click",function(){return ni(t),ii(Et().remove())}),M(1,"span",6),O(2,"\xd7"),w()()}}function w7(n,e){if(1&n&&(Na(0),O(1),La()),2&n){const t=Et(2);B(1),cn("[",t.duplicatesCount+1,"]")}}function S7(n,e){if(1&n&&(M(0,"div"),O(1),rt(2,w7,2,1,"ng-container",4),w()),2&n){const t=Et();Rr(t.options.titleClass),Fi("aria-label",t.title),B(1),cn(" ",t.title," "),B(1),Q("ngIf",t.duplicatesCount)}}function E7(n,e){if(1&n&&Ie(0,"div",7),2&n){const t=Et();Rr(t.options.messageClass),Q("innerHTML",t.message,tb)}}function T7(n,e){if(1&n&&(M(0,"div",8),O(1),w()),2&n){const t=Et();Rr(t.options.messageClass),Fi("aria-label",t.message),B(1),cn(" ",t.message," ")}}function D7(n,e){if(1&n&&(M(0,"div"),Ie(1,"div",9),w()),2&n){const t=Et();B(1),Mi("width",t.width+"%")}}class F7{constructor(e,t){_e(this,"_attachedHost",void 0),_e(this,"component",void 0),_e(this,"viewContainerRef",void 0),_e(this,"injector",void 0),this.component=e,this.injector=t}attach(e,t){return this._attachedHost=e,e.attach(this,t)}detach(){const e=this._attachedHost;if(e)return this._attachedHost=void 0,e.detach()}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class N7{constructor(){_e(this,"_attachedPortal",void 0),_e(this,"_disposeFn",void 0)}attach(e,t){return this._attachedPortal=e,this.attachComponentPortal(e,t)}detach(){this._attachedPortal&&this._attachedPortal.setAttachedHost(),this._attachedPortal=void 0,this._disposeFn&&(this._disposeFn(),this._disposeFn=void 0)}setDisposeFn(e){this._disposeFn=e}}class L7{constructor(e){_e(this,"_overlayRef",void 0),_e(this,"componentInstance",void 0),_e(this,"duplicatesCount",0),_e(this,"_afterClosed",new Kt),_e(this,"_activate",new Kt),_e(this,"_manualClose",new Kt),_e(this,"_resetTimeout",new Kt),_e(this,"_countDuplicate",new Kt),this._overlayRef=e}manualClose(){this._manualClose.next(),this._manualClose.complete()}manualClosed(){return this._manualClose.asObservable()}timeoutReset(){return this._resetTimeout.asObservable()}countDuplicate(){return this._countDuplicate.asObservable()}close(){this._overlayRef.detach(),this._afterClosed.next(),this._manualClose.next(),this._afterClosed.complete(),this._manualClose.complete(),this._activate.complete(),this._resetTimeout.complete(),this._countDuplicate.complete()}afterClosed(){return this._afterClosed.asObservable()}isInactive(){return this._activate.isStopped}activate(){this._activate.next(),this._activate.complete()}afterActivate(){return this._activate.asObservable()}onDuplicate(e,t){e&&this._resetTimeout.next(),t&&this._countDuplicate.next(++this.duplicatesCount)}}class Pm{constructor(e,t,i,r,o,s){_e(this,"toastId",void 0),_e(this,"config",void 0),_e(this,"message",void 0),_e(this,"title",void 0),_e(this,"toastType",void 0),_e(this,"toastRef",void 0),_e(this,"_onTap",new Kt),_e(this,"_onAction",new Kt),this.toastId=e,this.config=t,this.message=i,this.title=r,this.toastType=o,this.toastRef=s,this.toastRef.afterClosed().subscribe(()=>{this._onAction.complete(),this._onTap.complete()})}triggerTap(){this._onTap.next(),this.config.tapToDismiss&&this._onTap.complete()}onTap(){return this._onTap.asObservable()}triggerAction(e){this._onAction.next(e)}onAction(){return this._onAction.asObservable()}}const gP=new he("ToastConfig");class B7 extends N7{constructor(e,t,i){super(),_e(this,"_hostDomElement",void 0),_e(this,"_componentFactoryResolver",void 0),_e(this,"_appRef",void 0),this._hostDomElement=e,this._componentFactoryResolver=t,this._appRef=i}attachComponentPortal(e,t){const i=this._componentFactoryResolver.resolveComponentFactory(e.component);let r;return r=i.create(e.injector),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.detachView(r.hostView),r.destroy()}),t?this._hostDomElement.insertBefore(this._getComponentRootNode(r),this._hostDomElement.firstChild):this._hostDomElement.appendChild(this._getComponentRootNode(r)),r}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}let U7=(()=>{class n{constructor(){_e(this,"_document",Te(Bt)),_e(this,"_containerElement",void 0)}ngOnDestroy(){this._containerElement&&this._containerElement.parentNode&&this._containerElement.parentNode.removeChild(this._containerElement)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t=this._document.createElement("div");t.classList.add("overlay-container"),t.setAttribute("aria-live","polite"),this._document.body.appendChild(t),this._containerElement=t}}return _e(n,"\u0275fac",function(t){return new(t||n)}),_e(n,"\u0275prov",ye({token:n,factory:n.\u0275fac,providedIn:"root"})),n})();class V7{constructor(e){_e(this,"_portalHost",void 0),this._portalHost=e}attach(e,t=!0){return this._portalHost.attach(e,t)}detach(){return this._portalHost.detach()}}let H7=(()=>{class n{constructor(){_e(this,"_overlayContainer",Te(U7)),_e(this,"_componentFactoryResolver",Te(fc)),_e(this,"_appRef",Te(Fo)),_e(this,"_document",Te(Bt)),_e(this,"_paneElements",new Map)}create(t,i){return this._createOverlayRef(this.getPaneElement(t,i))}getPaneElement(t="",i){return this._paneElements.get(i)||this._paneElements.set(i,{}),this._paneElements.get(i)[t]||(this._paneElements.get(i)[t]=this._createPaneElement(t,i)),this._paneElements.get(i)[t]}_createPaneElement(t,i){const r=this._document.createElement("div");return r.id="toast-container",r.classList.add(t),r.classList.add("toast-container"),i?i.getContainerElement().appendChild(r):this._overlayContainer.getContainerElement().appendChild(r),r}_createPortalHost(t){return new B7(t,this._componentFactoryResolver,this._appRef)}_createOverlayRef(t){return new V7(this._createPortalHost(t))}}return _e(n,"\u0275fac",function(t){return new(t||n)}),_e(n,"\u0275prov",ye({token:n,factory:n.\u0275fac,providedIn:"root"})),n})(),ro=(()=>{class n{constructor(t,i,r,o,s){_e(this,"overlay",void 0),_e(this,"_injector",void 0),_e(this,"sanitizer",void 0),_e(this,"ngZone",void 0),_e(this,"toastrConfig",void 0),_e(this,"currentlyActive",0),_e(this,"toasts",[]),_e(this,"overlayContainer",void 0),_e(this,"previousToastMessage",void 0),_e(this,"index",0),this.overlay=i,this._injector=r,this.sanitizer=o,this.ngZone=s,this.toastrConfig={...t.default,...t.config},t.config.iconClasses&&(this.toastrConfig.iconClasses={...t.default.iconClasses,...t.config.iconClasses})}show(t,i,r={},o=""){return this._preBuildNotification(o,t,i,this.applyConfig(r))}success(t,i,r={}){return this._preBuildNotification(this.toastrConfig.iconClasses.success||"",t,i,this.applyConfig(r))}error(t,i,r={}){return this._preBuildNotification(this.toastrConfig.iconClasses.error||"",t,i,this.applyConfig(r))}info(t,i,r={}){return this._preBuildNotification(this.toastrConfig.iconClasses.info||"",t,i,this.applyConfig(r))}warning(t,i,r={}){return this._preBuildNotification(this.toastrConfig.iconClasses.warning||"",t,i,this.applyConfig(r))}clear(t){for(const i of this.toasts)if(void 0!==t){if(i.toastId===t)return void i.toastRef.manualClose()}else i.toastRef.manualClose()}remove(t){const i=this._findToast(t);if(!i||(i.activeToast.toastRef.close(),this.toasts.splice(i.index,1),this.currentlyActive=this.currentlyActive-1,!this.toastrConfig.maxOpened||!this.toasts.length))return!1;if(this.currentlyActive<this.toastrConfig.maxOpened&&this.toasts[this.currentlyActive]){const r=this.toasts[this.currentlyActive].toastRef;r.isInactive()||(this.currentlyActive=this.currentlyActive+1,r.activate())}return!0}findDuplicate(t="",i="",r,o){const{includeTitleDuplicates:s}=this.toastrConfig;for(const a of this.toasts)if((!s||s&&a.title===t)&&a.message===i)return a.toastRef.onDuplicate(r,o),a;return null}applyConfig(t={}){return{...this.toastrConfig,...t}}_findToast(t){for(let i=0;i<this.toasts.length;i++)if(this.toasts[i].toastId===t)return{index:i,activeToast:this.toasts[i]};return null}_preBuildNotification(t,i,r,o){return o.onActivateTick?this.ngZone.run(()=>this._buildNotification(t,i,r,o)):this._buildNotification(t,i,r,o)}_buildNotification(t,i,r,o){if(!o.toastComponent)throw new Error("toastComponent required");const s=this.findDuplicate(r,i,this.toastrConfig.resetTimeoutOnDuplicate&&o.timeOut>0,this.toastrConfig.countDuplicates);if((this.toastrConfig.includeTitleDuplicates&&r||i)&&this.toastrConfig.preventDuplicates&&null!==s)return s;this.previousToastMessage=i;let a=!1;this.toastrConfig.maxOpened&&this.currentlyActive>=this.toastrConfig.maxOpened&&(a=!0,this.toastrConfig.autoDismiss&&this.clear(this.toasts[0].toastId));const l=this.overlay.create(o.positionClass,this.overlayContainer);this.index=this.index+1;let c=i;i&&o.enableHtml&&(c=this.sanitizer.sanitize(jt.HTML,i));const d=new L7(l),u=new Pm(this.index,o,c,r,t,d),f=ki.create({providers:[{provide:Pm,useValue:u}],parent:this._injector}),p=new F7(o.toastComponent,f),_=l.attach(p,o.newestOnTop);d.componentInstance=_.instance;const m={toastId:this.index,title:r||"",message:i||"",toastRef:d,onShown:d.afterActivate(),onHidden:d.afterClosed(),onTap:u.onTap(),onAction:u.onAction(),portal:_};return a||(this.currentlyActive=this.currentlyActive+1,setTimeout(()=>{m.toastRef.activate()})),this.toasts.push(m),m}}return _e(n,"\u0275fac",function(t){return new(t||n)(J(gP),J(H7),J(ki),J(Zu),J(Rt))}),_e(n,"\u0275prov",ye({token:n,factory:n.\u0275fac,providedIn:"root"})),n})();const z7={maxOpened:0,autoDismiss:!1,newestOnTop:!0,preventDuplicates:!1,countDuplicates:!1,resetTimeoutOnDuplicate:!1,includeTitleDuplicates:!1,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},closeButton:!1,disableTimeOut:!1,timeOut:5e3,extendedTimeOut:1e3,enableHtml:!1,progressBar:!1,toastClass:"ngx-toastr",positionClass:"toast-top-right",titleClass:"toast-title",messageClass:"toast-message",easing:"ease-in",easeTime:300,tapToDismiss:!0,onActivateTick:!1,progressAnimation:"decreasing",toastComponent:(()=>{class n{get displayStyle(){if("inactive"===this.state.value)return"none"}constructor(t,i,r){_e(this,"toastrService",void 0),_e(this,"toastPackage",void 0),_e(this,"ngZone",void 0),_e(this,"message",void 0),_e(this,"title",void 0),_e(this,"options",void 0),_e(this,"duplicatesCount",void 0),_e(this,"originalTimeout",void 0),_e(this,"width",-1),_e(this,"toastClasses",""),_e(this,"state",void 0),_e(this,"timeout",void 0),_e(this,"intervalId",void 0),_e(this,"hideTime",void 0),_e(this,"sub",void 0),_e(this,"sub1",void 0),_e(this,"sub2",void 0),_e(this,"sub3",void 0),this.toastrService=t,this.toastPackage=i,this.ngZone=r,this.message=i.message,this.title=i.title,this.options=i.config,this.originalTimeout=i.config.timeOut,this.toastClasses=`${i.toastType} ${i.config.toastClass}`,this.sub=i.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=i.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=i.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=i.toastRef.countDuplicate().subscribe(o=>{this.duplicatesCount=o}),this.state={value:"inactive",params:{easeTime:this.toastPackage.config.easeTime,easing:"ease-in"}}}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state={...this.state,value:"active"},!0!==this.options.disableTimeOut&&"timeOut"!==this.options.disableTimeOut&&this.options.timeOut&&(this.outsideTimeout(()=>this.remove(),this.options.timeOut),this.hideTime=(new Date).getTime()+this.options.timeOut,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}updateProgress(){if(0===this.width||100===this.width||!this.options.timeOut)return;const t=(new Date).getTime();this.width=(this.hideTime-t)/this.options.timeOut*100,"increasing"===this.options.progressAnimation&&(this.width=100-this.width),this.width<=0&&(this.width=0),this.width>=100&&(this.width=100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state={...this.state,value:"active"},this.outsideTimeout(()=>this.remove(),this.originalTimeout),this.options.timeOut=this.originalTimeout,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10)}remove(){"removed"!==this.state.value&&(clearTimeout(this.timeout),this.state={...this.state,value:"removed"},this.outsideTimeout(()=>this.toastrService.remove(this.toastPackage.toastId),+this.toastPackage.config.easeTime))}tapToast(){"removed"!==this.state.value&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){"removed"!==this.state.value&&"extendedTimeOut"!==this.options.disableTimeOut&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width=0)}delayedHideToast(){!0===this.options.disableTimeOut||"extendedTimeOut"===this.options.disableTimeOut||0===this.options.extendedTimeOut||"removed"===this.state.value||(this.outsideTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}outsideTimeout(t,i){this.ngZone?this.ngZone.runOutsideAngular(()=>this.timeout=setTimeout(()=>this.runInsideAngular(t),i)):this.timeout=setTimeout(()=>t(),i)}outsideInterval(t,i){this.ngZone?this.ngZone.runOutsideAngular(()=>this.intervalId=setInterval(()=>this.runInsideAngular(t),i)):this.intervalId=setInterval(()=>t(),i)}runInsideAngular(t){this.ngZone?this.ngZone.run(()=>t()):t()}}return _e(n,"\u0275fac",function(t){return new(t||n)(L(ro),L(Pm),L(Rt))}),_e(n,"\u0275cmp",yt({type:n,selectors:[["","toast-component",""]],hostVars:5,hostBindings:function(t,i){1&t&&Oe("click",function(){return i.tapToast()})("mouseenter",function(){return i.stickAround()})("mouseleave",function(){return i.delayedHideToast()}),2&t&&(qb("@flyInOut",i.state),Rr(i.toastClasses),Mi("display",i.displayStyle))},standalone:!0,features:[Bp],attrs:pP,decls:5,vars:5,consts:[["type","button","class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alert",3,"class","innerHTML",4,"ngIf"],["role","alert",3,"class",4,"ngIf"],[4,"ngIf"],["type","button","aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alert",3,"innerHTML"],["role","alert"],[1,"toast-progress"]],template:function(t,i){1&t&&(rt(0,M7,3,0,"button",0),rt(1,S7,3,5,"div",1),rt(2,E7,1,3,"div",2),rt(3,T7,2,4,"div",3),rt(4,D7,2,2,"div",4)),2&t&&(Q("ngIf",i.options.closeButton),B(1),Q("ngIf",i.title),B(1),Q("ngIf",i.message&&i.options.enableHtml),B(1),Q("ngIf",i.message&&!i.options.enableHtml),B(1),Q("ngIf",i.options.progressBar))},dependencies:[No],encapsulation:2,data:{animation:[Qa("flyInOut",[ps("inactive",Qt({opacity:0})),ps("active",Qt({opacity:1})),ps("removed",Qt({opacity:0})),Fr("inactive => active",Kn("{{ easeTime }}ms {{ easing }}")),Fr("active => removed",Kn("{{ easeTime }}ms {{ easing }}"))])]}})),n})()},G7=(n={})=>hp([{provide:gP,useValue:{default:z7,config:n}}]);let j7=(()=>{class n{static forRoot(t={}){return{ngModule:n,providers:[G7(t)]}}}return _e(n,"\u0275fac",function(t){return new(t||n)}),_e(n,"\u0275mod",At({type:n})),_e(n,"\u0275inj",St({})),n})();function _P(...n){const e=_w(n),{args:t,keys:i}=HI(n),r=new sn(o=>{const{length:s}=t;if(!s)return void o.complete();const a=new Array(s);let l=s,c=s;for(let d=0;d<s;d++){let u=!1;Ri(t[d]).subscribe(mn(o,h=>{u||(u=!0,c--),a[d]=h},()=>l--,void 0,()=>{(!l||!u)&&(c||o.next(i?zI(i,a):a),o.complete())}))}});return e?r.pipe(dy(e)):r}let vP=(()=>{class n{constructor(t,i){this._renderer=t,this._elementRef=i,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(t,i){this._renderer.setProperty(this._elementRef.nativeElement,t,i)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(L(is),L(ln))},n.\u0275dir=xe({type:n}),n})(),Ja=(()=>{class n extends vP{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=zt(n)))(i||n)}}(),n.\u0275dir=xe({type:n,features:[Qe]}),n})();const Uo=new he("NgValueAccessor"),$7={provide:Uo,useExisting:tn(()=>pr),multi:!0},X7=new he("CompositionEventMode");let pr=(()=>{class n extends vP{constructor(t,i,r){super(t,i),this._compositionMode=r,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function q7(){const n=Ks()?Ks().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(L(is),L(ln),L(X7,8))},n.\u0275dir=xe({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,i){1&t&&Oe("input",function(o){return i._handleInput(o.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(o){return i._compositionEnd(o.target.value)})},features:[xt([$7]),Qe]}),n})();const Ei=new he("NgValidators"),ra=new he("NgAsyncValidators");function MP(n){return function ia(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}(n.value)?{required:!0}:null}function Om(n){return null}function AP(n){return null!=n}function IP(n){return ku(n)?kn(n):n}function RP(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function PP(n,e){return e.map(t=>t(n))}function OP(n){return n.map(e=>function Z7(n){return!n.validate}(e)?e:t=>e.validate(t))}function Hy(n){return null!=n?function kP(n){if(!n)return null;const e=n.filter(AP);return 0==e.length?null:function(t){return RP(PP(t,e))}}(OP(n)):null}function zy(n){return null!=n?function FP(n){if(!n)return null;const e=n.filter(AP);return 0==e.length?null:function(t){return _P(PP(t,e).map(IP)).pipe(wt(RP))}}(OP(n)):null}function NP(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function Gy(n){return n?Array.isArray(n)?n:[n]:[]}function km(n,e){return Array.isArray(n)?n.includes(e):n===e}function UP(n,e){const t=Gy(e);return Gy(n).forEach(r=>{km(t,r)||t.push(r)}),t}function VP(n,e){return Gy(e).filter(t=>!km(n,t))}class HP{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Hy(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=zy(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Ui extends HP{get formDirective(){return null}get path(){return null}}class oa extends HP{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class zP{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let oo=(()=>{class n extends zP{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(L(oa,2))},n.\u0275dir=xe({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,i){2&t&&Ir("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[Qe]}),n})(),mr=(()=>{class n extends zP{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(L(Ui,10))},n.\u0275dir=xe({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,i){2&t&&Ir("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[Qe]}),n})();const mh="VALID",Nm="INVALID",$c="PENDING",gh="DISABLED";function $y(n){return(Lm(n)?n.validators:n)||null}function qy(n,e){return(Lm(e)?e.asyncValidators:n)||null}function Lm(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class $P{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===mh}get invalid(){return this.status===Nm}get pending(){return this.status==$c}get disabled(){return this.status===gh}get enabled(){return this.status!==gh}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(UP(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(UP(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(VP(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(VP(e,this._rawAsyncValidators))}hasValidator(e){return km(this._rawValidators,e)}hasAsyncValidator(e){return km(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=$c,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=gh,this.errors=null,this._forEachChild(i=>{i.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=mh,this._forEachChild(i=>{i.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===mh||this.status===$c)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?gh:mh}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=$c,this._hasOwnPendingAsyncValidator=!0;const t=IP(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((i,r)=>i&&i._find(r),this)}getError(e,t){const i=t?this.get(t):this;return i&&i.errors?i.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new hn,this.statusChanges=new hn}_calculateStatus(){return this._allControlsDisabled()?gh:this.errors?Nm:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus($c)?$c:this._anyControlsHaveStatus(Nm)?Nm:mh}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Lm(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function eq(n){return Array.isArray(n)?Hy(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function tq(n){return Array.isArray(n)?zy(n):n||null}(this._rawAsyncValidators)}}class Xy extends $P{constructor(e,t,i){super($y(t),qy(i,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,i={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,i={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){(function WP(n,e,t){n._forEachChild((i,r)=>{if(void 0===t[r])throw new ne(1002,"")})})(this,0,e),Object.keys(e).forEach(i=>{(function jP(n,e,t){const i=n.controls;if(!(e?Object.keys(i):i).length)throw new ne(1e3,"");if(!i[t])throw new ne(1001,"")})(this,!0,i),this.controls[i].setValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(i=>{const r=this.controls[i];r&&r.patchValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((i,r)=>{i.reset(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,i)=>(e[i]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,i)=>!!i._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const i=this.controls[t];i&&e(i,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,i]of Object.entries(this.controls))if(this.contains(t)&&e(i))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,i,r)=>((i.enabled||this.disabled)&&(t[r]=i.value),t))}_reduceChildren(e,t){let i=e;return this._forEachChild((r,o)=>{i=t(i,r,o)}),i}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}const qc=new he("CallSetDisabledState",{providedIn:"root",factory:()=>Bm}),Bm="always";function _h(n,e,t=Bm){Yy(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function rq(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&qP(n,e)})}(n,e),function sq(n,e){const t=(i,r)=>{e.valueAccessor.writeValue(i),r&&e.viewToModelUpdate(i)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function oq(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&qP(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function iq(n,e){if(e.valueAccessor.setDisabledState){const t=i=>{e.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function Hm(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function Yy(n,e){const t=function LP(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(NP(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const i=function BP(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(NP(i,e.asyncValidator)):"function"==typeof i&&n.setAsyncValidators([i]);const r=()=>n.updateValueAndValidity();Hm(e._rawValidators,r),Hm(e._rawAsyncValidators,r)}function qP(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}const uq={provide:Ui,useExisting:tn(()=>Vi)},vh=(()=>Promise.resolve())();let Vi=(()=>{class n extends Ui{constructor(t,i,r){super(),this.callSetDisabledState=r,this.submitted=!1,this._directives=new Set,this.ngSubmit=new hn,this.form=new Xy({},Hy(t),zy(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){vh.then(()=>{const i=this._findContainer(t.path);t.control=i.registerControl(t.name,t.control),_h(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){vh.then(()=>{const i=this._findContainer(t.path);i&&i.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){vh.then(()=>{const i=this._findContainer(t.path),r=new Xy({});(function XP(n,e){Yy(n,e)})(r,t),i.registerControl(t.name,r),r.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){vh.then(()=>{const i=this._findContainer(t.path);i&&i.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,i){vh.then(()=>{this.form.get(t.path).setValue(i)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,function YP(n,e){n._syncPendingControls(),e.forEach(t=>{const i=t.control;"submit"===i.updateOn&&i._pendingChange&&(t.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(L(Ei,10),L(ra,10),L(qc,8))},n.\u0275dir=xe({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,i){1&t&&Oe("submit",function(o){return i.onSubmit(o)})("reset",function(){return i.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[xt([uq]),Qe]}),n})();function ZP(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function KP(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const QP=class extends $P{constructor(e=null,t,i){super($y(t),qy(i,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Lm(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=KP(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(i=>i(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){ZP(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){ZP(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){KP(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},pq={provide:oa,useExisting:tn(()=>Nr)},tO=(()=>Promise.resolve())();let Nr=(()=>{class n extends oa{constructor(t,i,r,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this.control=new QP,this._registered=!1,this.name="",this.update=new hn,this._parent=t,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=function Qy(n,e){if(!e)return null;let t,i,r;return Array.isArray(e),e.forEach(o=>{o.constructor===pr?t=o:function cq(n){return Object.getPrototypeOf(n.constructor)===Ja}(o)?i=o:r=o}),r||i||t||null}(0,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const i=t.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function Ky(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){_h(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){tO.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const i=t.isDisabled.currentValue,r=0!==i&&kc(i);tO.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?function Um(n,e){return[...e.path,n]}(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(L(Ui,9),L(Ei,10),L(ra,10),L(Uo,10),L(Oc,8),L(qc,8))},n.\u0275dir=xe({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[xt([pq]),Qe,yi]}),n})(),gr=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=xe({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})();const mq={provide:Uo,useExisting:tn(()=>Xc),multi:!0};let Xc=(()=>{class n extends Ja{writeValue(t){this.setProperty("value",t??"")}registerOnChange(t){this.onChange=i=>{t(""==i?null:parseFloat(i))}}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=zt(n)))(i||n)}}(),n.\u0275dir=xe({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,i){1&t&&Oe("input",function(o){return i.onChange(o.target.value)})("blur",function(){return i.onTouched()})},features:[xt([mq]),Qe]}),n})(),nO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=At({type:n}),n.\u0275inj=St({}),n})();const wq={provide:Uo,useExisting:tn(()=>sa),multi:!0};function cO(n,e){return null==n?`${e}`:(e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let sa=(()=>{class n extends Ja{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;const r=cO(this._getOptionId(t),t);this.setProperty("value",r)}registerOnChange(t){this.onChange=i=>{this.value=this._getOptionValue(i),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i),t))return i;return null}_getOptionValue(t){const i=function Sq(n){return n.split(":")[0]}(t);return this._optionMap.has(i)?this._optionMap.get(i):t}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=zt(n)))(i||n)}}(),n.\u0275dir=xe({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(t,i){1&t&&Oe("change",function(o){return i.onChange(o.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[xt([wq]),Qe]}),n})(),so=(()=>{class n{constructor(t,i,r){this._element=t,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption())}set ngValue(t){null!=this._select&&(this._select._optionMap.set(this.id,t),this._setElementValue(cO(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(L(ln),L(is),L(sa,9))},n.\u0275dir=xe({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})();const Eq={provide:Uo,useExisting:tn(()=>nx),multi:!0};function dO(n,e){return null==n?`${e}`:("string"==typeof e&&(e=`'${e}'`),e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let nx=(()=>{class n extends Ja{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){let i;if(this.value=t,Array.isArray(t)){const r=t.map(o=>this._getOptionId(o));i=(o,s)=>{o._setSelected(r.indexOf(s.toString())>-1)}}else i=(r,o)=>{r._setSelected(!1)};this._optionMap.forEach(i)}registerOnChange(t){this.onChange=i=>{const r=[],o=i.selectedOptions;if(void 0!==o){const s=o;for(let a=0;a<s.length;a++){const c=this._getOptionValue(s[a].value);r.push(c)}}else{const s=i.options;for(let a=0;a<s.length;a++){const l=s[a];if(l.selected){const c=this._getOptionValue(l.value);r.push(c)}}}this.value=r,t(r)}}_registerOption(t){const i=(this._idCounter++).toString();return this._optionMap.set(i,t),i}_getOptionId(t){for(const i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i)._value,t))return i;return null}_getOptionValue(t){const i=function Tq(n){return n.split(":")[0]}(t);return this._optionMap.has(i)?this._optionMap.get(i)._value:t}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=zt(n)))(i||n)}}(),n.\u0275dir=xe({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(t,i){1&t&&Oe("change",function(o){return i.onChange(o.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[xt([Eq]),Qe]}),n})(),ao=(()=>{class n{constructor(t,i,r){this._element=t,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){null!=this._select&&(this._value=t,this._setElementValue(dO(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(dO(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(L(ln),L(is),L(nx,9))},n.\u0275dir=xe({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})(),el=(()=>{class n{constructor(){this._validator=Om}ngOnChanges(t){if(this.inputName in t){const i=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(i),this._validator=this._enabled?this.createValidator(i):Om,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=xe({type:n,features:[yi]}),n})();const Iq={provide:Ei,useExisting:tn(()=>Vo),multi:!0};let Vo=(()=>{class n extends el{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=kc,this.createValidator=t=>MP}enabled(t){return t}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=zt(n)))(i||n)}}(),n.\u0275dir=xe({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,i){2&t&&Fi("required",i._enabled?"":null)},inputs:{required:"required"},features:[xt([Iq]),Qe]}),n})(),Nq=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=At({type:n}),n.\u0275inj=St({imports:[nO]}),n})(),Bq=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:qc,useValue:t.callSetDisabledState??Bm}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=At({type:n}),n.\u0275inj=St({imports:[Nq]}),n})();const Uq=function(){return["/forgotpassword"]},Vq=function(){return["/auth/register"]};let Hq=(()=>{class n{constructor(t,i,r){this.authService=t,this.router=i,this.toastrService=r,this.tailwindConfig={darkMode:"class",theme:{extend:{colors:{primary:{50:"#f0fdf4",100:"#dcfce7",200:"#bbf7d0",300:"#86efac",400:"#4ade80",500:"#22c55e",600:"#16a34a",700:"#15803d",800:"#166534",900:"#14532d",950:"#052e16"}}},fontFamily:{body:["Inter","ui-sans-serif","system-ui","-apple-system","system-ui","Segoe UI","Roboto","Helvetica Neue","Arial","Noto Sans","sans-serif","Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji"],sans:["Inter","ui-sans-serif","system-ui","-apple-system","system-ui","Segoe UI","Roboto","Helvetica Neue","Arial","Noto Sans","sans-serif","Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji"]}}}}handleLogin(t){this.authService.login(t).subscribe({next:i=>{this.toastrService.success("Welcome back!","Login successful!"),this.router.navigate(["/"])},error:i=>{this.toastrService.error("Invalid credentials.","Login falied!")}})}}return n.\u0275fac=function(t){return new(t||n)(L(kr),L(dn),L(ro))},n.\u0275cmp=yt({type:n,selectors:[["app-login"]],decls:31,vars:4,consts:[[1,"bg-black"],[1,"flex","flex-col","items-center","justify-center","px-6","py-12","mx-auto","md:h-window"],[1,"w-full","bg-black","rounded-lg","shadow","border","md:mt-0","sm:max-w-md","xl:p-0","border-gray-700"],[1,"p-6","space-y-4","md:space-y-6","sm:p-8"],[1,"text-xl","font-bold","leading-tight","tracking-tight","md:text-2xl","text-white"],[1,"space-y-4","md:space-y-6",3,"ngSubmit"],["loginForm","ngForm"],["for","email",1,"block","mb-2","text-sm","font-medium","text-white"],["type","email","ngModel","","name","Email","id","Email","placeholder","name@company.com","required","",1,"border","sm:text-sm","rounded-lg","block","w-full","p-2.5","bg-gray-700","border-gray-600","placeholder-gray-400","text-white","focus:ring-green-500","focus:border-green-500"],["for","password",1,"block","mb-2","text-sm","font-medium","text-white"],["type","password","ngModel","","name","Password","id","Password","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022","required","",1,"border","sm:text-sm","rounded-lg","block","w-full","p-2.5","bg-gray-700","border-gray-600","placeholder-gray-400","text-white","focus:ring-green-500","focus:border-green-500"],[1,"flex","items-center","justify-between"],[1,"flex","items-start"],[1,"flex","items-center","h-5"],["id","remember","aria-describedby","remember","type","checkbox","required","",1,"w-4","h-4","border","rounded","bg-gray-700","border-green-500","focus:ring-green-500","ring-offset-green-800"],[1,"ml-3","text-sm"],["for","remember",1,"text-gray-300"],["routerLinkActive","router-link-active",1,"text-sm","font-medium","hover:underline","text-gray-500","hover:text-gray-700",3,"routerLink"],["type","submit",1,"w-full","text-white","bg-green-600","hover:bg-green-700","focus:ring-4","focus:outline-none","focus:ring-green-300","font-medium","rounded-lg","text-sm","px-5","py-2.5","text-center","bg-green-600","hover:bg-green-700","focus:ring-green-800"],[1,"text-sm","font-light","text-gray-500","text-gray-400"],["routerLinkActive","router-link-active",1,"font-medium","hover:underline","text-green-500","hover:text-green-700",3,"routerLink"]],template:function(t,i){if(1&t){const r=Ni();M(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1",4),O(5," Sign in to your account "),w(),M(6,"form",5,6),Oe("ngSubmit",function(){ni(r);const s=ss(7);return ii(i.handleLogin(s.value))}),M(8,"div")(9,"label",7),O(10,"Your email"),w(),Ie(11,"input",8),w(),M(12,"div")(13,"label",9),O(14,"Password"),w(),Ie(15,"input",10),w(),M(16,"div",11)(17,"div",12)(18,"div",13),Ie(19,"input",14),w(),M(20,"div",15)(21,"label",16),O(22,"Remember me"),w()()(),M(23,"a",17),O(24,"Forgot password?"),w()(),M(25,"button",18),O(26,"Sign in"),w(),M(27,"p",19),O(28," Don't have an account yet? "),M(29,"a",20),O(30,"Sign up"),w()()()()()()()}2&t&&(B(23),Q("routerLink",Ln(2,Uq)),B(6),Q("routerLink",Ln(3,Vq)))},dependencies:[er,no,gr,pr,oo,mr,Vo,Nr,Vi]}),n})();function yO(n,e,t,i,r,o,s){try{var a=n[o](s),l=a.value}catch(c){return void t(c)}a.done?e(l):Promise.resolve(l).then(i,r)}const CO=1,Wq=2,gs=3,Gm=0,uX=1,hX=2,vs=0,fX=1,pX=2,mX=3,gX=4,_X=5,tl=301,nl=302,bh=306,il=1e3,Ti=1001,Rn=1003,xn=1006,bs=1008,la=1009,ca=1014,ys=1015,Ch=1016,rl=1020,Lr=1023,ol=1026,Jc=1027,Mh=2300,ed=2301,td=2400,nd=2401,sl=3001,lt="srgb",zo="srgb-linear",lk="display-p3",ck="300 es",xs=2e3;class da{addEventListener(e,t){void 0===this._listeners&&(this._listeners={});const i=this._listeners;void 0===i[e]&&(i[e]=[]),-1===i[e].indexOf(t)&&i[e].push(t)}hasEventListener(e,t){if(void 0===this._listeners)return!1;const i=this._listeners;return void 0!==i[e]&&-1!==i[e].indexOf(t)}removeEventListener(e,t){if(void 0===this._listeners)return;const r=this._listeners[e];if(void 0!==r){const o=r.indexOf(t);-1!==o&&r.splice(o,1)}}dispatchEvent(e){if(void 0===this._listeners)return;const i=this._listeners[e.type];if(void 0!==i){e.target=this;const r=i.slice(0);for(let o=0,s=r.length;o<s;o++)r[o].call(this,e);e.target=null}}}const Di=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];const cl=Math.PI/180,id=180/Math.PI;function _r(){const n=4294967295*Math.random()|0,e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,i=4294967295*Math.random()|0;return(Di[255&n]+Di[n>>8&255]+Di[n>>16&255]+Di[n>>24&255]+"-"+Di[255&e]+Di[e>>8&255]+"-"+Di[e>>16&15|64]+Di[e>>24&255]+"-"+Di[63&t|128]+Di[t>>8&255]+"-"+Di[t>>16&255]+Di[t>>24&255]+Di[255&i]+Di[i>>8&255]+Di[i>>16&255]+Di[i>>24&255]).toLowerCase()}function Cn(n,e,t){return Math.max(e,Math.min(t,n))}function vx(n,e){return(n%e+e)%e}function wh(n,e,t){return(1-t)*n+t*e}function bx(n){return 0==(n&n-1)&&0!==n}function uk(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function Zm(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function vr(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function Ct(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(4294967295*n);case Uint16Array:return Math.round(65535*n);case Uint8Array:return Math.round(255*n);case Int32Array:return Math.round(2147483647*n);case Int16Array:return Math.round(32767*n);case Int8Array:return Math.round(127*n);default:throw new Error("Invalid component type.")}}const nY_radToDeg=function eY(n){return n*id};class ce{constructor(e=0,t=0){ce.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6],this.y=r[1]*t+r[4]*i+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(Cn(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),r=Math.sin(t),o=this.x-e.x,s=this.y-e.y;return this.x=o*i-s*r+e.x,this.y=o*r+s*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Tt{constructor(e,t,i,r,o,s,a,l,c){Tt.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],void 0!==e&&this.set(e,t,i,r,o,s,a,l,c)}set(e,t,i,r,o,s,a,l,c){const d=this.elements;return d[0]=e,d[1]=r,d[2]=a,d[3]=t,d[4]=o,d[5]=l,d[6]=i,d[7]=s,d[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,o=this.elements,s=i[0],a=i[3],l=i[6],c=i[1],d=i[4],u=i[7],h=i[2],f=i[5],p=i[8],_=r[0],m=r[3],g=r[6],b=r[1],v=r[4],y=r[7],x=r[2],S=r[5],D=r[8];return o[0]=s*_+a*b+l*x,o[3]=s*m+a*v+l*S,o[6]=s*g+a*y+l*D,o[1]=c*_+d*b+u*x,o[4]=c*m+d*v+u*S,o[7]=c*g+d*y+u*D,o[2]=h*_+f*b+p*x,o[5]=h*m+f*v+p*S,o[8]=h*g+f*y+p*D,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],r=e[2],o=e[3],s=e[4],a=e[5],l=e[6],c=e[7],d=e[8];return t*s*d-t*a*c-i*o*d+i*a*l+r*o*c-r*s*l}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],o=e[3],s=e[4],a=e[5],l=e[6],c=e[7],d=e[8],u=d*s-a*c,h=a*l-d*o,f=c*o-s*l,p=t*u+i*h+r*f;if(0===p)return this.set(0,0,0,0,0,0,0,0,0);const _=1/p;return e[0]=u*_,e[1]=(r*c-d*i)*_,e[2]=(a*i-r*s)*_,e[3]=h*_,e[4]=(d*t-r*l)*_,e[5]=(r*o-a*t)*_,e[6]=f*_,e[7]=(i*l-c*t)*_,e[8]=(s*t-i*o)*_,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,r,o,s,a){const l=Math.cos(o),c=Math.sin(o);return this.set(i*l,i*c,-i*(l*s+c*a)+s+e,-r*c,r*l,-r*(-c*s+l*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(yx.makeScale(e,t)),this}rotate(e){return this.premultiply(yx.makeRotation(-e)),this}translate(e,t){return this.premultiply(yx.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,i,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<9;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return(new this.constructor).fromArray(this.elements)}}const yx=new Tt;function hk(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}function Sh(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;const fk={};function Eh(n){n in fk||(fk[n]=!0,console.warn(n))}function od(n){return n<.04045?.0773993808*n:Math.pow(.9478672986*n+.0521327014,2.4)}function xx(n){return n<.0031308?12.92*n:1.055*Math.pow(n,.41666)-.055}const rY=(new Tt).fromArray([.8224621,.0331941,.0170827,.177538,.9668058,.0723974,-1e-7,1e-7,.9105199]),oY=(new Tt).fromArray([1.2249401,-.0420569,-.0196376,-.2249404,1.0420571,-.0786361,1e-7,0,1.0982735]),lY={[zo]:n=>n,[lt]:n=>n.convertSRGBToLinear(),[lk]:function sY(n){return n.convertSRGBToLinear().applyMatrix3(oY)}},cY={[zo]:n=>n,[lt]:n=>n.convertLinearToSRGB(),[lk]:function aY(n){return n.applyMatrix3(rY).convertLinearToSRGB()}},lo={enabled:!0,get legacyMode(){return console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),!this.enabled},set legacyMode(n){console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),this.enabled=!n},get workingColorSpace(){return zo},set workingColorSpace(n){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(n,e,t){if(!1===this.enabled||e===t||!e||!t)return n;const i=lY[e],r=cY[t];if(void 0===i||void 0===r)throw new Error(`Unsupported color space conversion, "${e}" to "${t}".`);return r(i(n))},fromWorkingColorSpace:function(n,e){return this.convert(n,this.workingColorSpace,e)},toWorkingColorSpace:function(n,e){return this.convert(n,e,this.workingColorSpace)}};let sd;class pk{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===sd&&(sd=Sh("canvas")),sd.width=e.width,sd.height=e.height;const i=sd.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),t=sd}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=Sh("canvas");t.width=e.width,t.height=e.height;const i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const r=i.getImageData(0,0,e.width,e.height),o=r.data;for(let s=0;s<o.length;s++)o[s]=255*od(o[s]/255);return i.putImageData(r,0,0),t}if(e.data){const t=e.data.slice(0);for(let i=0;i<t.length;i++)t[i]=t instanceof Uint8Array||t instanceof Uint8ClampedArray?Math.floor(255*od(t[i]/255)):od(t[i]);return{data:t,width:e.width,height:e.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let dY=0;class ad{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:dY++}),this.uuid=_r(),this.data=e,this.version=0}set needsUpdate(e){!0===e&&this.version++}toJSON(e){const t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.images[this.uuid])return e.images[this.uuid];const i={uuid:this.uuid,url:""},r=this.data;if(null!==r){let o;if(Array.isArray(r)){o=[];for(let s=0,a=r.length;s<a;s++)o.push(Cx(r[s].isDataTexture?r[s].image:r[s]))}else o=Cx(r);i.url=o}return t||(e.images[this.uuid]=i),i}}function Cx(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?pk.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let uY=0,co=(()=>{class n extends da{constructor(t=n.DEFAULT_IMAGE,i=n.DEFAULT_MAPPING,r=Ti,o=Ti,s=xn,a=bs,l=Lr,c=la,d=n.DEFAULT_ANISOTROPY,u=""){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:uY++}),this.uuid=_r(),this.name="",this.source=new ad(t),this.mipmaps=[],this.mapping=i,this.channel=0,this.wrapS=r,this.wrapT=o,this.magFilter=s,this.minFilter=a,this.anisotropy=d,this.format=l,this.internalFormat=null,this.type=c,this.offset=new ce(0,0),this.repeat=new ce(1,1),this.center=new ce(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Tt,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,"string"==typeof u?this.colorSpace=u:(Eh("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=u===sl?lt:""),this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(t=null){this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.channel=t.channel,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.colorSpace=t.colorSpace,this.userData=JSON.parse(JSON.stringify(t.userData)),this.needsUpdate=!0,this}toJSON(t){const i=void 0===t||"string"==typeof t;if(!i&&void 0!==t.textures[this.uuid])return t.textures[this.uuid];const r={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),i||(t.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(300!==this.mapping)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case il:t.x=t.x-Math.floor(t.x);break;case Ti:t.x=t.x<0?0:1;break;case 1002:t.x=1===Math.abs(Math.floor(t.x)%2)?Math.ceil(t.x)-t.x:t.x-Math.floor(t.x)}if(t.y<0||t.y>1)switch(this.wrapT){case il:t.y=t.y-Math.floor(t.y);break;case Ti:t.y=t.y<0?0:1;break;case 1002:t.y=1===Math.abs(Math.floor(t.y)%2)?Math.ceil(t.y)-t.y:t.y-Math.floor(t.y)}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){!0===t&&(this.version++,this.source.needsUpdate=!0)}get encoding(){return Eh("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace===lt?sl:3e3}set encoding(t){Eh("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=t===sl?lt:""}}return n.DEFAULT_IMAGE=null,n.DEFAULT_MAPPING=300,n.DEFAULT_ANISOTROPY=1,n})();class Jt{constructor(e=0,t=0,i=0,r=1){Jt.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,r){return this.x=e,this.y=t,this.z=i,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,o=this.w,s=e.elements;return this.x=s[0]*t+s[4]*i+s[8]*r+s[12]*o,this.y=s[1]*t+s[5]*i+s[9]*r+s[13]*o,this.z=s[2]*t+s[6]*i+s[10]*r+s[14]*o,this.w=s[3]*t+s[7]*i+s[11]*r+s[15]*o,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,r,o;const l=e.elements,c=l[0],d=l[4],u=l[8],h=l[1],f=l[5],p=l[9],_=l[2],m=l[6],g=l[10];if(Math.abs(d-h)<.01&&Math.abs(u-_)<.01&&Math.abs(p-m)<.01){if(Math.abs(d+h)<.1&&Math.abs(u+_)<.1&&Math.abs(p+m)<.1&&Math.abs(c+f+g-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const v=(c+1)/2,y=(f+1)/2,x=(g+1)/2,S=(d+h)/4,D=(u+_)/4,I=(p+m)/4;return v>y&&v>x?v<.01?(i=0,r=.707106781,o=.707106781):(i=Math.sqrt(v),r=S/i,o=D/i):y>x?y<.01?(i=.707106781,r=0,o=.707106781):(r=Math.sqrt(y),i=S/r,o=I/r):x<.01?(i=.707106781,r=.707106781,o=0):(o=Math.sqrt(x),i=D/o,r=I/o),this.set(i,r,o,t),this}let b=Math.sqrt((m-p)*(m-p)+(u-_)*(u-_)+(h-d)*(h-d));return Math.abs(b)<.001&&(b=1),this.x=(m-p)/b,this.y=(u-_)/b,this.z=(h-d)/b,this.w=Math.acos((c+f+g-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class dl extends da{constructor(e=1,t=1,i={}){super(),this.isWebGLRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new Jt(0,0,e,t),this.scissorTest=!1,this.viewport=new Jt(0,0,e,t);const r={width:e,height:t,depth:1};void 0!==i.encoding&&(Eh("THREE.WebGLRenderTarget: option.encoding has been replaced by option.colorSpace."),i.colorSpace=i.encoding===sl?lt:""),this.texture=new co(r,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=void 0!==i.generateMipmaps&&i.generateMipmaps,this.texture.internalFormat=void 0!==i.internalFormat?i.internalFormat:null,this.texture.minFilter=void 0!==i.minFilter?i.minFilter:xn,this.depthBuffer=void 0===i.depthBuffer||i.depthBuffer,this.stencilBuffer=void 0!==i.stencilBuffer&&i.stencilBuffer,this.depthTexture=void 0!==i.depthTexture?i.depthTexture:null,this.samples=void 0!==i.samples?i.samples:0}setSize(e,t,i=1){(this.width!==e||this.height!==t||this.depth!==i)&&(this.width=e,this.height=t,this.depth=i,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=i,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return(new this.constructor).copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new ad(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Mx extends co{constructor(e=null,t=1,i=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=Rn,this.minFilter=Rn,this.wrapR=Ti,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class mk extends co{constructor(e=null,t=1,i=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=Rn,this.minFilter=Rn,this.wrapR=Ti,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class gi{constructor(e=0,t=0,i=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=r}static slerpFlat(e,t,i,r,o,s,a){let l=i[r+0],c=i[r+1],d=i[r+2],u=i[r+3];const h=o[s+0],f=o[s+1],p=o[s+2],_=o[s+3];if(0===a)return e[t+0]=l,e[t+1]=c,e[t+2]=d,void(e[t+3]=u);if(1===a)return e[t+0]=h,e[t+1]=f,e[t+2]=p,void(e[t+3]=_);if(u!==_||l!==h||c!==f||d!==p){let m=1-a;const g=l*h+c*f+d*p+u*_,b=g>=0?1:-1,v=1-g*g;if(v>Number.EPSILON){const x=Math.sqrt(v),S=Math.atan2(x,g*b);m=Math.sin(m*S)/x,a=Math.sin(a*S)/x}const y=a*b;if(l=l*m+h*y,c=c*m+f*y,d=d*m+p*y,u=u*m+_*y,m===1-a){const x=1/Math.sqrt(l*l+c*c+d*d+u*u);l*=x,c*=x,d*=x,u*=x}}e[t]=l,e[t+1]=c,e[t+2]=d,e[t+3]=u}static multiplyQuaternionsFlat(e,t,i,r,o,s){const a=i[r],l=i[r+1],c=i[r+2],d=i[r+3],u=o[s],h=o[s+1],f=o[s+2],p=o[s+3];return e[t]=a*p+d*u+l*f-c*h,e[t+1]=l*p+d*h+c*u-a*f,e[t+2]=c*p+d*f+a*h-l*u,e[t+3]=d*p-a*u-l*h-c*f,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,r){return this._x=e,this._y=t,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){const i=e._x,r=e._y,o=e._z,s=e._order,a=Math.cos,l=Math.sin,c=a(i/2),d=a(r/2),u=a(o/2),h=l(i/2),f=l(r/2),p=l(o/2);switch(s){case"XYZ":this._x=h*d*u+c*f*p,this._y=c*f*u-h*d*p,this._z=c*d*p+h*f*u,this._w=c*d*u-h*f*p;break;case"YXZ":this._x=h*d*u+c*f*p,this._y=c*f*u-h*d*p,this._z=c*d*p-h*f*u,this._w=c*d*u+h*f*p;break;case"ZXY":this._x=h*d*u-c*f*p,this._y=c*f*u+h*d*p,this._z=c*d*p+h*f*u,this._w=c*d*u-h*f*p;break;case"ZYX":this._x=h*d*u-c*f*p,this._y=c*f*u+h*d*p,this._z=c*d*p-h*f*u,this._w=c*d*u+h*f*p;break;case"YZX":this._x=h*d*u+c*f*p,this._y=c*f*u+h*d*p,this._z=c*d*p-h*f*u,this._w=c*d*u-h*f*p;break;case"XZY":this._x=h*d*u-c*f*p,this._y=c*f*u-h*d*p,this._z=c*d*p+h*f*u,this._w=c*d*u+h*f*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+s)}return!1!==t&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const i=t/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,i=t[0],r=t[4],o=t[8],s=t[1],a=t[5],l=t[9],c=t[2],d=t[6],u=t[10],h=i+a+u;if(h>0){const f=.5/Math.sqrt(h+1);this._w=.25/f,this._x=(d-l)*f,this._y=(o-c)*f,this._z=(s-r)*f}else if(i>a&&i>u){const f=2*Math.sqrt(1+i-a-u);this._w=(d-l)/f,this._x=.25*f,this._y=(r+s)/f,this._z=(o+c)/f}else if(a>u){const f=2*Math.sqrt(1+a-i-u);this._w=(o-c)/f,this._x=(r+s)/f,this._y=.25*f,this._z=(l+d)/f}else{const f=2*Math.sqrt(1+u-i-a);this._w=(s-r)/f,this._x=(o+c)/f,this._y=(l+d)/f,this._z=.25*f}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Cn(this.dot(e),-1,1)))}rotateTowards(e,t){const i=this.angleTo(e);if(0===i)return this;const r=Math.min(1,t/i);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const i=e._x,r=e._y,o=e._z,s=e._w,a=t._x,l=t._y,c=t._z,d=t._w;return this._x=i*d+s*a+r*c-o*l,this._y=r*d+s*l+o*a-i*c,this._z=o*d+s*c+i*l-r*a,this._w=s*d-i*a-r*l-o*c,this._onChangeCallback(),this}slerp(e,t){if(0===t)return this;if(1===t)return this.copy(e);const i=this._x,r=this._y,o=this._z,s=this._w;let a=s*e._w+i*e._x+r*e._y+o*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=s,this._x=i,this._y=r,this._z=o,this;const l=1-a*a;if(l<=Number.EPSILON){const f=1-t;return this._w=f*s+t*this._w,this._x=f*i+t*this._x,this._y=f*r+t*this._y,this._z=f*o+t*this._z,this.normalize(),this._onChangeCallback(),this}const c=Math.sqrt(l),d=Math.atan2(c,a),u=Math.sin((1-t)*d)/c,h=Math.sin(t*d)/c;return this._w=s*u+this._w*h,this._x=i*u+this._x*h,this._y=r*u+this._y*h,this._z=o*u+this._z*h,this._onChangeCallback(),this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){const e=Math.random(),t=Math.sqrt(1-e),i=Math.sqrt(e),r=2*Math.PI*Math.random(),o=2*Math.PI*Math.random();return this.set(t*Math.cos(r),i*Math.sin(o),i*Math.cos(o),t*Math.sin(r))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class R{constructor(e=0,t=0,i=0){R.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return void 0===i&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(gk.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(gk.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,r=this.z,o=e.elements;return this.x=o[0]*t+o[3]*i+o[6]*r,this.y=o[1]*t+o[4]*i+o[7]*r,this.z=o[2]*t+o[5]*i+o[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,o=e.elements,s=1/(o[3]*t+o[7]*i+o[11]*r+o[15]);return this.x=(o[0]*t+o[4]*i+o[8]*r+o[12])*s,this.y=(o[1]*t+o[5]*i+o[9]*r+o[13])*s,this.z=(o[2]*t+o[6]*i+o[10]*r+o[14])*s,this}applyQuaternion(e){const t=this.x,i=this.y,r=this.z,o=e.x,s=e.y,a=e.z,l=e.w,c=l*t+s*r-a*i,d=l*i+a*t-o*r,u=l*r+o*i-s*t,h=-o*t-s*i-a*r;return this.x=c*l+h*-o+d*-a-u*-s,this.y=d*l+h*-s+u*-o-c*-a,this.z=u*l+h*-a+c*-s-d*-o,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,r=this.z,o=e.elements;return this.x=o[0]*t+o[4]*i+o[8]*r,this.y=o[1]*t+o[5]*i+o[9]*r,this.z=o[2]*t+o[6]*i+o[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,r=e.y,o=e.z,s=t.x,a=t.y,l=t.z;return this.x=r*l-o*a,this.y=o*s-i*l,this.z=i*a-r*s,this}projectOnVector(e){const t=e.lengthSq();if(0===t)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return wx.copy(this).projectOnVector(e),this.sub(wx)}reflect(e){return this.sub(wx.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(Cn(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return t*t+i*i+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const r=Math.sin(t)*e;return this.x=r*Math.sin(i),this.y=Math.cos(t)*e,this.z=r*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,4*t)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,3*t)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=2*(Math.random()-.5),t=Math.random()*Math.PI*2,i=Math.sqrt(1-e**2);return this.x=i*Math.cos(t),this.y=i*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const wx=new R,gk=new gi;class Go{constructor(e=new R(1/0,1/0,1/0),t=new R(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t+=3)this.expandByPoint(Ms.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,i=e.count;t<i;t++)this.expandByPoint(Ms.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=Ms.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){if(e.updateWorldMatrix(!1,!1),void 0!==e.boundingBox)null===e.boundingBox&&e.computeBoundingBox(),ld.copy(e.boundingBox),ld.applyMatrix4(e.matrixWorld),this.union(ld);else{const r=e.geometry;if(void 0!==r)if(t&&void 0!==r.attributes&&void 0!==r.attributes.position){const o=r.attributes.position;for(let s=0,a=o.count;s<a;s++)Ms.fromBufferAttribute(o,s).applyMatrix4(e.matrixWorld),this.expandByPoint(Ms)}else null===r.boundingBox&&r.computeBoundingBox(),ld.copy(r.boundingBox),ld.applyMatrix4(e.matrixWorld),this.union(ld)}const i=e.children;for(let r=0,o=i.length;r<o;r++)this.expandByObject(i[r],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,Ms),Ms.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Th),Km.subVectors(this.max,Th),cd.subVectors(e.a,Th),dd.subVectors(e.b,Th),ud.subVectors(e.c,Th),ua.subVectors(dd,cd),ha.subVectors(ud,dd),ul.subVectors(cd,ud);let t=[0,-ua.z,ua.y,0,-ha.z,ha.y,0,-ul.z,ul.y,ua.z,0,-ua.x,ha.z,0,-ha.x,ul.z,0,-ul.x,-ua.y,ua.x,0,-ha.y,ha.x,0,-ul.y,ul.x,0];return!(!Sx(t,cd,dd,ud,Km)||(t=[1,0,0,0,1,0,0,0,1],!Sx(t,cd,dd,ud,Km)))&&(Qm.crossVectors(ua,ha),t=[Qm.x,Qm.y,Qm.z],Sx(t,cd,dd,ud,Km))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Ms).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=.5*this.getSize(Ms).length()),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()||(Cs[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Cs[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Cs[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Cs[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Cs[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Cs[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Cs[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Cs[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Cs)),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Cs=[new R,new R,new R,new R,new R,new R,new R,new R],Ms=new R,ld=new Go,cd=new R,dd=new R,ud=new R,ua=new R,ha=new R,ul=new R,Th=new R,Km=new R,Qm=new R,hl=new R;function Sx(n,e,t,i,r){for(let o=0,s=n.length-3;o<=s;o+=3){hl.fromArray(n,o);const a=r.x*Math.abs(hl.x)+r.y*Math.abs(hl.y)+r.z*Math.abs(hl.z),l=e.dot(hl),c=t.dot(hl),d=i.dot(hl);if(Math.max(-Math.max(l,c,d),Math.min(l,c,d))>a)return!1}return!0}const hY=new Go,Dh=new R,Ex=new R;class uo{constructor(e=new R,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const i=this.center;void 0!==t?i.copy(t):hY.setFromPoints(e).getCenter(i);let r=0;for(let o=0,s=e.length;o<s;o++)r=Math.max(r,i.distanceToSquared(e[o]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Dh.subVectors(e,this.center);const t=Dh.lengthSq();if(t>this.radius*this.radius){const i=Math.sqrt(t),r=.5*(i-this.radius);this.center.addScaledVector(Dh,r/i),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(!0===this.center.equals(e.center)?this.radius=Math.max(this.radius,e.radius):(Ex.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Dh.copy(e.center).add(Ex)),this.expandByPoint(Dh.copy(e.center).sub(Ex))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const ws=new R,Tx=new R,Jm=new R,fa=new R,Dx=new R,eg=new R,Ax=new R;class Ah{constructor(e=new R,t=new R(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,ws)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=ws.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(ws.copy(this.origin).addScaledVector(this.direction,t),ws.distanceToSquared(e))}distanceSqToSegment(e,t,i,r){Tx.copy(e).add(t).multiplyScalar(.5),Jm.copy(t).sub(e).normalize(),fa.copy(this.origin).sub(Tx);const o=.5*e.distanceTo(t),s=-this.direction.dot(Jm),a=fa.dot(this.direction),l=-fa.dot(Jm),c=fa.lengthSq(),d=Math.abs(1-s*s);let u,h,f,p;if(d>0)if(u=s*l-a,h=s*a-l,p=o*d,u>=0)if(h>=-p)if(h<=p){const _=1/d;u*=_,h*=_,f=u*(u+s*h+2*a)+h*(s*u+h+2*l)+c}else h=o,u=Math.max(0,-(s*h+a)),f=-u*u+h*(h+2*l)+c;else h=-o,u=Math.max(0,-(s*h+a)),f=-u*u+h*(h+2*l)+c;else h<=-p?(u=Math.max(0,-(-s*o+a)),h=u>0?-o:Math.min(Math.max(-o,-l),o),f=-u*u+h*(h+2*l)+c):h<=p?(u=0,h=Math.min(Math.max(-o,-l),o),f=h*(h+2*l)+c):(u=Math.max(0,-(s*o+a)),h=u>0?o:Math.min(Math.max(-o,-l),o),f=-u*u+h*(h+2*l)+c);else h=s>0?-o:o,u=Math.max(0,-(s*h+a)),f=-u*u+h*(h+2*l)+c;return i&&i.copy(this.origin).addScaledVector(this.direction,u),r&&r.copy(Tx).addScaledVector(Jm,h),f}intersectSphere(e,t){ws.subVectors(e.center,this.origin);const i=ws.dot(this.direction),r=ws.dot(ws)-i*i,o=e.radius*e.radius;if(r>o)return null;const s=Math.sqrt(o-r),a=i-s,l=i+s;return l<0?null:this.at(a<0?l:a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){const i=this.distanceToPlane(e);return null===i?null:this.at(i,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,r,o,s,a,l;const c=1/this.direction.x,d=1/this.direction.y,u=1/this.direction.z,h=this.origin;return c>=0?(i=(e.min.x-h.x)*c,r=(e.max.x-h.x)*c):(i=(e.max.x-h.x)*c,r=(e.min.x-h.x)*c),d>=0?(o=(e.min.y-h.y)*d,s=(e.max.y-h.y)*d):(o=(e.max.y-h.y)*d,s=(e.min.y-h.y)*d),i>s||o>r||((o>i||isNaN(i))&&(i=o),(s<r||isNaN(r))&&(r=s),u>=0?(a=(e.min.z-h.z)*u,l=(e.max.z-h.z)*u):(a=(e.max.z-h.z)*u,l=(e.min.z-h.z)*u),i>l||a>r)||((a>i||i!=i)&&(i=a),(l<r||r!=r)&&(r=l),r<0)?null:this.at(i>=0?i:r,t)}intersectsBox(e){return null!==this.intersectBox(e,ws)}intersectTriangle(e,t,i,r,o){Dx.subVectors(t,e),eg.subVectors(i,e),Ax.crossVectors(Dx,eg);let a,s=this.direction.dot(Ax);if(s>0){if(r)return null;a=1}else{if(!(s<0))return null;a=-1,s=-s}fa.subVectors(this.origin,e);const l=a*this.direction.dot(eg.crossVectors(fa,eg));if(l<0)return null;const c=a*this.direction.dot(Dx.cross(fa));if(c<0||l+c>s)return null;const d=-a*fa.dot(Ax);return d<0?null:this.at(d/s,o)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class ct{constructor(e,t,i,r,o,s,a,l,c,d,u,h,f,p,_,m){ct.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],void 0!==e&&this.set(e,t,i,r,o,s,a,l,c,d,u,h,f,p,_,m)}set(e,t,i,r,o,s,a,l,c,d,u,h,f,p,_,m){const g=this.elements;return g[0]=e,g[4]=t,g[8]=i,g[12]=r,g[1]=o,g[5]=s,g[9]=a,g[13]=l,g[2]=c,g[6]=d,g[10]=u,g[14]=h,g[3]=f,g[7]=p,g[11]=_,g[15]=m,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new ct).fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,i=e.elements,r=1/hd.setFromMatrixColumn(e,0).length(),o=1/hd.setFromMatrixColumn(e,1).length(),s=1/hd.setFromMatrixColumn(e,2).length();return t[0]=i[0]*r,t[1]=i[1]*r,t[2]=i[2]*r,t[3]=0,t[4]=i[4]*o,t[5]=i[5]*o,t[6]=i[6]*o,t[7]=0,t[8]=i[8]*s,t[9]=i[9]*s,t[10]=i[10]*s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,i=e.x,r=e.y,o=e.z,s=Math.cos(i),a=Math.sin(i),l=Math.cos(r),c=Math.sin(r),d=Math.cos(o),u=Math.sin(o);if("XYZ"===e.order){const h=s*d,f=s*u,p=a*d,_=a*u;t[0]=l*d,t[4]=-l*u,t[8]=c,t[1]=f+p*c,t[5]=h-_*c,t[9]=-a*l,t[2]=_-h*c,t[6]=p+f*c,t[10]=s*l}else if("YXZ"===e.order){const h=l*d,f=l*u,p=c*d,_=c*u;t[0]=h+_*a,t[4]=p*a-f,t[8]=s*c,t[1]=s*u,t[5]=s*d,t[9]=-a,t[2]=f*a-p,t[6]=_+h*a,t[10]=s*l}else if("ZXY"===e.order){const h=l*d,f=l*u,p=c*d,_=c*u;t[0]=h-_*a,t[4]=-s*u,t[8]=p+f*a,t[1]=f+p*a,t[5]=s*d,t[9]=_-h*a,t[2]=-s*c,t[6]=a,t[10]=s*l}else if("ZYX"===e.order){const h=s*d,f=s*u,p=a*d,_=a*u;t[0]=l*d,t[4]=p*c-f,t[8]=h*c+_,t[1]=l*u,t[5]=_*c+h,t[9]=f*c-p,t[2]=-c,t[6]=a*l,t[10]=s*l}else if("YZX"===e.order){const h=s*l,f=s*c,p=a*l,_=a*c;t[0]=l*d,t[4]=_-h*u,t[8]=p*u+f,t[1]=u,t[5]=s*d,t[9]=-a*d,t[2]=-c*d,t[6]=f*u+p,t[10]=h-_*u}else if("XZY"===e.order){const h=s*l,f=s*c,p=a*l,_=a*c;t[0]=l*d,t[4]=-u,t[8]=c*d,t[1]=h*u+_,t[5]=s*d,t[9]=f*u-p,t[2]=p*u-f,t[6]=a*d,t[10]=_*u+h}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(fY,e,pY)}lookAt(e,t,i){const r=this.elements;return br.subVectors(e,t),0===br.lengthSq()&&(br.z=1),br.normalize(),pa.crossVectors(i,br),0===pa.lengthSq()&&(1===Math.abs(i.z)?br.x+=1e-4:br.z+=1e-4,br.normalize(),pa.crossVectors(i,br)),pa.normalize(),tg.crossVectors(br,pa),r[0]=pa.x,r[4]=tg.x,r[8]=br.x,r[1]=pa.y,r[5]=tg.y,r[9]=br.y,r[2]=pa.z,r[6]=tg.z,r[10]=br.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,o=this.elements,s=i[0],a=i[4],l=i[8],c=i[12],d=i[1],u=i[5],h=i[9],f=i[13],p=i[2],_=i[6],m=i[10],g=i[14],b=i[3],v=i[7],y=i[11],x=i[15],S=r[0],D=r[4],I=r[8],C=r[12],T=r[1],j=r[5],ie=r[9],V=r[13],G=r[2],$=r[6],z=r[10],H=r[14],W=r[3],K=r[7],ae=r[11],Ce=r[15];return o[0]=s*S+a*T+l*G+c*W,o[4]=s*D+a*j+l*$+c*K,o[8]=s*I+a*ie+l*z+c*ae,o[12]=s*C+a*V+l*H+c*Ce,o[1]=d*S+u*T+h*G+f*W,o[5]=d*D+u*j+h*$+f*K,o[9]=d*I+u*ie+h*z+f*ae,o[13]=d*C+u*V+h*H+f*Ce,o[2]=p*S+_*T+m*G+g*W,o[6]=p*D+_*j+m*$+g*K,o[10]=p*I+_*ie+m*z+g*ae,o[14]=p*C+_*V+m*H+g*Ce,o[3]=b*S+v*T+y*G+x*W,o[7]=b*D+v*j+y*$+x*K,o[11]=b*I+v*ie+y*z+x*ae,o[15]=b*C+v*V+y*H+x*Ce,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],r=e[8],o=e[12],s=e[1],a=e[5],l=e[9],c=e[13],d=e[2],u=e[6],h=e[10],f=e[14];return e[3]*(+o*l*u-r*c*u-o*a*h+i*c*h+r*a*f-i*l*f)+e[7]*(+t*l*f-t*c*h+o*s*h-r*s*f+r*c*d-o*l*d)+e[11]*(+t*c*u-t*a*f-o*s*u+i*s*f+o*a*d-i*c*d)+e[15]*(-r*a*d-t*l*u+t*a*h+r*s*u-i*s*h+i*l*d)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],o=e[3],s=e[4],a=e[5],l=e[6],c=e[7],d=e[8],u=e[9],h=e[10],f=e[11],p=e[12],_=e[13],m=e[14],g=e[15],b=u*m*c-_*h*c+_*l*f-a*m*f-u*l*g+a*h*g,v=p*h*c-d*m*c-p*l*f+s*m*f+d*l*g-s*h*g,y=d*_*c-p*u*c+p*a*f-s*_*f-d*a*g+s*u*g,x=p*u*l-d*_*l-p*a*h+s*_*h+d*a*m-s*u*m,S=t*b+i*v+r*y+o*x;if(0===S)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const D=1/S;return e[0]=b*D,e[1]=(_*h*o-u*m*o-_*r*f+i*m*f+u*r*g-i*h*g)*D,e[2]=(a*m*o-_*l*o+_*r*c-i*m*c-a*r*g+i*l*g)*D,e[3]=(u*l*o-a*h*o-u*r*c+i*h*c+a*r*f-i*l*f)*D,e[4]=v*D,e[5]=(d*m*o-p*h*o+p*r*f-t*m*f-d*r*g+t*h*g)*D,e[6]=(p*l*o-s*m*o-p*r*c+t*m*c+s*r*g-t*l*g)*D,e[7]=(s*h*o-d*l*o+d*r*c-t*h*c-s*r*f+t*l*f)*D,e[8]=y*D,e[9]=(p*u*o-d*_*o-p*i*f+t*_*f+d*i*g-t*u*g)*D,e[10]=(s*_*o-p*a*o+p*i*c-t*_*c-s*i*g+t*a*g)*D,e[11]=(d*a*o-s*u*o-d*i*c+t*u*c+s*i*f-t*a*f)*D,e[12]=x*D,e[13]=(d*_*r-p*u*r+p*i*h-t*_*h-d*i*m+t*u*m)*D,e[14]=(p*a*r-s*_*r-p*i*l+t*_*l+s*i*m-t*a*m)*D,e[15]=(s*u*r-d*a*r+d*i*l-t*u*l-s*i*h+t*a*h)*D,this}scale(e){const t=this.elements,i=e.x,r=e.y,o=e.z;return t[0]*=i,t[4]*=r,t[8]*=o,t[1]*=i,t[5]*=r,t[9]*=o,t[2]*=i,t[6]*=r,t[10]*=o,t[3]*=i,t[7]*=r,t[11]*=o,this}getMaxScaleOnAxis(){const e=this.elements;return Math.sqrt(Math.max(e[0]*e[0]+e[1]*e[1]+e[2]*e[2],e[4]*e[4]+e[5]*e[5]+e[6]*e[6],e[8]*e[8]+e[9]*e[9]+e[10]*e[10]))}makeTranslation(e,t,i){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),r=Math.sin(t),o=1-i,s=e.x,a=e.y,l=e.z,c=o*s,d=o*a;return this.set(c*s+i,c*a-r*l,c*l+r*a,0,c*a+r*l,d*a+i,d*l-r*s,0,c*l-r*a,d*l+r*s,o*l*l+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,r,o,s){return this.set(1,i,o,0,e,1,s,0,t,r,1,0,0,0,0,1),this}compose(e,t,i){const r=this.elements,o=t._x,s=t._y,a=t._z,l=t._w,c=o+o,d=s+s,u=a+a,h=o*c,f=o*d,p=o*u,_=s*d,m=s*u,g=a*u,b=l*c,v=l*d,y=l*u,x=i.x,S=i.y,D=i.z;return r[0]=(1-(_+g))*x,r[1]=(f+y)*x,r[2]=(p-v)*x,r[3]=0,r[4]=(f-y)*S,r[5]=(1-(h+g))*S,r[6]=(m+b)*S,r[7]=0,r[8]=(p+v)*D,r[9]=(m-b)*D,r[10]=(1-(h+_))*D,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,i){const r=this.elements;let o=hd.set(r[0],r[1],r[2]).length();const s=hd.set(r[4],r[5],r[6]).length(),a=hd.set(r[8],r[9],r[10]).length();this.determinant()<0&&(o=-o),e.x=r[12],e.y=r[13],e.z=r[14],ho.copy(this);const c=1/o,d=1/s,u=1/a;return ho.elements[0]*=c,ho.elements[1]*=c,ho.elements[2]*=c,ho.elements[4]*=d,ho.elements[5]*=d,ho.elements[6]*=d,ho.elements[8]*=u,ho.elements[9]*=u,ho.elements[10]*=u,t.setFromRotationMatrix(ho),i.x=o,i.y=s,i.z=a,this}makePerspective(e,t,i,r,o,s,a=xs){const l=this.elements,c=2*o/(t-e),d=2*o/(i-r),u=(t+e)/(t-e),h=(i+r)/(i-r);let f,p;if(a===xs)f=-(s+o)/(s-o),p=-2*s*o/(s-o);else{if(2001!==a)throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);f=-s/(s-o),p=-s*o/(s-o)}return l[0]=c,l[4]=0,l[8]=u,l[12]=0,l[1]=0,l[5]=d,l[9]=h,l[13]=0,l[2]=0,l[6]=0,l[10]=f,l[14]=p,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,t,i,r,o,s,a=xs){const l=this.elements,c=1/(t-e),d=1/(i-r),u=1/(s-o),h=(t+e)*c,f=(i+r)*d;let p,_;if(a===xs)p=(s+o)*u,_=-2*u;else{if(2001!==a)throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);p=o*u,_=-1*u}return l[0]=2*c,l[4]=0,l[8]=0,l[12]=-h,l[1]=0,l[5]=2*d,l[9]=0,l[13]=-f,l[2]=0,l[6]=0,l[10]=_,l[14]=-p,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<16;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}const hd=new R,ho=new ct,fY=new R(0,0,0),pY=new R(1,1,1),pa=new R,tg=new R,br=new R,_k=new ct,vk=new gi;let mY=(()=>{class n{constructor(t=0,i=0,r=0,o=n.DEFAULT_ORDER){this.isEuler=!0,this._x=t,this._y=i,this._z=r,this._order=o}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,i,r,o=this._order){return this._x=t,this._y=i,this._z=r,this._order=o,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,i=this._order,r=!0){const o=t.elements,s=o[0],a=o[4],l=o[8],c=o[1],d=o[5],u=o[9],h=o[2],f=o[6],p=o[10];switch(i){case"XYZ":this._y=Math.asin(Cn(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-u,p),this._z=Math.atan2(-a,s)):(this._x=Math.atan2(f,d),this._z=0);break;case"YXZ":this._x=Math.asin(-Cn(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(l,p),this._z=Math.atan2(c,d)):(this._y=Math.atan2(-h,s),this._z=0);break;case"ZXY":this._x=Math.asin(Cn(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(-h,p),this._z=Math.atan2(-a,d)):(this._y=0,this._z=Math.atan2(c,s));break;case"ZYX":this._y=Math.asin(-Cn(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(f,p),this._z=Math.atan2(c,s)):(this._x=0,this._z=Math.atan2(-a,d));break;case"YZX":this._z=Math.asin(Cn(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-u,d),this._y=Math.atan2(-h,s)):(this._x=0,this._y=Math.atan2(l,p));break;case"XZY":this._z=Math.asin(-Cn(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(f,d),this._y=Math.atan2(l,s)):(this._x=Math.atan2(-u,p),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+i)}return this._order=i,!0===r&&this._onChangeCallback(),this}setFromQuaternion(t,i,r){return _k.makeRotationFromQuaternion(t),this.setFromRotationMatrix(_k,i,r)}setFromVector3(t,i=this._order){return this.set(t.x,t.y,t.z,i)}reorder(t){return vk.setFromEuler(this),this.setFromQuaternion(vk,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],i=0){return t[i]=this._x,t[i+1]=this._y,t[i+2]=this._z,t[i+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}return n.DEFAULT_ORDER="XYZ",n})();class Ix{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return 0!=(this.mask&e.mask)}isEnabled(e){return 0!=(this.mask&(1<<e|0))}}let gY=0;const bk=new R,fd=new gi,Ss=new ct,ng=new R,Ih=new R,_Y=new R,vY=new gi,yk=new R(1,0,0),xk=new R(0,1,0),Ck=new R(0,0,1),bY={type:"added"},Mk={type:"removed"};let oi=(()=>{class n extends da{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:gY++}),this.uuid=_r(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=n.DEFAULT_UP.clone();const t=new R,i=new mY,r=new gi,o=new R(1,1,1);i._onChange(function s(){r.setFromEuler(i,!1)}),r._onChange(function a(){i.setFromQuaternion(r,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:i},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:o},modelViewMatrix:{value:new ct},normalMatrix:{value:new Tt}}),this.matrix=new ct,this.matrixWorld=new ct,this.matrixAutoUpdate=n.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=n.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.layers=new Ix,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,i){this.quaternion.setFromAxisAngle(t,i)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,i){return fd.setFromAxisAngle(t,i),this.quaternion.multiply(fd),this}rotateOnWorldAxis(t,i){return fd.setFromAxisAngle(t,i),this.quaternion.premultiply(fd),this}rotateX(t){return this.rotateOnAxis(yk,t)}rotateY(t){return this.rotateOnAxis(xk,t)}rotateZ(t){return this.rotateOnAxis(Ck,t)}translateOnAxis(t,i){return bk.copy(t).applyQuaternion(this.quaternion),this.position.add(bk.multiplyScalar(i)),this}translateX(t){return this.translateOnAxis(yk,t)}translateY(t){return this.translateOnAxis(xk,t)}translateZ(t){return this.translateOnAxis(Ck,t)}localToWorld(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(Ss.copy(this.matrixWorld).invert())}lookAt(t,i,r){t.isVector3?ng.copy(t):ng.set(t,i,r);const o=this.parent;this.updateWorldMatrix(!0,!1),Ih.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Ss.lookAt(Ih,ng,this.up):Ss.lookAt(ng,Ih,this.up),this.quaternion.setFromRotationMatrix(Ss),o&&(Ss.extractRotation(o.matrixWorld),fd.setFromRotationMatrix(Ss),this.quaternion.premultiply(fd.invert()))}add(t){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.add(arguments[i]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(null!==t.parent&&t.parent.remove(t),t.parent=this,this.children.push(t),t.dispatchEvent(bY)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const i=this.children.indexOf(t);return-1!==i&&(t.parent=null,this.children.splice(i,1),t.dispatchEvent(Mk)),this}removeFromParent(){const t=this.parent;return null!==t&&t.remove(this),this}clear(){for(let t=0;t<this.children.length;t++){const i=this.children[t];i.parent=null,i.dispatchEvent(Mk)}return this.children.length=0,this}attach(t){return this.updateWorldMatrix(!0,!1),Ss.copy(this.matrixWorld).invert(),null!==t.parent&&(t.parent.updateWorldMatrix(!0,!1),Ss.multiply(t.parent.matrixWorld)),t.applyMatrix4(Ss),this.add(t),t.updateWorldMatrix(!1,!0),this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,i){if(this[t]===i)return this;for(let r=0,o=this.children.length;r<o;r++){const a=this.children[r].getObjectByProperty(t,i);if(void 0!==a)return a}}getObjectsByProperty(t,i){let r=[];this[t]===i&&r.push(this);for(let o=0,s=this.children.length;o<s;o++){const a=this.children[o].getObjectsByProperty(t,i);a.length>0&&(r=r.concat(a))}return r}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Ih,t,_Y),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Ih,vY,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const i=this.matrixWorld.elements;return t.set(i[8],i[9],i[10]).normalize()}raycast(){}traverse(t){t(this);const i=this.children;for(let r=0,o=i.length;r<o;r++)i[r].traverse(t)}traverseVisible(t){if(!1===this.visible)return;t(this);const i=this.children;for(let r=0,o=i.length;r<o;r++)i[r].traverseVisible(t)}traverseAncestors(t){const i=this.parent;null!==i&&(t(i),i.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);const i=this.children;for(let r=0,o=i.length;r<o;r++){const s=i[r];(!0===s.matrixWorldAutoUpdate||!0===t)&&s.updateMatrixWorld(t)}}updateWorldMatrix(t,i){const r=this.parent;if(!0===t&&null!==r&&!0===r.matrixWorldAutoUpdate&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===i){const o=this.children;for(let s=0,a=o.length;s<a;s++){const l=o[s];!0===l.matrixWorldAutoUpdate&&l.updateWorldMatrix(!1,!0)}}}toJSON(t){const i=void 0===t||"string"==typeof t,r={};i&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const o={};function s(l,c){return void 0===l[c.uuid]&&(l[c.uuid]=c.toJSON(t)),c.uuid}if(o.uuid=this.uuid,o.type=this.type,""!==this.name&&(o.name=this.name),!0===this.castShadow&&(o.castShadow=!0),!0===this.receiveShadow&&(o.receiveShadow=!0),!1===this.visible&&(o.visible=!1),!1===this.frustumCulled&&(o.frustumCulled=!1),0!==this.renderOrder&&(o.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(o.userData=this.userData),o.layers=this.layers.mask,o.matrix=this.matrix.toArray(),o.up=this.up.toArray(),!1===this.matrixAutoUpdate&&(o.matrixAutoUpdate=!1),this.isInstancedMesh&&(o.type="InstancedMesh",o.count=this.count,o.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(o.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?o.background=this.background.toJSON():this.background.isTexture&&(o.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(o.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){o.geometry=s(t.geometries,this.geometry);const l=this.geometry.parameters;if(void 0!==l&&void 0!==l.shapes){const c=l.shapes;if(Array.isArray(c))for(let d=0,u=c.length;d<u;d++)s(t.shapes,c[d]);else s(t.shapes,c)}}if(this.isSkinnedMesh&&(o.bindMode=this.bindMode,o.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(s(t.skeletons,this.skeleton),o.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const l=[];for(let c=0,d=this.material.length;c<d;c++)l.push(s(t.materials,this.material[c]));o.material=l}else o.material=s(t.materials,this.material);if(this.children.length>0){o.children=[];for(let l=0;l<this.children.length;l++)o.children.push(this.children[l].toJSON(t).object)}if(this.animations.length>0){o.animations=[];for(let l=0;l<this.animations.length;l++)o.animations.push(s(t.animations,this.animations[l]))}if(i){const l=a(t.geometries),c=a(t.materials),d=a(t.textures),u=a(t.images),h=a(t.shapes),f=a(t.skeletons),p=a(t.animations),_=a(t.nodes);l.length>0&&(r.geometries=l),c.length>0&&(r.materials=c),d.length>0&&(r.textures=d),u.length>0&&(r.images=u),h.length>0&&(r.shapes=h),f.length>0&&(r.skeletons=f),p.length>0&&(r.animations=p),_.length>0&&(r.nodes=_)}return r.object=o,r;function a(l){const c=[];for(const d in l){const u=l[d];delete u.metadata,c.push(u)}return c}}clone(t){return(new this.constructor).copy(this,t)}copy(t,i=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=t.matrixWorldAutoUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.animations=t.animations,this.userData=JSON.parse(JSON.stringify(t.userData)),!0===i)for(let r=0;r<t.children.length;r++)this.add(t.children[r].clone());return this}}return n.DEFAULT_UP=new R(0,1,0),n.DEFAULT_MATRIX_AUTO_UPDATE=!0,n.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0,n})();const fo=new R,Es=new R,Rx=new R,Ts=new R,pd=new R,md=new R,wk=new R,Px=new R,Ox=new R,kx=new R;let ig=!1;class yr{constructor(e=new R,t=new R,i=new R){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,r){r.subVectors(i,t),fo.subVectors(e,t),r.cross(fo);const o=r.lengthSq();return o>0?r.multiplyScalar(1/Math.sqrt(o)):r.set(0,0,0)}static getBarycoord(e,t,i,r,o){fo.subVectors(r,t),Es.subVectors(i,t),Rx.subVectors(e,t);const s=fo.dot(fo),a=fo.dot(Es),l=fo.dot(Rx),c=Es.dot(Es),d=Es.dot(Rx),u=s*c-a*a;if(0===u)return o.set(-2,-1,-1);const h=1/u,f=(c*l-a*d)*h,p=(s*d-a*l)*h;return o.set(1-f-p,p,f)}static containsPoint(e,t,i,r){return this.getBarycoord(e,t,i,r,Ts),Ts.x>=0&&Ts.y>=0&&Ts.x+Ts.y<=1}static getUV(e,t,i,r,o,s,a,l){return!1===ig&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),ig=!0),this.getInterpolation(e,t,i,r,o,s,a,l)}static getInterpolation(e,t,i,r,o,s,a,l){return this.getBarycoord(e,t,i,r,Ts),l.setScalar(0),l.addScaledVector(o,Ts.x),l.addScaledVector(s,Ts.y),l.addScaledVector(a,Ts.z),l}static isFrontFacing(e,t,i,r){return fo.subVectors(i,t),Es.subVectors(e,t),fo.cross(Es).dot(r)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,r){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,i,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,r),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return fo.subVectors(this.c,this.b),Es.subVectors(this.a,this.b),.5*fo.cross(Es).length()}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return yr.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return yr.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,i,r,o){return!1===ig&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),ig=!0),yr.getInterpolation(e,this.a,this.b,this.c,t,i,r,o)}getInterpolation(e,t,i,r,o){return yr.getInterpolation(e,this.a,this.b,this.c,t,i,r,o)}containsPoint(e){return yr.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return yr.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const i=this.a,r=this.b,o=this.c;let s,a;pd.subVectors(r,i),md.subVectors(o,i),Px.subVectors(e,i);const l=pd.dot(Px),c=md.dot(Px);if(l<=0&&c<=0)return t.copy(i);Ox.subVectors(e,r);const d=pd.dot(Ox),u=md.dot(Ox);if(d>=0&&u<=d)return t.copy(r);const h=l*u-d*c;if(h<=0&&l>=0&&d<=0)return s=l/(l-d),t.copy(i).addScaledVector(pd,s);kx.subVectors(e,o);const f=pd.dot(kx),p=md.dot(kx);if(p>=0&&f<=p)return t.copy(o);const _=f*c-l*p;if(_<=0&&c>=0&&p<=0)return a=c/(c-p),t.copy(i).addScaledVector(md,a);const m=d*p-f*u;if(m<=0&&u-d>=0&&f-p>=0)return wk.subVectors(o,r),a=(u-d)/(u-d+(f-p)),t.copy(r).addScaledVector(wk,a);const g=1/(m+_+h);return s=_*g,a=h*g,t.copy(i).addScaledVector(pd,s).addScaledVector(md,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let yY=0;class po extends da{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:yY++}),this.uuid=_r(),this.name="",this.type="Material",this.blending=1,this.side=0,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=100,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=7680,this.stencilZFail=7680,this.stencilZPass=7680,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(void 0!==e)for(const t in e){const i=e[t];if(void 0===i){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const r=this[t];void 0!==r?r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[t]=i:console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`)}}toJSON(e){const t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});const i={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};function r(o){const s=[];for(const a in o){const l=o[a];delete l.metadata,s.push(l)}return s}if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),void 0!==this.roughness&&(i.roughness=this.roughness),void 0!==this.metalness&&(i.metalness=this.metalness),void 0!==this.sheen&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(i.shininess=this.shininess),void 0!==this.clearcoat&&(i.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.iridescence&&(i.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(i.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),void 0!==this.anisotropy&&(i.anisotropy=this.anisotropy),void 0!==this.anisotropyRotation&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(i.combine=this.combine)),void 0!==this.envMapIntensity&&(i.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(i.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(i.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(i.size=this.size),null!==this.shadowSide&&(i.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(i.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(i.blending=this.blending),0!==this.side&&(i.side=this.side),this.vertexColors&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),!0===this.transparent&&(i.transparent=this.transparent),i.depthFunc=this.depthFunc,i.depthTest=this.depthTest,i.depthWrite=this.depthWrite,i.colorWrite=this.colorWrite,i.stencilWrite=this.stencilWrite,i.stencilWriteMask=this.stencilWriteMask,i.stencilFunc=this.stencilFunc,i.stencilRef=this.stencilRef,i.stencilFuncMask=this.stencilFuncMask,i.stencilFail=this.stencilFail,i.stencilZFail=this.stencilZFail,i.stencilZPass=this.stencilZPass,void 0!==this.rotation&&0!==this.rotation&&(i.rotation=this.rotation),!0===this.polygonOffset&&(i.polygonOffset=!0),0!==this.polygonOffsetFactor&&(i.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(i.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(i.linewidth=this.linewidth),void 0!==this.dashSize&&(i.dashSize=this.dashSize),void 0!==this.gapSize&&(i.gapSize=this.gapSize),void 0!==this.scale&&(i.scale=this.scale),!0===this.dithering&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(i.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(i.premultipliedAlpha=this.premultipliedAlpha),!0===this.forceSinglePass&&(i.forceSinglePass=this.forceSinglePass),!0===this.wireframe&&(i.wireframe=this.wireframe),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(i.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(i.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(i.flatShading=this.flatShading),!1===this.visible&&(i.visible=!1),!1===this.toneMapped&&(i.toneMapped=!1),!1===this.fog&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData),t){const o=r(e.textures),s=r(e.images);o.length>0&&(i.textures=o),s.length>0&&(i.images=s)}return i}clone(){return(new this.constructor).copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let i=null;if(null!==t){const r=t.length;i=new Array(r);for(let o=0;o!==r;++o)i[o]=t[o].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){!0===e&&this.version++}}const Sk={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},mo={h:0,s:0,l:0},rg={h:0,s:0,l:0};function Fx(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+6*(e-n)*t:t<.5?e:t<2/3?n+6*(e-n)*(2/3-t):n}class Pe{constructor(e,t,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,i)}set(e,t,i){if(void 0===t&&void 0===i){const r=e;r&&r.isColor?this.copy(r):"number"==typeof r?this.setHex(r):"string"==typeof r&&this.setStyle(r)}else this.setRGB(e,t,i);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=lt){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,lo.toWorkingColorSpace(this,t),this}setRGB(e,t,i,r=lo.workingColorSpace){return this.r=e,this.g=t,this.b=i,lo.toWorkingColorSpace(this,r),this}setHSL(e,t,i,r=lo.workingColorSpace){if(e=vx(e,1),t=Cn(t,0,1),i=Cn(i,0,1),0===t)this.r=this.g=this.b=i;else{const o=i<=.5?i*(1+t):i+t-i*t,s=2*i-o;this.r=Fx(s,o,e+1/3),this.g=Fx(s,o,e),this.b=Fx(s,o,e-1/3)}return lo.toWorkingColorSpace(this,r),this}setStyle(e,t=lt){function i(o){void 0!==o&&parseFloat(o)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let o;const a=r[2];switch(r[1]){case"rgb":case"rgba":if(o=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(o[4]),this.setRGB(Math.min(255,parseInt(o[1],10))/255,Math.min(255,parseInt(o[2],10))/255,Math.min(255,parseInt(o[3],10))/255,t);if(o=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(o[4]),this.setRGB(Math.min(100,parseInt(o[1],10))/100,Math.min(100,parseInt(o[2],10))/100,Math.min(100,parseInt(o[3],10))/100,t);break;case"hsl":case"hsla":if(o=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(o[4]),this.setHSL(parseFloat(o[1])/360,parseFloat(o[2])/100,parseFloat(o[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const o=r[1],s=o.length;if(3===s)return this.setRGB(parseInt(o.charAt(0),16)/15,parseInt(o.charAt(1),16)/15,parseInt(o.charAt(2),16)/15,t);if(6===s)return this.setHex(parseInt(o,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=lt){const i=Sk[e.toLowerCase()];return void 0!==i?this.setHex(i,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=od(e.r),this.g=od(e.g),this.b=od(e.b),this}copyLinearToSRGB(e){return this.r=xx(e.r),this.g=xx(e.g),this.b=xx(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=lt){return lo.fromWorkingColorSpace(Ai.copy(this),e),65536*Math.round(Cn(255*Ai.r,0,255))+256*Math.round(Cn(255*Ai.g,0,255))+Math.round(Cn(255*Ai.b,0,255))}getHexString(e=lt){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=lo.workingColorSpace){lo.fromWorkingColorSpace(Ai.copy(this),t);const i=Ai.r,r=Ai.g,o=Ai.b,s=Math.max(i,r,o),a=Math.min(i,r,o);let l,c;const d=(a+s)/2;if(a===s)l=0,c=0;else{const u=s-a;switch(c=d<=.5?u/(s+a):u/(2-s-a),s){case i:l=(r-o)/u+(r<o?6:0);break;case r:l=(o-i)/u+2;break;case o:l=(i-r)/u+4}l/=6}return e.h=l,e.s=c,e.l=d,e}getRGB(e,t=lo.workingColorSpace){return lo.fromWorkingColorSpace(Ai.copy(this),t),e.r=Ai.r,e.g=Ai.g,e.b=Ai.b,e}getStyle(e=lt){lo.fromWorkingColorSpace(Ai.copy(this),e);const t=Ai.r,i=Ai.g,r=Ai.b;return e!==lt?`color(${e} ${t.toFixed(3)} ${i.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(255*t)},${Math.round(255*i)},${Math.round(255*r)})`}offsetHSL(e,t,i){return this.getHSL(mo),mo.h+=e,mo.s+=t,mo.l+=i,this.setHSL(mo.h,mo.s,mo.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL(mo),e.getHSL(rg);const i=wh(mo.h,rg.h,t),r=wh(mo.s,rg.s,t),o=wh(mo.l,rg.l,t);return this.setHSL(i,r,o),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,i=this.g,r=this.b,o=e.elements;return this.r=o[0]*t+o[3]*i+o[6]*r,this.g=o[1]*t+o[4]*i+o[7]*r,this.b=o[2]*t+o[5]*i+o[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const Ai=new Pe;Pe.NAMES=Sk;class Br extends po{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Pe(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Gm,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Hn=new R,og=new ce;class Mn{constructor(e,t,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=i,this.usage=35044,this.updateRange={offset:0,count:-1},this.gpuType=ys,this.version=0}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let r=0,o=this.itemSize;r<o;r++)this.array[e+r]=t.array[i+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(2===this.itemSize)for(let t=0,i=this.count;t<i;t++)og.fromBufferAttribute(this,t),og.applyMatrix3(e),this.setXY(t,og.x,og.y);else if(3===this.itemSize)for(let t=0,i=this.count;t<i;t++)Hn.fromBufferAttribute(this,t),Hn.applyMatrix3(e),this.setXYZ(t,Hn.x,Hn.y,Hn.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)Hn.fromBufferAttribute(this,t),Hn.applyMatrix4(e),this.setXYZ(t,Hn.x,Hn.y,Hn.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)Hn.fromBufferAttribute(this,t),Hn.applyNormalMatrix(e),this.setXYZ(t,Hn.x,Hn.y,Hn.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)Hn.fromBufferAttribute(this,t),Hn.transformDirection(e),this.setXYZ(t,Hn.x,Hn.y,Hn.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=vr(t,this.array)),t}setX(e,t){return this.normalized&&(t=Ct(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=vr(t,this.array)),t}setY(e,t){return this.normalized&&(t=Ct(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=vr(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Ct(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=vr(t,this.array)),t}setW(e,t){return this.normalized&&(t=Ct(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=Ct(t,this.array),i=Ct(i,this.array)),this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=Ct(t,this.array),i=Ct(i,this.array),r=Ct(r,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this}setXYZW(e,t,i,r,o){return e*=this.itemSize,this.normalized&&(t=Ct(t,this.array),i=Ct(i,this.array),r=Ct(r,this.array),o=Ct(o,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this.array[e+3]=o,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),35044!==this.usage&&(e.usage=this.usage),(0!==this.updateRange.offset||-1!==this.updateRange.count)&&(e.updateRange=this.updateRange),e}copyColorsArray(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}}class Ek extends Mn{constructor(e,t,i){super(new Uint16Array(e),t,i)}}class Tk extends Mn{constructor(e,t,i){super(new Uint32Array(e),t,i)}}class We extends Mn{constructor(e,t,i){super(new Float32Array(e),t,i)}}let CY=0;const Ur=new ct,Nx=new oi,gd=new R,xr=new Go,Ph=new Go,si=new R;class It extends da{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:CY++}),this.uuid=_r(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return this.index=Array.isArray(e)?new(hk(e)?Tk:Ek)(e,1):e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return void 0!==this.attributes[e]}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);const i=this.attributes.normal;if(void 0!==i){const o=(new Tt).getNormalMatrix(e);i.applyNormalMatrix(o),i.needsUpdate=!0}const r=this.attributes.tangent;return void 0!==r&&(r.transformDirection(e),r.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(e){return Ur.makeRotationFromQuaternion(e),this.applyMatrix4(Ur),this}rotateX(e){return Ur.makeRotationX(e),this.applyMatrix4(Ur),this}rotateY(e){return Ur.makeRotationY(e),this.applyMatrix4(Ur),this}rotateZ(e){return Ur.makeRotationZ(e),this.applyMatrix4(Ur),this}translate(e,t,i){return Ur.makeTranslation(e,t,i),this.applyMatrix4(Ur),this}scale(e,t,i){return Ur.makeScale(e,t,i),this.applyMatrix4(Ur),this}lookAt(e){return Nx.lookAt(e),Nx.updateMatrix(),this.applyMatrix4(Nx.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(gd).negate(),this.translate(gd.x,gd.y,gd.z),this}setFromPoints(e){const t=[];for(let i=0,r=e.length;i<r;i++){const o=e[i];t.push(o.x,o.y,o.z||0)}return this.setAttribute("position",new We(t,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new Go);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new R(-1/0,-1/0,-1/0),new R(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,r=t.length;i<r;i++)xr.setFromBufferAttribute(t[i]),this.morphTargetsRelative?(si.addVectors(this.boundingBox.min,xr.min),this.boundingBox.expandByPoint(si),si.addVectors(this.boundingBox.max,xr.max),this.boundingBox.expandByPoint(si)):(this.boundingBox.expandByPoint(xr.min),this.boundingBox.expandByPoint(xr.max))}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new uo);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new R,1/0);if(e){const i=this.boundingSphere.center;if(xr.setFromBufferAttribute(e),t)for(let o=0,s=t.length;o<s;o++)Ph.setFromBufferAttribute(t[o]),this.morphTargetsRelative?(si.addVectors(xr.min,Ph.min),xr.expandByPoint(si),si.addVectors(xr.max,Ph.max),xr.expandByPoint(si)):(xr.expandByPoint(Ph.min),xr.expandByPoint(Ph.max));xr.getCenter(i);let r=0;for(let o=0,s=e.count;o<s;o++)si.fromBufferAttribute(e,o),r=Math.max(r,i.distanceToSquared(si));if(t)for(let o=0,s=t.length;o<s;o++){const a=t[o],l=this.morphTargetsRelative;for(let c=0,d=a.count;c<d;c++)si.fromBufferAttribute(a,c),l&&(gd.fromBufferAttribute(e,c),si.add(gd)),r=Math.max(r,i.distanceToSquared(si))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(null===e||void 0===t.position||void 0===t.normal||void 0===t.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const i=e.array,r=t.position.array,o=t.normal.array,s=t.uv.array,a=r.length/3;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new Mn(new Float32Array(4*a),4));const l=this.getAttribute("tangent").array,c=[],d=[];for(let T=0;T<a;T++)c[T]=new R,d[T]=new R;const u=new R,h=new R,f=new R,p=new ce,_=new ce,m=new ce,g=new R,b=new R;function v(T,j,ie){u.fromArray(r,3*T),h.fromArray(r,3*j),f.fromArray(r,3*ie),p.fromArray(s,2*T),_.fromArray(s,2*j),m.fromArray(s,2*ie),h.sub(u),f.sub(u),_.sub(p),m.sub(p);const V=1/(_.x*m.y-m.x*_.y);isFinite(V)&&(g.copy(h).multiplyScalar(m.y).addScaledVector(f,-_.y).multiplyScalar(V),b.copy(f).multiplyScalar(_.x).addScaledVector(h,-m.x).multiplyScalar(V),c[T].add(g),c[j].add(g),c[ie].add(g),d[T].add(b),d[j].add(b),d[ie].add(b))}let y=this.groups;0===y.length&&(y=[{start:0,count:i.length}]);for(let T=0,j=y.length;T<j;++T){const ie=y[T],V=ie.start;for(let $=V,z=V+ie.count;$<z;$+=3)v(i[$+0],i[$+1],i[$+2])}const x=new R,S=new R,D=new R,I=new R;function C(T){D.fromArray(o,3*T),I.copy(D);const j=c[T];x.copy(j),x.sub(D.multiplyScalar(D.dot(j))).normalize(),S.crossVectors(I,j);const V=S.dot(d[T])<0?-1:1;l[4*T]=x.x,l[4*T+1]=x.y,l[4*T+2]=x.z,l[4*T+3]=V}for(let T=0,j=y.length;T<j;++T){const ie=y[T],V=ie.start;for(let $=V,z=V+ie.count;$<z;$+=3)C(i[$+0]),C(i[$+1]),C(i[$+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(void 0!==t){let i=this.getAttribute("normal");if(void 0===i)i=new Mn(new Float32Array(3*t.count),3),this.setAttribute("normal",i);else for(let h=0,f=i.count;h<f;h++)i.setXYZ(h,0,0,0);const r=new R,o=new R,s=new R,a=new R,l=new R,c=new R,d=new R,u=new R;if(e)for(let h=0,f=e.count;h<f;h+=3){const p=e.getX(h+0),_=e.getX(h+1),m=e.getX(h+2);r.fromBufferAttribute(t,p),o.fromBufferAttribute(t,_),s.fromBufferAttribute(t,m),d.subVectors(s,o),u.subVectors(r,o),d.cross(u),a.fromBufferAttribute(i,p),l.fromBufferAttribute(i,_),c.fromBufferAttribute(i,m),a.add(d),l.add(d),c.add(d),i.setXYZ(p,a.x,a.y,a.z),i.setXYZ(_,l.x,l.y,l.z),i.setXYZ(m,c.x,c.y,c.z)}else for(let h=0,f=t.count;h<f;h+=3)r.fromBufferAttribute(t,h+0),o.fromBufferAttribute(t,h+1),s.fromBufferAttribute(t,h+2),d.subVectors(s,o),u.subVectors(r,o),d.cross(u),i.setXYZ(h+0,d.x,d.y,d.z),i.setXYZ(h+1,d.x,d.y,d.z),i.setXYZ(h+2,d.x,d.y,d.z);this.normalizeNormals(),i.needsUpdate=!0}}merge(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeGeometries() instead."),this}normalizeNormals(){const e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)si.fromBufferAttribute(e,t),si.normalize(),e.setXYZ(t,si.x,si.y,si.z)}toNonIndexed(){function e(a,l){const c=a.array,d=a.itemSize,u=a.normalized,h=new c.constructor(l.length*d);let f=0,p=0;for(let _=0,m=l.length;_<m;_++){f=a.isInterleavedBufferAttribute?l[_]*a.data.stride+a.offset:l[_]*d;for(let g=0;g<d;g++)h[p++]=c[f++]}return new Mn(h,d,u)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new It,i=this.index.array,r=this.attributes;for(const a in r){const c=e(r[a],i);t.setAttribute(a,c)}const o=this.morphAttributes;for(const a in o){const l=[],c=o[a];for(let d=0,u=c.length;d<u;d++){const f=e(c[d],i);l.push(f)}t.morphAttributes[a]=l}t.morphTargetsRelative=this.morphTargetsRelative;const s=this.groups;for(let a=0,l=s.length;a<l;a++){const c=s[a];t.addGroup(c.start,c.count,c.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){const l=this.parameters;for(const c in l)void 0!==l[c]&&(e[c]=l[c]);return e}e.data={attributes:{}};const t=this.index;null!==t&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const i=this.attributes;for(const l in i)e.data.attributes[l]=i[l].toJSON(e.data);const r={};let o=!1;for(const l in this.morphAttributes){const c=this.morphAttributes[l],d=[];for(let u=0,h=c.length;u<h;u++)d.push(c[u].toJSON(e.data));d.length>0&&(r[l]=d,o=!0)}o&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const s=this.groups;s.length>0&&(e.data.groups=JSON.parse(JSON.stringify(s)));const a=this.boundingSphere;return null!==a&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return(new this.constructor).copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const i=e.index;null!==i&&this.setIndex(i.clone(t));const r=e.attributes;for(const c in r)this.setAttribute(c,r[c].clone(t));const o=e.morphAttributes;for(const c in o){const d=[],u=o[c];for(let h=0,f=u.length;h<f;h++)d.push(u[h].clone(t));this.morphAttributes[c]=d}this.morphTargetsRelative=e.morphTargetsRelative;const s=e.groups;for(let c=0,d=s.length;c<d;c++){const u=s[c];this.addGroup(u.start,u.count,u.materialIndex)}const a=e.boundingBox;null!==a&&(this.boundingBox=a.clone());const l=e.boundingSphere;return null!==l&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const Dk=new ct,fl=new Ah,sg=new uo,Ak=new R,_d=new R,vd=new R,bd=new R,Lx=new R,ag=new R,lg=new ce,cg=new ce,dg=new ce,Ik=new R,Rk=new R,Pk=new R,ug=new R,hg=new R;class Ii extends oi{constructor(e=new It,t=new Br){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,s=r.length;o<s;o++){const a=r[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=o}}}}getVertexPosition(e,t){const i=this.geometry,o=i.morphAttributes.position,s=i.morphTargetsRelative;t.fromBufferAttribute(i.attributes.position,e);const a=this.morphTargetInfluences;if(o&&a){ag.set(0,0,0);for(let l=0,c=o.length;l<c;l++){const d=a[l];0!==d&&(Lx.fromBufferAttribute(o[l],e),ag.addScaledVector(s?Lx:Lx.sub(t),d))}t.add(ag)}return t}raycast(e,t){const i=this.geometry,o=this.matrixWorld;void 0!==this.material&&(null===i.boundingSphere&&i.computeBoundingSphere(),sg.copy(i.boundingSphere),sg.applyMatrix4(o),fl.copy(e.ray).recast(e.near),(!1!==sg.containsPoint(fl.origin)||!(null===fl.intersectSphere(sg,Ak)||fl.origin.distanceToSquared(Ak)>(e.far-e.near)**2))&&(Dk.copy(o).invert(),fl.copy(e.ray).applyMatrix4(Dk),(null===i.boundingBox||!1!==fl.intersectsBox(i.boundingBox))&&this._computeIntersections(e,t,fl)))}_computeIntersections(e,t,i){let r;const o=this.geometry,s=this.material,a=o.index,l=o.attributes.position,c=o.attributes.uv,d=o.attributes.uv1,u=o.attributes.normal,h=o.groups,f=o.drawRange;if(null!==a)if(Array.isArray(s))for(let p=0,_=h.length;p<_;p++){const m=h[p],g=s[m.materialIndex];for(let y=Math.max(m.start,f.start),x=Math.min(a.count,Math.min(m.start+m.count,f.start+f.count));y<x;y+=3)r=fg(this,g,e,i,c,d,u,a.getX(y),a.getX(y+1),a.getX(y+2)),r&&(r.faceIndex=Math.floor(y/3),r.face.materialIndex=m.materialIndex,t.push(r))}else for(let m=Math.max(0,f.start),g=Math.min(a.count,f.start+f.count);m<g;m+=3)r=fg(this,s,e,i,c,d,u,a.getX(m),a.getX(m+1),a.getX(m+2)),r&&(r.faceIndex=Math.floor(m/3),t.push(r));else if(void 0!==l)if(Array.isArray(s))for(let p=0,_=h.length;p<_;p++){const m=h[p],g=s[m.materialIndex];for(let y=Math.max(m.start,f.start),x=Math.min(l.count,Math.min(m.start+m.count,f.start+f.count));y<x;y+=3)r=fg(this,g,e,i,c,d,u,y,y+1,y+2),r&&(r.faceIndex=Math.floor(y/3),r.face.materialIndex=m.materialIndex,t.push(r))}else for(let m=Math.max(0,f.start),g=Math.min(l.count,f.start+f.count);m<g;m+=3)r=fg(this,s,e,i,c,d,u,m,m+1,m+2),r&&(r.faceIndex=Math.floor(m/3),t.push(r))}}function fg(n,e,t,i,r,o,s,a,l,c){n.getVertexPosition(a,_d),n.getVertexPosition(l,vd),n.getVertexPosition(c,bd);const d=function MY(n,e,t,i,r,o,s,a){let l;if(l=1===e.side?i.intersectTriangle(s,o,r,!0,a):i.intersectTriangle(r,o,s,0===e.side,a),null===l)return null;hg.copy(a),hg.applyMatrix4(n.matrixWorld);const c=t.ray.origin.distanceTo(hg);return c<t.near||c>t.far?null:{distance:c,point:hg.clone(),object:n}}(n,e,t,i,_d,vd,bd,ug);if(d){r&&(lg.fromBufferAttribute(r,a),cg.fromBufferAttribute(r,l),dg.fromBufferAttribute(r,c),d.uv=yr.getInterpolation(ug,_d,vd,bd,lg,cg,dg,new ce)),o&&(lg.fromBufferAttribute(o,a),cg.fromBufferAttribute(o,l),dg.fromBufferAttribute(o,c),d.uv1=yr.getInterpolation(ug,_d,vd,bd,lg,cg,dg,new ce),d.uv2=d.uv1),s&&(Ik.fromBufferAttribute(s,a),Rk.fromBufferAttribute(s,l),Pk.fromBufferAttribute(s,c),d.normal=yr.getInterpolation(ug,_d,vd,bd,Ik,Rk,Pk,new R),d.normal.dot(i.direction)>0&&d.normal.multiplyScalar(-1));const u={a,b:l,c,normal:new R,materialIndex:0};yr.getNormal(_d,vd,bd,u.normal),d.face=u}return d}class yd extends It{constructor(e=1,t=1,i=1,r=1,o=1,s=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:r,heightSegments:o,depthSegments:s};const a=this;r=Math.floor(r),o=Math.floor(o),s=Math.floor(s);const l=[],c=[],d=[],u=[];let h=0,f=0;function p(_,m,g,b,v,y,x,S,D,I,C){const T=y/D,j=x/I,ie=y/2,V=x/2,G=S/2,$=D+1,z=I+1;let H=0,W=0;const K=new R;for(let ae=0;ae<z;ae++){const Ce=ae*j-V;for(let X=0;X<$;X++)K[_]=(X*T-ie)*b,K[m]=Ce*v,K[g]=G,c.push(K.x,K.y,K.z),K[_]=0,K[m]=0,K[g]=S>0?1:-1,d.push(K.x,K.y,K.z),u.push(X/D),u.push(1-ae/I),H+=1}for(let ae=0;ae<I;ae++)for(let Ce=0;Ce<D;Ce++){const ue=h+Ce+$*(ae+1),re=h+(Ce+1)+$*(ae+1),De=h+(Ce+1)+$*ae;l.push(h+Ce+$*ae,ue,De),l.push(ue,re,De),W+=6}a.addGroup(f,W,C),f+=W,h+=H}p("z","y","x",-1,-1,i,t,e,s,o,0),p("z","y","x",1,-1,i,t,-e,s,o,1),p("x","z","y",1,1,e,i,t,r,s,2),p("x","z","y",1,-1,e,i,-t,r,s,3),p("x","y","z",1,-1,e,t,i,r,o,4),p("x","y","z",-1,-1,e,t,-i,r,o,5),this.setIndex(l),this.setAttribute("position",new We(c,3)),this.setAttribute("normal",new We(d,3)),this.setAttribute("uv",new We(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new yd(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function xd(n){const e={};for(const t in n){e[t]={};for(const i in n[t]){const r=n[t][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][i]=null):e[t][i]=r.clone():e[t][i]=Array.isArray(r)?r.slice():r}}return e}function Hi(n){const e={};for(let t=0;t<n.length;t++){const i=xd(n[t]);for(const r in i)e[r]=i[r]}return e}function Ok(n){return null===n.getRenderTarget()?n.outputColorSpace:zo}const SY={clone:xd,merge:Hi};class ma extends po{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==e&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=xd(e.uniforms),this.uniformsGroups=function wY(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const s=this.uniforms[r].value;t.uniforms[r]=s&&s.isTexture?{type:"t",value:s.toJSON(e).uuid}:s&&s.isColor?{type:"c",value:s.getHex()}:s&&s.isVector2?{type:"v2",value:s.toArray()}:s&&s.isVector3?{type:"v3",value:s.toArray()}:s&&s.isVector4?{type:"v4",value:s.toArray()}:s&&s.isMatrix3?{type:"m3",value:s.toArray()}:s&&s.isMatrix4?{type:"m4",value:s.toArray()}:{value:s}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const i={};for(const r in this.extensions)!0===this.extensions[r]&&(i[r]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}}class Bx extends oi{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new ct,this.projectionMatrix=new ct,this.projectionMatrixInverse=new ct,this.coordinateSystem=xs}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}class ai extends Bx{constructor(e=50,t=1,i=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=2*id*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(.5*cl*this.fov);return.5*this.getFilmHeight()/e}getEffectiveFOV(){return 2*id*Math.atan(Math.tan(.5*cl*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,i,r,o,s){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=o,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(.5*cl*this.fov)/this.zoom,i=2*t,r=this.aspect*i,o=-.5*r;const s=this.view;if(null!==this.view&&this.view.enabled){const l=s.fullWidth,c=s.fullHeight;o+=s.offsetX*r/l,t-=s.offsetY*i/c,r*=s.width/l,i*=s.height/c}const a=this.filmOffset;0!==a&&(o+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(o,o+r,t,t-i,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}class DY extends oi{constructor(e,t,i){super(),this.type="CubeCamera",this.renderTarget=i,this.coordinateSystem=null;const r=new ai(-90,1,e,t);r.layers=this.layers,this.add(r);const o=new ai(-90,1,e,t);o.layers=this.layers,this.add(o);const s=new ai(-90,1,e,t);s.layers=this.layers,this.add(s);const a=new ai(-90,1,e,t);a.layers=this.layers,this.add(a);const l=new ai(-90,1,e,t);l.layers=this.layers,this.add(l);const c=new ai(-90,1,e,t);c.layers=this.layers,this.add(c)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[i,r,o,s,a,l]=t;for(const c of t)this.remove(c);if(e===xs)i.up.set(0,1,0),i.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),o.up.set(0,0,-1),o.lookAt(0,1,0),s.up.set(0,0,1),s.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else{if(2001!==e)throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);i.up.set(0,-1,0),i.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),o.up.set(0,0,1),o.lookAt(0,1,0),s.up.set(0,0,-1),s.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1)}for(const c of t)this.add(c),c.updateMatrixWorld()}update(e,t){null===this.parent&&this.updateMatrixWorld();const i=this.renderTarget;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[r,o,s,a,l,c]=this.children,d=e.getRenderTarget(),u=e.toneMapping,h=e.xr.enabled;e.toneMapping=vs,e.xr.enabled=!1;const f=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0),e.render(t,r),e.setRenderTarget(i,1),e.render(t,o),e.setRenderTarget(i,2),e.render(t,s),e.setRenderTarget(i,3),e.render(t,a),e.setRenderTarget(i,4),e.render(t,l),i.texture.generateMipmaps=f,e.setRenderTarget(i,5),e.render(t,c),e.setRenderTarget(d),e.toneMapping=u,e.xr.enabled=h,i.texture.needsPMREMUpdate=!0}}class pg extends co{constructor(e,t,i,r,o,s,a,l,c,d){super(e=void 0!==e?e:[],t=void 0!==t?t:tl,i,r,o,s,a,l,c,d),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class AY extends dl{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1},r=[i,i,i,i,i,i];void 0!==t.encoding&&(Eh("THREE.WebGLCubeRenderTarget: option.encoding has been replaced by option.colorSpace."),t.colorSpace=t.encoding===sl?lt:""),this.texture=new pg(r,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==t.generateMipmaps&&t.generateMipmaps,this.texture.minFilter=void 0!==t.minFilter?t.minFilter:xn}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const i_uniforms={tEquirect:{value:null}},i_vertexShader="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",i_fragmentShader="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",r=new yd(5,5,5),o=new ma({name:"CubemapFromEquirect",uniforms:xd(i_uniforms),vertexShader:i_vertexShader,fragmentShader:i_fragmentShader,side:1,blending:0});o.uniforms.tEquirect.value=t;const s=new Ii(r,o),a=t.minFilter;return t.minFilter===bs&&(t.minFilter=xn),new DY(1,10,this).update(e,s),t.minFilter=a,s.geometry.dispose(),s.material.dispose(),this}clear(e,t,i,r){const o=e.getRenderTarget();for(let s=0;s<6;s++)e.setRenderTarget(this,s),e.clear(t,i,r);e.setRenderTarget(o)}}const Ux=new R,IY=new R,RY=new Tt;class pl{constructor(e=new R(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,r){return this.normal.set(e,t,i),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){const r=Ux.subVectors(i,t).cross(IY.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const i=e.delta(Ux),r=this.normal.dot(i);if(0===r)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;const o=-(e.start.dot(this.normal)+this.constant)/r;return o<0||o>1?null:t.copy(e.start).addScaledVector(i,o)}intersectsLine(e){const t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const i=t||RY.getNormalMatrix(e),r=this.coplanarPoint(Ux).applyMatrix4(e),o=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(o),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return(new this.constructor).copy(this)}}const ml=new uo,mg=new R;class Vx{constructor(e=new pl,t=new pl,i=new pl,r=new pl,o=new pl,s=new pl){this.planes=[e,t,i,r,o,s]}set(e,t,i,r,o,s){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(i),a[3].copy(r),a[4].copy(o),a[5].copy(s),this}copy(e){const t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e,t=xs){const i=this.planes,r=e.elements,o=r[0],s=r[1],a=r[2],l=r[3],c=r[4],d=r[5],u=r[6],h=r[7],f=r[8],p=r[9],_=r[10],m=r[11],g=r[12],b=r[13],v=r[14],y=r[15];if(i[0].setComponents(l-o,h-c,m-f,y-g).normalize(),i[1].setComponents(l+o,h+c,m+f,y+g).normalize(),i[2].setComponents(l+s,h+d,m+p,y+b).normalize(),i[3].setComponents(l-s,h-d,m-p,y-b).normalize(),i[4].setComponents(l-a,h-u,m-_,y-v).normalize(),t===xs)i[5].setComponents(l+a,h+u,m+_,y+v).normalize();else{if(2001!==t)throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);i[5].setComponents(a,u,_,v).normalize()}return this}intersectsObject(e){if(void 0!==e.boundingSphere)null===e.boundingSphere&&e.computeBoundingSphere(),ml.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;null===t.boundingSphere&&t.computeBoundingSphere(),ml.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(ml)}intersectsSprite(e){return ml.center.set(0,0,0),ml.radius=.7071067811865476,ml.applyMatrix4(e.matrixWorld),this.intersectsSphere(ml)}intersectsSphere(e){const t=this.planes,i=e.center,r=-e.radius;for(let o=0;o<6;o++)if(t[o].distanceToPoint(i)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let i=0;i<6;i++){const r=t[i];if(mg.x=r.normal.x>0?e.max.x:e.min.x,mg.y=r.normal.y>0?e.max.y:e.min.y,mg.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(mg)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function kk(){let n=null,e=!1,t=null,i=null;function r(o,s){t(o,s),i=n.requestAnimationFrame(r)}return{start:function(){!0!==e&&null!==t&&(i=n.requestAnimationFrame(r),e=!0)},stop:function(){n.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(o){t=o},setContext:function(o){n=o}}}function PY(n,e){const t=e.isWebGL2,i=new WeakMap;return{get:function s(c){return c.isInterleavedBufferAttribute&&(c=c.data),i.get(c)},remove:function a(c){c.isInterleavedBufferAttribute&&(c=c.data);const d=i.get(c);d&&(n.deleteBuffer(d.buffer),i.delete(c))},update:function l(c,d){if(c.isGLBufferAttribute){const h=i.get(c);return void((!h||h.version<c.version)&&i.set(c,{buffer:c.buffer,type:c.type,bytesPerElement:c.elementSize,version:c.version}))}c.isInterleavedBufferAttribute&&(c=c.data);const u=i.get(c);void 0===u?i.set(c,function r(c,d){const u=c.array,h=c.usage,f=n.createBuffer();let p;if(n.bindBuffer(d,f),n.bufferData(d,u,h),c.onUploadCallback(),u instanceof Float32Array)p=n.FLOAT;else if(u instanceof Uint16Array)if(c.isFloat16BufferAttribute){if(!t)throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");p=n.HALF_FLOAT}else p=n.UNSIGNED_SHORT;else if(u instanceof Int16Array)p=n.SHORT;else if(u instanceof Uint32Array)p=n.UNSIGNED_INT;else if(u instanceof Int32Array)p=n.INT;else if(u instanceof Int8Array)p=n.BYTE;else if(u instanceof Uint8Array)p=n.UNSIGNED_BYTE;else{if(!(u instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+u);p=n.UNSIGNED_BYTE}return{buffer:f,type:p,bytesPerElement:u.BYTES_PER_ELEMENT,version:c.version}}(c,d)):u.version<c.version&&(function o(c,d,u){const h=d.array,f=d.updateRange;n.bindBuffer(u,c),-1===f.count?n.bufferSubData(u,0,h):(t?n.bufferSubData(u,f.offset*h.BYTES_PER_ELEMENT,h,f.offset,f.count):n.bufferSubData(u,f.offset*h.BYTES_PER_ELEMENT,h.subarray(f.offset,f.offset+f.count)),f.count=-1),d.onUploadCallback()}(u.buffer,c,d),u.version=c.version)}}}class gg extends It{constructor(e=1,t=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:r};const o=e/2,s=t/2,a=Math.floor(i),l=Math.floor(r),c=a+1,d=l+1,u=e/a,h=t/l,f=[],p=[],_=[],m=[];for(let g=0;g<d;g++){const b=g*h-s;for(let v=0;v<c;v++)p.push(v*u-o,-b,0),_.push(0,0,1),m.push(v/a),m.push(1-g/l)}for(let g=0;g<l;g++)for(let b=0;b<a;b++){const y=b+c*(g+1),x=b+1+c*(g+1),S=b+1+c*g;f.push(b+c*g,y,S),f.push(y,x,S)}this.setIndex(f),this.setAttribute("position",new We(p,3)),this.setAttribute("normal",new We(_,3)),this.setAttribute("uv",new We(m,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new gg(e.width,e.height,e.widthSegments,e.heightSegments)}}const Dt={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"float G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n} // validated",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\t return vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat R21 = R12;\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vBumpMapUv );\n\t\tvec2 dSTdy = dFdy( vBumpMapUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = dFdx( surf_pos.xyz );\n\t\tvec3 vSigmaY = dFdy( surf_pos.xyz );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat luminance( const in vec3 rgb ) {\n\tconst vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );\n\treturn dot( weights, rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}\nvec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n} // validated",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\thighp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_v0 0.339\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_v1 0.276\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_v4 0.046\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_v5 0.016\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_v6 0.0038\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"vec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#ifdef USE_ENVMAP\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\t#ifdef USE_ANISOTROPY\n\t\tvec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {\n\t\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\t\tvec3 bentNormal = cross( bitangent, viewDir );\n\t\t\t\tbentNormal = normalize( cross( bentNormal, bitangent ) );\n\t\t\t\tbentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );\n\t\t\t\treturn getIBLRadiance( viewDir, bentNormal, roughness );\n\t\t\t#else\n\t\t\t\treturn vec3( 0.0 );\n\t\t\t#endif\n\t\t}\n\t#endif\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( LEGACY_LIGHTS )\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#else\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef USE_SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULAR_COLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;\n\t\t#endif\n\t\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\t#ifdef USE_ANISOTROPYMAP\n\t\tmat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );\n\t\tvec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;\n\t\tvec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;\n\t#else\n\t\tvec2 anisotropyV = anisotropyVector;\n\t#endif\n\tmaterial.anisotropy = length( anisotropyV );\n\tanisotropyV /= material.anisotropy;\n\tmaterial.anisotropy = saturate( material.anisotropy );\n\tmaterial.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );\n\tmaterial.anisotropyT = tbn[ 0 ] * anisotropyV.x - tbn[ 1 ] * anisotropyV.y;\n\tmaterial.anisotropyB = tbn[ 1 ] * anisotropyV.x + tbn[ 0 ] * anisotropyV.y;\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat anisotropy;\n\t\tfloat alphaT;\n\t\tvec3 anisotropyT;\n\t\tvec3 anisotropyB;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec3 sheenSpecular = vec3( 0.0 );\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\n#ifdef USE_ANISOTROPY\n\tfloat V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {\n\t\tfloat gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );\n\t\tfloat gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );\n\t\tfloat v = 0.5 / ( gv + gl );\n\t\treturn saturate(v);\n\t}\n\tfloat D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {\n\t\tfloat a2 = alphaT * alphaB;\n\t\thighp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );\n\t\thighp float v2 = dot( v, v );\n\t\tfloat w2 = a2 / v2;\n\t\treturn RECIPROCAL_PI * a2 * pow2 ( w2 );\n\t}\n#endif\n#ifdef USE_CLEARCOAT\n\tvec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {\n\t\tvec3 f0 = material.clearcoatF0;\n\t\tfloat f90 = material.clearcoatF90;\n\t\tfloat roughness = material.clearcoatRoughness;\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {\n\tvec3 f0 = material.specularColor;\n\tfloat f90 = material.specularF90;\n\tfloat roughness = material.roughness;\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t#ifdef USE_IRIDESCENCE\n\t\tF = mix( F, material.iridescenceFresnel, material.iridescence );\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat dotTL = dot( material.anisotropyT, lightDir );\n\t\tfloat dotTV = dot( material.anisotropyT, viewDir );\n\t\tfloat dotTH = dot( material.anisotropyT, halfDir );\n\t\tfloat dotBL = dot( material.anisotropyB, lightDir );\n\t\tfloat dotBV = dot( material.anisotropyB, viewDir );\n\t\tfloat dotBH = dot( material.anisotropyB, halfDir );\n\t\tfloat V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );\n\t\tfloat D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );\n\t#else\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t#endif\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometry.viewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\t#ifdef USE_ANISOTROPY\n\t\tradiance += getIBLAnisotropyRadiance( geometry.viewDir, geometry.normal, material.roughness, material.anisotropyB, material.anisotropy );\n\t#else\n\t\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, vMapUv );\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t#if defined( USE_POINTS_UV )\n\t\tvec2 uv = vUv;\n\t#else\n\t\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_POINTS_UV )\n\tvarying vec2 vUv;\n#else\n\t#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t\tuniform mat3 uvTransform;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform ivec2 morphTargetsTextureSize;\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal *= faceDirection;\n\t#endif\n#endif\n#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn = getTangentFrame( - vViewPosition, normal, vNormalMapUv );\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn[0] *= faceDirection;\n\t\ttbn[1] *= faceDirection;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn2[0] *= faceDirection;\n\t\ttbn2[1] *= faceDirection;\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef USE_NORMALMAP_OBJECTSPACE\n\tnormal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( USE_NORMALMAP_TANGENTSPACE )\n\tvec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\tnormal = normalize( tbn * mapN );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef USE_NORMALMAP_OBJECTSPACE\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )\n\tmat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( uv.st );\n\t\tvec2 st1 = dFdy( uv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );\n\t\treturn mat3( T * scale, B * scale, N );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\tclearcoatNormal = normalize( tbn2 * clearcoatMapN );\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",output_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec2 packDepthToRG( in highp float v ) {\n\treturn packDepthToRGBA( v ).yx;\n}\nfloat unpackRGToDepth( const in highp vec2 v ) {\n\treturn unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn depth * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * depth - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n\tuniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\n\t\tbool frustumTest = inFrustum && shadowCoord.z <= 1.0;\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tuniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\tvec4 shadowWorldPosition;\n#endif\n#if defined( USE_SHADOWMAP )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tuniform int boneTextureSize;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tfloat j = i * 4.0;\n\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\ty = dy * ( y + 0.5 );\n\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\treturn bone;\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn saturate( toneMappingExposure * color );\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmitted = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tfloat w0( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );\n\t}\n\tfloat w1( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );\n\t}\n\tfloat w2( float a ){\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );\n\t}\n\tfloat w3( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * a * a );\n\t}\n\tfloat g0( float a ) {\n\t\treturn w0( a ) + w1( a );\n\t}\n\tfloat g1( float a ) {\n\t\treturn w2( a ) + w3( a );\n\t}\n\tfloat h0( float a ) {\n\t\treturn - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );\n\t}\n\tfloat h1( float a ) {\n\t\treturn 1.0 + w3( a ) / ( w2( a ) + w3( a ) );\n\t}\n\tvec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {\n\t\tuv = uv * texelSize.zw + 0.5;\n\t\tvec2 iuv = floor( uv );\n\t\tvec2 fuv = fract( uv );\n\t\tfloat g0x = g0( fuv.x );\n\t\tfloat g1x = g1( fuv.x );\n\t\tfloat h0x = h0( fuv.x );\n\t\tfloat h1x = h1( fuv.x );\n\t\tfloat h0y = h0( fuv.y );\n\t\tfloat h1y = h1( fuv.y );\n\t\tvec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\treturn g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +\n\t\t\tg1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );\n\t}\n\tvec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {\n\t\tvec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );\n\t\tvec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );\n\t\tvec2 fLodSizeInv = 1.0 / fLodSize;\n\t\tvec2 cLodSizeInv = 1.0 / cLodSize;\n\t\tvec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );\n\t\tvec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );\n\t\treturn mix( fSample, cSample, fract( lod ) );\n\t}\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\treturn textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );\n\t}\n\tvec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( isinf( attenuationDistance ) ) {\n\t\t\treturn vec3( 1.0 );\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 attenuatedColor = transmittance * transmittedLight.rgb;\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\tfloat transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );\n\t}\n#endif",uv_pars_fragment:"#ifdef USE_UV\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tuniform mat3 mapTransform;\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform mat3 alphaMapTransform;\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tuniform mat3 lightMapTransform;\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tuniform mat3 aoMapTransform;\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tuniform mat3 bumpMapTransform;\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tuniform mat3 normalMapTransform;\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tuniform mat3 displacementMapTransform;\n\tvarying vec2 vDisplacementMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tuniform mat3 emissiveMapTransform;\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tuniform mat3 metalnessMapTransform;\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tuniform mat3 roughnessMapTransform;\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tuniform mat3 anisotropyMapTransform;\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tuniform mat3 clearcoatMapTransform;\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform mat3 clearcoatNormalMapTransform;\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform mat3 clearcoatRoughnessMapTransform;\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tuniform mat3 sheenColorMapTransform;\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tuniform mat3 sheenRoughnessMapTransform;\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tuniform mat3 iridescenceMapTransform;\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform mat3 iridescenceThicknessMapTransform;\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tuniform mat3 specularMapTransform;\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tuniform mat3 specularColorMapTransform;\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tuniform mat3 specularIntensityMapTransform;\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = vec3( uv, 1 ).xy;\n#endif\n#ifdef USE_MAP\n\tvMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ALPHAMAP\n\tvAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_LIGHTMAP\n\tvLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_AOMAP\n\tvAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_BUMPMAP\n\tvBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_NORMALMAP\n\tvNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tvDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_METALNESSMAP\n\tvMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULARMAP\n\tvSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tvTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_THICKNESSMAP\n\tvThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nuniform float backgroundIntensity;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",backgroundCube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",backgroundCube_frag:"#ifdef ENVMAP_TYPE_CUBE\n\tuniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\tuniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );\n\t#else\n\t\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = texColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define USE_SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef USE_SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULAR_COLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\tuniform vec2 anisotropyVector;\n\t#ifdef USE_ANISOTROPYMAP\n\t\tuniform sampler2D anisotropyMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\t#endif\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n#ifdef USE_POINTS_UV\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\nvoid main() {\n\t#ifdef USE_POINTS_UV\n\t\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\t#endif\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <logdepthbuf_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}"},Re={common:{diffuse:{value:new Pe(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Tt},alphaMap:{value:null},alphaMapTransform:{value:new Tt},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Tt}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Tt}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Tt}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Tt},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Tt},normalScale:{value:new ce(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Tt},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Tt}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Tt}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Tt}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Pe(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Pe(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Tt},alphaTest:{value:0},uvTransform:{value:new Tt}},sprite:{diffuse:{value:new Pe(16777215)},opacity:{value:1},center:{value:new ce(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Tt},alphaMap:{value:null},alphaMapTransform:{value:new Tt},alphaTest:{value:0}}},jo={basic:{uniforms:Hi([Re.common,Re.specularmap,Re.envmap,Re.aomap,Re.lightmap,Re.fog]),vertexShader:Dt.meshbasic_vert,fragmentShader:Dt.meshbasic_frag},lambert:{uniforms:Hi([Re.common,Re.specularmap,Re.envmap,Re.aomap,Re.lightmap,Re.emissivemap,Re.bumpmap,Re.normalmap,Re.displacementmap,Re.fog,Re.lights,{emissive:{value:new Pe(0)}}]),vertexShader:Dt.meshlambert_vert,fragmentShader:Dt.meshlambert_frag},phong:{uniforms:Hi([Re.common,Re.specularmap,Re.envmap,Re.aomap,Re.lightmap,Re.emissivemap,Re.bumpmap,Re.normalmap,Re.displacementmap,Re.fog,Re.lights,{emissive:{value:new Pe(0)},specular:{value:new Pe(1118481)},shininess:{value:30}}]),vertexShader:Dt.meshphong_vert,fragmentShader:Dt.meshphong_frag},standard:{uniforms:Hi([Re.common,Re.envmap,Re.aomap,Re.lightmap,Re.emissivemap,Re.bumpmap,Re.normalmap,Re.displacementmap,Re.roughnessmap,Re.metalnessmap,Re.fog,Re.lights,{emissive:{value:new Pe(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Dt.meshphysical_vert,fragmentShader:Dt.meshphysical_frag},toon:{uniforms:Hi([Re.common,Re.aomap,Re.lightmap,Re.emissivemap,Re.bumpmap,Re.normalmap,Re.displacementmap,Re.gradientmap,Re.fog,Re.lights,{emissive:{value:new Pe(0)}}]),vertexShader:Dt.meshtoon_vert,fragmentShader:Dt.meshtoon_frag},matcap:{uniforms:Hi([Re.common,Re.bumpmap,Re.normalmap,Re.displacementmap,Re.fog,{matcap:{value:null}}]),vertexShader:Dt.meshmatcap_vert,fragmentShader:Dt.meshmatcap_frag},points:{uniforms:Hi([Re.points,Re.fog]),vertexShader:Dt.points_vert,fragmentShader:Dt.points_frag},dashed:{uniforms:Hi([Re.common,Re.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Dt.linedashed_vert,fragmentShader:Dt.linedashed_frag},depth:{uniforms:Hi([Re.common,Re.displacementmap]),vertexShader:Dt.depth_vert,fragmentShader:Dt.depth_frag},normal:{uniforms:Hi([Re.common,Re.bumpmap,Re.normalmap,Re.displacementmap,{opacity:{value:1}}]),vertexShader:Dt.meshnormal_vert,fragmentShader:Dt.meshnormal_frag},sprite:{uniforms:Hi([Re.sprite,Re.fog]),vertexShader:Dt.sprite_vert,fragmentShader:Dt.sprite_frag},background:{uniforms:{uvTransform:{value:new Tt},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Dt.background_vert,fragmentShader:Dt.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:Dt.backgroundCube_vert,fragmentShader:Dt.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Dt.cube_vert,fragmentShader:Dt.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Dt.equirect_vert,fragmentShader:Dt.equirect_frag},distanceRGBA:{uniforms:Hi([Re.common,Re.displacementmap,{referencePosition:{value:new R},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Dt.distanceRGBA_vert,fragmentShader:Dt.distanceRGBA_frag},shadow:{uniforms:Hi([Re.lights,Re.fog,{color:{value:new Pe(0)},opacity:{value:1}}]),vertexShader:Dt.shadow_vert,fragmentShader:Dt.shadow_frag}};jo.physical={uniforms:Hi([jo.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Tt},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Tt},clearcoatNormalScale:{value:new ce(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Tt},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Tt},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Tt},sheen:{value:0},sheenColor:{value:new Pe(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Tt},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Tt},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Tt},transmissionSamplerSize:{value:new ce},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Tt},attenuationDistance:{value:0},attenuationColor:{value:new Pe(0)},specularColor:{value:new Pe(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Tt},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Tt},anisotropyVector:{value:new ce},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Tt}}]),vertexShader:Dt.meshphysical_vert,fragmentShader:Dt.meshphysical_frag};const _g={r:0,b:0,g:0};function DK(n,e,t,i,r,o,s){const a=new Pe(0);let c,d,l=!0===o?0:1,u=null,h=0,f=null;function _(m,g){m.getRGB(_g,Ok(n)),i.buffers.color.setClear(_g.r,_g.g,_g.b,g,s)}return{getClearColor:function(){return a},setClearColor:function(m,g=1){a.set(m),l=g,_(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(m){l=m,_(a,l)},render:function p(m,g){let b=!1,v=!0===g.isScene?g.background:null;switch(v&&v.isTexture&&(v=(g.backgroundBlurriness>0?t:e).get(v)),null===v?_(a,l):v&&v.isColor&&(_(v,1),b=!0),n.xr.getEnvironmentBlendMode()){case"opaque":b=!0;break;case"additive":i.buffers.color.setClear(0,0,0,1,s),b=!0;break;case"alpha-blend":i.buffers.color.setClear(0,0,0,0,s),b=!0}(n.autoClear||b)&&n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil),v&&(v.isCubeTexture||v.mapping===bh)?(void 0===d&&(d=new Ii(new yd(1,1,1),new ma({name:"BackgroundCubeMaterial",uniforms:xd(jo.backgroundCube.uniforms),vertexShader:jo.backgroundCube.vertexShader,fragmentShader:jo.backgroundCube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1})),d.geometry.deleteAttribute("normal"),d.geometry.deleteAttribute("uv"),d.onBeforeRender=function(S,D,I){this.matrixWorld.copyPosition(I.matrixWorld)},Object.defineProperty(d.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(d)),d.material.uniforms.envMap.value=v,d.material.uniforms.flipEnvMap.value=v.isCubeTexture&&!1===v.isRenderTargetTexture?-1:1,d.material.uniforms.backgroundBlurriness.value=g.backgroundBlurriness,d.material.uniforms.backgroundIntensity.value=g.backgroundIntensity,d.material.toneMapped=v.colorSpace!==lt,(u!==v||h!==v.version||f!==n.toneMapping)&&(d.material.needsUpdate=!0,u=v,h=v.version,f=n.toneMapping),d.layers.enableAll(),m.unshift(d,d.geometry,d.material,0,0,null)):v&&v.isTexture&&(void 0===c&&(c=new Ii(new gg(2,2),new ma({name:"BackgroundMaterial",uniforms:xd(jo.background.uniforms),vertexShader:jo.background.vertexShader,fragmentShader:jo.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),Object.defineProperty(c.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(c)),c.material.uniforms.t2D.value=v,c.material.uniforms.backgroundIntensity.value=g.backgroundIntensity,c.material.toneMapped=v.colorSpace!==lt,!0===v.matrixAutoUpdate&&v.updateMatrix(),c.material.uniforms.uvTransform.value.copy(v.matrix),(u!==v||h!==v.version||f!==n.toneMapping)&&(c.material.needsUpdate=!0,u=v,h=v.version,f=n.toneMapping),c.layers.enableAll(),m.unshift(c,c.geometry,c.material,0,0,null))}}}function AK(n,e,t,i){const r=n.getParameter(n.MAX_VERTEX_ATTRIBS),o=i.isWebGL2?null:e.get("OES_vertex_array_object"),s=i.isWebGL2||null!==o,a={},l=m(null);let c=l,d=!1;function f(G){return i.isWebGL2?n.bindVertexArray(G):o.bindVertexArrayOES(G)}function p(G){return i.isWebGL2?n.deleteVertexArray(G):o.deleteVertexArrayOES(G)}function m(G){const $=[],z=[],H=[];for(let W=0;W<r;W++)$[W]=0,z[W]=0,H[W]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:$,enabledAttributes:z,attributeDivisors:H,object:G,attributes:{},index:null}}function v(){const G=c.newAttributes;for(let $=0,z=G.length;$<z;$++)G[$]=0}function y(G){x(G,0)}function x(G,$){const H=c.enabledAttributes,W=c.attributeDivisors;c.newAttributes[G]=1,0===H[G]&&(n.enableVertexAttribArray(G),H[G]=1),W[G]!==$&&((i.isWebGL2?n:e.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](G,$),W[G]=$)}function S(){const G=c.newAttributes,$=c.enabledAttributes;for(let z=0,H=$.length;z<H;z++)$[z]!==G[z]&&(n.disableVertexAttribArray(z),$[z]=0)}function D(G,$,z,H,W,K,ae){!0===ae?n.vertexAttribIPointer(G,$,z,W,K):n.vertexAttribPointer(G,$,z,H,W,K)}function ie(){V(),d=!0,c!==l&&(c=l,f(c.object))}function V(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:function u(G,$,z,H,W){let K=!1;if(s){const ae=function _(G,$,z){const H=!0===z.wireframe;let W=a[G.id];void 0===W&&(W={},a[G.id]=W);let K=W[$.id];void 0===K&&(K={},W[$.id]=K);let ae=K[H];return void 0===ae&&(ae=m(function h(){return i.isWebGL2?n.createVertexArray():o.createVertexArrayOES()}()),K[H]=ae),ae}(H,z,$);c!==ae&&(c=ae,f(c.object)),K=function g(G,$,z,H){const W=c.attributes,K=$.attributes;let ae=0;const Ce=z.getAttributes();for(const X in Ce)if(Ce[X].location>=0){const re=W[X];let De=K[X];if(void 0===De&&("instanceMatrix"===X&&G.instanceMatrix&&(De=G.instanceMatrix),"instanceColor"===X&&G.instanceColor&&(De=G.instanceColor)),void 0===re||re.attribute!==De||De&&re.data!==De.data)return!0;ae++}return c.attributesNum!==ae||c.index!==H}(G,H,z,W),K&&function b(G,$,z,H){const W={},K=$.attributes;let ae=0;const Ce=z.getAttributes();for(const X in Ce)if(Ce[X].location>=0){let re=K[X];void 0===re&&("instanceMatrix"===X&&G.instanceMatrix&&(re=G.instanceMatrix),"instanceColor"===X&&G.instanceColor&&(re=G.instanceColor));const De={};De.attribute=re,re&&re.data&&(De.data=re.data),W[X]=De,ae++}c.attributes=W,c.attributesNum=ae,c.index=H}(G,H,z,W)}else{const ae=!0===$.wireframe;(c.geometry!==H.id||c.program!==z.id||c.wireframe!==ae)&&(c.geometry=H.id,c.program=z.id,c.wireframe=ae,K=!0)}null!==W&&t.update(W,n.ELEMENT_ARRAY_BUFFER),(K||d)&&(d=!1,function I(G,$,z,H){if(!1===i.isWebGL2&&(G.isInstancedMesh||H.isInstancedBufferGeometry)&&null===e.get("ANGLE_instanced_arrays"))return;v();const W=H.attributes,K=z.getAttributes(),ae=$.defaultAttributeValues;for(const Ce in K){const X=K[Ce];if(X.location>=0){let ue=W[Ce];if(void 0===ue&&("instanceMatrix"===Ce&&G.instanceMatrix&&(ue=G.instanceMatrix),"instanceColor"===Ce&&G.instanceColor&&(ue=G.instanceColor)),void 0!==ue){const re=ue.normalized,De=ue.itemSize,Ee=t.get(ue);if(void 0===Ee)continue;const Se=Ee.buffer,$e=Ee.type,Ve=Ee.bytesPerElement,mt=!0===i.isWebGL2&&($e===n.INT||$e===n.UNSIGNED_INT||1013===ue.gpuType);if(ue.isInterleavedBufferAttribute){const Ze=ue.data,N=Ze.stride,we=ue.offset;if(Ze.isInstancedInterleavedBuffer){for(let de=0;de<X.locationSize;de++)x(X.location+de,Ze.meshPerAttribute);!0!==G.isInstancedMesh&&void 0===H._maxInstanceCount&&(H._maxInstanceCount=Ze.meshPerAttribute*Ze.count)}else for(let de=0;de<X.locationSize;de++)y(X.location+de);n.bindBuffer(n.ARRAY_BUFFER,Se);for(let de=0;de<X.locationSize;de++)D(X.location+de,De/X.locationSize,$e,re,N*Ve,(we+De/X.locationSize*de)*Ve,mt)}else{if(ue.isInstancedBufferAttribute){for(let Ze=0;Ze<X.locationSize;Ze++)x(X.location+Ze,ue.meshPerAttribute);!0!==G.isInstancedMesh&&void 0===H._maxInstanceCount&&(H._maxInstanceCount=ue.meshPerAttribute*ue.count)}else for(let Ze=0;Ze<X.locationSize;Ze++)y(X.location+Ze);n.bindBuffer(n.ARRAY_BUFFER,Se);for(let Ze=0;Ze<X.locationSize;Ze++)D(X.location+Ze,De/X.locationSize,$e,re,De*Ve,De/X.locationSize*Ze*Ve,mt)}}else if(void 0!==ae){const re=ae[Ce];if(void 0!==re)switch(re.length){case 2:n.vertexAttrib2fv(X.location,re);break;case 3:n.vertexAttrib3fv(X.location,re);break;case 4:n.vertexAttrib4fv(X.location,re);break;default:n.vertexAttrib1fv(X.location,re)}}}}S()}(G,$,z,H),null!==W&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,t.get(W).buffer))},reset:ie,resetDefaultState:V,dispose:function C(){ie();for(const G in a){const $=a[G];for(const z in $){const H=$[z];for(const W in H)p(H[W].object),delete H[W];delete $[z]}delete a[G]}},releaseStatesOfGeometry:function T(G){if(void 0===a[G.id])return;const $=a[G.id];for(const z in $){const H=$[z];for(const W in H)p(H[W].object),delete H[W];delete $[z]}delete a[G.id]},releaseStatesOfProgram:function j(G){for(const $ in a){const z=a[$];if(void 0===z[G.id])continue;const H=z[G.id];for(const W in H)p(H[W].object),delete H[W];delete z[G.id]}},initAttributes:v,enableAttribute:y,disableUnusedAttributes:S}}function IK(n,e,t,i){const r=i.isWebGL2;let o;this.setMode=function s(c){o=c},this.render=function a(c,d){n.drawArrays(o,c,d),t.update(d,o,1)},this.renderInstances=function l(c,d,u){if(0===u)return;let h,f;if(r)h=n,f="drawArraysInstanced";else if(h=e.get("ANGLE_instanced_arrays"),f="drawArraysInstancedANGLE",null===h)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");h[f](o,c,d,u),t.update(d,o,u)}}function RK(n,e,t){let i;function o(D){if("highp"===D){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";D="mediump"}return"mediump"===D&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const s=typeof WebGL2RenderingContext<"u"&&"WebGL2RenderingContext"===n.constructor.name;let a=void 0!==t.precision?t.precision:"highp";const l=o(a);l!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",l,"instead."),a=l);const c=s||e.has("WEBGL_draw_buffers"),d=!0===t.logarithmicDepthBuffer,u=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),h=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),f=n.getParameter(n.MAX_TEXTURE_SIZE),p=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),_=n.getParameter(n.MAX_VERTEX_ATTRIBS),m=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),g=n.getParameter(n.MAX_VARYING_VECTORS),b=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),v=h>0,y=s||e.has("OES_texture_float");return{isWebGL2:s,drawBuffers:c,getMaxAnisotropy:function r(){if(void 0!==i)return i;if(!0===e.has("EXT_texture_filter_anisotropic")){const D=e.get("EXT_texture_filter_anisotropic");i=n.getParameter(D.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i},getMaxPrecision:o,precision:a,logarithmicDepthBuffer:d,maxTextures:u,maxVertexTextures:h,maxTextureSize:f,maxCubemapSize:p,maxAttributes:_,maxVertexUniforms:m,maxVaryings:g,maxFragmentUniforms:b,vertexTextures:v,floatFragmentTextures:y,floatVertexTextures:v&&y,maxSamples:s?n.getParameter(n.MAX_SAMPLES):0}}function PK(n){const e=this;let t=null,i=0,r=!1,o=!1;const s=new pl,a=new Tt,l={value:null,needsUpdate:!1};function d(u,h,f,p){const _=null!==u?u.length:0;let m=null;if(0!==_){if(m=l.value,!0!==p||null===m){const g=f+4*_,b=h.matrixWorldInverse;a.getNormalMatrix(b),(null===m||m.length<g)&&(m=new Float32Array(g));for(let v=0,y=f;v!==_;++v,y+=4)s.copy(u[v]).applyMatrix4(b,a),s.normal.toArray(m,y),m[y+3]=s.constant}l.value=m,l.needsUpdate=!0}return e.numPlanes=_,e.numIntersection=0,m}this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(u,h){const f=0!==u.length||h||0!==i||r;return r=h,i=u.length,f},this.beginShadows=function(){o=!0,d(null)},this.endShadows=function(){o=!1},this.setGlobalState=function(u,h){t=d(u,h,0)},this.setState=function(u,h,f){const p=u.clippingPlanes,_=u.clipIntersection,m=u.clipShadows,g=n.get(u);if(!r||null===p||0===p.length||o&&!m)o?d(null):function c(){l.value!==t&&(l.value=t,l.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}();else{const b=o?0:i,v=4*b;let y=g.clippingState||null;l.value=y,y=d(p,h,v,f);for(let x=0;x!==v;++x)y[x]=t[x];g.clippingState=y,this.numIntersection=_?this.numPlanes:0,this.numPlanes+=b}}}function OK(n){let e=new WeakMap;function t(s,a){return 303===a?s.mapping=tl:304===a&&(s.mapping=nl),s}function r(s){const a=s.target;a.removeEventListener("dispose",r);const l=e.get(a);void 0!==l&&(e.delete(a),l.dispose())}return{get:function i(s){if(s&&s.isTexture&&!1===s.isRenderTargetTexture){const a=s.mapping;if(303===a||304===a){if(e.has(s))return t(e.get(s).texture,s.mapping);{const l=s.image;if(l&&l.height>0){const c=new AY(l.height/2);return c.fromEquirectangularTexture(n,s),e.set(s,c),s.addEventListener("dispose",r),t(c.texture,s.mapping)}return null}}}return s},dispose:function o(){e=new WeakMap}}}class vg extends Bx{constructor(e=-1,t=1,i=1,r=-1,o=.1,s=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=r,this.near=o,this.far=s,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}setViewOffset(e,t,i,r,o,s){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=o,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let o=i-e,s=i+e,a=r+t,l=r-t;if(null!==this.view&&this.view.enabled){const c=(this.right-this.left)/this.view.fullWidth/this.zoom,d=(this.top-this.bottom)/this.view.fullHeight/this.zoom;o+=c*this.view.offsetX,s=o+c*this.view.width,a-=d*this.view.offsetY,l=a-d*this.view.height}this.projectionMatrix.makeOrthographic(o,s,a,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}const Fk=[.125,.215,.35,.446,.526,.582],Hx=new vg,Nk=new Pe;let zx=null;const _l=(1+Math.sqrt(5))/2,Sd=1/_l,Lk=[new R(1,1,1),new R(-1,1,1),new R(1,1,-1),new R(-1,1,-1),new R(0,_l,Sd),new R(0,_l,-Sd),new R(Sd,0,_l),new R(-Sd,0,_l),new R(_l,Sd,0),new R(-_l,Sd,0)];class Bk{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,i=.1,r=100){zx=this._renderer.getRenderTarget(),this._setSize(256);const o=this._allocateTargets();return o.depthBuffer=!0,this._sceneToCubeUV(e,i,r,o),t>0&&this._blur(o,0,0,t),this._applyPMREM(o),this._cleanup(o),o}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=Hk(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=Vk(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(zx),e.scissorTest=!1,bg(e,0,0,e.width,e.height)}_fromTexture(e,t){this._setSize(e.mapping===tl||e.mapping===nl?0===e.image.length?16:e.image[0].width||e.image[0].image.width:e.image.width/4),zx=this._renderer.getRenderTarget();const i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,i={magFilter:xn,minFilter:xn,generateMipmaps:!1,type:Ch,format:Lr,colorSpace:zo,depthBuffer:!1},r=Uk(e,t,i);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=Uk(e,t,i);const{_lodMax:o}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function kK(n){const e=[],t=[],i=[];let r=n;const o=n-4+1+Fk.length;for(let s=0;s<o;s++){const a=Math.pow(2,r);t.push(a);let l=1/a;s>n-4?l=Fk[s-n+4-1]:0===s&&(l=0),i.push(l);const c=1/(a-2),d=-c,u=1+c,h=[d,d,u,d,u,u,d,d,u,u,d,u],f=6,p=6,_=3,m=2,g=1,b=new Float32Array(_*p*f),v=new Float32Array(m*p*f),y=new Float32Array(g*p*f);for(let S=0;S<f;S++){const D=S%3*2/3-1,I=S>2?0:-1;b.set([D,I,0,D+2/3,I,0,D+2/3,I+1,0,D,I,0,D+2/3,I+1,0,D,I+1,0],_*p*S),v.set(h,m*p*S),y.set([S,S,S,S,S,S],g*p*S)}const x=new It;x.setAttribute("position",new Mn(b,_)),x.setAttribute("uv",new Mn(v,m)),x.setAttribute("faceIndex",new Mn(y,g)),e.push(x),r>4&&r--}return{lodPlanes:e,sizeLods:t,sigmas:i}}(o)),this._blurMaterial=function FK(n,e,t){const i=new Float32Array(20),r=new R(0,1,0);return new ma({name:"SphericalGaussianBlur",defines:{n:20,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}(o,e,t)}return r}_compileMaterial(e){const t=new Ii(this._lodPlanes[0],e);this._renderer.compile(t,Hx)}_sceneToCubeUV(e,t,i,r){const a=new ai(90,1,t,i),l=[1,-1,1,1,1,1],c=[1,1,1,-1,-1,-1],d=this._renderer,u=d.autoClear,h=d.toneMapping;d.getClearColor(Nk),d.toneMapping=vs,d.autoClear=!1;const f=new Br({name:"PMREM.Background",side:1,depthWrite:!1,depthTest:!1}),p=new Ii(new yd,f);let _=!1;const m=e.background;m?m.isColor&&(f.color.copy(m),e.background=null,_=!0):(f.color.copy(Nk),_=!0);for(let g=0;g<6;g++){const b=g%3;0===b?(a.up.set(0,l[g],0),a.lookAt(c[g],0,0)):1===b?(a.up.set(0,0,l[g]),a.lookAt(0,c[g],0)):(a.up.set(0,l[g],0),a.lookAt(0,0,c[g]));const v=this._cubeSize;bg(r,b*v,g>2?v:0,v,v),d.setRenderTarget(r),_&&d.render(p,a),d.render(e,a)}p.geometry.dispose(),p.material.dispose(),d.toneMapping=h,d.autoClear=u,e.background=m}_textureToCubeUV(e,t){const i=this._renderer,r=e.mapping===tl||e.mapping===nl;r?(null===this._cubemapMaterial&&(this._cubemapMaterial=Hk()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===e.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=Vk());const o=r?this._cubemapMaterial:this._equirectMaterial,s=new Ii(this._lodPlanes[0],o);o.uniforms.envMap.value=e;const l=this._cubeSize;bg(t,0,0,3*l,2*l),i.setRenderTarget(t),i.render(s,Hx)}_applyPMREM(e){const t=this._renderer,i=t.autoClear;t.autoClear=!1;for(let r=1;r<this._lodPlanes.length;r++){const o=Math.sqrt(this._sigmas[r]*this._sigmas[r]-this._sigmas[r-1]*this._sigmas[r-1]);this._blur(e,r-1,r,o,Lk[(r-1)%Lk.length])}t.autoClear=i}_blur(e,t,i,r,o){const s=this._pingPongRenderTarget;this._halfBlur(e,s,t,i,r,"latitudinal",o),this._halfBlur(s,e,i,i,r,"longitudinal",o)}_halfBlur(e,t,i,r,o,s,a){const l=this._renderer,c=this._blurMaterial;"latitudinal"!==s&&"longitudinal"!==s&&console.error("blur direction must be either latitudinal or longitudinal!");const u=new Ii(this._lodPlanes[r],c),h=c.uniforms,f=this._sizeLods[i]-1,p=isFinite(o)?Math.PI/(2*f):2*Math.PI/39,_=o/p,m=isFinite(o)?1+Math.floor(3*_):20;m>20&&console.warn(`sigmaRadians, ${o}, is too large and will clip, as it requested ${m} samples when the maximum is set to 20`);const g=[];let b=0;for(let D=0;D<20;++D){const I=D/_,C=Math.exp(-I*I/2);g.push(C),0===D?b+=C:D<m&&(b+=2*C)}for(let D=0;D<g.length;D++)g[D]=g[D]/b;h.envMap.value=e.texture,h.samples.value=m,h.weights.value=g,h.latitudinal.value="latitudinal"===s,a&&(h.poleAxis.value=a);const{_lodMax:v}=this;h.dTheta.value=p,h.mipInt.value=v-i;const y=this._sizeLods[r];bg(t,3*y*(r>v-4?r-v+4:0),4*(this._cubeSize-y),3*y,2*y),l.setRenderTarget(t),l.render(u,Hx)}}function Uk(n,e,t){const i=new dl(n,e,t);return i.texture.mapping=bh,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function bg(n,e,t,i,r){n.viewport.set(e,t,i,r),n.scissor.set(e,t,i,r)}function Vk(){return new ma({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function Hk(){return new ma({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function NK(n){let e=new WeakMap,t=null;function o(a){const l=a.target;l.removeEventListener("dispose",o);const c=e.get(l);void 0!==c&&(e.delete(l),c.dispose())}return{get:function i(a){if(a&&a.isTexture){const l=a.mapping,c=303===l||304===l,d=l===tl||l===nl;if(c||d){if(a.isRenderTargetTexture&&!0===a.needsPMREMUpdate){a.needsPMREMUpdate=!1;let u=e.get(a);return null===t&&(t=new Bk(n)),u=c?t.fromEquirectangular(a,u):t.fromCubemap(a,u),e.set(a,u),u.texture}if(e.has(a))return e.get(a).texture;{const u=a.image;if(c&&u&&u.height>0||d&&u&&function r(a){let l=0;for(let d=0;d<6;d++)void 0!==a[d]&&l++;return 6===l}(u)){null===t&&(t=new Bk(n));const h=c?t.fromEquirectangular(a):t.fromCubemap(a);return e.set(a,h),a.addEventListener("dispose",o),h.texture}return null}}}return a},dispose:function s(){e=new WeakMap,null!==t&&(t.dispose(),t=null)}}}function LK(n){const e={};function t(i){if(void 0!==e[i])return e[i];let r;switch(i){case"WEBGL_depth_texture":r=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=n.getExtension(i)}return e[i]=r,r}return{has:function(i){return null!==t(i)},init:function(i){i.isWebGL2?t("EXT_color_buffer_float"):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(i){const r=t(i);return null===r&&console.warn("THREE.WebGLRenderer: "+i+" extension not supported."),r}}}function BK(n,e,t,i){const r={},o=new WeakMap;function s(u){const h=u.target;null!==h.index&&e.remove(h.index);for(const p in h.attributes)e.remove(h.attributes[p]);for(const p in h.morphAttributes){const _=h.morphAttributes[p];for(let m=0,g=_.length;m<g;m++)e.remove(_[m])}h.removeEventListener("dispose",s),delete r[h.id];const f=o.get(h);f&&(e.remove(f),o.delete(h)),i.releaseStatesOfGeometry(h),!0===h.isInstancedBufferGeometry&&delete h._maxInstanceCount,t.memory.geometries--}function c(u){const h=[],f=u.index,p=u.attributes.position;let _=0;if(null!==f){const b=f.array;_=f.version;for(let v=0,y=b.length;v<y;v+=3){const x=b[v+0],S=b[v+1],D=b[v+2];h.push(x,S,S,D,D,x)}}else{_=p.version;for(let v=0,y=p.array.length/3-1;v<y;v+=3){const x=v+0,S=v+1,D=v+2;h.push(x,S,S,D,D,x)}}const m=new(hk(h)?Tk:Ek)(h,1);m.version=_;const g=o.get(u);g&&e.remove(g),o.set(u,m)}return{get:function a(u,h){return!0===r[h.id]||(h.addEventListener("dispose",s),r[h.id]=!0,t.memory.geometries++),h},update:function l(u){const h=u.attributes;for(const p in h)e.update(h[p],n.ARRAY_BUFFER);const f=u.morphAttributes;for(const p in f){const _=f[p];for(let m=0,g=_.length;m<g;m++)e.update(_[m],n.ARRAY_BUFFER)}},getWireframeAttribute:function d(u){const h=o.get(u);if(h){const f=u.index;null!==f&&h.version<f.version&&c(u)}else c(u);return o.get(u)}}}function UK(n,e,t,i){const r=i.isWebGL2;let o,a,l;this.setMode=function s(h){o=h},this.setIndex=function c(h){a=h.type,l=h.bytesPerElement},this.render=function d(h,f){n.drawElements(o,f,a,h*l),t.update(f,o,1)},this.renderInstances=function u(h,f,p){if(0===p)return;let _,m;if(r)_=n,m="drawElementsInstanced";else if(_=e.get("ANGLE_instanced_arrays"),m="drawElementsInstancedANGLE",null===_)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");_[m](o,f,a,h*l,p),t.update(f,o,p)}}function VK(n){const t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function r(){t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function i(o,s,a){switch(t.calls++,s){case n.TRIANGLES:t.triangles+=a*(o/3);break;case n.LINES:t.lines+=a*(o/2);break;case n.LINE_STRIP:t.lines+=a*(o-1);break;case n.LINE_LOOP:t.lines+=a*o;break;case n.POINTS:t.points+=a*o;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",s)}}}}function HK(n,e){return n[0]-e[0]}function zK(n,e){return Math.abs(e[1])-Math.abs(n[1])}function GK(n,e,t){const i={},r=new Float32Array(8),o=new WeakMap,s=new Jt,a=[];for(let c=0;c<8;c++)a[c]=[c,0];return{update:function l(c,d,u){const h=c.morphTargetInfluences;if(!0===e.isWebGL2){const f=d.morphAttributes.position||d.morphAttributes.normal||d.morphAttributes.color,p=void 0!==f?f.length:0;let _=o.get(d);if(void 0===_||_.count!==p){let G=function(){ie.dispose(),o.delete(d),d.removeEventListener("dispose",G)};void 0!==_&&_.texture.dispose();const b=void 0!==d.morphAttributes.position,v=void 0!==d.morphAttributes.normal,y=void 0!==d.morphAttributes.color,x=d.morphAttributes.position||[],S=d.morphAttributes.normal||[],D=d.morphAttributes.color||[];let I=0;!0===b&&(I=1),!0===v&&(I=2),!0===y&&(I=3);let C=d.attributes.position.count*I,T=1;C>e.maxTextureSize&&(T=Math.ceil(C/e.maxTextureSize),C=e.maxTextureSize);const j=new Float32Array(C*T*4*p),ie=new Mx(j,C,T,p);ie.type=ys,ie.needsUpdate=!0;const V=4*I;for(let $=0;$<p;$++){const z=x[$],H=S[$],W=D[$],K=C*T*4*$;for(let ae=0;ae<z.count;ae++){const Ce=ae*V;!0===b&&(s.fromBufferAttribute(z,ae),j[K+Ce+0]=s.x,j[K+Ce+1]=s.y,j[K+Ce+2]=s.z,j[K+Ce+3]=0),!0===v&&(s.fromBufferAttribute(H,ae),j[K+Ce+4]=s.x,j[K+Ce+5]=s.y,j[K+Ce+6]=s.z,j[K+Ce+7]=0),!0===y&&(s.fromBufferAttribute(W,ae),j[K+Ce+8]=s.x,j[K+Ce+9]=s.y,j[K+Ce+10]=s.z,j[K+Ce+11]=4===W.itemSize?s.w:1)}}_={count:p,texture:ie,size:new ce(C,T)},o.set(d,_),d.addEventListener("dispose",G)}let m=0;for(let b=0;b<h.length;b++)m+=h[b];const g=d.morphTargetsRelative?1:1-m;u.getUniforms().setValue(n,"morphTargetBaseInfluence",g),u.getUniforms().setValue(n,"morphTargetInfluences",h),u.getUniforms().setValue(n,"morphTargetsTexture",_.texture,t),u.getUniforms().setValue(n,"morphTargetsTextureSize",_.size)}else{const f=void 0===h?0:h.length;let p=i[d.id];if(void 0===p||p.length!==f){p=[];for(let v=0;v<f;v++)p[v]=[v,0];i[d.id]=p}for(let v=0;v<f;v++){const y=p[v];y[0]=v,y[1]=h[v]}p.sort(zK);for(let v=0;v<8;v++)v<f&&p[v][1]?(a[v][0]=p[v][0],a[v][1]=p[v][1]):(a[v][0]=Number.MAX_SAFE_INTEGER,a[v][1]=0);a.sort(HK);const _=d.morphAttributes.position,m=d.morphAttributes.normal;let g=0;for(let v=0;v<8;v++){const y=a[v],x=y[0],S=y[1];x!==Number.MAX_SAFE_INTEGER&&S?(_&&d.getAttribute("morphTarget"+v)!==_[x]&&d.setAttribute("morphTarget"+v,_[x]),m&&d.getAttribute("morphNormal"+v)!==m[x]&&d.setAttribute("morphNormal"+v,m[x]),r[v]=S,g+=S):(_&&!0===d.hasAttribute("morphTarget"+v)&&d.deleteAttribute("morphTarget"+v),m&&!0===d.hasAttribute("morphNormal"+v)&&d.deleteAttribute("morphNormal"+v),r[v]=0)}const b=d.morphTargetsRelative?1:1-g;u.getUniforms().setValue(n,"morphTargetBaseInfluence",b),u.getUniforms().setValue(n,"morphTargetInfluences",r)}}}}function jK(n,e,t,i){let r=new WeakMap;function a(l){const c=l.target;c.removeEventListener("dispose",a),t.remove(c.instanceMatrix),null!==c.instanceColor&&t.remove(c.instanceColor)}return{update:function o(l){const c=i.render.frame,u=e.get(l,l.geometry);return r.get(u)!==c&&(e.update(u),r.set(u,c)),l.isInstancedMesh&&(!1===l.hasEventListener("dispose",a)&&l.addEventListener("dispose",a),t.update(l.instanceMatrix,n.ARRAY_BUFFER),null!==l.instanceColor&&t.update(l.instanceColor,n.ARRAY_BUFFER)),u},dispose:function s(){r=new WeakMap}}}const zk=new co,Gk=new Mx,jk=new mk,Wk=new pg,$k=[],qk=[],Xk=new Float32Array(16),Yk=new Float32Array(9),Zk=new Float32Array(4);function Ed(n,e,t){const i=n[0];if(i<=0||i>0)return n;const r=e*t;let o=$k[r];if(void 0===o&&(o=new Float32Array(r),$k[r]=o),0!==e){i.toArray(o,0);for(let s=1,a=0;s!==e;++s)a+=t,n[s].toArray(o,a)}return o}function Qn(n,e){if(n.length!==e.length)return!1;for(let t=0,i=n.length;t<i;t++)if(n[t]!==e[t])return!1;return!0}function Jn(n,e){for(let t=0,i=e.length;t<i;t++)n[t]=e[t]}function yg(n,e){let t=qk[e];void 0===t&&(t=new Int32Array(e),qk[e]=t);for(let i=0;i!==e;++i)t[i]=n.allocateTextureUnit();return t}function WK(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function $K(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Qn(t,e))return;n.uniform2fv(this.addr,e),Jn(t,e)}}function qK(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(void 0!==e.r)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(Qn(t,e))return;n.uniform3fv(this.addr,e),Jn(t,e)}}function XK(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Qn(t,e))return;n.uniform4fv(this.addr,e),Jn(t,e)}}function YK(n,e){const t=this.cache,i=e.elements;if(void 0===i){if(Qn(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),Jn(t,e)}else{if(Qn(t,i))return;Zk.set(i),n.uniformMatrix2fv(this.addr,!1,Zk),Jn(t,i)}}function ZK(n,e){const t=this.cache,i=e.elements;if(void 0===i){if(Qn(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),Jn(t,e)}else{if(Qn(t,i))return;Yk.set(i),n.uniformMatrix3fv(this.addr,!1,Yk),Jn(t,i)}}function KK(n,e){const t=this.cache,i=e.elements;if(void 0===i){if(Qn(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),Jn(t,e)}else{if(Qn(t,i))return;Xk.set(i),n.uniformMatrix4fv(this.addr,!1,Xk),Jn(t,i)}}function QK(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function JK(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Qn(t,e))return;n.uniform2iv(this.addr,e),Jn(t,e)}}function eQ(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Qn(t,e))return;n.uniform3iv(this.addr,e),Jn(t,e)}}function tQ(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Qn(t,e))return;n.uniform4iv(this.addr,e),Jn(t,e)}}function nQ(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function iQ(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Qn(t,e))return;n.uniform2uiv(this.addr,e),Jn(t,e)}}function rQ(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Qn(t,e))return;n.uniform3uiv(this.addr,e),Jn(t,e)}}function oQ(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Qn(t,e))return;n.uniform4uiv(this.addr,e),Jn(t,e)}}function sQ(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2D(e||zk,r)}function aQ(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture3D(e||jk,r)}function lQ(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTextureCube(e||Wk,r)}function cQ(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2DArray(e||Gk,r)}function uQ(n,e){n.uniform1fv(this.addr,e)}function hQ(n,e){const t=Ed(e,this.size,2);n.uniform2fv(this.addr,t)}function fQ(n,e){const t=Ed(e,this.size,3);n.uniform3fv(this.addr,t)}function pQ(n,e){const t=Ed(e,this.size,4);n.uniform4fv(this.addr,t)}function mQ(n,e){const t=Ed(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function gQ(n,e){const t=Ed(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function _Q(n,e){const t=Ed(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function vQ(n,e){n.uniform1iv(this.addr,e)}function bQ(n,e){n.uniform2iv(this.addr,e)}function yQ(n,e){n.uniform3iv(this.addr,e)}function xQ(n,e){n.uniform4iv(this.addr,e)}function CQ(n,e){n.uniform1uiv(this.addr,e)}function MQ(n,e){n.uniform2uiv(this.addr,e)}function wQ(n,e){n.uniform3uiv(this.addr,e)}function SQ(n,e){n.uniform4uiv(this.addr,e)}function EQ(n,e,t){const i=this.cache,r=e.length,o=yg(t,r);Qn(i,o)||(n.uniform1iv(this.addr,o),Jn(i,o));for(let s=0;s!==r;++s)t.setTexture2D(e[s]||zk,o[s])}function TQ(n,e,t){const i=this.cache,r=e.length,o=yg(t,r);Qn(i,o)||(n.uniform1iv(this.addr,o),Jn(i,o));for(let s=0;s!==r;++s)t.setTexture3D(e[s]||jk,o[s])}function DQ(n,e,t){const i=this.cache,r=e.length,o=yg(t,r);Qn(i,o)||(n.uniform1iv(this.addr,o),Jn(i,o));for(let s=0;s!==r;++s)t.setTextureCube(e[s]||Wk,o[s])}function AQ(n,e,t){const i=this.cache,r=e.length,o=yg(t,r);Qn(i,o)||(n.uniform1iv(this.addr,o),Jn(i,o));for(let s=0;s!==r;++s)t.setTexture2DArray(e[s]||Gk,o[s])}class RQ{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.setValue=function dQ(n){switch(n){case 5126:return WK;case 35664:return $K;case 35665:return qK;case 35666:return XK;case 35674:return YK;case 35675:return ZK;case 35676:return KK;case 5124:case 35670:return QK;case 35667:case 35671:return JK;case 35668:case 35672:return eQ;case 35669:case 35673:return tQ;case 5125:return nQ;case 36294:return iQ;case 36295:return rQ;case 36296:return oQ;case 35678:case 36198:case 36298:case 36306:case 35682:return sQ;case 35679:case 36299:case 36307:return aQ;case 35680:case 36300:case 36308:case 36293:return lQ;case 36289:case 36303:case 36311:case 36292:return cQ}}(t.type)}}class PQ{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.size=t.size,this.setValue=function IQ(n){switch(n){case 5126:return uQ;case 35664:return hQ;case 35665:return fQ;case 35666:return pQ;case 35674:return mQ;case 35675:return gQ;case 35676:return _Q;case 5124:case 35670:return vQ;case 35667:case 35671:return bQ;case 35668:case 35672:return yQ;case 35669:case 35673:return xQ;case 5125:return CQ;case 36294:return MQ;case 36295:return wQ;case 36296:return SQ;case 35678:case 36198:case 36298:case 36306:case 35682:return EQ;case 35679:case 36299:case 36307:return TQ;case 35680:case 36300:case 36308:case 36293:return DQ;case 36289:case 36303:case 36311:case 36292:return AQ}}(t.type)}}class OQ{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,i){const r=this.seq;for(let o=0,s=r.length;o!==s;++o){const a=r[o];a.setValue(e,t[a.id],i)}}}const jx=/(\w+)(\])?(\[|\.)?/g;function Kk(n,e){n.seq.push(e),n.map[e.id]=e}function kQ(n,e,t){const i=n.name,r=i.length;for(jx.lastIndex=0;;){const o=jx.exec(i);let a=o[1];const c=o[3];if("]"===o[2]&&(a|=0),void 0===c||"["===c&&jx.lastIndex+2===r){Kk(t,void 0===c?new RQ(a,n,e):new PQ(a,n,e));break}{let u=t.map[a];void 0===u&&(u=new OQ(a),Kk(t,u)),t=u}}}class xg{constructor(e,t){this.seq=[],this.map={};const i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let r=0;r<i;++r){const o=e.getActiveUniform(t,r);kQ(o,e.getUniformLocation(t,o.name),this)}}setValue(e,t,i,r){const o=this.map[t];void 0!==o&&o.setValue(e,i,r)}setOptional(e,t,i){const r=t[i];void 0!==r&&this.setValue(e,i,r)}static upload(e,t,i,r){for(let o=0,s=t.length;o!==s;++o){const a=t[o],l=i[a.id];!1!==l.needsUpdate&&a.setValue(e,l.value,r)}}static seqWithValue(e,t){const i=[];for(let r=0,o=e.length;r!==o;++r){const s=e[r];s.id in t&&i.push(s)}return i}}function Qk(n,e,t){const i=n.createShader(e);return n.shaderSource(i,t),n.compileShader(i),i}let FQ=0;function Jk(n,e,t){const i=n.getShaderParameter(e,n.COMPILE_STATUS),r=n.getShaderInfoLog(e).trim();if(i&&""===r)return"";const o=/ERROR: 0:(\d+)/.exec(r);if(o){const s=parseInt(o[1]);return t.toUpperCase()+"\n\n"+r+"\n\n"+function NQ(n,e){const t=n.split("\n"),i=[],r=Math.max(e-6,0),o=Math.min(e+6,t.length);for(let s=r;s<o;s++){const a=s+1;i.push(`${a===e?">":" "} ${a}: ${t[s]}`)}return i.join("\n")}(n.getShaderSource(e),s)}return r}function BQ(n,e){const t=function LQ(n){switch(n){case zo:return["Linear","( value )"];case lt:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",n),["Linear","( value )"]}}(e);return"vec4 "+n+"( vec4 value ) { return LinearTo"+t[0]+t[1]+"; }"}function UQ(n,e){let t;switch(e){case fX:t="Linear";break;case pX:t="Reinhard";break;case mX:t="OptimizedCineon";break;case gX:t="ACESFilmic";break;case _X:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function Oh(n){return""!==n}function eF(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function tF(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const GQ=/^[ \t]*#include +<([\w\d./]+)>/gm;function Wx(n){return n.replace(GQ,jQ)}function jQ(n,e){const t=Dt[e];if(void 0===t)throw new Error("Can not resolve #include <"+e+">");return Wx(t)}const WQ=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function nF(n){return n.replace(WQ,$Q)}function $Q(n,e,t,i){let r="";for(let o=parseInt(e);o<parseInt(t);o++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+o+" ]").replace(/UNROLLED_LOOP_INDEX/g,o);return r}function iF(n){let e="precision "+n.precision+" float;\nprecision "+n.precision+" int;";return"highp"===n.precision?e+="\n#define HIGH_PRECISION":"mediump"===n.precision?e+="\n#define MEDIUM_PRECISION":"lowp"===n.precision&&(e+="\n#define LOW_PRECISION"),e}function QQ(n,e,t,i){const r=n.getContext(),o=t.defines;let s=t.vertexShader,a=t.fragmentShader;const l=function qQ(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===CO?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===Wq?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===gs&&(e="SHADOWMAP_TYPE_VSM"),e}(t),c=function XQ(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case tl:case nl:e="ENVMAP_TYPE_CUBE";break;case bh:e="ENVMAP_TYPE_CUBE_UV"}return e}(t),d=function YQ(n){let e="ENVMAP_MODE_REFLECTION";return n.envMap&&n.envMapMode===nl&&(e="ENVMAP_MODE_REFRACTION"),e}(t),u=function ZQ(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case Gm:e="ENVMAP_BLENDING_MULTIPLY";break;case uX:e="ENVMAP_BLENDING_MIX";break;case hX:e="ENVMAP_BLENDING_ADD"}return e}(t),h=function KQ(n){const e=n.envMapCubeUVHeight;if(null===e)return null;const t=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),112)),texelHeight:i,maxMip:t}}(t),f=t.isWebGL2?"":function VQ(n){return[n.extensionDerivatives||n.envMapCubeUVHeight||n.bumpMap||n.normalMapTangentSpace||n.clearcoatNormalMap||n.flatShading||"physical"===n.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(n.extensionFragDepth||n.logarithmicDepthBuffer)&&n.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",n.extensionDrawBuffers&&n.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(n.extensionShaderTextureLOD||n.envMap||n.transmission)&&n.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Oh).join("\n")}(t),p=function HQ(n){const e=[];for(const t in n){const i=n[t];!1!==i&&e.push("#define "+t+" "+i)}return e.join("\n")}(o),_=r.createProgram();let m,g,b=t.glslVersion?"#version "+t.glslVersion+"\n":"";t.isRawShaderMaterial?(m=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,p].filter(Oh).join("\n"),m.length>0&&(m+="\n"),g=[f,"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,p].filter(Oh).join("\n"),g.length>0&&(g+="\n")):(m=[iF(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,p,t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+d:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&!1===t.flatShading?"#define USE_MORPHNORMALS":"",t.morphColors&&t.isWebGL2?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","\tattribute vec2 uv1;","#endif","#ifdef USE_UV2","\tattribute vec2 uv2;","#endif","#ifdef USE_UV3","\tattribute vec2 uv3;","#endif","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Oh).join("\n"),g=[f,iF(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,p,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+c:"",t.envMap?"#define "+d:"",t.envMap?"#define "+u:"",h?"#define CUBEUV_TEXEL_WIDTH "+h.texelWidth:"",h?"#define CUBEUV_TEXEL_HEIGHT "+h.texelHeight:"",h?"#define CUBEUV_MAX_MIP "+h.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==vs?"#define TONE_MAPPING":"",t.toneMapping!==vs?Dt.tonemapping_pars_fragment:"",t.toneMapping!==vs?UQ("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",Dt.encodings_pars_fragment,BQ("linearToOutputTexel",t.outputColorSpace),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"","\n"].filter(Oh).join("\n")),s=Wx(s),s=eF(s,t),s=tF(s,t),a=Wx(a),a=eF(a,t),a=tF(a,t),s=nF(s),a=nF(a),t.isWebGL2&&!0!==t.isRawShaderMaterial&&(b="#version 300 es\n",m=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+m,g=["#define varying in",t.glslVersion===ck?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===ck?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+g);const y=b+g+a,x=Qk(r,r.VERTEX_SHADER,b+m+s),S=Qk(r,r.FRAGMENT_SHADER,y);if(r.attachShader(_,x),r.attachShader(_,S),void 0!==t.index0AttributeName?r.bindAttribLocation(_,0,t.index0AttributeName):!0===t.morphTargets&&r.bindAttribLocation(_,0,"position"),r.linkProgram(_),n.debug.checkShaderErrors){const C=r.getProgramInfoLog(_).trim(),T=r.getShaderInfoLog(x).trim(),j=r.getShaderInfoLog(S).trim();let ie=!0,V=!0;if(!1===r.getProgramParameter(_,r.LINK_STATUS))if(ie=!1,"function"==typeof n.debug.onShaderError)n.debug.onShaderError(r,_,x,S);else{const G=Jk(r,x,"vertex"),$=Jk(r,S,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(_,r.VALIDATE_STATUS)+"\n\nProgram Info Log: "+C+"\n"+G+"\n"+$)}else""!==C?console.warn("THREE.WebGLProgram: Program Info Log:",C):(""===T||""===j)&&(V=!1);V&&(this.diagnostics={runnable:ie,programLog:C,vertexShader:{log:T,prefix:m},fragmentShader:{log:j,prefix:g}})}let D,I;return r.deleteShader(x),r.deleteShader(S),this.getUniforms=function(){return void 0===D&&(D=new xg(r,_)),D},this.getAttributes=function(){return void 0===I&&(I=function zQ(n,e){const t={},i=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let r=0;r<i;r++){const o=n.getActiveAttrib(e,r),s=o.name;let a=1;o.type===n.FLOAT_MAT2&&(a=2),o.type===n.FLOAT_MAT3&&(a=3),o.type===n.FLOAT_MAT4&&(a=4),t[s]={type:o.type,location:n.getAttribLocation(e,s),locationSize:a}}return t}(r,_)),I},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(_),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=FQ++,this.cacheKey=e,this.usedTimes=1,this.program=_,this.vertexShader=x,this.fragmentShader=S,this}let JQ=0;class eJ{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const i=e.fragmentShader,r=this._getShaderStage(e.vertexShader),o=this._getShaderStage(i),s=this._getShaderCacheForMaterial(e);return!1===s.has(r)&&(s.add(r),r.usedTimes++),!1===s.has(o)&&(s.add(o),o.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const i of t)i.usedTimes--,0===i.usedTimes&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let i=t.get(e);return void 0===i&&(i=new Set,t.set(e,i)),i}_getShaderStage(e){const t=this.shaderCache;let i=t.get(e);return void 0===i&&(i=new tJ(e),t.set(e,i)),i}}class tJ{constructor(e){this.id=JQ++,this.code=e,this.usedTimes=0}}function nJ(n,e,t,i,r,o,s){const a=new Ix,l=new eJ,c=[],d=r.isWebGL2,u=r.logarithmicDepthBuffer,h=r.vertexTextures;let f=r.precision;const p={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function _(C){return 0===C?"uv":`uv${C}`}return{getParameters:function m(C,T,j,ie,V){const G=ie.fog,$=V.geometry,H=(C.isMeshStandardMaterial?t:e).get(C.envMap||(C.isMeshStandardMaterial?ie.environment:null)),W=H&&H.mapping===bh?H.image.height:null,K=p[C.type];null!==C.precision&&(f=r.getMaxPrecision(C.precision),f!==C.precision&&console.warn("THREE.WebGLProgram.getParameters:",C.precision,"not supported, using",f,"instead."));const ae=$.morphAttributes.position||$.morphAttributes.normal||$.morphAttributes.color,Ce=void 0!==ae?ae.length:0;let ue,re,De,Ee,X=0;if(void 0!==$.morphAttributes.position&&(X=1),void 0!==$.morphAttributes.normal&&(X=2),void 0!==$.morphAttributes.color&&(X=3),K){const Gn=jo[K];ue=Gn.vertexShader,re=Gn.fragmentShader}else ue=C.vertexShader,re=C.fragmentShader,l.update(C),De=l.getVertexShaderID(C),Ee=l.getFragmentShaderID(C);const Se=n.getRenderTarget(),$e=!0===V.isInstancedMesh,Ve=!!C.map,Ze=!!H,N=!!C.aoMap,we=!!C.lightMap,de=!!C.bumpMap,Me=!!C.normalMap,pe=!!C.displacementMap,qe=!!C.emissiveMap,Be=!!C.metalnessMap,Ue=!!C.roughnessMap,ot=C.anisotropy>0,Ot=C.clearcoat>0,pn=C.iridescence>0,k=C.sheen>0,E=C.transmission>0,oe=ot&&!!C.anisotropyMap,be=Ot&&!!C.clearcoatMap,ve=Ot&&!!C.clearcoatNormalMap,F=Ot&&!!C.clearcoatRoughnessMap,me=pn&&!!C.iridescenceMap,ge=pn&&!!C.iridescenceThicknessMap,ee=k&&!!C.sheenColorMap,Ge=k&&!!C.sheenRoughnessMap,Ke=!!C.specularMap,Xe=!!C.specularColorMap,je=!!C.specularIntensityMap,He=E&&!!C.transmissionMap,st=E&&!!C.thicknessMap,U=!!C.alphaMap,te=!!C.extensions,Ae=!!$.attributes.uv1,Ne=!!$.attributes.uv2,Wt=!!$.attributes.uv3;return{isWebGL2:d,shaderID:K,shaderType:C.type,shaderName:C.name,vertexShader:ue,fragmentShader:re,defines:C.defines,customVertexShaderID:De,customFragmentShaderID:Ee,isRawShaderMaterial:!0===C.isRawShaderMaterial,glslVersion:C.glslVersion,precision:f,instancing:$e,instancingColor:$e&&null!==V.instanceColor,supportsVertexTextures:h,outputColorSpace:null===Se?n.outputColorSpace:!0===Se.isXRRenderTarget?Se.texture.colorSpace:zo,map:Ve,matcap:!!C.matcap,envMap:Ze,envMapMode:Ze&&H.mapping,envMapCubeUVHeight:W,aoMap:N,lightMap:we,bumpMap:de,normalMap:Me,displacementMap:h&&pe,emissiveMap:qe,normalMapObjectSpace:Me&&1===C.normalMapType,normalMapTangentSpace:Me&&0===C.normalMapType,metalnessMap:Be,roughnessMap:Ue,anisotropy:ot,anisotropyMap:oe,clearcoat:Ot,clearcoatMap:be,clearcoatNormalMap:ve,clearcoatRoughnessMap:F,iridescence:pn,iridescenceMap:me,iridescenceThicknessMap:ge,sheen:k,sheenColorMap:ee,sheenRoughnessMap:Ge,specularMap:Ke,specularColorMap:Xe,specularIntensityMap:je,transmission:E,transmissionMap:He,thicknessMap:st,gradientMap:!!C.gradientMap,opaque:!1===C.transparent&&1===C.blending,alphaMap:U,alphaTest:C.alphaTest>0,combine:C.combine,mapUv:Ve&&_(C.map.channel),aoMapUv:N&&_(C.aoMap.channel),lightMapUv:we&&_(C.lightMap.channel),bumpMapUv:de&&_(C.bumpMap.channel),normalMapUv:Me&&_(C.normalMap.channel),displacementMapUv:pe&&_(C.displacementMap.channel),emissiveMapUv:qe&&_(C.emissiveMap.channel),metalnessMapUv:Be&&_(C.metalnessMap.channel),roughnessMapUv:Ue&&_(C.roughnessMap.channel),anisotropyMapUv:oe&&_(C.anisotropyMap.channel),clearcoatMapUv:be&&_(C.clearcoatMap.channel),clearcoatNormalMapUv:ve&&_(C.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:F&&_(C.clearcoatRoughnessMap.channel),iridescenceMapUv:me&&_(C.iridescenceMap.channel),iridescenceThicknessMapUv:ge&&_(C.iridescenceThicknessMap.channel),sheenColorMapUv:ee&&_(C.sheenColorMap.channel),sheenRoughnessMapUv:Ge&&_(C.sheenRoughnessMap.channel),specularMapUv:Ke&&_(C.specularMap.channel),specularColorMapUv:Xe&&_(C.specularColorMap.channel),specularIntensityMapUv:je&&_(C.specularIntensityMap.channel),transmissionMapUv:He&&_(C.transmissionMap.channel),thicknessMapUv:st&&_(C.thicknessMap.channel),alphaMapUv:U&&_(C.alphaMap.channel),vertexTangents:!!$.attributes.tangent&&(Me||ot),vertexColors:C.vertexColors,vertexAlphas:!0===C.vertexColors&&!!$.attributes.color&&4===$.attributes.color.itemSize,vertexUv1s:Ae,vertexUv2s:Ne,vertexUv3s:Wt,pointsUvs:!0===V.isPoints&&!!$.attributes.uv&&(Ve||U),fog:!!G,useFog:!0===C.fog,fogExp2:G&&G.isFogExp2,flatShading:!0===C.flatShading,sizeAttenuation:!0===C.sizeAttenuation,logarithmicDepthBuffer:u,skinning:!0===V.isSkinnedMesh,morphTargets:void 0!==$.morphAttributes.position,morphNormals:void 0!==$.morphAttributes.normal,morphColors:void 0!==$.morphAttributes.color,morphTargetsCount:Ce,morphTextureStride:X,numDirLights:T.directional.length,numPointLights:T.point.length,numSpotLights:T.spot.length,numSpotLightMaps:T.spotLightMap.length,numRectAreaLights:T.rectArea.length,numHemiLights:T.hemi.length,numDirLightShadows:T.directionalShadowMap.length,numPointLightShadows:T.pointShadowMap.length,numSpotLightShadows:T.spotShadowMap.length,numSpotLightShadowsWithMaps:T.numSpotLightShadowsWithMaps,numClippingPlanes:s.numPlanes,numClipIntersection:s.numIntersection,dithering:C.dithering,shadowMapEnabled:n.shadowMap.enabled&&j.length>0,shadowMapType:n.shadowMap.type,toneMapping:C.toneMapped?n.toneMapping:vs,useLegacyLights:n.useLegacyLights,premultipliedAlpha:C.premultipliedAlpha,doubleSided:2===C.side,flipSided:1===C.side,useDepthPacking:C.depthPacking>=0,depthPacking:C.depthPacking||0,index0AttributeName:C.index0AttributeName,extensionDerivatives:te&&!0===C.extensions.derivatives,extensionFragDepth:te&&!0===C.extensions.fragDepth,extensionDrawBuffers:te&&!0===C.extensions.drawBuffers,extensionShaderTextureLOD:te&&!0===C.extensions.shaderTextureLOD,rendererExtensionFragDepth:d||i.has("EXT_frag_depth"),rendererExtensionDrawBuffers:d||i.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:d||i.has("EXT_shader_texture_lod"),customProgramCacheKey:C.customProgramCacheKey()}},getProgramCacheKey:function g(C){const T=[];if(C.shaderID?T.push(C.shaderID):(T.push(C.customVertexShaderID),T.push(C.customFragmentShaderID)),void 0!==C.defines)for(const j in C.defines)T.push(j),T.push(C.defines[j]);return!1===C.isRawShaderMaterial&&(function b(C,T){C.push(T.precision),C.push(T.outputColorSpace),C.push(T.envMapMode),C.push(T.envMapCubeUVHeight),C.push(T.mapUv),C.push(T.alphaMapUv),C.push(T.lightMapUv),C.push(T.aoMapUv),C.push(T.bumpMapUv),C.push(T.normalMapUv),C.push(T.displacementMapUv),C.push(T.emissiveMapUv),C.push(T.metalnessMapUv),C.push(T.roughnessMapUv),C.push(T.anisotropyMapUv),C.push(T.clearcoatMapUv),C.push(T.clearcoatNormalMapUv),C.push(T.clearcoatRoughnessMapUv),C.push(T.iridescenceMapUv),C.push(T.iridescenceThicknessMapUv),C.push(T.sheenColorMapUv),C.push(T.sheenRoughnessMapUv),C.push(T.specularMapUv),C.push(T.specularColorMapUv),C.push(T.specularIntensityMapUv),C.push(T.transmissionMapUv),C.push(T.thicknessMapUv),C.push(T.combine),C.push(T.fogExp2),C.push(T.sizeAttenuation),C.push(T.morphTargetsCount),C.push(T.morphAttributeCount),C.push(T.numDirLights),C.push(T.numPointLights),C.push(T.numSpotLights),C.push(T.numSpotLightMaps),C.push(T.numHemiLights),C.push(T.numRectAreaLights),C.push(T.numDirLightShadows),C.push(T.numPointLightShadows),C.push(T.numSpotLightShadows),C.push(T.numSpotLightShadowsWithMaps),C.push(T.shadowMapType),C.push(T.toneMapping),C.push(T.numClippingPlanes),C.push(T.numClipIntersection),C.push(T.depthPacking)}(T,C),function v(C,T){a.disableAll(),T.isWebGL2&&a.enable(0),T.supportsVertexTextures&&a.enable(1),T.instancing&&a.enable(2),T.instancingColor&&a.enable(3),T.matcap&&a.enable(4),T.envMap&&a.enable(5),T.normalMapObjectSpace&&a.enable(6),T.normalMapTangentSpace&&a.enable(7),T.clearcoat&&a.enable(8),T.iridescence&&a.enable(9),T.alphaTest&&a.enable(10),T.vertexColors&&a.enable(11),T.vertexAlphas&&a.enable(12),T.vertexUv1s&&a.enable(13),T.vertexUv2s&&a.enable(14),T.vertexUv3s&&a.enable(15),T.vertexTangents&&a.enable(16),T.anisotropy&&a.enable(17),C.push(a.mask),a.disableAll(),T.fog&&a.enable(0),T.useFog&&a.enable(1),T.flatShading&&a.enable(2),T.logarithmicDepthBuffer&&a.enable(3),T.skinning&&a.enable(4),T.morphTargets&&a.enable(5),T.morphNormals&&a.enable(6),T.morphColors&&a.enable(7),T.premultipliedAlpha&&a.enable(8),T.shadowMapEnabled&&a.enable(9),T.useLegacyLights&&a.enable(10),T.doubleSided&&a.enable(11),T.flipSided&&a.enable(12),T.useDepthPacking&&a.enable(13),T.dithering&&a.enable(14),T.transmission&&a.enable(15),T.sheen&&a.enable(16),T.opaque&&a.enable(17),T.pointsUvs&&a.enable(18),C.push(a.mask)}(T,C),T.push(n.outputColorSpace)),T.push(C.customProgramCacheKey),T.join()},getUniforms:function y(C){const T=p[C.type];let j;return j=T?SY.clone(jo[T].uniforms):C.uniforms,j},acquireProgram:function x(C,T){let j;for(let ie=0,V=c.length;ie<V;ie++){const G=c[ie];if(G.cacheKey===T){j=G,++j.usedTimes;break}}return void 0===j&&(j=new QQ(n,T,C,o),c.push(j)),j},releaseProgram:function S(C){if(0==--C.usedTimes){const T=c.indexOf(C);c[T]=c[c.length-1],c.pop(),C.destroy()}},releaseShaderCache:function D(C){l.remove(C)},programs:c,dispose:function I(){l.dispose()}}}function iJ(){let n=new WeakMap;return{get:function e(o){let s=n.get(o);return void 0===s&&(s={},n.set(o,s)),s},remove:function t(o){n.delete(o)},update:function i(o,s,a){n.get(o)[s]=a},dispose:function r(){n=new WeakMap}}}function rJ(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function rF(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function oF(){const n=[];let e=0;const t=[],i=[],r=[];function s(u,h,f,p,_,m){let g=n[e];return void 0===g?(g={id:u.id,object:u,geometry:h,material:f,groupOrder:p,renderOrder:u.renderOrder,z:_,group:m},n[e]=g):(g.id=u.id,g.object=u,g.geometry=h,g.material=f,g.groupOrder=p,g.renderOrder=u.renderOrder,g.z=_,g.group=m),e++,g}return{opaque:t,transmissive:i,transparent:r,init:function o(){e=0,t.length=0,i.length=0,r.length=0},push:function a(u,h,f,p,_,m){const g=s(u,h,f,p,_,m);f.transmission>0?i.push(g):!0===f.transparent?r.push(g):t.push(g)},unshift:function l(u,h,f,p,_,m){const g=s(u,h,f,p,_,m);f.transmission>0?i.unshift(g):!0===f.transparent?r.unshift(g):t.unshift(g)},finish:function d(){for(let u=e,h=n.length;u<h;u++){const f=n[u];if(null===f.id)break;f.id=null,f.object=null,f.geometry=null,f.material=null,f.group=null}},sort:function c(u,h){t.length>1&&t.sort(u||rJ),i.length>1&&i.sort(h||rF),r.length>1&&r.sort(h||rF)}}}function oJ(){let n=new WeakMap;return{get:function e(i,r){const o=n.get(i);let s;return void 0===o?(s=new oF,n.set(i,[s])):r>=o.length?(s=new oF,o.push(s)):s=o[r],s},dispose:function t(){n=new WeakMap}}}function sJ(){const n={};return{get:function(e){if(void 0!==n[e.id])return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new R,color:new Pe};break;case"SpotLight":t={position:new R,direction:new R,color:new Pe,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new R,color:new Pe,distance:0,decay:0};break;case"HemisphereLight":t={direction:new R,skyColor:new Pe,groundColor:new Pe};break;case"RectAreaLight":t={color:new Pe,position:new R,halfWidth:new R,halfHeight:new R}}return n[e.id]=t,t}}}let lJ=0;function cJ(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function dJ(n,e){const t=new sJ,i=function aJ(){const n={};return{get:function(e){if(void 0!==n[e.id])return n[e.id];let t;switch(e.type){case"DirectionalLight":case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ce};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ce,shadowCameraNear:1,shadowCameraFar:1e3}}return n[e.id]=t,t}}}(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let d=0;d<9;d++)r.probe.push(new R);const o=new R,s=new ct,a=new ct;return{setup:function l(d,u){let h=0,f=0,p=0;for(let j=0;j<9;j++)r.probe[j].set(0,0,0);let _=0,m=0,g=0,b=0,v=0,y=0,x=0,S=0,D=0,I=0;d.sort(cJ);const C=!0===u?Math.PI:1;for(let j=0,ie=d.length;j<ie;j++){const V=d[j],G=V.color,$=V.intensity,z=V.distance,H=V.shadow&&V.shadow.map?V.shadow.map.texture:null;if(V.isAmbientLight)h+=G.r*$*C,f+=G.g*$*C,p+=G.b*$*C;else if(V.isLightProbe)for(let W=0;W<9;W++)r.probe[W].addScaledVector(V.sh.coefficients[W],$);else if(V.isDirectionalLight){const W=t.get(V);if(W.color.copy(V.color).multiplyScalar(V.intensity*C),V.castShadow){const K=V.shadow,ae=i.get(V);ae.shadowBias=K.bias,ae.shadowNormalBias=K.normalBias,ae.shadowRadius=K.radius,ae.shadowMapSize=K.mapSize,r.directionalShadow[_]=ae,r.directionalShadowMap[_]=H,r.directionalShadowMatrix[_]=V.shadow.matrix,y++}r.directional[_]=W,_++}else if(V.isSpotLight){const W=t.get(V);W.position.setFromMatrixPosition(V.matrixWorld),W.color.copy(G).multiplyScalar($*C),W.distance=z,W.coneCos=Math.cos(V.angle),W.penumbraCos=Math.cos(V.angle*(1-V.penumbra)),W.decay=V.decay,r.spot[g]=W;const K=V.shadow;if(V.map&&(r.spotLightMap[D]=V.map,D++,K.updateMatrices(V),V.castShadow&&I++),r.spotLightMatrix[g]=K.matrix,V.castShadow){const ae=i.get(V);ae.shadowBias=K.bias,ae.shadowNormalBias=K.normalBias,ae.shadowRadius=K.radius,ae.shadowMapSize=K.mapSize,r.spotShadow[g]=ae,r.spotShadowMap[g]=H,S++}g++}else if(V.isRectAreaLight){const W=t.get(V);W.color.copy(G).multiplyScalar($),W.halfWidth.set(.5*V.width,0,0),W.halfHeight.set(0,.5*V.height,0),r.rectArea[b]=W,b++}else if(V.isPointLight){const W=t.get(V);if(W.color.copy(V.color).multiplyScalar(V.intensity*C),W.distance=V.distance,W.decay=V.decay,V.castShadow){const K=V.shadow,ae=i.get(V);ae.shadowBias=K.bias,ae.shadowNormalBias=K.normalBias,ae.shadowRadius=K.radius,ae.shadowMapSize=K.mapSize,ae.shadowCameraNear=K.camera.near,ae.shadowCameraFar=K.camera.far,r.pointShadow[m]=ae,r.pointShadowMap[m]=H,r.pointShadowMatrix[m]=V.shadow.matrix,x++}r.point[m]=W,m++}else if(V.isHemisphereLight){const W=t.get(V);W.skyColor.copy(V.color).multiplyScalar($*C),W.groundColor.copy(V.groundColor).multiplyScalar($*C),r.hemi[v]=W,v++}}b>0&&(e.isWebGL2||!0===n.has("OES_texture_float_linear")?(r.rectAreaLTC1=Re.LTC_FLOAT_1,r.rectAreaLTC2=Re.LTC_FLOAT_2):!0===n.has("OES_texture_half_float_linear")?(r.rectAreaLTC1=Re.LTC_HALF_1,r.rectAreaLTC2=Re.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),r.ambient[0]=h,r.ambient[1]=f,r.ambient[2]=p;const T=r.hash;(T.directionalLength!==_||T.pointLength!==m||T.spotLength!==g||T.rectAreaLength!==b||T.hemiLength!==v||T.numDirectionalShadows!==y||T.numPointShadows!==x||T.numSpotShadows!==S||T.numSpotMaps!==D)&&(r.directional.length=_,r.spot.length=g,r.rectArea.length=b,r.point.length=m,r.hemi.length=v,r.directionalShadow.length=y,r.directionalShadowMap.length=y,r.pointShadow.length=x,r.pointShadowMap.length=x,r.spotShadow.length=S,r.spotShadowMap.length=S,r.directionalShadowMatrix.length=y,r.pointShadowMatrix.length=x,r.spotLightMatrix.length=S+D-I,r.spotLightMap.length=D,r.numSpotLightShadowsWithMaps=I,T.directionalLength=_,T.pointLength=m,T.spotLength=g,T.rectAreaLength=b,T.hemiLength=v,T.numDirectionalShadows=y,T.numPointShadows=x,T.numSpotShadows=S,T.numSpotMaps=D,r.version=lJ++)},setupView:function c(d,u){let h=0,f=0,p=0,_=0,m=0;const g=u.matrixWorldInverse;for(let b=0,v=d.length;b<v;b++){const y=d[b];if(y.isDirectionalLight){const x=r.directional[h];x.direction.setFromMatrixPosition(y.matrixWorld),o.setFromMatrixPosition(y.target.matrixWorld),x.direction.sub(o),x.direction.transformDirection(g),h++}else if(y.isSpotLight){const x=r.spot[p];x.position.setFromMatrixPosition(y.matrixWorld),x.position.applyMatrix4(g),x.direction.setFromMatrixPosition(y.matrixWorld),o.setFromMatrixPosition(y.target.matrixWorld),x.direction.sub(o),x.direction.transformDirection(g),p++}else if(y.isRectAreaLight){const x=r.rectArea[_];x.position.setFromMatrixPosition(y.matrixWorld),x.position.applyMatrix4(g),a.identity(),s.copy(y.matrixWorld),s.premultiply(g),a.extractRotation(s),x.halfWidth.set(.5*y.width,0,0),x.halfHeight.set(0,.5*y.height,0),x.halfWidth.applyMatrix4(a),x.halfHeight.applyMatrix4(a),_++}else if(y.isPointLight){const x=r.point[f];x.position.setFromMatrixPosition(y.matrixWorld),x.position.applyMatrix4(g),f++}else if(y.isHemisphereLight){const x=r.hemi[m];x.direction.setFromMatrixPosition(y.matrixWorld),x.direction.transformDirection(g),m++}}},state:r}}function sF(n,e){const t=new dJ(n,e),i=[],r=[];return{init:function o(){i.length=0,r.length=0},state:{lightsArray:i,shadowsArray:r,lights:t},setupLights:function l(u){t.setup(i,u)},setupLightsView:function c(u){t.setupView(i,u)},pushLight:function s(u){i.push(u)},pushShadow:function a(u){r.push(u)}}}function uJ(n,e){let t=new WeakMap;return{get:function i(o,s=0){const a=t.get(o);let l;return void 0===a?(l=new sF(n,e),t.set(o,[l])):s>=a.length?(l=new sF(n,e),a.push(l)):l=a[s],l},dispose:function r(){t=new WeakMap}}}class aF extends po{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=3200,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class lF extends po{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}function pJ(n,e,t){let i=new Vx;const r=new ce,o=new ce,s=new Jt,a=new aF({depthPacking:3201}),l=new lF,c={},d=t.maxTextureSize,u={0:1,1:0,2:2},h=new ma({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new ce},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),f=h.clone();f.defines.HORIZONTAL_PASS=1;const p=new It;p.setAttribute("position",new Mn(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const _=new Ii(p,h),m=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=CO;let g=this.type;function b(x,S){const D=e.update(_);h.defines.VSM_SAMPLES!==x.blurSamples&&(h.defines.VSM_SAMPLES=x.blurSamples,f.defines.VSM_SAMPLES=x.blurSamples,h.needsUpdate=!0,f.needsUpdate=!0),null===x.mapPass&&(x.mapPass=new dl(r.x,r.y)),h.uniforms.shadow_pass.value=x.map.texture,h.uniforms.resolution.value=x.mapSize,h.uniforms.radius.value=x.radius,n.setRenderTarget(x.mapPass),n.clear(),n.renderBufferDirect(S,null,D,h,_,null),f.uniforms.shadow_pass.value=x.mapPass.texture,f.uniforms.resolution.value=x.mapSize,f.uniforms.radius.value=x.radius,n.setRenderTarget(x.map),n.clear(),n.renderBufferDirect(S,null,D,f,_,null)}function v(x,S,D,I){let C=null;const T=!0===D.isPointLight?x.customDistanceMaterial:x.customDepthMaterial;if(void 0!==T)C=T;else if(C=!0===D.isPointLight?l:a,n.localClippingEnabled&&!0===S.clipShadows&&Array.isArray(S.clippingPlanes)&&0!==S.clippingPlanes.length||S.displacementMap&&0!==S.displacementScale||S.alphaMap&&S.alphaTest>0||S.map&&S.alphaTest>0){const j=C.uuid,ie=S.uuid;let V=c[j];void 0===V&&(V={},c[j]=V);let G=V[ie];void 0===G&&(G=C.clone(),V[ie]=G),C=G}return C.visible=S.visible,C.wireframe=S.wireframe,C.side=I===gs?null!==S.shadowSide?S.shadowSide:S.side:null!==S.shadowSide?S.shadowSide:u[S.side],C.alphaMap=S.alphaMap,C.alphaTest=S.alphaTest,C.map=S.map,C.clipShadows=S.clipShadows,C.clippingPlanes=S.clippingPlanes,C.clipIntersection=S.clipIntersection,C.displacementMap=S.displacementMap,C.displacementScale=S.displacementScale,C.displacementBias=S.displacementBias,C.wireframeLinewidth=S.wireframeLinewidth,C.linewidth=S.linewidth,!0===D.isPointLight&&!0===C.isMeshDistanceMaterial&&(n.properties.get(C).light=D),C}function y(x,S,D,I,C){if(!1===x.visible)return;if(x.layers.test(S.layers)&&(x.isMesh||x.isLine||x.isPoints)&&(x.castShadow||x.receiveShadow&&C===gs)&&(!x.frustumCulled||i.intersectsObject(x))){x.modelViewMatrix.multiplyMatrices(D.matrixWorldInverse,x.matrixWorld);const ie=e.update(x),V=x.material;if(Array.isArray(V)){const G=ie.groups;for(let $=0,z=G.length;$<z;$++){const H=G[$],W=V[H.materialIndex];if(W&&W.visible){const K=v(x,W,I,C);n.renderBufferDirect(D,null,ie,K,x,H)}}}else if(V.visible){const G=v(x,V,I,C);n.renderBufferDirect(D,null,ie,G,x,null)}}const j=x.children;for(let ie=0,V=j.length;ie<V;ie++)y(j[ie],S,D,I,C)}this.render=function(x,S,D){if(!1===m.enabled||!1===m.autoUpdate&&!1===m.needsUpdate||0===x.length)return;const I=n.getRenderTarget(),C=n.getActiveCubeFace(),T=n.getActiveMipmapLevel(),j=n.state;j.setBlending(0),j.buffers.color.setClear(1,1,1,1),j.buffers.depth.setTest(!0),j.setScissorTest(!1);const ie=g!==gs&&this.type===gs,V=g===gs&&this.type!==gs;for(let G=0,$=x.length;G<$;G++){const z=x[G],H=z.shadow;if(void 0===H){console.warn("THREE.WebGLShadowMap:",z,"has no shadow.");continue}if(!1===H.autoUpdate&&!1===H.needsUpdate)continue;r.copy(H.mapSize);const W=H.getFrameExtents();if(r.multiply(W),o.copy(H.mapSize),(r.x>d||r.y>d)&&(r.x>d&&(o.x=Math.floor(d/W.x),r.x=o.x*W.x,H.mapSize.x=o.x),r.y>d&&(o.y=Math.floor(d/W.y),r.y=o.y*W.y,H.mapSize.y=o.y)),null===H.map||!0===ie||!0===V){const ae=this.type!==gs?{minFilter:Rn,magFilter:Rn}:{};null!==H.map&&H.map.dispose(),H.map=new dl(r.x,r.y,ae),H.map.texture.name=z.name+".shadowMap",H.camera.updateProjectionMatrix()}n.setRenderTarget(H.map),n.clear();const K=H.getViewportCount();for(let ae=0;ae<K;ae++){const Ce=H.getViewport(ae);s.set(o.x*Ce.x,o.y*Ce.y,o.x*Ce.z,o.y*Ce.w),j.viewport(s),H.updateMatrices(z,ae),i=H.getFrustum(),y(S,D,H.camera,z,this.type)}!0!==H.isPointLightShadow&&this.type===gs&&b(H,D),H.needsUpdate=!1}g=this.type,m.needsUpdate=!1,n.setRenderTarget(I,C,T)}}function mJ(n,e,t){const i=t.isWebGL2,a=new function r(){let U=!1;const ke=new Jt;let te=null;const Ae=new Jt(0,0,0,0);return{setMask:function(Ne){te!==Ne&&!U&&(n.colorMask(Ne,Ne,Ne,Ne),te=Ne)},setLocked:function(Ne){U=Ne},setClear:function(Ne,Wt,En,Gn,Bl){!0===Bl&&(Ne*=Gn,Wt*=Gn,En*=Gn),ke.set(Ne,Wt,En,Gn),!1===Ae.equals(ke)&&(n.clearColor(Ne,Wt,En,Gn),Ae.copy(ke))},reset:function(){U=!1,te=null,Ae.set(-1,0,0,0)}}},l=new function o(){let U=!1,ke=null,te=null,Ae=null;return{setTest:function(Ne){Ne?Se(n.DEPTH_TEST):$e(n.DEPTH_TEST)},setMask:function(Ne){ke!==Ne&&!U&&(n.depthMask(Ne),ke=Ne)},setFunc:function(Ne){if(te!==Ne){switch(Ne){case 0:n.depthFunc(n.NEVER);break;case 1:n.depthFunc(n.ALWAYS);break;case 2:n.depthFunc(n.LESS);break;case 3:default:n.depthFunc(n.LEQUAL);break;case 4:n.depthFunc(n.EQUAL);break;case 5:n.depthFunc(n.GEQUAL);break;case 6:n.depthFunc(n.GREATER);break;case 7:n.depthFunc(n.NOTEQUAL)}te=Ne}},setLocked:function(Ne){U=Ne},setClear:function(Ne){Ae!==Ne&&(n.clearDepth(Ne),Ae=Ne)},reset:function(){U=!1,ke=null,te=null,Ae=null}}},c=new function s(){let U=!1,ke=null,te=null,Ae=null,Ne=null,Wt=null,En=null,Gn=null,Bl=null;return{setTest:function(Tn){U||(Tn?Se(n.STENCIL_TEST):$e(n.STENCIL_TEST))},setMask:function(Tn){ke!==Tn&&!U&&(n.stencilMask(Tn),ke=Tn)},setFunc:function(Tn,Yo,Gi){(te!==Tn||Ae!==Yo||Ne!==Gi)&&(n.stencilFunc(Tn,Yo,Gi),te=Tn,Ae=Yo,Ne=Gi)},setOp:function(Tn,Yo,Gi){(Wt!==Tn||En!==Yo||Gn!==Gi)&&(n.stencilOp(Tn,Yo,Gi),Wt=Tn,En=Yo,Gn=Gi)},setLocked:function(Tn){U=Tn},setClear:function(Tn){Bl!==Tn&&(n.clearStencil(Tn),Bl=Tn)},reset:function(){U=!1,ke=null,te=null,Ae=null,Ne=null,Wt=null,En=null,Gn=null,Bl=null}}},d=new WeakMap,u=new WeakMap;let h={},f={},p=new WeakMap,_=[],m=null,g=!1,b=null,v=null,y=null,x=null,S=null,D=null,I=null,C=!1,T=null,j=null,ie=null,V=null,G=null;const $=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let z=!1,H=0;const W=n.getParameter(n.VERSION);-1!==W.indexOf("WebGL")?(H=parseFloat(/^WebGL (\d)/.exec(W)[1]),z=H>=1):-1!==W.indexOf("OpenGL ES")&&(H=parseFloat(/^OpenGL ES (\d)/.exec(W)[1]),z=H>=2);let K=null,ae={};const Ce=n.getParameter(n.SCISSOR_BOX),X=n.getParameter(n.VIEWPORT),ue=(new Jt).fromArray(Ce),re=(new Jt).fromArray(X);function De(U,ke,te,Ae){const Ne=new Uint8Array(4),Wt=n.createTexture();n.bindTexture(U,Wt),n.texParameteri(U,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(U,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let En=0;En<te;En++)!i||U!==n.TEXTURE_3D&&U!==n.TEXTURE_2D_ARRAY?n.texImage2D(ke+En,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,Ne):n.texImage3D(ke,0,n.RGBA,1,1,Ae,0,n.RGBA,n.UNSIGNED_BYTE,Ne);return Wt}const Ee={};function Se(U){!0!==h[U]&&(n.enable(U),h[U]=!0)}function $e(U){!1!==h[U]&&(n.disable(U),h[U]=!1)}Ee[n.TEXTURE_2D]=De(n.TEXTURE_2D,n.TEXTURE_2D,1),Ee[n.TEXTURE_CUBE_MAP]=De(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),i&&(Ee[n.TEXTURE_2D_ARRAY]=De(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),Ee[n.TEXTURE_3D]=De(n.TEXTURE_3D,n.TEXTURE_3D,1,1)),a.setClear(0,0,0,1),l.setClear(1),c.setClear(0),Se(n.DEPTH_TEST),l.setFunc(3),pe(!1),qe(1),Se(n.CULL_FACE),de(0);const N={100:n.FUNC_ADD,101:n.FUNC_SUBTRACT,102:n.FUNC_REVERSE_SUBTRACT};if(i)N[103]=n.MIN,N[104]=n.MAX;else{const U=e.get("EXT_blend_minmax");null!==U&&(N[103]=U.MIN_EXT,N[104]=U.MAX_EXT)}const we={200:n.ZERO,201:n.ONE,202:n.SRC_COLOR,204:n.SRC_ALPHA,210:n.SRC_ALPHA_SATURATE,208:n.DST_COLOR,206:n.DST_ALPHA,203:n.ONE_MINUS_SRC_COLOR,205:n.ONE_MINUS_SRC_ALPHA,209:n.ONE_MINUS_DST_COLOR,207:n.ONE_MINUS_DST_ALPHA};function de(U,ke,te,Ae,Ne,Wt,En,Gn){if(0!==U){if(!1===g&&(Se(n.BLEND),g=!0),5===U)Ne=Ne||ke,Wt=Wt||te,En=En||Ae,(ke!==v||Ne!==S)&&(n.blendEquationSeparate(N[ke],N[Ne]),v=ke,S=Ne),(te!==y||Ae!==x||Wt!==D||En!==I)&&(n.blendFuncSeparate(we[te],we[Ae],we[Wt],we[En]),y=te,x=Ae,D=Wt,I=En),b=U,C=!1;else if(U!==b||Gn!==C){if((100!==v||100!==S)&&(n.blendEquation(n.FUNC_ADD),v=100,S=100),Gn)switch(U){case 1:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case 2:n.blendFunc(n.ONE,n.ONE);break;case 3:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case 4:n.blendFuncSeparate(n.ZERO,n.SRC_COLOR,n.ZERO,n.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",U)}else switch(U){case 1:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case 2:n.blendFunc(n.SRC_ALPHA,n.ONE);break;case 3:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case 4:n.blendFunc(n.ZERO,n.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",U)}y=null,x=null,D=null,I=null,b=U,C=Gn}}else!0===g&&($e(n.BLEND),g=!1)}function pe(U){T!==U&&(n.frontFace(U?n.CW:n.CCW),T=U)}function qe(U){0!==U?(Se(n.CULL_FACE),U!==j&&n.cullFace(1===U?n.BACK:2===U?n.FRONT:n.FRONT_AND_BACK)):$e(n.CULL_FACE),j=U}function Ue(U,ke,te){U?(Se(n.POLYGON_OFFSET_FILL),(V!==ke||G!==te)&&(n.polygonOffset(ke,te),V=ke,G=te)):$e(n.POLYGON_OFFSET_FILL)}return{buffers:{color:a,depth:l,stencil:c},enable:Se,disable:$e,bindFramebuffer:function Ve(U,ke){return f[U]!==ke&&(n.bindFramebuffer(U,ke),f[U]=ke,i&&(U===n.DRAW_FRAMEBUFFER&&(f[n.FRAMEBUFFER]=ke),U===n.FRAMEBUFFER&&(f[n.DRAW_FRAMEBUFFER]=ke)),!0)},drawBuffers:function mt(U,ke){let te=_,Ae=!1;if(U)if(te=p.get(ke),void 0===te&&(te=[],p.set(ke,te)),U.isWebGLMultipleRenderTargets){const Ne=U.texture;if(te.length!==Ne.length||te[0]!==n.COLOR_ATTACHMENT0){for(let Wt=0,En=Ne.length;Wt<En;Wt++)te[Wt]=n.COLOR_ATTACHMENT0+Wt;te.length=Ne.length,Ae=!0}}else te[0]!==n.COLOR_ATTACHMENT0&&(te[0]=n.COLOR_ATTACHMENT0,Ae=!0);else te[0]!==n.BACK&&(te[0]=n.BACK,Ae=!0);Ae&&(t.isWebGL2?n.drawBuffers(te):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(te))},useProgram:function Ze(U){return m!==U&&(n.useProgram(U),m=U,!0)},setBlending:de,setMaterial:function Me(U,ke){2===U.side?$e(n.CULL_FACE):Se(n.CULL_FACE);let te=1===U.side;ke&&(te=!te),pe(te),1===U.blending&&!1===U.transparent?de(0):de(U.blending,U.blendEquation,U.blendSrc,U.blendDst,U.blendEquationAlpha,U.blendSrcAlpha,U.blendDstAlpha,U.premultipliedAlpha),l.setFunc(U.depthFunc),l.setTest(U.depthTest),l.setMask(U.depthWrite),a.setMask(U.colorWrite);const Ae=U.stencilWrite;c.setTest(Ae),Ae&&(c.setMask(U.stencilWriteMask),c.setFunc(U.stencilFunc,U.stencilRef,U.stencilFuncMask),c.setOp(U.stencilFail,U.stencilZFail,U.stencilZPass)),Ue(U.polygonOffset,U.polygonOffsetFactor,U.polygonOffsetUnits),!0===U.alphaToCoverage?Se(n.SAMPLE_ALPHA_TO_COVERAGE):$e(n.SAMPLE_ALPHA_TO_COVERAGE)},setFlipSided:pe,setCullFace:qe,setLineWidth:function Be(U){U!==ie&&(z&&n.lineWidth(U),ie=U)},setPolygonOffset:Ue,setScissorTest:function ot(U){U?Se(n.SCISSOR_TEST):$e(n.SCISSOR_TEST)},activeTexture:function Ot(U){void 0===U&&(U=n.TEXTURE0+$-1),K!==U&&(n.activeTexture(U),K=U)},bindTexture:function pn(U,ke,te){void 0===te&&(te=null===K?n.TEXTURE0+$-1:K);let Ae=ae[te];void 0===Ae&&(Ae={type:void 0,texture:void 0},ae[te]=Ae),(Ae.type!==U||Ae.texture!==ke)&&(K!==te&&(n.activeTexture(te),K=te),n.bindTexture(U,ke||Ee[U]),Ae.type=U,Ae.texture=ke)},unbindTexture:function k(){const U=ae[K];void 0!==U&&void 0!==U.type&&(n.bindTexture(U.type,null),U.type=void 0,U.texture=void 0)},compressedTexImage2D:function E(){try{n.compressedTexImage2D.apply(n,arguments)}catch(U){console.error("THREE.WebGLState:",U)}},compressedTexImage3D:function oe(){try{n.compressedTexImage3D.apply(n,arguments)}catch(U){console.error("THREE.WebGLState:",U)}},texImage2D:function Ge(){try{n.texImage2D.apply(n,arguments)}catch(U){console.error("THREE.WebGLState:",U)}},texImage3D:function Ke(){try{n.texImage3D.apply(n,arguments)}catch(U){console.error("THREE.WebGLState:",U)}},updateUBOMapping:function He(U,ke){let te=u.get(ke);void 0===te&&(te=new WeakMap,u.set(ke,te));let Ae=te.get(U);void 0===Ae&&(Ae=n.getUniformBlockIndex(ke,U.name),te.set(U,Ae))},uniformBlockBinding:function st(U,ke){const Ae=u.get(ke).get(U);d.get(ke)!==Ae&&(n.uniformBlockBinding(ke,Ae,U.__bindingPointIndex),d.set(ke,Ae))},texStorage2D:function ge(){try{n.texStorage2D.apply(n,arguments)}catch(U){console.error("THREE.WebGLState:",U)}},texStorage3D:function ee(){try{n.texStorage3D.apply(n,arguments)}catch(U){console.error("THREE.WebGLState:",U)}},texSubImage2D:function be(){try{n.texSubImage2D.apply(n,arguments)}catch(U){console.error("THREE.WebGLState:",U)}},texSubImage3D:function ve(){try{n.texSubImage3D.apply(n,arguments)}catch(U){console.error("THREE.WebGLState:",U)}},compressedTexSubImage2D:function F(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(U){console.error("THREE.WebGLState:",U)}},compressedTexSubImage3D:function me(){try{n.compressedTexSubImage3D.apply(n,arguments)}catch(U){console.error("THREE.WebGLState:",U)}},scissor:function Xe(U){!1===ue.equals(U)&&(n.scissor(U.x,U.y,U.z,U.w),ue.copy(U))},viewport:function je(U){!1===re.equals(U)&&(n.viewport(U.x,U.y,U.z,U.w),re.copy(U))},reset:function Nt(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),!0===i&&(n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null)),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),h={},K=null,ae={},f={},p=new WeakMap,_=[],m=null,g=!1,b=null,v=null,y=null,x=null,S=null,D=null,I=null,C=!1,T=null,j=null,ie=null,V=null,G=null,ue.set(0,0,n.canvas.width,n.canvas.height),re.set(0,0,n.canvas.width,n.canvas.height),a.reset(),l.reset(),c.reset()}}}function gJ(n,e,t,i,r,o,s){const a=r.isWebGL2,l=r.maxTextures,c=r.maxCubemapSize,d=r.maxTextureSize,u=r.maxSamples,h=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,f=!(typeof navigator>"u")&&/OculusBrowser/g.test(navigator.userAgent),p=new WeakMap;let _;const m=new WeakMap;let g=!1;try{g=typeof OffscreenCanvas<"u"&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch{}function b(k,E){return g?new OffscreenCanvas(k,E):Sh("canvas")}function v(k,E,oe,be){let ve=1;if((k.width>be||k.height>be)&&(ve=be/Math.max(k.width,k.height)),ve<1||!0===E){if(typeof HTMLImageElement<"u"&&k instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&k instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&k instanceof ImageBitmap){const F=E?Zm:Math.floor,me=F(ve*k.width),ge=F(ve*k.height);void 0===_&&(_=b(me,ge));const ee=oe?b(me,ge):_;return ee.width=me,ee.height=ge,ee.getContext("2d").drawImage(k,0,0,me,ge),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+k.width+"x"+k.height+") to ("+me+"x"+ge+")."),ee}return"data"in k&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+k.width+"x"+k.height+")."),k}return k}function y(k){return bx(k.width)&&bx(k.height)}function S(k,E){return k.generateMipmaps&&E&&k.minFilter!==Rn&&k.minFilter!==xn}function D(k){n.generateMipmap(k)}function I(k,E,oe,be,ve=!1){if(!1===a)return E;if(null!==k){if(void 0!==n[k])return n[k];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+k+"'")}let F=E;return E===n.RED&&(oe===n.FLOAT&&(F=n.R32F),oe===n.HALF_FLOAT&&(F=n.R16F),oe===n.UNSIGNED_BYTE&&(F=n.R8)),E===n.RG&&(oe===n.FLOAT&&(F=n.RG32F),oe===n.HALF_FLOAT&&(F=n.RG16F),oe===n.UNSIGNED_BYTE&&(F=n.RG8)),E===n.RGBA&&(oe===n.FLOAT&&(F=n.RGBA32F),oe===n.HALF_FLOAT&&(F=n.RGBA16F),oe===n.UNSIGNED_BYTE&&(F=be===lt&&!1===ve?n.SRGB8_ALPHA8:n.RGBA8),oe===n.UNSIGNED_SHORT_4_4_4_4&&(F=n.RGBA4),oe===n.UNSIGNED_SHORT_5_5_5_1&&(F=n.RGB5_A1)),(F===n.R16F||F===n.R32F||F===n.RG16F||F===n.RG32F||F===n.RGBA16F||F===n.RGBA32F)&&e.get("EXT_color_buffer_float"),F}function C(k,E,oe){return!0===S(k,oe)||k.isFramebufferTexture&&k.minFilter!==Rn&&k.minFilter!==xn?Math.log2(Math.max(E.width,E.height))+1:void 0!==k.mipmaps&&k.mipmaps.length>0?k.mipmaps.length:k.isCompressedTexture&&Array.isArray(k.image)?E.mipmaps.length:1}function T(k){return k===Rn||1004===k||1005===k?n.NEAREST:n.LINEAR}function j(k){const E=k.target;E.removeEventListener("dispose",j),function V(k){const E=i.get(k);if(void 0===E.__webglInit)return;const oe=k.source,be=m.get(oe);if(be){const ve=be[E.__cacheKey];ve.usedTimes--,0===ve.usedTimes&&G(k),0===Object.keys(be).length&&m.delete(oe)}i.remove(k)}(E),E.isVideoTexture&&p.delete(E)}function ie(k){const E=k.target;E.removeEventListener("dispose",ie),function $(k){const E=k.texture,oe=i.get(k),be=i.get(E);if(void 0!==be.__webglTexture&&(n.deleteTexture(be.__webglTexture),s.memory.textures--),k.depthTexture&&k.depthTexture.dispose(),k.isWebGLCubeRenderTarget)for(let ve=0;ve<6;ve++)n.deleteFramebuffer(oe.__webglFramebuffer[ve]),oe.__webglDepthbuffer&&n.deleteRenderbuffer(oe.__webglDepthbuffer[ve]);else{if(n.deleteFramebuffer(oe.__webglFramebuffer),oe.__webglDepthbuffer&&n.deleteRenderbuffer(oe.__webglDepthbuffer),oe.__webglMultisampledFramebuffer&&n.deleteFramebuffer(oe.__webglMultisampledFramebuffer),oe.__webglColorRenderbuffer)for(let ve=0;ve<oe.__webglColorRenderbuffer.length;ve++)oe.__webglColorRenderbuffer[ve]&&n.deleteRenderbuffer(oe.__webglColorRenderbuffer[ve]);oe.__webglDepthRenderbuffer&&n.deleteRenderbuffer(oe.__webglDepthRenderbuffer)}if(k.isWebGLMultipleRenderTargets)for(let ve=0,F=E.length;ve<F;ve++){const me=i.get(E[ve]);me.__webglTexture&&(n.deleteTexture(me.__webglTexture),s.memory.textures--),i.remove(E[ve])}i.remove(E),i.remove(k)}(E)}function G(k){const E=i.get(k);n.deleteTexture(E.__webglTexture),delete m.get(k.source)[E.__cacheKey],s.memory.textures--}let z=0;function ae(k,E){const oe=i.get(k);if(k.isVideoTexture&&function Ot(k){const E=s.render.frame;p.get(k)!==E&&(p.set(k,E),k.update())}(k),!1===k.isRenderTargetTexture&&k.version>0&&oe.__version!==k.version){const be=k.image;if(null===be)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==be.complete)return void Ve(oe,k,E);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}t.bindTexture(n.TEXTURE_2D,oe.__webglTexture,n.TEXTURE0+E)}const re={[il]:n.REPEAT,[Ti]:n.CLAMP_TO_EDGE,1002:n.MIRRORED_REPEAT},De={[Rn]:n.NEAREST,1004:n.NEAREST_MIPMAP_NEAREST,1005:n.NEAREST_MIPMAP_LINEAR,[xn]:n.LINEAR,1007:n.LINEAR_MIPMAP_NEAREST,[bs]:n.LINEAR_MIPMAP_LINEAR},Ee={512:n.NEVER,519:n.ALWAYS,513:n.LESS,515:n.LEQUAL,514:n.EQUAL,518:n.GEQUAL,516:n.GREATER,517:n.NOTEQUAL};function Se(k,E,oe){if(oe?(n.texParameteri(k,n.TEXTURE_WRAP_S,re[E.wrapS]),n.texParameteri(k,n.TEXTURE_WRAP_T,re[E.wrapT]),(k===n.TEXTURE_3D||k===n.TEXTURE_2D_ARRAY)&&n.texParameteri(k,n.TEXTURE_WRAP_R,re[E.wrapR]),n.texParameteri(k,n.TEXTURE_MAG_FILTER,De[E.magFilter]),n.texParameteri(k,n.TEXTURE_MIN_FILTER,De[E.minFilter])):(n.texParameteri(k,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(k,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),(k===n.TEXTURE_3D||k===n.TEXTURE_2D_ARRAY)&&n.texParameteri(k,n.TEXTURE_WRAP_R,n.CLAMP_TO_EDGE),(E.wrapS!==Ti||E.wrapT!==Ti)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),n.texParameteri(k,n.TEXTURE_MAG_FILTER,T(E.magFilter)),n.texParameteri(k,n.TEXTURE_MIN_FILTER,T(E.minFilter)),E.minFilter!==Rn&&E.minFilter!==xn&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),E.compareFunction&&(n.texParameteri(k,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(k,n.TEXTURE_COMPARE_FUNC,Ee[E.compareFunction])),!0===e.has("EXT_texture_filter_anisotropic")){const be=e.get("EXT_texture_filter_anisotropic");if(E.magFilter===Rn||1005!==E.minFilter&&E.minFilter!==bs||E.type===ys&&!1===e.has("OES_texture_float_linear")||!1===a&&E.type===Ch&&!1===e.has("OES_texture_half_float_linear"))return;(E.anisotropy>1||i.get(E).__currentAnisotropy)&&(n.texParameterf(k,be.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(E.anisotropy,r.getMaxAnisotropy())),i.get(E).__currentAnisotropy=E.anisotropy)}}function $e(k,E){let oe=!1;void 0===k.__webglInit&&(k.__webglInit=!0,E.addEventListener("dispose",j));const be=E.source;let ve=m.get(be);void 0===ve&&(ve={},m.set(be,ve));const F=function K(k){const E=[];return E.push(k.wrapS),E.push(k.wrapT),E.push(k.wrapR||0),E.push(k.magFilter),E.push(k.minFilter),E.push(k.anisotropy),E.push(k.internalFormat),E.push(k.format),E.push(k.type),E.push(k.generateMipmaps),E.push(k.premultiplyAlpha),E.push(k.flipY),E.push(k.unpackAlignment),E.push(k.colorSpace),E.join()}(E);if(F!==k.__cacheKey){void 0===ve[F]&&(ve[F]={texture:n.createTexture(),usedTimes:0},s.memory.textures++,oe=!0),ve[F].usedTimes++;const me=ve[k.__cacheKey];void 0!==me&&(ve[k.__cacheKey].usedTimes--,0===me.usedTimes&&G(E)),k.__cacheKey=F,k.__webglTexture=ve[F].texture}return oe}function Ve(k,E,oe){let be=n.TEXTURE_2D;(E.isDataArrayTexture||E.isCompressedArrayTexture)&&(be=n.TEXTURE_2D_ARRAY),E.isData3DTexture&&(be=n.TEXTURE_3D);const ve=$e(k,E),F=E.source;t.bindTexture(be,k.__webglTexture,n.TEXTURE0+oe);const me=i.get(F);if(F.version!==me.__version||!0===ve){t.activeTexture(n.TEXTURE0+oe),n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,E.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,E.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,E.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,n.NONE);const ge=function x(k){return!a&&(k.wrapS!==Ti||k.wrapT!==Ti||k.minFilter!==Rn&&k.minFilter!==xn)}(E)&&!1===y(E.image);let ee=v(E.image,ge,!1,d);ee=pn(E,ee);const Ge=y(ee)||a,Ke=o.convert(E.format,E.colorSpace);let He,Xe=o.convert(E.type),je=I(E.internalFormat,Ke,Xe,E.colorSpace);Se(be,E,Ge);const st=E.mipmaps,Nt=a&&!0!==E.isVideoTexture,U=void 0===me.__version||!0===ve,ke=C(E,ee,Ge);if(E.isDepthTexture)je=n.DEPTH_COMPONENT,a?je=E.type===ys?n.DEPTH_COMPONENT32F:E.type===ca?n.DEPTH_COMPONENT24:E.type===rl?n.DEPTH24_STENCIL8:n.DEPTH_COMPONENT16:E.type===ys&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),E.format===ol&&je===n.DEPTH_COMPONENT&&1012!==E.type&&E.type!==ca&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),E.type=ca,Xe=o.convert(E.type)),E.format===Jc&&je===n.DEPTH_COMPONENT&&(je=n.DEPTH_STENCIL,E.type!==rl&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),E.type=rl,Xe=o.convert(E.type))),U&&(Nt?t.texStorage2D(n.TEXTURE_2D,1,je,ee.width,ee.height):t.texImage2D(n.TEXTURE_2D,0,je,ee.width,ee.height,0,Ke,Xe,null));else if(E.isDataTexture)if(st.length>0&&Ge){Nt&&U&&t.texStorage2D(n.TEXTURE_2D,ke,je,st[0].width,st[0].height);for(let te=0,Ae=st.length;te<Ae;te++)He=st[te],Nt?t.texSubImage2D(n.TEXTURE_2D,te,0,0,He.width,He.height,Ke,Xe,He.data):t.texImage2D(n.TEXTURE_2D,te,je,He.width,He.height,0,Ke,Xe,He.data);E.generateMipmaps=!1}else Nt?(U&&t.texStorage2D(n.TEXTURE_2D,ke,je,ee.width,ee.height),t.texSubImage2D(n.TEXTURE_2D,0,0,0,ee.width,ee.height,Ke,Xe,ee.data)):t.texImage2D(n.TEXTURE_2D,0,je,ee.width,ee.height,0,Ke,Xe,ee.data);else if(E.isCompressedTexture)if(E.isCompressedArrayTexture){Nt&&U&&t.texStorage3D(n.TEXTURE_2D_ARRAY,ke,je,st[0].width,st[0].height,ee.depth);for(let te=0,Ae=st.length;te<Ae;te++)He=st[te],E.format!==Lr?null!==Ke?Nt?t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,te,0,0,0,He.width,He.height,ee.depth,Ke,He.data,0,0):t.compressedTexImage3D(n.TEXTURE_2D_ARRAY,te,je,He.width,He.height,ee.depth,0,He.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Nt?t.texSubImage3D(n.TEXTURE_2D_ARRAY,te,0,0,0,He.width,He.height,ee.depth,Ke,Xe,He.data):t.texImage3D(n.TEXTURE_2D_ARRAY,te,je,He.width,He.height,ee.depth,0,Ke,Xe,He.data)}else{Nt&&U&&t.texStorage2D(n.TEXTURE_2D,ke,je,st[0].width,st[0].height);for(let te=0,Ae=st.length;te<Ae;te++)He=st[te],E.format!==Lr?null!==Ke?Nt?t.compressedTexSubImage2D(n.TEXTURE_2D,te,0,0,He.width,He.height,Ke,He.data):t.compressedTexImage2D(n.TEXTURE_2D,te,je,He.width,He.height,0,He.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Nt?t.texSubImage2D(n.TEXTURE_2D,te,0,0,He.width,He.height,Ke,Xe,He.data):t.texImage2D(n.TEXTURE_2D,te,je,He.width,He.height,0,Ke,Xe,He.data)}else if(E.isDataArrayTexture)Nt?(U&&t.texStorage3D(n.TEXTURE_2D_ARRAY,ke,je,ee.width,ee.height,ee.depth),t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,ee.width,ee.height,ee.depth,Ke,Xe,ee.data)):t.texImage3D(n.TEXTURE_2D_ARRAY,0,je,ee.width,ee.height,ee.depth,0,Ke,Xe,ee.data);else if(E.isData3DTexture)Nt?(U&&t.texStorage3D(n.TEXTURE_3D,ke,je,ee.width,ee.height,ee.depth),t.texSubImage3D(n.TEXTURE_3D,0,0,0,0,ee.width,ee.height,ee.depth,Ke,Xe,ee.data)):t.texImage3D(n.TEXTURE_3D,0,je,ee.width,ee.height,ee.depth,0,Ke,Xe,ee.data);else if(E.isFramebufferTexture){if(U)if(Nt)t.texStorage2D(n.TEXTURE_2D,ke,je,ee.width,ee.height);else{let te=ee.width,Ae=ee.height;for(let Ne=0;Ne<ke;Ne++)t.texImage2D(n.TEXTURE_2D,Ne,je,te,Ae,0,Ke,Xe,null),te>>=1,Ae>>=1}}else if(st.length>0&&Ge){Nt&&U&&t.texStorage2D(n.TEXTURE_2D,ke,je,st[0].width,st[0].height);for(let te=0,Ae=st.length;te<Ae;te++)He=st[te],Nt?t.texSubImage2D(n.TEXTURE_2D,te,0,0,Ke,Xe,He):t.texImage2D(n.TEXTURE_2D,te,je,Ke,Xe,He);E.generateMipmaps=!1}else Nt?(U&&t.texStorage2D(n.TEXTURE_2D,ke,je,ee.width,ee.height),t.texSubImage2D(n.TEXTURE_2D,0,0,0,Ke,Xe,ee)):t.texImage2D(n.TEXTURE_2D,0,je,Ke,Xe,ee);S(E,Ge)&&D(be),me.__version=F.version,E.onUpdate&&E.onUpdate(E)}k.__version=E.version}function Ze(k,E,oe,be,ve){const F=o.convert(oe.format,oe.colorSpace),me=o.convert(oe.type),ge=I(oe.internalFormat,F,me,oe.colorSpace);i.get(E).__hasExternalTextures||(ve===n.TEXTURE_3D||ve===n.TEXTURE_2D_ARRAY?t.texImage3D(ve,0,ge,E.width,E.height,E.depth,0,F,me,null):t.texImage2D(ve,0,ge,E.width,E.height,0,F,me,null)),t.bindFramebuffer(n.FRAMEBUFFER,k),ot(E)?h.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,be,ve,i.get(oe).__webglTexture,0,Ue(E)):(ve===n.TEXTURE_2D||ve>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&ve<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,be,ve,i.get(oe).__webglTexture,0),t.bindFramebuffer(n.FRAMEBUFFER,null)}function N(k,E,oe){if(n.bindRenderbuffer(n.RENDERBUFFER,k),E.depthBuffer&&!E.stencilBuffer){let be=n.DEPTH_COMPONENT16;if(oe||ot(E)){const ve=E.depthTexture;ve&&ve.isDepthTexture&&(ve.type===ys?be=n.DEPTH_COMPONENT32F:ve.type===ca&&(be=n.DEPTH_COMPONENT24));const F=Ue(E);ot(E)?h.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,F,be,E.width,E.height):n.renderbufferStorageMultisample(n.RENDERBUFFER,F,be,E.width,E.height)}else n.renderbufferStorage(n.RENDERBUFFER,be,E.width,E.height);n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.RENDERBUFFER,k)}else if(E.depthBuffer&&E.stencilBuffer){const be=Ue(E);oe&&!1===ot(E)?n.renderbufferStorageMultisample(n.RENDERBUFFER,be,n.DEPTH24_STENCIL8,E.width,E.height):ot(E)?h.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,be,n.DEPTH24_STENCIL8,E.width,E.height):n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,E.width,E.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,k)}else{const be=!0===E.isWebGLMultipleRenderTargets?E.texture:[E.texture];for(let ve=0;ve<be.length;ve++){const F=be[ve],me=o.convert(F.format,F.colorSpace),ge=o.convert(F.type),ee=I(F.internalFormat,me,ge,F.colorSpace),Ge=Ue(E);oe&&!1===ot(E)?n.renderbufferStorageMultisample(n.RENDERBUFFER,Ge,ee,E.width,E.height):ot(E)?h.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Ge,ee,E.width,E.height):n.renderbufferStorage(n.RENDERBUFFER,ee,E.width,E.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function de(k){const E=i.get(k),oe=!0===k.isWebGLCubeRenderTarget;if(k.depthTexture&&!E.__autoAllocateDepthBuffer){if(oe)throw new Error("target.depthTexture not supported in Cube render targets");!function we(k,E){if(E&&E.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(n.FRAMEBUFFER,k),!E.depthTexture||!E.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!i.get(E.depthTexture).__webglTexture||E.depthTexture.image.width!==E.width||E.depthTexture.image.height!==E.height)&&(E.depthTexture.image.width=E.width,E.depthTexture.image.height=E.height,E.depthTexture.needsUpdate=!0),ae(E.depthTexture,0);const be=i.get(E.depthTexture).__webglTexture,ve=Ue(E);if(E.depthTexture.format===ol)ot(E)?h.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,be,0,ve):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,be,0);else{if(E.depthTexture.format!==Jc)throw new Error("Unknown depthTexture format");ot(E)?h.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,be,0,ve):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,be,0)}}(E.__webglFramebuffer,k)}else if(oe){E.__webglDepthbuffer=[];for(let be=0;be<6;be++)t.bindFramebuffer(n.FRAMEBUFFER,E.__webglFramebuffer[be]),E.__webglDepthbuffer[be]=n.createRenderbuffer(),N(E.__webglDepthbuffer[be],k,!1)}else t.bindFramebuffer(n.FRAMEBUFFER,E.__webglFramebuffer),E.__webglDepthbuffer=n.createRenderbuffer(),N(E.__webglDepthbuffer,k,!1);t.bindFramebuffer(n.FRAMEBUFFER,null)}function Ue(k){return Math.min(u,k.samples)}function ot(k){const E=i.get(k);return a&&k.samples>0&&!0===e.has("WEBGL_multisampled_render_to_texture")&&!1!==E.__useRenderToTexture}function pn(k,E){const oe=k.colorSpace,be=k.format,ve=k.type;return!0===k.isCompressedTexture||1035===k.format||oe!==zo&&""!==oe&&(oe===lt?!1===a?!0===e.has("EXT_sRGB")&&be===Lr?(k.format=1035,k.minFilter=xn,k.generateMipmaps=!1):E=pk.sRGBToLinear(E):(be!==Lr||ve!==la)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",oe)),E}this.allocateTextureUnit=function W(){const k=z;return k>=l&&console.warn("THREE.WebGLTextures: Trying to use "+k+" texture units while this GPU supports only "+l),z+=1,k},this.resetTextureUnits=function H(){z=0},this.setTexture2D=ae,this.setTexture2DArray=function Ce(k,E){const oe=i.get(k);k.version>0&&oe.__version!==k.version?Ve(oe,k,E):t.bindTexture(n.TEXTURE_2D_ARRAY,oe.__webglTexture,n.TEXTURE0+E)},this.setTexture3D=function X(k,E){const oe=i.get(k);k.version>0&&oe.__version!==k.version?Ve(oe,k,E):t.bindTexture(n.TEXTURE_3D,oe.__webglTexture,n.TEXTURE0+E)},this.setTextureCube=function ue(k,E){const oe=i.get(k);k.version>0&&oe.__version!==k.version?function mt(k,E,oe){if(6!==E.image.length)return;const be=$e(k,E),ve=E.source;t.bindTexture(n.TEXTURE_CUBE_MAP,k.__webglTexture,n.TEXTURE0+oe);const F=i.get(ve);if(ve.version!==F.__version||!0===be){t.activeTexture(n.TEXTURE0+oe),n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,E.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,E.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,E.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,n.NONE);const me=E.isCompressedTexture||E.image[0].isCompressedTexture,ge=E.image[0]&&E.image[0].isDataTexture,ee=[];for(let te=0;te<6;te++)ee[te]=me||ge?ge?E.image[te].image:E.image[te]:v(E.image[te],!1,!0,c),ee[te]=pn(E,ee[te]);const Ge=ee[0],Ke=y(Ge)||a,Xe=o.convert(E.format,E.colorSpace),je=o.convert(E.type),He=I(E.internalFormat,Xe,je,E.colorSpace),st=a&&!0!==E.isVideoTexture,Nt=void 0===F.__version||!0===be;let ke,U=C(E,Ge,Ke);if(Se(n.TEXTURE_CUBE_MAP,E,Ke),me){st&&Nt&&t.texStorage2D(n.TEXTURE_CUBE_MAP,U,He,Ge.width,Ge.height);for(let te=0;te<6;te++){ke=ee[te].mipmaps;for(let Ae=0;Ae<ke.length;Ae++){const Ne=ke[Ae];E.format!==Lr?null!==Xe?st?t.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+te,Ae,0,0,Ne.width,Ne.height,Xe,Ne.data):t.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+te,Ae,He,Ne.width,Ne.height,0,Ne.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):st?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+te,Ae,0,0,Ne.width,Ne.height,Xe,je,Ne.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+te,Ae,He,Ne.width,Ne.height,0,Xe,je,Ne.data)}}}else{ke=E.mipmaps,st&&Nt&&(ke.length>0&&U++,t.texStorage2D(n.TEXTURE_CUBE_MAP,U,He,ee[0].width,ee[0].height));for(let te=0;te<6;te++)if(ge){st?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+te,0,0,0,ee[te].width,ee[te].height,Xe,je,ee[te].data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+te,0,He,ee[te].width,ee[te].height,0,Xe,je,ee[te].data);for(let Ae=0;Ae<ke.length;Ae++){const Wt=ke[Ae].image[te].image;st?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+te,Ae+1,0,0,Wt.width,Wt.height,Xe,je,Wt.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+te,Ae+1,He,Wt.width,Wt.height,0,Xe,je,Wt.data)}}else{st?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+te,0,0,0,Xe,je,ee[te]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+te,0,He,Xe,je,ee[te]);for(let Ae=0;Ae<ke.length;Ae++){const Ne=ke[Ae];st?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+te,Ae+1,0,0,Xe,je,Ne.image[te]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+te,Ae+1,He,Xe,je,Ne.image[te])}}}S(E,Ke)&&D(n.TEXTURE_CUBE_MAP),F.__version=ve.version,E.onUpdate&&E.onUpdate(E)}k.__version=E.version}(oe,k,E):t.bindTexture(n.TEXTURE_CUBE_MAP,oe.__webglTexture,n.TEXTURE0+E)},this.rebindTextures=function Me(k,E,oe){const be=i.get(k);void 0!==E&&Ze(be.__webglFramebuffer,k,k.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D),void 0!==oe&&de(k)},this.setupRenderTarget=function pe(k){const E=k.texture,oe=i.get(k),be=i.get(E);k.addEventListener("dispose",ie),!0!==k.isWebGLMultipleRenderTargets&&(void 0===be.__webglTexture&&(be.__webglTexture=n.createTexture()),be.__version=E.version,s.memory.textures++);const ve=!0===k.isWebGLCubeRenderTarget,F=!0===k.isWebGLMultipleRenderTargets,me=y(k)||a;if(ve){oe.__webglFramebuffer=[];for(let ge=0;ge<6;ge++)oe.__webglFramebuffer[ge]=n.createFramebuffer()}else{if(oe.__webglFramebuffer=n.createFramebuffer(),F)if(r.drawBuffers){const ge=k.texture;for(let ee=0,Ge=ge.length;ee<Ge;ee++){const Ke=i.get(ge[ee]);void 0===Ke.__webglTexture&&(Ke.__webglTexture=n.createTexture(),s.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(a&&k.samples>0&&!1===ot(k)){const ge=F?E:[E];oe.__webglMultisampledFramebuffer=n.createFramebuffer(),oe.__webglColorRenderbuffer=[],t.bindFramebuffer(n.FRAMEBUFFER,oe.__webglMultisampledFramebuffer);for(let ee=0;ee<ge.length;ee++){const Ge=ge[ee];oe.__webglColorRenderbuffer[ee]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,oe.__webglColorRenderbuffer[ee]);const Ke=o.convert(Ge.format,Ge.colorSpace),Xe=o.convert(Ge.type),je=I(Ge.internalFormat,Ke,Xe,Ge.colorSpace,!0===k.isXRRenderTarget),He=Ue(k);n.renderbufferStorageMultisample(n.RENDERBUFFER,He,je,k.width,k.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+ee,n.RENDERBUFFER,oe.__webglColorRenderbuffer[ee])}n.bindRenderbuffer(n.RENDERBUFFER,null),k.depthBuffer&&(oe.__webglDepthRenderbuffer=n.createRenderbuffer(),N(oe.__webglDepthRenderbuffer,k,!0)),t.bindFramebuffer(n.FRAMEBUFFER,null)}}if(ve){t.bindTexture(n.TEXTURE_CUBE_MAP,be.__webglTexture),Se(n.TEXTURE_CUBE_MAP,E,me);for(let ge=0;ge<6;ge++)Ze(oe.__webglFramebuffer[ge],k,E,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+ge);S(E,me)&&D(n.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(F){const ge=k.texture;for(let ee=0,Ge=ge.length;ee<Ge;ee++){const Ke=ge[ee],Xe=i.get(Ke);t.bindTexture(n.TEXTURE_2D,Xe.__webglTexture),Se(n.TEXTURE_2D,Ke,me),Ze(oe.__webglFramebuffer,k,Ke,n.COLOR_ATTACHMENT0+ee,n.TEXTURE_2D),S(Ke,me)&&D(n.TEXTURE_2D)}t.unbindTexture()}else{let ge=n.TEXTURE_2D;(k.isWebGL3DRenderTarget||k.isWebGLArrayRenderTarget)&&(a?ge=k.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),t.bindTexture(ge,be.__webglTexture),Se(ge,E,me),Ze(oe.__webglFramebuffer,k,E,n.COLOR_ATTACHMENT0,ge),S(E,me)&&D(ge),t.unbindTexture()}k.depthBuffer&&de(k)},this.updateRenderTargetMipmap=function qe(k){const E=y(k)||a,oe=!0===k.isWebGLMultipleRenderTargets?k.texture:[k.texture];for(let be=0,ve=oe.length;be<ve;be++){const F=oe[be];if(S(F,E)){const me=k.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:n.TEXTURE_2D,ge=i.get(F).__webglTexture;t.bindTexture(me,ge),D(me),t.unbindTexture()}}},this.updateMultisampleRenderTarget=function Be(k){if(a&&k.samples>0&&!1===ot(k)){const E=k.isWebGLMultipleRenderTargets?k.texture:[k.texture],oe=k.width,be=k.height;let ve=n.COLOR_BUFFER_BIT;const F=[],me=k.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,ge=i.get(k),ee=!0===k.isWebGLMultipleRenderTargets;if(ee)for(let Ge=0;Ge<E.length;Ge++)t.bindFramebuffer(n.FRAMEBUFFER,ge.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ge,n.RENDERBUFFER,null),t.bindFramebuffer(n.FRAMEBUFFER,ge.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ge,n.TEXTURE_2D,null,0);t.bindFramebuffer(n.READ_FRAMEBUFFER,ge.__webglMultisampledFramebuffer),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,ge.__webglFramebuffer);for(let Ge=0;Ge<E.length;Ge++){F.push(n.COLOR_ATTACHMENT0+Ge),k.depthBuffer&&F.push(me);const Ke=void 0!==ge.__ignoreDepthValues&&ge.__ignoreDepthValues;if(!1===Ke&&(k.depthBuffer&&(ve|=n.DEPTH_BUFFER_BIT),k.stencilBuffer&&(ve|=n.STENCIL_BUFFER_BIT)),ee&&n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,ge.__webglColorRenderbuffer[Ge]),!0===Ke&&(n.invalidateFramebuffer(n.READ_FRAMEBUFFER,[me]),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[me])),ee){const Xe=i.get(E[Ge]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,Xe,0)}n.blitFramebuffer(0,0,oe,be,0,0,oe,be,ve,n.NEAREST),f&&n.invalidateFramebuffer(n.READ_FRAMEBUFFER,F)}if(t.bindFramebuffer(n.READ_FRAMEBUFFER,null),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),ee)for(let Ge=0;Ge<E.length;Ge++){t.bindFramebuffer(n.FRAMEBUFFER,ge.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ge,n.RENDERBUFFER,ge.__webglColorRenderbuffer[Ge]);const Ke=i.get(E[Ge]).__webglTexture;t.bindFramebuffer(n.FRAMEBUFFER,ge.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ge,n.TEXTURE_2D,Ke,0)}t.bindFramebuffer(n.DRAW_FRAMEBUFFER,ge.__webglMultisampledFramebuffer)}},this.setupDepthRenderbuffer=de,this.setupFrameBufferTexture=Ze,this.useMultisampledRTT=ot}function _J(n,e,t){const i=t.isWebGL2;return{convert:function r(o,s=""){let a;if(o===la)return n.UNSIGNED_BYTE;if(1017===o)return n.UNSIGNED_SHORT_4_4_4_4;if(1018===o)return n.UNSIGNED_SHORT_5_5_5_1;if(1010===o)return n.BYTE;if(1011===o)return n.SHORT;if(1012===o)return n.UNSIGNED_SHORT;if(1013===o)return n.INT;if(o===ca)return n.UNSIGNED_INT;if(o===ys)return n.FLOAT;if(o===Ch)return i?n.HALF_FLOAT:(a=e.get("OES_texture_half_float"),null!==a?a.HALF_FLOAT_OES:null);if(1021===o)return n.ALPHA;if(o===Lr)return n.RGBA;if(1024===o)return n.LUMINANCE;if(1025===o)return n.LUMINANCE_ALPHA;if(o===ol)return n.DEPTH_COMPONENT;if(o===Jc)return n.DEPTH_STENCIL;if(1035===o)return a=e.get("EXT_sRGB"),null!==a?a.SRGB_ALPHA_EXT:null;if(1028===o)return n.RED;if(1029===o)return n.RED_INTEGER;if(1030===o)return n.RG;if(1031===o)return n.RG_INTEGER;if(1033===o)return n.RGBA_INTEGER;if(33776===o||33777===o||33778===o||33779===o)if(s===lt){if(a=e.get("WEBGL_compressed_texture_s3tc_srgb"),null===a)return null;if(33776===o)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(33777===o)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(33778===o)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(33779===o)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(a=e.get("WEBGL_compressed_texture_s3tc"),null===a)return null;if(33776===o)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(33777===o)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(33778===o)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(33779===o)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(35840===o||35841===o||35842===o||35843===o){if(a=e.get("WEBGL_compressed_texture_pvrtc"),null===a)return null;if(35840===o)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===o)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===o)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===o)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===o)return a=e.get("WEBGL_compressed_texture_etc1"),null!==a?a.COMPRESSED_RGB_ETC1_WEBGL:null;if(37492===o||37496===o){if(a=e.get("WEBGL_compressed_texture_etc"),null===a)return null;if(37492===o)return s===lt?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(37496===o)return s===lt?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}if(37808===o||37809===o||37810===o||37811===o||37812===o||37813===o||37814===o||37815===o||37816===o||37817===o||37818===o||37819===o||37820===o||37821===o){if(a=e.get("WEBGL_compressed_texture_astc"),null===a)return null;if(37808===o)return s===lt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(37809===o)return s===lt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(37810===o)return s===lt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(37811===o)return s===lt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(37812===o)return s===lt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(37813===o)return s===lt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(37814===o)return s===lt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(37815===o)return s===lt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(37816===o)return s===lt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(37817===o)return s===lt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(37818===o)return s===lt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(37819===o)return s===lt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(37820===o)return s===lt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(37821===o)return s===lt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}if(36492===o){if(a=e.get("EXT_texture_compression_bptc"),null===a)return null;if(36492===o)return s===lt?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT}if(36283===o||36284===o||36285===o||36286===o){if(a=e.get("EXT_texture_compression_rgtc"),null===a)return null;if(36492===o)return a.COMPRESSED_RED_RGTC1_EXT;if(36284===o)return a.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(36285===o)return a.COMPRESSED_RED_GREEN_RGTC2_EXT;if(36286===o)return a.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}return o===rl?i?n.UNSIGNED_INT_24_8:(a=e.get("WEBGL_depth_texture"),null!==a?a.UNSIGNED_INT_24_8_WEBGL:null):void 0!==n[o]?n[o]:null}}}class vJ extends ai{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class As extends oi{constructor(){super(),this.isGroup=!0,this.type="Group"}}const bJ={type:"move"};class $x{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new As,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new As,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new R,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new R),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new As,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new R,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new R),this._grip}dispatchEvent(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const i of e.hand.values())this._getHandJoint(t,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(e,t,i){let r=null,o=null,s=null;const a=this._targetRay,l=this._grip,c=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState){if(c&&e.hand){s=!0;for(const _ of e.hand.values()){const m=t.getJointPose(_,i),g=this._getHandJoint(c,_);null!==m&&(g.matrix.fromArray(m.transform.matrix),g.matrix.decompose(g.position,g.rotation,g.scale),g.matrixWorldNeedsUpdate=!0,g.jointRadius=m.radius),g.visible=null!==m}const h=c.joints["index-finger-tip"].position.distanceTo(c.joints["thumb-tip"].position),f=.02,p=.005;c.inputState.pinching&&h>f+p?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&h<=f-p&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==l&&e.gripSpace&&(o=t.getPose(e.gripSpace,i),null!==o&&(l.matrix.fromArray(o.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,o.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(o.linearVelocity)):l.hasLinearVelocity=!1,o.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(o.angularVelocity)):l.hasAngularVelocity=!1));null!==a&&(r=t.getPose(e.targetRaySpace,i),null===r&&null!==o&&(r=o),null!==r&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(bJ)))}return null!==a&&(a.visible=null!==r),null!==l&&(l.visible=null!==o),null!==c&&(c.visible=null!==s),this}_getHandJoint(e,t){if(void 0===e.joints[t.jointName]){const i=new As;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[t.jointName]=i,e.add(i)}return e.joints[t.jointName]}}class yJ extends co{constructor(e,t,i,r,o,s,a,l,c,d){if((d=void 0!==d?d:ol)!==ol&&d!==Jc)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===i&&d===ol&&(i=ca),void 0===i&&d===Jc&&(i=rl),super(null,r,o,s,a,l,d,i,c),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=void 0!==a?a:Rn,this.minFilter=void 0!==l?l:Rn,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return null!==this.compareFunction&&(t.compareFunction=this.compareFunction),t}}class xJ extends da{constructor(e,t){super();const i=this;let r=null,o=1,s=null,a="local-floor",l=1,c=null,d=null,u=null,h=null,f=null,p=null;const _=t.getContextAttributes();let m=null,g=null;const b=[],v=[];let y=null;const x=new ai;x.layers.enable(1),x.viewport=new Jt;const S=new ai;S.layers.enable(2),S.viewport=new Jt;const D=[x,S],I=new vJ;I.layers.enable(1),I.layers.enable(2);let C=null,T=null;function j(X){const ue=v.indexOf(X.inputSource);if(-1===ue)return;const re=b[ue];void 0!==re&&(re.update(X.inputSource,X.frame,c||s),re.dispatchEvent({type:X.type,data:X.inputSource}))}function ie(){r.removeEventListener("select",j),r.removeEventListener("selectstart",j),r.removeEventListener("selectend",j),r.removeEventListener("squeeze",j),r.removeEventListener("squeezestart",j),r.removeEventListener("squeezeend",j),r.removeEventListener("end",ie),r.removeEventListener("inputsourceschange",V);for(let X=0;X<b.length;X++){const ue=v[X];null!==ue&&(v[X]=null,b[X].disconnect(ue))}C=null,T=null,e.setRenderTarget(m),f=null,h=null,u=null,r=null,g=null,Ce.stop(),i.isPresenting=!1,i.dispatchEvent({type:"sessionend"})}function V(X){for(let ue=0;ue<X.removed.length;ue++){const re=X.removed[ue],De=v.indexOf(re);De>=0&&(v[De]=null,b[De].disconnect(re))}for(let ue=0;ue<X.added.length;ue++){const re=X.added[ue];let De=v.indexOf(re);if(-1===De){for(let Se=0;Se<b.length;Se++){if(Se>=v.length){v.push(re),De=Se;break}if(null===v[Se]){v[Se]=re,De=Se;break}}if(-1===De)break}const Ee=b[De];Ee&&Ee.connect(re)}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getCamera=function(){},this.setUserCamera=function(X){y=X},this.getController=function(X){let ue=b[X];return void 0===ue&&(ue=new $x,b[X]=ue),ue.getTargetRaySpace()},this.getControllerGrip=function(X){let ue=b[X];return void 0===ue&&(ue=new $x,b[X]=ue),ue.getGripSpace()},this.getHand=function(X){let ue=b[X];return void 0===ue&&(ue=new $x,b[X]=ue),ue.getHandSpace()},this.setFramebufferScaleFactor=function(X){o=X,!0===i.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(X){a=X,!0===i.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return c||s},this.setReferenceSpace=function(X){c=X},this.getBaseLayer=function(){return null!==h?h:f},this.getBinding=function(){return u},this.getFrame=function(){return p},this.getSession=function(){return r},this.setSession=function(){var X=function zq(n){return function(){var e=this,t=arguments;return new Promise(function(i,r){var o=n.apply(e,t);function s(l){yO(o,i,r,s,a,"next",l)}function a(l){yO(o,i,r,s,a,"throw",l)}s(void 0)})}}(function*(ue){if(r=ue,null!==r){if(m=e.getRenderTarget(),r.addEventListener("select",j),r.addEventListener("selectstart",j),r.addEventListener("selectend",j),r.addEventListener("squeeze",j),r.addEventListener("squeezestart",j),r.addEventListener("squeezeend",j),r.addEventListener("end",ie),r.addEventListener("inputsourceschange",V),!0!==_.xrCompatible&&(yield t.makeXRCompatible()),void 0===r.renderState.layers||!1===e.capabilities.isWebGL2)f=new XRWebGLLayer(r,t,{antialias:void 0!==r.renderState.layers||_.antialias,alpha:!0,depth:_.depth,stencil:_.stencil,framebufferScaleFactor:o}),r.updateRenderState({baseLayer:f}),g=new dl(f.framebufferWidth,f.framebufferHeight,{format:Lr,type:la,colorSpace:e.outputColorSpace,stencilBuffer:_.stencil});else{let re=null,De=null,Ee=null;_.depth&&(Ee=_.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,re=_.stencil?Jc:ol,De=_.stencil?rl:ca);const Se={colorFormat:t.RGBA8,depthFormat:Ee,scaleFactor:o};u=new XRWebGLBinding(r,t),h=u.createProjectionLayer(Se),r.updateRenderState({layers:[h]}),g=new dl(h.textureWidth,h.textureHeight,{format:Lr,type:la,depthTexture:new yJ(h.textureWidth,h.textureHeight,De,void 0,void 0,void 0,void 0,void 0,void 0,re),stencilBuffer:_.stencil,colorSpace:e.outputColorSpace,samples:_.antialias?4:0}),e.properties.get(g).__ignoreDepthValues=h.ignoreDepthValues}g.isXRRenderTarget=!0,this.setFoveation(l),c=null,s=yield r.requestReferenceSpace(a),Ce.setContext(r),Ce.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}});return function(ue){return X.apply(this,arguments)}}(),this.getEnvironmentBlendMode=function(){if(null!==r)return r.environmentBlendMode};const G=new R,$=new R;function H(X,ue){null===ue?X.matrixWorld.copy(X.matrix):X.matrixWorld.multiplyMatrices(ue.matrixWorld,X.matrix),X.matrixWorldInverse.copy(X.matrixWorld).invert()}this.updateCameraXR=function(X){if(null===r)return X;y&&(X=y),I.near=S.near=x.near=X.near,I.far=S.far=x.far=X.far,(C!==I.near||T!==I.far)&&(r.updateRenderState({depthNear:I.near,depthFar:I.far}),C=I.near,T=I.far);const ue=X.parent,re=I.cameras;H(I,ue);for(let De=0;De<re.length;De++)H(re[De],ue);return 2===re.length?function z(X,ue,re){G.setFromMatrixPosition(ue.matrixWorld),$.setFromMatrixPosition(re.matrixWorld);const De=G.distanceTo($),Ee=ue.projectionMatrix.elements,Se=re.projectionMatrix.elements,$e=Ee[14]/(Ee[10]-1),Ve=Ee[14]/(Ee[10]+1),mt=(Ee[9]+1)/Ee[5],Ze=(Ee[9]-1)/Ee[5],N=(Ee[8]-1)/Ee[0],we=(Se[8]+1)/Se[0],de=$e*N,Me=$e*we,pe=De/(-N+we),qe=pe*-N;ue.matrixWorld.decompose(X.position,X.quaternion,X.scale),X.translateX(qe),X.translateZ(pe),X.matrixWorld.compose(X.position,X.quaternion,X.scale),X.matrixWorldInverse.copy(X.matrixWorld).invert();const Be=$e+pe,Ue=Ve+pe;X.projectionMatrix.makePerspective(de-qe,Me+(De-qe),mt*Ve/Ue*Be,Ze*Ve/Ue*Be,Be,Ue),X.projectionMatrixInverse.copy(X.projectionMatrix).invert()}(I,x,S):I.projectionMatrix.copy(x.projectionMatrix),y&&function W(X,ue){const re=y;null===ue?re.matrix.copy(X.matrixWorld):(re.matrix.copy(ue.matrixWorld),re.matrix.invert(),re.matrix.multiply(X.matrixWorld)),re.matrix.decompose(re.position,re.quaternion,re.scale),re.updateMatrixWorld(!0);const De=re.children;for(let Ee=0,Se=De.length;Ee<Se;Ee++)De[Ee].updateMatrixWorld(!0);re.projectionMatrix.copy(X.projectionMatrix),re.projectionMatrixInverse.copy(X.projectionMatrixInverse),re.isPerspectiveCamera&&(re.fov=2*id*Math.atan(1/re.projectionMatrix.elements[5]),re.zoom=1)}(I,ue),I},this.getFoveation=function(){if(null!==h||null!==f)return l},this.setFoveation=function(X){l=X,null!==h&&(h.fixedFoveation=X),null!==f&&void 0!==f.fixedFoveation&&(f.fixedFoveation=X)};let K=null;const Ce=new kk;Ce.setAnimationLoop(function ae(X,ue){if(d=ue.getViewerPose(c||s),p=ue,null!==d){const re=d.views;null!==f&&(e.setRenderTargetFramebuffer(g,f.framebuffer),e.setRenderTarget(g));let De=!1;re.length!==I.cameras.length&&(I.cameras.length=0,De=!0);for(let Ee=0;Ee<re.length;Ee++){const Se=re[Ee];let $e=null;if(null!==f)$e=f.getViewport(Se);else{const mt=u.getViewSubImage(h,Se);$e=mt.viewport,0===Ee&&(e.setRenderTargetTextures(g,mt.colorTexture,h.ignoreDepthValues?void 0:mt.depthStencilTexture),e.setRenderTarget(g))}let Ve=D[Ee];void 0===Ve&&(Ve=new ai,Ve.layers.enable(Ee),Ve.viewport=new Jt,D[Ee]=Ve),Ve.matrix.fromArray(Se.transform.matrix),Ve.matrix.decompose(Ve.position,Ve.quaternion,Ve.scale),Ve.projectionMatrix.fromArray(Se.projectionMatrix),Ve.projectionMatrixInverse.copy(Ve.projectionMatrix).invert(),Ve.viewport.set($e.x,$e.y,$e.width,$e.height),0===Ee&&(I.matrix.copy(Ve.matrix),I.matrix.decompose(I.position,I.quaternion,I.scale)),!0===De&&I.cameras.push(Ve)}}for(let re=0;re<b.length;re++){const De=v[re],Ee=b[re];null!==De&&void 0!==Ee&&Ee.update(De,ue,c||s)}K&&K(X,ue),ue.detectedPlanes&&i.dispatchEvent({type:"planesdetected",data:ue}),p=null}),this.setAnimationLoop=function(X){K=X},this.dispose=function(){}}}function CJ(n,e){function t(m,g){!0===m.matrixAutoUpdate&&m.updateMatrix(),g.value.copy(m.matrix)}function o(m,g){m.opacity.value=g.opacity,g.color&&m.diffuse.value.copy(g.color),g.emissive&&m.emissive.value.copy(g.emissive).multiplyScalar(g.emissiveIntensity),g.map&&(m.map.value=g.map,t(g.map,m.mapTransform)),g.alphaMap&&(m.alphaMap.value=g.alphaMap,t(g.alphaMap,m.alphaMapTransform)),g.bumpMap&&(m.bumpMap.value=g.bumpMap,t(g.bumpMap,m.bumpMapTransform),m.bumpScale.value=g.bumpScale,1===g.side&&(m.bumpScale.value*=-1)),g.normalMap&&(m.normalMap.value=g.normalMap,t(g.normalMap,m.normalMapTransform),m.normalScale.value.copy(g.normalScale),1===g.side&&m.normalScale.value.negate()),g.displacementMap&&(m.displacementMap.value=g.displacementMap,t(g.displacementMap,m.displacementMapTransform),m.displacementScale.value=g.displacementScale,m.displacementBias.value=g.displacementBias),g.emissiveMap&&(m.emissiveMap.value=g.emissiveMap,t(g.emissiveMap,m.emissiveMapTransform)),g.specularMap&&(m.specularMap.value=g.specularMap,t(g.specularMap,m.specularMapTransform)),g.alphaTest>0&&(m.alphaTest.value=g.alphaTest);const b=e.get(g).envMap;if(b&&(m.envMap.value=b,m.flipEnvMap.value=b.isCubeTexture&&!1===b.isRenderTargetTexture?-1:1,m.reflectivity.value=g.reflectivity,m.ior.value=g.ior,m.refractionRatio.value=g.refractionRatio),g.lightMap){m.lightMap.value=g.lightMap;const v=!0===n.useLegacyLights?Math.PI:1;m.lightMapIntensity.value=g.lightMapIntensity*v,t(g.lightMap,m.lightMapTransform)}g.aoMap&&(m.aoMap.value=g.aoMap,m.aoMapIntensity.value=g.aoMapIntensity,t(g.aoMap,m.aoMapTransform))}return{refreshFogUniforms:function i(m,g){g.color.getRGB(m.fogColor.value,Ok(n)),g.isFog?(m.fogNear.value=g.near,m.fogFar.value=g.far):g.isFogExp2&&(m.fogDensity.value=g.density)},refreshMaterialUniforms:function r(m,g,b,v,y){g.isMeshBasicMaterial||g.isMeshLambertMaterial?o(m,g):g.isMeshToonMaterial?(o(m,g),function u(m,g){g.gradientMap&&(m.gradientMap.value=g.gradientMap)}(m,g)):g.isMeshPhongMaterial?(o(m,g),function d(m,g){m.specular.value.copy(g.specular),m.shininess.value=Math.max(g.shininess,1e-4)}(m,g)):g.isMeshStandardMaterial?(o(m,g),function h(m,g){m.metalness.value=g.metalness,g.metalnessMap&&(m.metalnessMap.value=g.metalnessMap,t(g.metalnessMap,m.metalnessMapTransform)),m.roughness.value=g.roughness,g.roughnessMap&&(m.roughnessMap.value=g.roughnessMap,t(g.roughnessMap,m.roughnessMapTransform)),e.get(g).envMap&&(m.envMapIntensity.value=g.envMapIntensity)}(m,g),g.isMeshPhysicalMaterial&&function f(m,g,b){m.ior.value=g.ior,g.sheen>0&&(m.sheenColor.value.copy(g.sheenColor).multiplyScalar(g.sheen),m.sheenRoughness.value=g.sheenRoughness,g.sheenColorMap&&(m.sheenColorMap.value=g.sheenColorMap,t(g.sheenColorMap,m.sheenColorMapTransform)),g.sheenRoughnessMap&&(m.sheenRoughnessMap.value=g.sheenRoughnessMap,t(g.sheenRoughnessMap,m.sheenRoughnessMapTransform))),g.clearcoat>0&&(m.clearcoat.value=g.clearcoat,m.clearcoatRoughness.value=g.clearcoatRoughness,g.clearcoatMap&&(m.clearcoatMap.value=g.clearcoatMap,t(g.clearcoatMap,m.clearcoatMapTransform)),g.clearcoatRoughnessMap&&(m.clearcoatRoughnessMap.value=g.clearcoatRoughnessMap,t(g.clearcoatRoughnessMap,m.clearcoatRoughnessMapTransform)),g.clearcoatNormalMap&&(m.clearcoatNormalMap.value=g.clearcoatNormalMap,t(g.clearcoatNormalMap,m.clearcoatNormalMapTransform),m.clearcoatNormalScale.value.copy(g.clearcoatNormalScale),1===g.side&&m.clearcoatNormalScale.value.negate())),g.iridescence>0&&(m.iridescence.value=g.iridescence,m.iridescenceIOR.value=g.iridescenceIOR,m.iridescenceThicknessMinimum.value=g.iridescenceThicknessRange[0],m.iridescenceThicknessMaximum.value=g.iridescenceThicknessRange[1],g.iridescenceMap&&(m.iridescenceMap.value=g.iridescenceMap,t(g.iridescenceMap,m.iridescenceMapTransform)),g.iridescenceThicknessMap&&(m.iridescenceThicknessMap.value=g.iridescenceThicknessMap,t(g.iridescenceThicknessMap,m.iridescenceThicknessMapTransform))),g.transmission>0&&(m.transmission.value=g.transmission,m.transmissionSamplerMap.value=b.texture,m.transmissionSamplerSize.value.set(b.width,b.height),g.transmissionMap&&(m.transmissionMap.value=g.transmissionMap,t(g.transmissionMap,m.transmissionMapTransform)),m.thickness.value=g.thickness,g.thicknessMap&&(m.thicknessMap.value=g.thicknessMap,t(g.thicknessMap,m.thicknessMapTransform)),m.attenuationDistance.value=g.attenuationDistance,m.attenuationColor.value.copy(g.attenuationColor)),g.anisotropy>0&&(m.anisotropyVector.value.set(g.anisotropy*Math.cos(g.anisotropyRotation),g.anisotropy*Math.sin(g.anisotropyRotation)),g.anisotropyMap&&(m.anisotropyMap.value=g.anisotropyMap,t(g.anisotropyMap,m.anisotropyMapTransform))),m.specularIntensity.value=g.specularIntensity,m.specularColor.value.copy(g.specularColor),g.specularColorMap&&(m.specularColorMap.value=g.specularColorMap,t(g.specularColorMap,m.specularColorMapTransform)),g.specularIntensityMap&&(m.specularIntensityMap.value=g.specularIntensityMap,t(g.specularIntensityMap,m.specularIntensityMapTransform))}(m,g,y)):g.isMeshMatcapMaterial?(o(m,g),function p(m,g){g.matcap&&(m.matcap.value=g.matcap)}(m,g)):g.isMeshDepthMaterial?o(m,g):g.isMeshDistanceMaterial?(o(m,g),function _(m,g){const b=e.get(g).light;m.referencePosition.value.setFromMatrixPosition(b.matrixWorld),m.nearDistance.value=b.shadow.camera.near,m.farDistance.value=b.shadow.camera.far}(m,g)):g.isMeshNormalMaterial?o(m,g):g.isLineBasicMaterial?(function s(m,g){m.diffuse.value.copy(g.color),m.opacity.value=g.opacity,g.map&&(m.map.value=g.map,t(g.map,m.mapTransform))}(m,g),g.isLineDashedMaterial&&function a(m,g){m.dashSize.value=g.dashSize,m.totalSize.value=g.dashSize+g.gapSize,m.scale.value=g.scale}(m,g)):g.isPointsMaterial?function l(m,g,b,v){m.diffuse.value.copy(g.color),m.opacity.value=g.opacity,m.size.value=g.size*b,m.scale.value=.5*v,g.map&&(m.map.value=g.map,t(g.map,m.uvTransform)),g.alphaMap&&(m.alphaMap.value=g.alphaMap,t(g.alphaMap,m.alphaMapTransform)),g.alphaTest>0&&(m.alphaTest.value=g.alphaTest)}(m,g,b,v):g.isSpriteMaterial?function c(m,g){m.diffuse.value.copy(g.color),m.opacity.value=g.opacity,m.rotation.value=g.rotation,g.map&&(m.map.value=g.map,t(g.map,m.mapTransform)),g.alphaMap&&(m.alphaMap.value=g.alphaMap,t(g.alphaMap,m.alphaMapTransform)),g.alphaTest>0&&(m.alphaTest.value=g.alphaTest)}(m,g):g.isShadowMaterial?(m.color.value.copy(g.color),m.opacity.value=g.opacity):g.isShaderMaterial&&(g.uniformsNeedUpdate=!1)}}}function MJ(n,e,t,i){let r={},o={},s=[];const a=t.isWebGL2?n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS):0;function f(b,v,y){const x=b.value;if(void 0===y[v]){if("number"==typeof x)y[v]=x;else{const S=Array.isArray(x)?x:[x],D=[];for(let I=0;I<S.length;I++)D.push(S[I].clone());y[v]=D}return!0}if("number"==typeof x){if(y[v]!==x)return y[v]=x,!0}else{const S=Array.isArray(y[v])?y[v]:[y[v]],D=Array.isArray(x)?x:[x];for(let I=0;I<S.length;I++){const C=S[I];if(!1===C.equals(D[I]))return C.copy(D[I]),!0}}return!1}function _(b){const v={boundary:0,storage:0};return"number"==typeof b?(v.boundary=4,v.storage=4):b.isVector2?(v.boundary=8,v.storage=8):b.isVector3||b.isColor?(v.boundary=16,v.storage=12):b.isVector4?(v.boundary=16,v.storage=16):b.isMatrix3?(v.boundary=48,v.storage=48):b.isMatrix4?(v.boundary=64,v.storage=64):b.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",b),v}function m(b){const v=b.target;v.removeEventListener("dispose",m);const y=s.indexOf(v.__bindingPointIndex);s.splice(y,1),n.deleteBuffer(r[v.id]),delete r[v.id],delete o[v.id]}return{bind:function l(b,v){i.uniformBlockBinding(b,v.program)},update:function c(b,v){let y=r[b.id];void 0===y&&(function p(b){const v=b.uniforms;let y=0;let S=0;for(let D=0,I=v.length;D<I;D++){const C=v[D],T={boundary:0,storage:0},j=Array.isArray(C.value)?C.value:[C.value];for(let ie=0,V=j.length;ie<V;ie++){const $=_(j[ie]);T.boundary+=$.boundary,T.storage+=$.storage}C.__data=new Float32Array(T.storage/Float32Array.BYTES_PER_ELEMENT),C.__offset=y,D>0&&(S=y%16,0!==S&&16-S-T.boundary<0&&(y+=16-S,C.__offset=y)),y+=T.storage}S=y%16,S>0&&(y+=16-S),b.__size=y,b.__cache={}}(b),y=function d(b){const v=function u(){for(let b=0;b<a;b++)if(-1===s.indexOf(b))return s.push(b),b;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}();b.__bindingPointIndex=v;const y=n.createBuffer(),x=b.__size,S=b.usage;return n.bindBuffer(n.UNIFORM_BUFFER,y),n.bufferData(n.UNIFORM_BUFFER,x,S),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,v,y),y}(b),r[b.id]=y,b.addEventListener("dispose",m)),i.updateUBOMapping(b,v.program);const S=e.render.frame;o[b.id]!==S&&(function h(b){const y=b.uniforms,x=b.__cache;n.bindBuffer(n.UNIFORM_BUFFER,r[b.id]);for(let S=0,D=y.length;S<D;S++){const I=y[S];if(!0===f(I,S,x)){const C=I.__offset,T=Array.isArray(I.value)?I.value:[I.value];let j=0;for(let ie=0;ie<T.length;ie++){const V=T[ie],G=_(V);"number"==typeof V?(I.__data[0]=V,n.bufferSubData(n.UNIFORM_BUFFER,C+j,I.__data)):V.isMatrix3?(I.__data[0]=V.elements[0],I.__data[1]=V.elements[1],I.__data[2]=V.elements[2],I.__data[3]=V.elements[0],I.__data[4]=V.elements[3],I.__data[5]=V.elements[4],I.__data[6]=V.elements[5],I.__data[7]=V.elements[0],I.__data[8]=V.elements[6],I.__data[9]=V.elements[7],I.__data[10]=V.elements[8],I.__data[11]=V.elements[0]):(V.toArray(I.__data,j),j+=G.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,C,I.__data)}}n.bindBuffer(n.UNIFORM_BUFFER,null)}(b),o[b.id]=S)},dispose:function g(){for(const b in r)n.deleteBuffer(r[b]);s=[],r={},o={}}}}function wJ(){const n=Sh("canvas");return n.style.display="block",n}class cF{constructor(e={}){const{canvas:t=wJ(),context:i=null,depth:r=!0,stencil:o=!0,alpha:s=!1,antialias:a=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:c=!1,powerPreference:d="default",failIfMajorPerformanceCaveat:u=!1}=e;let h;this.isWebGLRenderer=!0,h=null!==i?i.getContextAttributes().alpha:s;const f=new Uint32Array(4),p=new Int32Array(4);let _=null,m=null;const g=[],b=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputColorSpace=lt,this.useLegacyLights=!0,this.toneMapping=vs,this.toneMappingExposure=1;const v=this;let y=!1,x=0,S=0,D=null,I=-1,C=null;const T=new Jt,j=new Jt;let ie=null;const V=new Pe(0);let G=0,$=t.width,z=t.height,H=1,W=null,K=null;const ae=new Jt(0,0,$,z),Ce=new Jt(0,0,$,z);let X=!1;const ue=new Vx;let re=!1,De=!1,Ee=null;const Se=new ct,$e=new ce,Ve=new R,mt={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function Ze(){return null===D?H:1}let de,Me,pe,qe,Be,Ue,ot,Ot,pn,k,E,oe,be,ve,F,me,ge,ee,Ge,Ke,Xe,je,He,st,N=i;function we(P,Y){for(let se=0;se<P.length;se++){const le=t.getContext(P[se],Y);if(null!==le)return le}return null}try{const P={alpha:!0,depth:r,stencil:o,antialias:a,premultipliedAlpha:l,preserveDrawingBuffer:c,powerPreference:d,failIfMajorPerformanceCaveat:u};if("setAttribute"in t&&t.setAttribute("data-engine","three.js r153"),t.addEventListener("webglcontextlost",ke,!1),t.addEventListener("webglcontextrestored",te,!1),t.addEventListener("webglcontextcreationerror",Ae,!1),null===N){const Y=["webgl2","webgl","experimental-webgl"];if(!0===v.isWebGL1Renderer&&Y.shift(),N=we(Y,P),null===N)throw we(Y)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}N instanceof WebGLRenderingContext&&console.warn("THREE.WebGLRenderer: WebGL 1 support was deprecated in r153 and will be removed in r163."),void 0===N.getShaderPrecisionFormat&&(N.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(P){throw console.error("THREE.WebGLRenderer: "+P.message),P}function Nt(){de=new LK(N),Me=new RK(N,de,e),de.init(Me),je=new _J(N,de,Me),pe=new mJ(N,de,Me),qe=new VK(N),Be=new iJ,Ue=new gJ(N,de,pe,Be,Me,je,qe),ot=new OK(v),Ot=new NK(v),pn=new PY(N,Me),He=new AK(N,de,pn,Me),k=new BK(N,pn,qe,He),E=new jK(N,k,pn,qe),Ge=new GK(N,Me,Ue),me=new PK(Be),oe=new nJ(v,ot,Ot,de,Me,He,me),be=new CJ(v,Be),ve=new oJ,F=new uJ(de,Me),ee=new DK(v,ot,Ot,pe,E,h,l),ge=new pJ(v,E,Me),st=new MJ(N,qe,Me,pe),Ke=new IK(N,de,qe,Me),Xe=new UK(N,de,qe,Me),qe.programs=oe.programs,v.capabilities=Me,v.extensions=de,v.properties=Be,v.renderLists=ve,v.shadowMap=ge,v.state=pe,v.info=qe}Nt();const U=new xJ(v,N);function ke(P){P.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),y=!0}function te(){console.log("THREE.WebGLRenderer: Context Restored."),y=!1;const P=qe.autoReset,Y=ge.enabled,se=ge.autoUpdate,q=ge.needsUpdate,le=ge.type;Nt(),qe.autoReset=P,ge.enabled=Y,ge.autoUpdate=se,ge.needsUpdate=q,ge.type=le}function Ae(P){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",P.statusMessage)}function Ne(P){const Y=P.target;Y.removeEventListener("dispose",Ne),function Wt(P){(function En(P){const Y=Be.get(P).programs;void 0!==Y&&(Y.forEach(function(se){oe.releaseProgram(se)}),P.isShaderMaterial&&oe.releaseShaderCache(P))})(P),Be.remove(P)}(Y)}this.xr=U,this.getContext=function(){return N},this.getContextAttributes=function(){return N.getContextAttributes()},this.forceContextLoss=function(){const P=de.get("WEBGL_lose_context");P&&P.loseContext()},this.forceContextRestore=function(){const P=de.get("WEBGL_lose_context");P&&P.restoreContext()},this.getPixelRatio=function(){return H},this.setPixelRatio=function(P){void 0!==P&&(H=P,this.setSize($,z,!1))},this.getSize=function(P){return P.set($,z)},this.setSize=function(P,Y,se=!0){U.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):($=P,z=Y,t.width=Math.floor(P*H),t.height=Math.floor(Y*H),!0===se&&(t.style.width=P+"px",t.style.height=Y+"px"),this.setViewport(0,0,P,Y))},this.getDrawingBufferSize=function(P){return P.set($*H,z*H).floor()},this.setDrawingBufferSize=function(P,Y,se){$=P,z=Y,H=se,t.width=Math.floor(P*se),t.height=Math.floor(Y*se),this.setViewport(0,0,P,Y)},this.getCurrentViewport=function(P){return P.copy(T)},this.getViewport=function(P){return P.copy(ae)},this.setViewport=function(P,Y,se,q){P.isVector4?ae.set(P.x,P.y,P.z,P.w):ae.set(P,Y,se,q),pe.viewport(T.copy(ae).multiplyScalar(H).floor())},this.getScissor=function(P){return P.copy(Ce)},this.setScissor=function(P,Y,se,q){P.isVector4?Ce.set(P.x,P.y,P.z,P.w):Ce.set(P,Y,se,q),pe.scissor(j.copy(Ce).multiplyScalar(H).floor())},this.getScissorTest=function(){return X},this.setScissorTest=function(P){pe.setScissorTest(X=P)},this.setOpaqueSort=function(P){W=P},this.setTransparentSort=function(P){K=P},this.getClearColor=function(P){return P.copy(ee.getClearColor())},this.setClearColor=function(){ee.setClearColor.apply(ee,arguments)},this.getClearAlpha=function(){return ee.getClearAlpha()},this.setClearAlpha=function(){ee.setClearAlpha.apply(ee,arguments)},this.clear=function(P=!0,Y=!0,se=!0){let q=0;if(P){let le=!1;if(null!==D){const ze=D.texture.format;le=1033===ze||1031===ze||1029===ze}if(le){const ze=D.texture.type,tt=ze===la||ze===ca||1012===ze||ze===rl||1017===ze||1018===ze,ut=ee.getClearColor(),gt=ee.getClearAlpha(),kt=ut.r,vt=ut.g,Mt=ut.b,un=Be.get(D).__webglFramebuffer;tt?(f[0]=kt,f[1]=vt,f[2]=Mt,f[3]=gt,N.clearBufferuiv(N.COLOR,un,f)):(p[0]=kt,p[1]=vt,p[2]=Mt,p[3]=gt,N.clearBufferiv(N.COLOR,un,p))}else q|=N.COLOR_BUFFER_BIT}Y&&(q|=N.DEPTH_BUFFER_BIT),se&&(q|=N.STENCIL_BUFFER_BIT),N.clear(q)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",ke,!1),t.removeEventListener("webglcontextrestored",te,!1),t.removeEventListener("webglcontextcreationerror",Ae,!1),ve.dispose(),F.dispose(),Be.dispose(),ot.dispose(),Ot.dispose(),E.dispose(),He.dispose(),st.dispose(),oe.dispose(),U.dispose(),U.removeEventListener("sessionstart",Tn),U.removeEventListener("sessionend",Yo),Ee&&(Ee.dispose(),Ee=null),Gi.stop()},this.renderBufferDirect=function(P,Y,se,q,le,ze){null===Y&&(Y=mt);const tt=le.isMesh&&le.matrixWorld.determinant()<0,ut=function nce(P,Y,se,q,le){!0!==Y.isScene&&(Y=mt),Ue.resetTextureUnits();const ze=Y.fog,ut=null===D?v.outputColorSpace:!0===D.isXRRenderTarget?D.texture.colorSpace:zo,gt=(q.isMeshStandardMaterial?Ot:ot).get(q.envMap||(q.isMeshStandardMaterial?Y.environment:null)),kt=!0===q.vertexColors&&!!se.attributes.color&&4===se.attributes.color.itemSize,vt=!!se.attributes.tangent&&(!!q.normalMap||q.anisotropy>0),Mt=!!se.morphAttributes.position,un=!!se.morphAttributes.normal,On=!!se.morphAttributes.color,go=q.toneMapped?v.toneMapping:vs,Ls=se.morphAttributes.position||se.morphAttributes.normal||se.morphAttributes.color,jn=void 0!==Ls?Ls.length:0,Ht=Be.get(q),WM=m.state.lights;!0!==re||!0!==De&&P===C||me.setState(q,P,P===C&&q.id===I);let ci=!1;q.version===Ht.__version?(Ht.needsLights&&Ht.lightsStateVersion!==WM.state.version||Ht.outputColorSpace!==ut||le.isInstancedMesh&&!1===Ht.instancing||!le.isInstancedMesh&&!0===Ht.instancing||le.isSkinnedMesh&&!1===Ht.skinning||!le.isSkinnedMesh&&!0===Ht.skinning||Ht.envMap!==gt||!0===q.fog&&Ht.fog!==ze||void 0!==Ht.numClippingPlanes&&(Ht.numClippingPlanes!==me.numPlanes||Ht.numIntersection!==me.numIntersection)||Ht.vertexAlphas!==kt||Ht.vertexTangents!==vt||Ht.morphTargets!==Mt||Ht.morphNormals!==un||Ht.morphColors!==On||Ht.toneMapping!==go||!0===Me.isWebGL2&&Ht.morphTargetsCount!==jn)&&(ci=!0):(ci=!0,Ht.__version=q.version);let Ul=Ht.currentProgram;!0===ci&&(Ul=L_(q,Y,le));let AL=!1,bf=!1,$M=!1;const ji=Ul.getUniforms(),Vl=Ht.uniforms;if(pe.useProgram(Ul.program)&&(AL=!0,bf=!0,$M=!0),q.id!==I&&(I=q.id,bf=!0),AL||C!==P){if(ji.setValue(N,"projectionMatrix",P.projectionMatrix),Me.logarithmicDepthBuffer&&ji.setValue(N,"logDepthBufFC",2/(Math.log(P.far+1)/Math.LN2)),C!==P&&(C=P,bf=!0,$M=!0),q.isShaderMaterial||q.isMeshPhongMaterial||q.isMeshToonMaterial||q.isMeshStandardMaterial||q.envMap){const wr=ji.map.cameraPosition;void 0!==wr&&wr.setValue(N,Ve.setFromMatrixPosition(P.matrixWorld))}(q.isMeshPhongMaterial||q.isMeshToonMaterial||q.isMeshLambertMaterial||q.isMeshBasicMaterial||q.isMeshStandardMaterial||q.isShaderMaterial)&&ji.setValue(N,"isOrthographic",!0===P.isOrthographicCamera),(q.isMeshPhongMaterial||q.isMeshToonMaterial||q.isMeshLambertMaterial||q.isMeshBasicMaterial||q.isMeshStandardMaterial||q.isShaderMaterial||q.isShadowMaterial||le.isSkinnedMesh)&&ji.setValue(N,"viewMatrix",P.matrixWorldInverse)}if(le.isSkinnedMesh){ji.setOptional(N,le,"bindMatrix"),ji.setOptional(N,le,"bindMatrixInverse");const wr=le.skeleton;wr&&(Me.floatVertexTextures?(null===wr.boneTexture&&wr.computeBoneTexture(),ji.setValue(N,"boneTexture",wr.boneTexture,Ue),ji.setValue(N,"boneTextureSize",wr.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const qM=se.morphAttributes;if((void 0!==qM.position||void 0!==qM.normal||void 0!==qM.color&&!0===Me.isWebGL2)&&Ge.update(le,se,Ul),(bf||Ht.receiveShadow!==le.receiveShadow)&&(Ht.receiveShadow=le.receiveShadow,ji.setValue(N,"receiveShadow",le.receiveShadow)),q.isMeshGouraudMaterial&&null!==q.envMap&&(Vl.envMap.value=gt,Vl.flipEnvMap.value=gt.isCubeTexture&&!1===gt.isRenderTargetTexture?-1:1),bf&&(ji.setValue(N,"toneMappingExposure",v.toneMappingExposure),Ht.needsLights&&function ice(P,Y){P.ambientLightColor.needsUpdate=Y,P.lightProbe.needsUpdate=Y,P.directionalLights.needsUpdate=Y,P.directionalLightShadows.needsUpdate=Y,P.pointLights.needsUpdate=Y,P.pointLightShadows.needsUpdate=Y,P.spotLights.needsUpdate=Y,P.spotLightShadows.needsUpdate=Y,P.rectAreaLights.needsUpdate=Y,P.hemisphereLights.needsUpdate=Y}(Vl,$M),ze&&!0===q.fog&&be.refreshFogUniforms(Vl,ze),be.refreshMaterialUniforms(Vl,q,H,z,Ee),xg.upload(N,Ht.uniformsList,Vl,Ue)),q.isShaderMaterial&&!0===q.uniformsNeedUpdate&&(xg.upload(N,Ht.uniformsList,Vl,Ue),q.uniformsNeedUpdate=!1),q.isSpriteMaterial&&ji.setValue(N,"center",le.center),ji.setValue(N,"modelViewMatrix",le.modelViewMatrix),ji.setValue(N,"normalMatrix",le.normalMatrix),ji.setValue(N,"modelMatrix",le.matrixWorld),q.isShaderMaterial||q.isRawShaderMaterial){const wr=q.uniformsGroups;for(let XM=0,oce=wr.length;XM<oce;XM++)if(Me.isWebGL2){const IL=wr[XM];st.update(IL,Ul),st.bind(IL,Ul)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return Ul}(P,Y,se,q,le);pe.setMaterial(q,tt);let gt=se.index,kt=1;!0===q.wireframe&&(gt=k.getWireframeAttribute(se),kt=2);const vt=se.drawRange,Mt=se.attributes.position;let un=vt.start*kt,On=(vt.start+vt.count)*kt;null!==ze&&(un=Math.max(un,ze.start*kt),On=Math.min(On,(ze.start+ze.count)*kt)),null!==gt?(un=Math.max(un,0),On=Math.min(On,gt.count)):null!=Mt&&(un=Math.max(un,0),On=Math.min(On,Mt.count));const go=On-un;if(go<0||go===1/0)return;He.setup(le,q,ut,se,gt);let Ls,jn=Ke;if(null!==gt&&(Ls=pn.get(gt),jn=Xe,jn.setIndex(Ls)),le.isMesh)!0===q.wireframe?(pe.setLineWidth(q.wireframeLinewidth*Ze()),jn.setMode(N.LINES)):jn.setMode(N.TRIANGLES);else if(le.isLine){let Ht=q.linewidth;void 0===Ht&&(Ht=1),pe.setLineWidth(Ht*Ze()),jn.setMode(le.isLineSegments?N.LINES:le.isLineLoop?N.LINE_LOOP:N.LINE_STRIP)}else le.isPoints?jn.setMode(N.POINTS):le.isSprite&&jn.setMode(N.TRIANGLES);if(le.isInstancedMesh)jn.renderInstances(un,go,le.count);else if(se.isInstancedBufferGeometry){const WM=Math.min(se.instanceCount,void 0!==se._maxInstanceCount?se._maxInstanceCount:1/0);jn.renderInstances(un,go,WM)}else jn.render(un,go)},this.compile=function(P,Y){function se(q,le,ze){!0===q.transparent&&2===q.side&&!1===q.forceSinglePass?(q.side=1,q.needsUpdate=!0,L_(q,le,ze),q.side=0,q.needsUpdate=!0,L_(q,le,ze),q.side=2):L_(q,le,ze)}m=F.get(P),m.init(),b.push(m),P.traverseVisible(function(q){q.isLight&&q.layers.test(Y.layers)&&(m.pushLight(q),q.castShadow&&m.pushShadow(q))}),m.setupLights(v.useLegacyLights),P.traverse(function(q){const le=q.material;if(le)if(Array.isArray(le))for(let ze=0;ze<le.length;ze++)se(le[ze],P,q);else se(le,P,q)}),b.pop(),m=null};let Gn=null;function Tn(){Gi.stop()}function Yo(){Gi.start()}const Gi=new kk;function SL(P,Y,se,q){if(!1===P.visible)return;if(P.layers.test(Y.layers))if(P.isGroup)se=P.renderOrder;else if(P.isLOD)!0===P.autoUpdate&&P.update(Y);else if(P.isLight)m.pushLight(P),P.castShadow&&m.pushShadow(P);else if(P.isSprite){if(!P.frustumCulled||ue.intersectsSprite(P)){q&&Ve.setFromMatrixPosition(P.matrixWorld).applyMatrix4(Se);const tt=E.update(P),ut=P.material;ut.visible&&_.push(P,tt,ut,se,Ve.z,null)}}else if((P.isMesh||P.isLine||P.isPoints)&&(!P.frustumCulled||ue.intersectsObject(P))){P.isSkinnedMesh&&P.skeleton.frame!==qe.render.frame&&(P.skeleton.update(),P.skeleton.frame=qe.render.frame);const tt=E.update(P),ut=P.material;if(q&&(void 0!==P.boundingSphere?(null===P.boundingSphere&&P.computeBoundingSphere(),Ve.copy(P.boundingSphere.center)):(null===tt.boundingSphere&&tt.computeBoundingSphere(),Ve.copy(tt.boundingSphere.center)),Ve.applyMatrix4(P.matrixWorld).applyMatrix4(Se)),Array.isArray(ut)){const gt=tt.groups;for(let kt=0,vt=gt.length;kt<vt;kt++){const Mt=gt[kt],un=ut[Mt.materialIndex];un&&un.visible&&_.push(P,tt,un,se,Ve.z,Mt)}}else ut.visible&&_.push(P,tt,ut,se,Ve.z,null)}const ze=P.children;for(let tt=0,ut=ze.length;tt<ut;tt++)SL(ze[tt],Y,se,q)}function EL(P,Y,se,q){const le=P.opaque,ze=P.transmissive,tt=P.transparent;m.setupLightsView(se),!0===re&&me.setGlobalState(v.clippingPlanes,se),ze.length>0&&function tce(P,Y,se,q){const le=Me.isWebGL2;null===Ee&&(Ee=new dl(1,1,{generateMipmaps:!0,type:de.has("EXT_color_buffer_half_float")?Ch:la,minFilter:bs,samples:le&&!0===a?4:0})),v.getDrawingBufferSize($e),le?Ee.setSize($e.x,$e.y):Ee.setSize(Zm($e.x),Zm($e.y));const ze=v.getRenderTarget();v.setRenderTarget(Ee),v.getClearColor(V),G=v.getClearAlpha(),G<1&&v.setClearColor(16777215,.5),v.clear();const tt=v.toneMapping;v.toneMapping=vs,N_(P,se,q),Ue.updateMultisampleRenderTarget(Ee),Ue.updateRenderTargetMipmap(Ee);let ut=!1;for(let gt=0,kt=Y.length;gt<kt;gt++){const vt=Y[gt],Mt=vt.object,un=vt.geometry,On=vt.material,go=vt.group;if(2===On.side&&Mt.layers.test(q.layers)){const Ls=On.side;On.side=1,On.needsUpdate=!0,TL(Mt,se,q,un,On,go),On.side=Ls,On.needsUpdate=!0,ut=!0}}!0===ut&&(Ue.updateMultisampleRenderTarget(Ee),Ue.updateRenderTargetMipmap(Ee)),v.setRenderTarget(ze),v.setClearColor(V,G),v.toneMapping=tt}(le,ze,Y,se),q&&pe.viewport(T.copy(q)),le.length>0&&N_(le,Y,se),ze.length>0&&N_(ze,Y,se),tt.length>0&&N_(tt,Y,se),pe.buffers.depth.setTest(!0),pe.buffers.depth.setMask(!0),pe.buffers.color.setMask(!0),pe.setPolygonOffset(!1)}function N_(P,Y,se){const q=!0===Y.isScene?Y.overrideMaterial:null;for(let le=0,ze=P.length;le<ze;le++){const tt=P[le],ut=tt.object,gt=tt.geometry,kt=null===q?tt.material:q,vt=tt.group;ut.layers.test(se.layers)&&TL(ut,Y,se,gt,kt,vt)}}function TL(P,Y,se,q,le,ze){P.onBeforeRender(v,Y,se,q,le,ze),P.modelViewMatrix.multiplyMatrices(se.matrixWorldInverse,P.matrixWorld),P.normalMatrix.getNormalMatrix(P.modelViewMatrix),le.onBeforeRender(v,Y,se,q,P,ze),!0===le.transparent&&2===le.side&&!1===le.forceSinglePass?(le.side=1,le.needsUpdate=!0,v.renderBufferDirect(se,Y,q,le,P,ze),le.side=0,le.needsUpdate=!0,v.renderBufferDirect(se,Y,q,le,P,ze),le.side=2):v.renderBufferDirect(se,Y,q,le,P,ze),P.onAfterRender(v,Y,se,q,le,ze)}function L_(P,Y,se){!0!==Y.isScene&&(Y=mt);const q=Be.get(P),le=m.state.lights,tt=le.state.version,ut=oe.getParameters(P,le.state,m.state.shadowsArray,Y,se),gt=oe.getProgramCacheKey(ut);let kt=q.programs;q.environment=P.isMeshStandardMaterial?Y.environment:null,q.fog=Y.fog,q.envMap=(P.isMeshStandardMaterial?Ot:ot).get(P.envMap||q.environment),void 0===kt&&(P.addEventListener("dispose",Ne),kt=new Map,q.programs=kt);let vt=kt.get(gt);if(void 0!==vt){if(q.currentProgram===vt&&q.lightsStateVersion===tt)return DL(P,ut),vt}else ut.uniforms=oe.getUniforms(P),P.onBuild(se,ut,v),P.onBeforeCompile(ut,v),vt=oe.acquireProgram(ut,gt),kt.set(gt,vt),q.uniforms=ut.uniforms;const Mt=q.uniforms;(!P.isShaderMaterial&&!P.isRawShaderMaterial||!0===P.clipping)&&(Mt.clippingPlanes=me.uniform),DL(P,ut),q.needsLights=function rce(P){return P.isMeshLambertMaterial||P.isMeshToonMaterial||P.isMeshPhongMaterial||P.isMeshStandardMaterial||P.isShadowMaterial||P.isShaderMaterial&&!0===P.lights}(P),q.lightsStateVersion=tt,q.needsLights&&(Mt.ambientLightColor.value=le.state.ambient,Mt.lightProbe.value=le.state.probe,Mt.directionalLights.value=le.state.directional,Mt.directionalLightShadows.value=le.state.directionalShadow,Mt.spotLights.value=le.state.spot,Mt.spotLightShadows.value=le.state.spotShadow,Mt.rectAreaLights.value=le.state.rectArea,Mt.ltc_1.value=le.state.rectAreaLTC1,Mt.ltc_2.value=le.state.rectAreaLTC2,Mt.pointLights.value=le.state.point,Mt.pointLightShadows.value=le.state.pointShadow,Mt.hemisphereLights.value=le.state.hemi,Mt.directionalShadowMap.value=le.state.directionalShadowMap,Mt.directionalShadowMatrix.value=le.state.directionalShadowMatrix,Mt.spotShadowMap.value=le.state.spotShadowMap,Mt.spotLightMatrix.value=le.state.spotLightMatrix,Mt.spotLightMap.value=le.state.spotLightMap,Mt.pointShadowMap.value=le.state.pointShadowMap,Mt.pointShadowMatrix.value=le.state.pointShadowMatrix);const un=vt.getUniforms(),On=xg.seqWithValue(un.seq,Mt);return q.currentProgram=vt,q.uniformsList=On,vt}function DL(P,Y){const se=Be.get(P);se.outputColorSpace=Y.outputColorSpace,se.instancing=Y.instancing,se.skinning=Y.skinning,se.morphTargets=Y.morphTargets,se.morphNormals=Y.morphNormals,se.morphColors=Y.morphColors,se.morphTargetsCount=Y.morphTargetsCount,se.numClippingPlanes=Y.numClippingPlanes,se.numIntersection=Y.numClipIntersection,se.vertexAlphas=Y.vertexAlphas,se.vertexTangents=Y.vertexTangents,se.toneMapping=Y.toneMapping}Gi.setAnimationLoop(function Bl(P){Gn&&Gn(P)}),typeof self<"u"&&Gi.setContext(self),this.setAnimationLoop=function(P){Gn=P,U.setAnimationLoop(P),null===P?Gi.stop():Gi.start()},U.addEventListener("sessionstart",Tn),U.addEventListener("sessionend",Yo),this.render=function(P,Y){if(void 0===Y||!0===Y.isCamera){if(!0!==y){if(!0===P.matrixWorldAutoUpdate&&P.updateMatrixWorld(),null===Y.parent&&!0===Y.matrixWorldAutoUpdate&&Y.updateMatrixWorld(),!0===U.enabled&&!0===U.isPresenting&&(Y=U.updateCameraXR(Y)),!0===P.isScene&&P.onBeforeRender(v,P,Y,D),m=F.get(P,b.length),m.init(),b.push(m),Se.multiplyMatrices(Y.projectionMatrix,Y.matrixWorldInverse),ue.setFromProjectionMatrix(Se),De=this.localClippingEnabled,re=me.init(this.clippingPlanes,De),_=ve.get(P,g.length),_.init(),g.push(_),SL(P,Y,0,v.sortObjects),_.finish(),!0===v.sortObjects&&_.sort(W,K),!0===re&&me.beginShadows(),ge.render(m.state.shadowsArray,P,Y),!0===re&&me.endShadows(),!0===this.info.autoReset&&this.info.reset(),this.info.render.frame++,ee.render(_,P),m.setupLights(v.useLegacyLights),Y.isArrayCamera){const q=Y.cameras;for(let le=0,ze=q.length;le<ze;le++){const tt=q[le];EL(_,P,tt,tt.viewport)}}else EL(_,P,Y);null!==D&&(Ue.updateMultisampleRenderTarget(D),Ue.updateRenderTargetMipmap(D)),!0===P.isScene&&P.onAfterRender(v,P,Y),He.resetDefaultState(),I=-1,C=null,b.pop(),m=b.length>0?b[b.length-1]:null,g.pop(),_=g.length>0?g[g.length-1]:null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.getActiveCubeFace=function(){return x},this.getActiveMipmapLevel=function(){return S},this.getRenderTarget=function(){return D},this.setRenderTargetTextures=function(P,Y,se){Be.get(P.texture).__webglTexture=Y,Be.get(P.depthTexture).__webglTexture=se;const q=Be.get(P);q.__hasExternalTextures=!0,q.__hasExternalTextures&&(q.__autoAllocateDepthBuffer=void 0===se,q.__autoAllocateDepthBuffer||!0===de.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),q.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(P,Y){const se=Be.get(P);se.__webglFramebuffer=Y,se.__useDefaultFramebuffer=void 0===Y},this.setRenderTarget=function(P,Y=0,se=0){D=P,x=Y,S=se;let q=!0,le=null,ze=!1,tt=!1;if(P){const gt=Be.get(P);void 0!==gt.__useDefaultFramebuffer?(pe.bindFramebuffer(N.FRAMEBUFFER,null),q=!1):void 0===gt.__webglFramebuffer?Ue.setupRenderTarget(P):gt.__hasExternalTextures&&Ue.rebindTextures(P,Be.get(P.texture).__webglTexture,Be.get(P.depthTexture).__webglTexture);const kt=P.texture;(kt.isData3DTexture||kt.isDataArrayTexture||kt.isCompressedArrayTexture)&&(tt=!0);const vt=Be.get(P).__webglFramebuffer;P.isWebGLCubeRenderTarget?(le=vt[Y],ze=!0):le=Me.isWebGL2&&P.samples>0&&!1===Ue.useMultisampledRTT(P)?Be.get(P).__webglMultisampledFramebuffer:vt,T.copy(P.viewport),j.copy(P.scissor),ie=P.scissorTest}else T.copy(ae).multiplyScalar(H).floor(),j.copy(Ce).multiplyScalar(H).floor(),ie=X;if(pe.bindFramebuffer(N.FRAMEBUFFER,le)&&Me.drawBuffers&&q&&pe.drawBuffers(P,le),pe.viewport(T),pe.scissor(j),pe.setScissorTest(ie),ze){const gt=Be.get(P.texture);N.framebufferTexture2D(N.FRAMEBUFFER,N.COLOR_ATTACHMENT0,N.TEXTURE_CUBE_MAP_POSITIVE_X+Y,gt.__webglTexture,se)}else if(tt){const gt=Be.get(P.texture);N.framebufferTextureLayer(N.FRAMEBUFFER,N.COLOR_ATTACHMENT0,gt.__webglTexture,se||0,Y||0)}I=-1},this.readRenderTargetPixels=function(P,Y,se,q,le,ze,tt){if(!P||!P.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let ut=Be.get(P).__webglFramebuffer;if(P.isWebGLCubeRenderTarget&&void 0!==tt&&(ut=ut[tt]),ut){pe.bindFramebuffer(N.FRAMEBUFFER,ut);try{const gt=P.texture,kt=gt.format,vt=gt.type;if(kt!==Lr&&je.convert(kt)!==N.getParameter(N.IMPLEMENTATION_COLOR_READ_FORMAT))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const Mt=vt===Ch&&(de.has("EXT_color_buffer_half_float")||Me.isWebGL2&&de.has("EXT_color_buffer_float"));if(!(vt===la||je.convert(vt)===N.getParameter(N.IMPLEMENTATION_COLOR_READ_TYPE)||vt===ys&&(Me.isWebGL2||de.has("OES_texture_float")||de.has("WEBGL_color_buffer_float"))||Mt))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");Y>=0&&Y<=P.width-q&&se>=0&&se<=P.height-le&&N.readPixels(Y,se,q,le,je.convert(kt),je.convert(vt),ze)}finally{const gt=null!==D?Be.get(D).__webglFramebuffer:null;pe.bindFramebuffer(N.FRAMEBUFFER,gt)}}},this.copyFramebufferToTexture=function(P,Y,se=0){const q=Math.pow(2,-se),le=Math.floor(Y.image.width*q),ze=Math.floor(Y.image.height*q);Ue.setTexture2D(Y,0),N.copyTexSubImage2D(N.TEXTURE_2D,se,0,0,P.x,P.y,le,ze),pe.unbindTexture()},this.copyTextureToTexture=function(P,Y,se,q=0){const le=Y.image.width,ze=Y.image.height,tt=je.convert(se.format),ut=je.convert(se.type);Ue.setTexture2D(se,0),N.pixelStorei(N.UNPACK_FLIP_Y_WEBGL,se.flipY),N.pixelStorei(N.UNPACK_PREMULTIPLY_ALPHA_WEBGL,se.premultiplyAlpha),N.pixelStorei(N.UNPACK_ALIGNMENT,se.unpackAlignment),Y.isDataTexture?N.texSubImage2D(N.TEXTURE_2D,q,P.x,P.y,le,ze,tt,ut,Y.image.data):Y.isCompressedTexture?N.compressedTexSubImage2D(N.TEXTURE_2D,q,P.x,P.y,Y.mipmaps[0].width,Y.mipmaps[0].height,tt,Y.mipmaps[0].data):N.texSubImage2D(N.TEXTURE_2D,q,P.x,P.y,tt,ut,Y.image),0===q&&se.generateMipmaps&&N.generateMipmap(N.TEXTURE_2D),pe.unbindTexture()},this.copyTextureToTexture3D=function(P,Y,se,q,le=0){if(v.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");const ze=P.max.x-P.min.x+1,tt=P.max.y-P.min.y+1,ut=P.max.z-P.min.z+1,gt=je.convert(q.format),kt=je.convert(q.type);let vt;if(q.isData3DTexture)Ue.setTexture3D(q,0),vt=N.TEXTURE_3D;else{if(!q.isDataArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");Ue.setTexture2DArray(q,0),vt=N.TEXTURE_2D_ARRAY}N.pixelStorei(N.UNPACK_FLIP_Y_WEBGL,q.flipY),N.pixelStorei(N.UNPACK_PREMULTIPLY_ALPHA_WEBGL,q.premultiplyAlpha),N.pixelStorei(N.UNPACK_ALIGNMENT,q.unpackAlignment);const Mt=N.getParameter(N.UNPACK_ROW_LENGTH),un=N.getParameter(N.UNPACK_IMAGE_HEIGHT),On=N.getParameter(N.UNPACK_SKIP_PIXELS),go=N.getParameter(N.UNPACK_SKIP_ROWS),Ls=N.getParameter(N.UNPACK_SKIP_IMAGES),jn=se.isCompressedTexture?se.mipmaps[0]:se.image;N.pixelStorei(N.UNPACK_ROW_LENGTH,jn.width),N.pixelStorei(N.UNPACK_IMAGE_HEIGHT,jn.height),N.pixelStorei(N.UNPACK_SKIP_PIXELS,P.min.x),N.pixelStorei(N.UNPACK_SKIP_ROWS,P.min.y),N.pixelStorei(N.UNPACK_SKIP_IMAGES,P.min.z),se.isDataTexture||se.isData3DTexture?N.texSubImage3D(vt,le,Y.x,Y.y,Y.z,ze,tt,ut,gt,kt,jn.data):se.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),N.compressedTexSubImage3D(vt,le,Y.x,Y.y,Y.z,ze,tt,ut,gt,jn.data)):N.texSubImage3D(vt,le,Y.x,Y.y,Y.z,ze,tt,ut,gt,kt,jn),N.pixelStorei(N.UNPACK_ROW_LENGTH,Mt),N.pixelStorei(N.UNPACK_IMAGE_HEIGHT,un),N.pixelStorei(N.UNPACK_SKIP_PIXELS,On),N.pixelStorei(N.UNPACK_SKIP_ROWS,go),N.pixelStorei(N.UNPACK_SKIP_IMAGES,Ls),0===le&&q.generateMipmaps&&N.generateMipmap(vt),pe.unbindTexture()},this.initTexture=function(P){P.isCubeTexture?Ue.setTextureCube(P,0):P.isData3DTexture?Ue.setTexture3D(P,0):P.isDataArrayTexture||P.isCompressedArrayTexture?Ue.setTexture2DArray(P,0):Ue.setTexture2D(P,0),pe.unbindTexture()},this.resetState=function(){x=0,S=0,D=null,pe.reset(),He.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return xs}get physicallyCorrectLights(){return console.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),!this.useLegacyLights}set physicallyCorrectLights(e){console.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),this.useLegacyLights=!e}get outputEncoding(){return console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace===lt?sl:3e3}set outputEncoding(e){console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace=e===sl?lt:zo}}(class SJ extends cF{}).prototype.isWebGL1Renderer=!0;class dF extends oi{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return null!==this.fog&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),1!==this.backgroundIntensity&&(t.object.backgroundIntensity=this.backgroundIntensity),t}get autoUpdate(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate}set autoUpdate(e){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=e}}class Yx{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.usage=35044,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=_r()}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,i){e*=this.stride,i*=t.stride;for(let r=0,o=this.stride;r<o;r++)this.array[e+r]=t.array[i+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=_r()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(t,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=_r()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const zi=new R;class vl{constructor(e,t,i,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=i,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,i=this.data.count;t<i;t++)zi.fromBufferAttribute(this,t),zi.applyMatrix4(e),this.setXYZ(t,zi.x,zi.y,zi.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)zi.fromBufferAttribute(this,t),zi.applyNormalMatrix(e),this.setXYZ(t,zi.x,zi.y,zi.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)zi.fromBufferAttribute(this,t),zi.transformDirection(e),this.setXYZ(t,zi.x,zi.y,zi.z);return this}setX(e,t){return this.normalized&&(t=Ct(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=Ct(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=Ct(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=Ct(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=vr(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=vr(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=vr(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=vr(t,this.array)),t}setXY(e,t,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=Ct(t,this.array),i=Ct(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this}setXYZ(e,t,i,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=Ct(t,this.array),i=Ct(i,this.array),r=Ct(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this}setXYZW(e,t,i,r,o){return e=e*this.data.stride+this.offset,this.normalized&&(t=Ct(t,this.array),i=Ct(i,this.array),r=Ct(r,this.array),o=Ct(o,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this.data.array[e+3]=o,this}clone(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let o=0;o<this.itemSize;o++)t.push(this.data.array[r+o])}return new Mn(new this.array.constructor(t),this.itemSize,this.normalized)}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new vl(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let o=0;o<this.itemSize;o++)t.push(this.data.array[r+o])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}const gF=new R,_F=new Jt,vF=new Jt,DJ=new R,bF=new ct,Rd=new R,Kx=new uo,yF=new ct,Qx=new Ah;class xF extends Ii{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new ct,this.bindMatrixInverse=new ct,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;null===this.boundingBox&&(this.boundingBox=new Go),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)Rd.fromBufferAttribute(t,i),this.applyBoneTransform(i,Rd),this.boundingBox.expandByPoint(Rd)}computeBoundingSphere(){const e=this.geometry;null===this.boundingSphere&&(this.boundingSphere=new uo),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)Rd.fromBufferAttribute(t,i),this.applyBoneTransform(i,Rd),this.boundingSphere.expandByPoint(Rd)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const r=this.matrixWorld;void 0!==this.material&&(null===this.boundingSphere&&this.computeBoundingSphere(),Kx.copy(this.boundingSphere),Kx.applyMatrix4(r),!1!==e.ray.intersectsSphere(Kx)&&(yF.copy(r).invert(),Qx.copy(e.ray).applyMatrix4(yF),(null===this.boundingBox||!1!==Qx.intersectsBox(this.boundingBox))&&this._computeIntersections(e,t,Qx)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Jt,t=this.geometry.attributes.skinWeight;for(let i=0,r=t.count;i<r;i++){e.fromBufferAttribute(t,i);const o=1/e.manhattanLength();o!==1/0?e.multiplyScalar(o):e.set(1,0,0,0),t.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const i=this.skeleton,r=this.geometry;_F.fromBufferAttribute(r.attributes.skinIndex,e),vF.fromBufferAttribute(r.attributes.skinWeight,e),gF.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let o=0;o<4;o++){const s=vF.getComponent(o);if(0!==s){const a=_F.getComponent(o);bF.multiplyMatrices(i.bones[a].matrixWorld,i.boneInverses[a]),t.addScaledVector(DJ.copy(gF).applyMatrix4(bF),s)}}return t.applyMatrix4(this.bindMatrixInverse)}boneTransform(e,t){return console.warn("THREE.SkinnedMesh: .boneTransform() was renamed to .applyBoneTransform() in r151."),this.applyBoneTransform(e,t)}}class Jx extends oi{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Lh extends co{constructor(e=null,t=1,i=1,r,o,s,a,l,c=Rn,d=Rn,u,h){super(null,s,a,l,c,d,r,o,u,h),this.isDataTexture=!0,this.image={data:e,width:t,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const CF=new ct,AJ=new ct;class Eg{constructor(e=[],t=[]){this.uuid=_r(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(16*e.length),0===t.length)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,r=this.bones.length;i<r;i++)this.boneInverses.push(new ct)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const i=new ct;this.bones[e]&&i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){const e=this.bones,t=this.boneInverses,i=this.boneMatrices,r=this.boneTexture;for(let o=0,s=e.length;o<s;o++)CF.multiplyMatrices(e[o]?e[o].matrixWorld:AJ,t[o]),CF.toArray(i,16*o);null!==r&&(r.needsUpdate=!0)}clone(){return new Eg(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(4*this.bones.length);e=uk(e),e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const i=new Lh(t,e,e,Lr,ys);return i.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=i,this.boneTextureSize=e,this}getBoneByName(e){for(let t=0,i=this.bones.length;t<i;t++){const r=this.bones[t];if(r.name===e)return r}}dispose(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let i=0,r=e.bones.length;i<r;i++){const o=e.bones[i];let s=t[o];void 0===s&&(console.warn("THREE.Skeleton: No bone found with UUID:",o),s=new Jx),this.bones.push(s),this.boneInverses.push((new ct).fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,i=this.boneInverses;for(let r=0,o=t.length;r<o;r++)e.bones.push(t[r].uuid),e.boneInverses.push(i[r].toArray());return e}}class Bh extends Mn{constructor(e,t,i,r=1){super(e,t,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const Pd=new ct,MF=new ct,Tg=[],wF=new Go,IJ=new ct,Uh=new Ii,Vh=new uo;class SF extends Ii{constructor(e,t,i){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new Bh(new Float32Array(16*i),16),this.instanceColor=null,this.count=i,this.boundingBox=null,this.boundingSphere=null;for(let r=0;r<i;r++)this.setMatrixAt(r,IJ)}computeBoundingBox(){const e=this.geometry,t=this.count;null===this.boundingBox&&(this.boundingBox=new Go),null===e.boundingBox&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,Pd),wF.copy(e.boundingBox).applyMatrix4(Pd),this.boundingBox.union(wF)}computeBoundingSphere(){const e=this.geometry,t=this.count;null===this.boundingSphere&&(this.boundingSphere=new uo),null===e.boundingSphere&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,Pd),Vh.copy(e.boundingSphere).applyMatrix4(Pd),this.boundingSphere.union(Vh)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),null!==e.instanceColor&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,3*e)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,16*e)}raycast(e,t){const i=this.matrixWorld,r=this.count;if(Uh.geometry=this.geometry,Uh.material=this.material,void 0!==Uh.material&&(null===this.boundingSphere&&this.computeBoundingSphere(),Vh.copy(this.boundingSphere),Vh.applyMatrix4(i),!1!==e.ray.intersectsSphere(Vh)))for(let o=0;o<r;o++){this.getMatrixAt(o,Pd),MF.multiplyMatrices(i,Pd),Uh.matrixWorld=MF,Uh.raycast(e,Tg);for(let s=0,a=Tg.length;s<a;s++){const l=Tg[s];l.instanceId=o,l.object=this,t.push(l)}Tg.length=0}}setColorAt(e,t){null===this.instanceColor&&(this.instanceColor=new Bh(new Float32Array(3*this.instanceMatrix.count),3)),t.toArray(this.instanceColor.array,3*e)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,16*e)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}class ir extends po{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Pe(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const EF=new R,TF=new R,DF=new ct,eC=new Ah,Dg=new uo;class bl extends oi{constructor(e=new It,t=new ir){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(null===e.index){const t=e.attributes.position,i=[0];for(let r=1,o=t.count;r<o;r++)EF.fromBufferAttribute(t,r-1),TF.fromBufferAttribute(t,r),i[r]=i[r-1],i[r]+=EF.distanceTo(TF);e.setAttribute("lineDistance",new We(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,o=e.params.Line.threshold,s=i.drawRange;if(null===i.boundingSphere&&i.computeBoundingSphere(),Dg.copy(i.boundingSphere),Dg.applyMatrix4(r),Dg.radius+=o,!1===e.ray.intersectsSphere(Dg))return;DF.copy(r).invert(),eC.copy(e.ray).applyMatrix4(DF);const a=o/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=new R,d=new R,u=new R,h=new R,f=this.isLineSegments?2:1,p=i.index,m=i.attributes.position;if(null!==p)for(let v=Math.max(0,s.start),y=Math.min(p.count,s.start+s.count)-1;v<y;v+=f){const x=p.getX(v),S=p.getX(v+1);if(c.fromBufferAttribute(m,x),d.fromBufferAttribute(m,S),eC.distanceSqToSegment(c,d,h,u)>l)continue;h.applyMatrix4(this.matrixWorld);const I=e.ray.origin.distanceTo(h);I<e.near||I>e.far||t.push({distance:I,point:u.clone().applyMatrix4(this.matrixWorld),index:v,face:null,faceIndex:null,object:this})}else for(let v=Math.max(0,s.start),y=Math.min(m.count,s.start+s.count)-1;v<y;v+=f){if(c.fromBufferAttribute(m,v),d.fromBufferAttribute(m,v+1),eC.distanceSqToSegment(c,d,h,u)>l)continue;h.applyMatrix4(this.matrixWorld);const S=e.ray.origin.distanceTo(h);S<e.near||S>e.far||t.push({distance:S,point:u.clone().applyMatrix4(this.matrixWorld),index:v,face:null,faceIndex:null,object:this})}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,s=r.length;o<s;o++){const a=r[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=o}}}}}const AF=new R,IF=new R;class tC extends bl{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(null===e.index){const t=e.attributes.position,i=[];for(let r=0,o=t.count;r<o;r+=2)AF.fromBufferAttribute(t,r),IF.fromBufferAttribute(t,r+1),i[r]=0===r?0:i[r-1],i[r+1]=i[r]+AF.distanceTo(IF);e.setAttribute("lineDistance",new We(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class RF extends bl{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class nC extends po{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Pe(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const PF=new ct,iC=new Ah,Ag=new uo,Ig=new R;class OF extends oi{constructor(e=new It,t=new nC){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,o=e.params.Points.threshold,s=i.drawRange;if(null===i.boundingSphere&&i.computeBoundingSphere(),Ag.copy(i.boundingSphere),Ag.applyMatrix4(r),Ag.radius+=o,!1===e.ray.intersectsSphere(Ag))return;PF.copy(r).invert(),iC.copy(e.ray).applyMatrix4(PF);const a=o/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=i.index,u=i.attributes.position;if(null!==c)for(let p=Math.max(0,s.start),_=Math.min(c.count,s.start+s.count);p<_;p++){const m=c.getX(p);Ig.fromBufferAttribute(u,m),kF(Ig,m,l,r,e,t,this)}else for(let p=Math.max(0,s.start),_=Math.min(u.count,s.start+s.count);p<_;p++)Ig.fromBufferAttribute(u,p),kF(Ig,p,l,r,e,t,this)}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,s=r.length;o<s;o++){const a=r[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=o}}}}}function kF(n,e,t,i,r,o,s){const a=iC.distanceSqToPoint(n);if(a<t){const l=new R;iC.closestPointToPoint(n,l),l.applyMatrix4(i);const c=r.ray.origin.distanceTo(l);if(c<r.near||c>r.far)return;o.push({distance:c,distanceToRay:Math.sqrt(a),point:l,index:e,face:null,object:s})}}class zg extends po{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Pe(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Pe(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new ce(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Rs extends zg{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new ce(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Cn(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Pe(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Pe(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Pe(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}function Vr(n,e,t){return EC(n)?new n.constructor(n.subarray(e,void 0!==t?t:n.length)):n.slice(e,t)}function Cl(n,e,t){return!n||!t&&n.constructor===e?n:"number"==typeof e.BYTES_PER_ELEMENT?new e(n):Array.prototype.slice.call(n)}function EC(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function XF(n){const t=n.length,i=new Array(t);for(let r=0;r!==t;++r)i[r]=r;return i.sort(function e(r,o){return n[r]-n[o]}),i}function TC(n,e,t){const i=n.length,r=new n.constructor(i);for(let o=0,s=0;s!==i;++o){const a=t[o]*e;for(let l=0;l!==e;++l)r[s++]=n[a+l]}return r}function DC(n,e,t,i){let r=1,o=n[0];for(;void 0!==o&&void 0===o[i];)o=n[r++];if(void 0===o)return;let s=o[i];if(void 0!==s)if(Array.isArray(s))do{s=o[i],void 0!==s&&(e.push(o.time),t.push.apply(t,s)),o=n[r++]}while(void 0!==o);else if(void 0!==s.toArray)do{s=o[i],void 0!==s&&(e.push(o.time),s.toArray(t,t.length)),o=n[r++]}while(void 0!==o);else do{s=o[i],void 0!==s&&(e.push(o.time),t.push(s)),o=n[r++]}while(void 0!==o)}class qh{constructor(e,t,i,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let i=this._cachedIndex,r=t[i],o=t[i-1];e:{t:{let s;n:{i:if(!(e<r)){for(let a=i+2;;){if(void 0===r){if(e<o)break i;return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===a)break;if(o=r,r=t[++i],e<r)break t}s=t.length;break n}if(e>=o)break e;{const a=t[1];e<a&&(i=2,o=a);for(let l=i-2;;){if(void 0===o)return this._cachedIndex=0,this.copySampleValue_(0);if(i===l)break;if(r=o,o=t[--i-1],e>=o)break t}s=i,i=0}}for(;i<s;){const a=i+s>>>1;e<t[a]?s=a:i=a+1}if(r=t[i],o=t[i-1],void 0===o)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===r)return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,o,r)}return this.interpolate_(i,o,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,o=e*r;for(let s=0;s!==r;++s)t[s]=i[o+s];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class Cee extends qh{constructor(e,t,i,r){super(e,t,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:td,endingEnd:td}}intervalChanged_(e,t,i){const r=this.parameterPositions;let o=e-2,s=e+1,a=r[o],l=r[s];if(void 0===a)switch(this.getSettings_().endingStart){case nd:o=e,a=2*t-i;break;case 2402:o=r.length-2,a=t+r[o]-r[o+1];break;default:o=e,a=i}if(void 0===l)switch(this.getSettings_().endingEnd){case nd:s=e,l=2*i-t;break;case 2402:s=1,l=i+r[1]-r[0];break;default:s=e-1,l=t}const c=.5*(i-t),d=this.valueSize;this._weightPrev=c/(t-a),this._weightNext=c/(l-i),this._offsetPrev=o*d,this._offsetNext=s*d}interpolate_(e,t,i,r){const o=this.resultBuffer,s=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,d=this._offsetPrev,u=this._offsetNext,h=this._weightPrev,f=this._weightNext,p=(i-t)/(r-t),_=p*p,m=_*p,g=-h*m+2*h*_-h*p,b=(1+h)*m+(-1.5-2*h)*_+(-.5+h)*p+1,v=(-1-f)*m+(1.5+f)*_+.5*p,y=f*m-f*_;for(let x=0;x!==a;++x)o[x]=g*s[d+x]+b*s[c+x]+v*s[l+x]+y*s[u+x];return o}}class YF extends qh{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const o=this.resultBuffer,s=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,d=(i-t)/(r-t),u=1-d;for(let h=0;h!==a;++h)o[h]=s[c+h]*u+s[l+h]*d;return o}}class Mee extends qh{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class $o{constructor(e,t,i,r){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Cl(t,this.TimeBufferType),this.values=Cl(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:Cl(e.times,Array),values:Cl(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(i.interpolation=r)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new Mee(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new YF(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new Cee(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case Mh:t=this.InterpolantFactoryMethodDiscrete;break;case ed:t=this.InterpolantFactoryMethodLinear;break;case 2302:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(i);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Mh;case this.InterpolantFactoryMethodLinear:return ed;case this.InterpolantFactoryMethodSmooth:return 2302}}getValueSize(){return this.values.length/this.times.length}shift(e){if(0!==e){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]+=e}return this}scale(e){if(1!==e){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]*=e}return this}trim(e,t){const i=this.times,r=i.length;let o=0,s=r-1;for(;o!==r&&i[o]<e;)++o;for(;-1!==s&&i[s]>t;)--s;if(++s,0!==o||s!==r){o>=s&&(s=Math.max(s,1),o=s-1);const a=this.getValueSize();this.times=Vr(i,o,s),this.values=Vr(this.values,o*a,s*a)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,r=this.values,o=i.length;0===o&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let s=null;for(let a=0;a!==o;a++){const l=i[a];if("number"==typeof l&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),e=!1;break}if(null!==s&&s>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,s),e=!1;break}s=l}if(void 0!==r&&EC(r))for(let a=0,l=r.length;a!==l;++a){const c=r[a];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,c),e=!1;break}}return e}optimize(){const e=Vr(this.times),t=Vr(this.values),i=this.getValueSize(),r=2302===this.getInterpolation(),o=e.length-1;let s=1;for(let a=1;a<o;++a){let l=!1;const c=e[a];if(c!==e[a+1]&&(1!==a||c!==e[0]))if(r)l=!0;else{const u=a*i,h=u-i,f=u+i;for(let p=0;p!==i;++p){const _=t[u+p];if(_!==t[h+p]||_!==t[f+p]){l=!0;break}}}if(l){if(a!==s){e[s]=e[a];const u=a*i,h=s*i;for(let f=0;f!==i;++f)t[h+f]=t[u+f]}++s}}if(o>0){e[s]=e[o];for(let a=o*i,l=s*i,c=0;c!==i;++c)t[l+c]=t[a+c];++s}return s!==e.length?(this.times=Vr(e,0,s),this.values=Vr(t,0,s*i)):(this.times=e,this.values=t),this}clone(){const e=Vr(this.times,0),t=Vr(this.values,0),r=new(0,this.constructor)(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}}$o.prototype.TimeBufferType=Float32Array,$o.prototype.ValueBufferType=Float32Array,$o.prototype.DefaultInterpolation=ed;class Fd extends $o{}Fd.prototype.ValueTypeName="bool",Fd.prototype.ValueBufferType=Array,Fd.prototype.DefaultInterpolation=Mh,Fd.prototype.InterpolantFactoryMethodLinear=void 0,Fd.prototype.InterpolantFactoryMethodSmooth=void 0;class ZF extends $o{}ZF.prototype.ValueTypeName="color";class Xh extends $o{}Xh.prototype.ValueTypeName="number";class wee extends qh{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const o=this.resultBuffer,s=this.sampleValues,a=this.valueSize,l=(i-t)/(r-t);let c=e*a;for(let d=c+a;c!==d;c+=4)gi.slerpFlat(o,0,s,c-a,s,c,l);return o}}class Ml extends $o{InterpolantFactoryMethodLinear(e){return new wee(this.times,this.values,this.getValueSize(),e)}}Ml.prototype.ValueTypeName="quaternion",Ml.prototype.DefaultInterpolation=ed,Ml.prototype.InterpolantFactoryMethodSmooth=void 0;class Nd extends $o{}Nd.prototype.ValueTypeName="string",Nd.prototype.ValueBufferType=Array,Nd.prototype.DefaultInterpolation=Mh,Nd.prototype.InterpolantFactoryMethodLinear=void 0,Nd.prototype.InterpolantFactoryMethodSmooth=void 0;class Yh extends $o{}Yh.prototype.ValueTypeName="vector";class Zh{constructor(e,t=-1,i,r=2500){this.name=e,this.tracks=i,this.duration=t,this.blendMode=r,this.uuid=_r(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],i=e.tracks,r=1/(e.fps||1);for(let s=0,a=i.length;s!==a;++s)t.push(Eee(i[s]).scale(r));const o=new this(e.name,e.duration,t,e.blendMode);return o.uuid=e.uuid,o}static toJSON(e){const t=[],i=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let o=0,s=i.length;o!==s;++o)t.push($o.toJSON(i[o]));return r}static CreateFromMorphTargetSequence(e,t,i,r){const o=t.length,s=[];for(let a=0;a<o;a++){let l=[],c=[];l.push((a+o-1)%o,a,(a+1)%o),c.push(0,1,0);const d=XF(l);l=TC(l,1,d),c=TC(c,1,d),!r&&0===l[0]&&(l.push(o),c.push(c[0])),s.push(new Xh(".morphTargetInfluences["+t[a].name+"]",l,c).scale(1/i))}return new this(e,-1,s)}static findByName(e,t){let i=e;Array.isArray(e)||(i=e.geometry&&e.geometry.animations||e.animations);for(let r=0;r<i.length;r++)if(i[r].name===t)return i[r];return null}static CreateClipsFromMorphTargetSequences(e,t,i){const r={},o=/^([\w-]*?)([\d]+)$/;for(let a=0,l=e.length;a<l;a++){const c=e[a],d=c.name.match(o);if(d&&d.length>1){const u=d[1];let h=r[u];h||(r[u]=h=[]),h.push(c)}}const s=[];for(const a in r)s.push(this.CreateFromMorphTargetSequence(a,r[a],t,i));return s}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const i=function(u,h,f,p,_){if(0!==f.length){const m=[],g=[];DC(f,m,g,p),0!==m.length&&_.push(new u(h,m,g))}},r=[],o=e.name||"default",s=e.fps||30,a=e.blendMode;let l=e.length||-1;const c=e.hierarchy||[];for(let u=0;u<c.length;u++){const h=c[u].keys;if(h&&0!==h.length)if(h[0].morphTargets){const f={};let p;for(p=0;p<h.length;p++)if(h[p].morphTargets)for(let _=0;_<h[p].morphTargets.length;_++)f[h[p].morphTargets[_]]=-1;for(const _ in f){const m=[],g=[];for(let b=0;b!==h[p].morphTargets.length;++b){const v=h[p];m.push(v.time),g.push(v.morphTarget===_?1:0)}r.push(new Xh(".morphTargetInfluence["+_+"]",m,g))}l=f.length*s}else{const f=".bones["+t[u].name+"]";i(Yh,f+".position",h,"pos",r),i(Ml,f+".quaternion",h,"rot",r),i(Yh,f+".scale",h,"scl",r)}}return 0===r.length?null:new this(o,l,r,a)}resetDuration(){let t=0;for(let i=0,r=this.tracks.length;i!==r;++i){const o=this.tracks[i];t=Math.max(t,o.times[o.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function Eee(n){if(void 0===n.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=function See(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Xh;case"vector":case"vector2":case"vector3":case"vector4":return Yh;case"color":return ZF;case"quaternion":return Ml;case"bool":case"boolean":return Fd;case"string":return Nd}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}(n.type);if(void 0===n.times){const t=[],i=[];DC(n.keys,t,i,"value"),n.times=t,n.values=i}return void 0!==e.parse?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const Ld={enabled:!1,files:{},add:function(n,e){!1!==this.enabled&&(this.files[n]=e)},get:function(n){if(!1!==this.enabled)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class KF{constructor(e,t,i){const r=this;let l,o=!1,s=0,a=0;const c=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(d){a++,!1===o&&void 0!==r.onStart&&r.onStart(d,s,a),o=!0},this.itemEnd=function(d){s++,void 0!==r.onProgress&&r.onProgress(d,s,a),s===a&&(o=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(d){void 0!==r.onError&&r.onError(d)},this.resolveURL=function(d){return l?l(d):d},this.setURLModifier=function(d){return l=d,this},this.addHandler=function(d,u){return c.push(d,u),this},this.removeHandler=function(d){const u=c.indexOf(d);return-1!==u&&c.splice(u,2),this},this.getHandler=function(d){for(let u=0,h=c.length;u<h;u+=2){const f=c[u],p=c[u+1];if(f.global&&(f.lastIndex=0),f.test(d))return p}return null}}}const Tee=new KF;class Kh{constructor(e){this.manager=void 0!==e?e:Tee,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const i=this;return new Promise(function(r,o){i.load(e,r,t,o)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}const Ps={};class Dee extends Error{constructor(e,t){super(e),this.response=t}}class qo extends Kh{constructor(e){super(e)}load(e,t,i,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const o=Ld.get(e);if(void 0!==o)return this.manager.itemStart(e),setTimeout(()=>{t&&t(o),this.manager.itemEnd(e)},0),o;if(void 0!==Ps[e])return void Ps[e].push({onLoad:t,onProgress:i,onError:r});Ps[e]=[],Ps[e].push({onLoad:t,onProgress:i,onError:r});const s=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,l=this.responseType;fetch(s).then(c=>{if(200===c.status||0===c.status){if(0===c.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||void 0===c.body||void 0===c.body.getReader)return c;const d=Ps[e],u=c.body.getReader(),h=c.headers.get("Content-Length")||c.headers.get("X-File-Size"),f=h?parseInt(h):0,p=0!==f;let _=0;const m=new ReadableStream({start(g){!function b(){u.read().then(({done:v,value:y})=>{if(v)g.close();else{_+=y.byteLength;const x=new ProgressEvent("progress",{lengthComputable:p,loaded:_,total:f});for(let S=0,D=d.length;S<D;S++){const I=d[S];I.onProgress&&I.onProgress(x)}g.enqueue(y),b()}})}()}});return new Response(m)}throw new Dee(`fetch for "${c.url}" responded with ${c.status}: ${c.statusText}`,c)}).then(c=>{switch(l){case"arraybuffer":return c.arrayBuffer();case"blob":return c.blob();case"document":return c.text().then(d=>(new DOMParser).parseFromString(d,a));case"json":return c.json();default:if(void 0===a)return c.text();{const u=/charset="?([^;"\s]*)"?/i.exec(a),h=u&&u[1]?u[1].toLowerCase():void 0,f=new TextDecoder(h);return c.arrayBuffer().then(p=>f.decode(p))}}}).then(c=>{Ld.add(e,c);const d=Ps[e];delete Ps[e];for(let u=0,h=d.length;u<h;u++){const f=d[u];f.onLoad&&f.onLoad(c)}}).catch(c=>{const d=Ps[e];if(void 0===d)throw this.manager.itemError(e),c;delete Ps[e];for(let u=0,h=d.length;u<h;u++){const f=d[u];f.onError&&f.onError(c)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class Gg extends Kh{constructor(e){super(e)}load(e,t,i,r){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const o=this,s=Ld.get(e);if(void 0!==s)return o.manager.itemStart(e),setTimeout(function(){t&&t(s),o.manager.itemEnd(e)},0),s;const a=Sh("img");function l(){d(),Ld.add(e,this),t&&t(this),o.manager.itemEnd(e)}function c(u){d(),r&&r(u),o.manager.itemError(e),o.manager.itemEnd(e)}function d(){a.removeEventListener("load",l,!1),a.removeEventListener("error",c,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",c,!1),"data:"!==e.slice(0,5)&&void 0!==this.crossOrigin&&(a.crossOrigin=this.crossOrigin),o.manager.itemStart(e),a.src=e,a}}class Aee extends Kh{constructor(e){super(e)}load(e,t,i,r){const o=new co,s=new Gg(this.manager);return s.setCrossOrigin(this.crossOrigin),s.setPath(this.path),s.load(e,function(a){o.image=a,o.needsUpdate=!0,void 0!==t&&t(o)},i,r),o}}class AC extends oi{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new Pe(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}const IC=new ct,QF=new R,JF=new R;class RC{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new ce(512,512),this.map=null,this.mapPass=null,this.matrix=new ct,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Vx,this._frameExtents=new ce(1,1),this._viewportCount=1,this._viewports=[new Jt(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,i=this.matrix;QF.setFromMatrixPosition(e.matrixWorld),t.position.copy(QF),JF.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(JF),t.updateMatrixWorld(),IC.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(IC),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(IC)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const e={};return 0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),(512!==this.mapSize.x||512!==this.mapSize.y)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class Ree extends RC{constructor(){super(new ai(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,i=2*id*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,o=e.distance||t.far;(i!==t.fov||r!==t.aspect||o!==t.far)&&(t.fov=i,t.aspect=r,t.far=o,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class eN extends AC{constructor(e,t,i=0,r=Math.PI/3,o=0,s=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(oi.DEFAULT_UP),this.updateMatrix(),this.target=new oi,this.distance=i,this.angle=r,this.penumbra=o,this.decay=s,this.map=null,this.shadow=new Ree}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const tN=new ct,Qh=new R,PC=new R;class Pee extends RC{constructor(){super(new ai(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new ce(4,2),this._viewportCount=6,this._viewports=[new Jt(2,1,1,1),new Jt(0,1,1,1),new Jt(3,1,1,1),new Jt(1,1,1,1),new Jt(3,0,1,1),new Jt(1,0,1,1)],this._cubeDirections=[new R(1,0,0),new R(-1,0,0),new R(0,0,1),new R(0,0,-1),new R(0,1,0),new R(0,-1,0)],this._cubeUps=[new R(0,1,0),new R(0,1,0),new R(0,1,0),new R(0,1,0),new R(0,0,1),new R(0,0,-1)]}updateMatrices(e,t=0){const i=this.camera,r=this.matrix,o=e.distance||i.far;o!==i.far&&(i.far=o,i.updateProjectionMatrix()),Qh.setFromMatrixPosition(e.matrixWorld),i.position.copy(Qh),PC.copy(i.position),PC.add(this._cubeDirections[t]),i.up.copy(this._cubeUps[t]),i.lookAt(PC),i.updateMatrixWorld(),r.makeTranslation(-Qh.x,-Qh.y,-Qh.z),tN.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(tN)}}class nN extends AC{constructor(e,t,i=0,r=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=r,this.shadow=new Pee}get power(){return 4*this.intensity*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class Oee extends RC{constructor(){super(new vg(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class iN extends AC{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(oi.DEFAULT_UP),this.updateMatrix(),this.target=new oi,this.shadow=new Oee}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class Jh{static decodeText(e){if(typeof TextDecoder<"u")return(new TextDecoder).decode(e);let t="";for(let i=0,r=e.length;i<r;i++)t+=String.fromCharCode(e[i]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return-1===t?"./":e.slice(0,t+1)}static resolveURL(e,t){return"string"!=typeof e||""===e?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class Hee extends Kh{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,i,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const o=this,s=Ld.get(e);if(void 0!==s)return o.manager.itemStart(e),setTimeout(function(){t&&t(s),o.manager.itemEnd(e)},0),s;const a={};a.credentials="anonymous"===this.crossOrigin?"same-origin":"include",a.headers=this.requestHeader,fetch(e,a).then(function(l){return l.blob()}).then(function(l){return createImageBitmap(l,Object.assign(o.options,{colorSpaceConversion:"none"}))}).then(function(l){Ld.add(e,l),t&&t(l),o.manager.itemEnd(e)}).catch(function(l){r&&r(l),o.manager.itemError(e),o.manager.itemEnd(e)}),o.manager.itemStart(e)}}class cN{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=dN(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=dN();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function dN(){return(typeof performance>"u"?Date:performance).now()}class jee{constructor(e,t,i){let r,o,s;switch(this.binding=e,this.valueSize=i,t){case"quaternion":r=this._slerp,o=this._slerpAdditive,s=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*i),this._workIndex=5;break;case"string":case"bool":r=this._select,o=this._select,s=this._setAdditiveIdentityOther,this.buffer=new Array(5*i);break;default:r=this._lerp,o=this._lerpAdditive,s=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*i)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=o,this._setIdentity=s,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const i=this.buffer,r=this.valueSize,o=e*r+r;let s=this.cumulativeWeight;if(0===s){for(let a=0;a!==r;++a)i[o+a]=i[a];s=t}else s+=t,this._mixBufferRegion(i,o,0,t/s,r);this.cumulativeWeight=s}accumulateAdditive(e){const t=this.buffer,i=this.valueSize,r=i*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,i),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,i=this.buffer,r=e*t+t,o=this.cumulativeWeight,s=this.cumulativeWeightAdditive,a=this.binding;this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,o<1&&this._mixBufferRegion(i,r,t*this._origIndex,1-o,t),s>0&&this._mixBufferRegionAdditive(i,r,this._addIndex*t,1,t);for(let l=t,c=t+t;l!==c;++l)if(i[l]!==i[l+t]){a.setValue(i,r);break}}saveOriginalState(){const t=this.buffer,i=this.valueSize,r=i*this._origIndex;this.binding.getValue(t,r);for(let o=i,s=r;o!==s;++o)t[o]=t[r+o%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){this.binding.setValue(this.buffer,3*this.valueSize)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let i=e;i<t;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[t+i]=this.buffer[e+i]}_select(e,t,i,r,o){if(r>=.5)for(let s=0;s!==o;++s)e[t+s]=e[i+s]}_slerp(e,t,i,r){gi.slerpFlat(e,t,e,t,e,i,r)}_slerpAdditive(e,t,i,r,o){const s=this._workIndex*o;gi.multiplyQuaternionsFlat(e,s,e,t,e,i),gi.slerpFlat(e,t,e,t,e,s,r)}_lerp(e,t,i,r,o){const s=1-r;for(let a=0;a!==o;++a){const l=t+a;e[l]=e[l]*s+e[i+a]*r}}_lerpAdditive(e,t,i,r,o){for(let s=0;s!==o;++s){const a=t+s;e[a]=e[a]+e[i+s]*r}}}const kC="\\[\\]\\.:\\/",Wee=new RegExp("["+kC+"]","g"),FC="[^"+kC+"]",$ee="[^"+kC.replace("\\.","")+"]",Kee=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC",FC)+/(WCOD+)?/.source.replace("WCOD",$ee)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",FC)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",FC)+"$"),Qee=["material","materials","bones","map"];class Jee{constructor(e,t,i){const r=i||on.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const r=this._bindings[this._targetGroup.nCachedObjects_];void 0!==r&&r.getValue(e,t)}setValue(e,t){const i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,o=i.length;r!==o;++r)i[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}}let on=(()=>{class n{constructor(t,i,r){this.path=i,this.parsedPath=r||n.parseTrackName(i),this.node=n.findNode(t,this.parsedPath.nodeName),this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(t,i,r){return t&&t.isAnimationObjectGroup?new n.Composite(t,i,r):new n(t,i,r)}static sanitizeNodeName(t){return t.replace(/\s/g,"_").replace(Wee,"")}static parseTrackName(t){const i=Kee.exec(t);if(null===i)throw new Error("PropertyBinding: Cannot parse trackName: "+t);const r={nodeName:i[2],objectName:i[3],objectIndex:i[4],propertyName:i[5],propertyIndex:i[6]},o=r.nodeName&&r.nodeName.lastIndexOf(".");if(void 0!==o&&-1!==o){const s=r.nodeName.substring(o+1);-1!==Qee.indexOf(s)&&(r.nodeName=r.nodeName.substring(0,o),r.objectName=s)}if(null===r.propertyName||0===r.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return r}static findNode(t,i){if(void 0===i||""===i||"."===i||-1===i||i===t.name||i===t.uuid)return t;if(t.skeleton){const r=t.skeleton.getBoneByName(i);if(void 0!==r)return r}if(t.children){const r=function(s){for(let a=0;a<s.length;a++){const l=s[a];if(l.name===i||l.uuid===i)return l;const c=r(l.children);if(c)return c}return null},o=r(t.children);if(o)return o}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(t,i){t[i]=this.targetObject[this.propertyName]}_getValue_array(t,i){const r=this.resolvedProperty;for(let o=0,s=r.length;o!==s;++o)t[i++]=r[o]}_getValue_arrayElement(t,i){t[i]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(t,i){this.resolvedProperty.toArray(t,i)}_setValue_direct(t,i){this.targetObject[this.propertyName]=t[i]}_setValue_direct_setNeedsUpdate(t,i){this.targetObject[this.propertyName]=t[i],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(t,i){this.targetObject[this.propertyName]=t[i],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(t,i){const r=this.resolvedProperty;for(let o=0,s=r.length;o!==s;++o)r[o]=t[i++]}_setValue_array_setNeedsUpdate(t,i){const r=this.resolvedProperty;for(let o=0,s=r.length;o!==s;++o)r[o]=t[i++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(t,i){const r=this.resolvedProperty;for(let o=0,s=r.length;o!==s;++o)r[o]=t[i++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(t,i){this.resolvedProperty[this.propertyIndex]=t[i]}_setValue_arrayElement_setNeedsUpdate(t,i){this.resolvedProperty[this.propertyIndex]=t[i],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(t,i){this.resolvedProperty[this.propertyIndex]=t[i],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(t,i){this.resolvedProperty.fromArray(t,i)}_setValue_fromArray_setNeedsUpdate(t,i){this.resolvedProperty.fromArray(t,i),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(t,i){this.resolvedProperty.fromArray(t,i),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(t,i){this.bind(),this.getValue(t,i)}_setValue_unbound(t,i){this.bind(),this.setValue(t,i)}bind(){let t=this.node;const i=this.parsedPath,r=i.objectName,o=i.propertyName;let s=i.propertyIndex;if(t||(t=n.findNode(this.rootNode,i.nodeName),this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(r){let d=i.objectIndex;switch(r){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);t=t.skeleton.bones;for(let u=0;u<t.length;u++)if(t[u].name===d){d=u;break}break;case"map":if("map"in t){t=t.map;break}if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.map)return void console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);t=t.material.map;break;default:if(void 0===t[r])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[r]}if(void 0!==d){if(void 0===t[d])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[d]}}const a=t[o];if(void 0===a)return void console.error("THREE.PropertyBinding: Trying to update property for track: "+i.nodeName+"."+o+" but it wasn't found.",t);let l=this.Versioning.None;this.targetObject=t,void 0!==t.needsUpdate?l=this.Versioning.NeedsUpdate:void 0!==t.matrixWorldNeedsUpdate&&(l=this.Versioning.MatrixWorldNeedsUpdate);let c=this.BindingType.Direct;if(void 0!==s){if("morphTargetInfluences"===o){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==t.morphTargetDictionary[s]&&(s=t.morphTargetDictionary[s])}c=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=s}else void 0!==a.fromArray&&void 0!==a.toArray?(c=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(c=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=o;this.getValue=this.GetterByBindingType[c],this.setValue=this.SetterByBindingTypeAndVersioning[c][l]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}return n.Composite=Jee,n})();on.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},on.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},on.prototype.GetterByBindingType=[on.prototype._getValue_direct,on.prototype._getValue_array,on.prototype._getValue_arrayElement,on.prototype._getValue_toArray],on.prototype.SetterByBindingTypeAndVersioning=[[on.prototype._setValue_direct,on.prototype._setValue_direct_setNeedsUpdate,on.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[on.prototype._setValue_array,on.prototype._setValue_array_setNeedsUpdate,on.prototype._setValue_array_setMatrixWorldNeedsUpdate],[on.prototype._setValue_arrayElement,on.prototype._setValue_arrayElement_setNeedsUpdate,on.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[on.prototype._setValue_fromArray,on.prototype._setValue_fromArray_setNeedsUpdate,on.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class ete{constructor(e,t,i=null,r=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=i,this.blendMode=r;const o=t.tracks,s=o.length,a=new Array(s),l={endingStart:td,endingEnd:td};for(let c=0;c!==s;++c){const d=o[c].createInterpolant(null);a[c]=d,d.settings=l}this._interpolantSettings=l,this._interpolants=a,this._propertyBindings=new Array(s),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=2201,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,i){if(e.fadeOut(t),this.fadeIn(t),i){const r=this._clip.duration,o=e._clip.duration,a=r/o;e.warp(1,o/r,t),this.warp(a,1,t)}return this}crossFadeTo(e,t,i){return e.crossFadeFrom(this,t,i)}stopFading(){const e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,i){const r=this._mixer,o=r.time,s=this.timeScale;let a=this._timeScaleInterpolant;null===a&&(a=r._lendControlInterpolant(),this._timeScaleInterpolant=a);const l=a.parameterPositions,c=a.sampleValues;return l[0]=o,l[1]=o+i,c[0]=e/s,c[1]=t/s,this}stopWarping(){const e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,i,r){if(!this.enabled)return void this._updateWeight(e);const o=this._startTime;if(null!==o){const l=(e-o)*i;l<0||0===i?t=0:(this._startTime=null,t=i*l)}t*=this._updateTimeScale(e);const s=this._updateTime(t),a=this._updateWeight(e);if(a>0){const l=this._interpolants,c=this._propertyBindings;if(2501===this.blendMode)for(let d=0,u=l.length;d!==u;++d)l[d].evaluate(s),c[d].accumulateAdditive(a);else for(let d=0,u=l.length;d!==u;++d)l[d].evaluate(s),c[d].accumulate(r,a)}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const i=this._weightInterpolant;if(null!==i){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopFading(),0===r&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const i=this._timeScaleInterpolant;null!==i&&(t*=i.evaluate(e)[0],e>i.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t))}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,i=this.loop;let r=this.time+e,o=this._loopCount;const s=2202===i;if(0===e)return-1===o?r:s&&1==(1&o)?t-r:r;if(2200===i){-1===o&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else{if(!(r<0)){this.time=r;break e}r=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(-1===o&&(e>=0?(o=0,this._setEndings(!0,0===this.repetitions,s)):this._setEndings(0===this.repetitions,!0,s)),r>=t||r<0){const a=Math.floor(r/t);r-=t*a,o+=Math.abs(a);const l=this.repetitions-o;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===l){const c=e<0;this._setEndings(c,!c,s)}else this._setEndings(!1,!1,s);this._loopCount=o,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=r;if(s&&1==(1&o))return t-r}return r}_setEndings(e,t,i){const r=this._interpolantSettings;i?(r.endingStart=nd,r.endingEnd=nd):(r.endingStart=e?this.zeroSlopeAtStart?nd:td:2402,r.endingEnd=t?this.zeroSlopeAtEnd?nd:td:2402)}_scheduleFading(e,t,i){const r=this._mixer,o=r.time;let s=this._weightInterpolant;null===s&&(s=r._lendControlInterpolant(),this._weightInterpolant=s);const a=s.parameterPositions,l=s.sampleValues;return a[0]=o,l[0]=t,a[1]=o+e,l[1]=i,this}}const tte=new Float32Array(1);class fN extends da{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const i=e._localRoot||this._root,r=e._clip.tracks,o=r.length,s=e._propertyBindings,a=e._interpolants,l=i.uuid,c=this._bindingsByRootAndName;let d=c[l];void 0===d&&(d={},c[l]=d);for(let u=0;u!==o;++u){const h=r[u],f=h.name;let p=d[f];if(void 0!==p)++p.referenceCount,s[u]=p;else{if(p=s[u],void 0!==p){null===p._cacheIndex&&(++p.referenceCount,this._addInactiveBinding(p,l,f));continue}p=new jee(on.create(i,f,t&&t._propertyBindings[u].binding.parsedPath),h.ValueTypeName,h.getValueSize()),++p.referenceCount,this._addInactiveBinding(p,l,f),s[u]=p}a[u].resultBuffer=p.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){const i=(e._localRoot||this._root).uuid,r=e._clip.uuid,o=this._actionsByClip[r];this._bindAction(e,o&&o.knownActions[0]),this._addInactiveAction(e,r,i)}const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const o=t[i];0==o.useCount++&&(this._lendBinding(o),o.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const o=t[i];0==--o.useCount&&(o.restoreOriginalState(),this._takeBackBinding(o))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return null!==t&&t<this._nActiveActions}_addInactiveAction(e,t,i){const r=this._actions,o=this._actionsByClip;let s=o[t];if(void 0===s)s={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,o[t]=s;else{const a=s.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=r.length,r.push(e),s.actionByRoot[i]=e}_removeInactiveAction(e){const t=this._actions,i=t[t.length-1],r=e._cacheIndex;i._cacheIndex=r,t[r]=i,t.pop(),e._cacheIndex=null;const o=e._clip.uuid,s=this._actionsByClip,a=s[o],l=a.knownActions,c=l[l.length-1],d=e._byClipCacheIndex;c._byClipCacheIndex=d,l[d]=c,l.pop(),e._byClipCacheIndex=null,delete a.actionByRoot[(e._localRoot||this._root).uuid],0===l.length&&delete s[o],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const o=t[i];0==--o.referenceCount&&this._removeInactiveBinding(o)}}_lendAction(e){const t=this._actions,i=e._cacheIndex,r=this._nActiveActions++,o=t[r];e._cacheIndex=r,t[r]=e,o._cacheIndex=i,t[i]=o}_takeBackAction(e){const t=this._actions,i=e._cacheIndex,r=--this._nActiveActions,o=t[r];e._cacheIndex=r,t[r]=e,o._cacheIndex=i,t[i]=o}_addInactiveBinding(e,t,i){const r=this._bindingsByRootAndName,o=this._bindings;let s=r[t];void 0===s&&(s={},r[t]=s),s[i]=e,e._cacheIndex=o.length,o.push(e)}_removeInactiveBinding(e){const t=this._bindings,i=e.binding,r=i.rootNode.uuid,o=i.path,s=this._bindingsByRootAndName,a=s[r],l=t[t.length-1],c=e._cacheIndex;l._cacheIndex=c,t[c]=l,t.pop(),delete a[o],0===Object.keys(a).length&&delete s[r]}_lendBinding(e){const t=this._bindings,i=e._cacheIndex,r=this._nActiveBindings++,o=t[r];e._cacheIndex=r,t[r]=e,o._cacheIndex=i,t[i]=o}_takeBackBinding(e){const t=this._bindings,i=e._cacheIndex,r=--this._nActiveBindings,o=t[r];e._cacheIndex=r,t[r]=e,o._cacheIndex=i,t[i]=o}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let i=e[t];return void 0===i&&(i=new YF(new Float32Array(2),new Float32Array(2),1,tte),i.__cacheIndex=t,e[t]=i),i}_takeBackControlInterpolant(e){const t=this._controlInterpolants,i=e.__cacheIndex,r=--this._nActiveControlInterpolants,o=t[r];e.__cacheIndex=r,t[r]=e,o.__cacheIndex=i,t[i]=o}clipAction(e,t,i){const r=t||this._root,o=r.uuid;let s="string"==typeof e?Zh.findByName(r,e):e;const a=null!==s?s.uuid:e,l=this._actionsByClip[a];let c=null;if(void 0===i&&(i=null!==s?s.blendMode:2500),void 0!==l){const u=l.actionByRoot[o];if(void 0!==u&&u.blendMode===i)return u;c=l.knownActions[0],null===s&&(s=c._clip)}if(null===s)return null;const d=new ete(this,s,t,i);return this._bindAction(d,c),this._addInactiveAction(d,a,o),d}existingAction(e,t){const i=t||this._root,r=i.uuid,o="string"==typeof e?Zh.findByName(i,e):e,a=this._actionsByClip[o?o.uuid:e];return void 0!==a&&a.actionByRoot[r]||null}stopAllAction(){const e=this._actions;for(let i=this._nActiveActions-1;i>=0;--i)e[i].stop();return this}update(e){const t=this._actions,i=this._nActiveActions,r=this.time+=e*=this.timeScale,o=Math.sign(e),s=this._accuIndex^=1;for(let c=0;c!==i;++c)t[c]._update(r,e,o,s);const a=this._bindings,l=this._nActiveBindings;for(let c=0;c!==l;++c)a[c].apply(s);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,i=e.uuid,r=this._actionsByClip,o=r[i];if(void 0!==o){const s=o.knownActions;for(let a=0,l=s.length;a!==l;++a){const c=s[a];this._deactivateAction(c);const d=c._cacheIndex,u=t[t.length-1];c._cacheIndex=null,c._byClipCacheIndex=null,u._cacheIndex=d,t[d]=u,t.pop(),this._removeInactiveBindingsForAction(c)}delete r[i]}}uncacheRoot(e){const t=e.uuid,i=this._actionsByClip;for(const s in i){const l=i[s].actionByRoot[t];void 0!==l&&(this._deactivateAction(l),this._removeInactiveAction(l))}const o=this._bindingsByRootAndName[t];if(void 0!==o)for(const s in o){const a=o[s];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(e,t){const i=this.existingAction(e,t);null!==i&&(this._deactivateAction(i),this._removeInactiveAction(i))}}class gN{constructor(e=1,t=0,i=0){return this.radius=e,this.phi=t,this.theta=i,this}set(e,t,i){return this.radius=e,this.phi=t,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+t*t+i*i),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(Cn(t/this.radius,-1,1))),this}clone(){return(new this.constructor).copy(this)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"153"}})),typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__="153");const EN={type:"change"},UC={type:"start"},TN={type:"end"};class rte extends da{constructor(e,t){super(),this.object=e,this.domElement=t,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new R,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:0,MIDDLE:1,RIGHT:2},this.touches={ONE:0,TWO:2},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return a.phi},this.getAzimuthalAngle=function(){return a.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(F){F.addEventListener("keydown",ot),this._domElementKeyEvents=F},this.stopListenToKeyEvents=function(){this._domElementKeyEvents.removeEventListener("keydown",ot),this._domElementKeyEvents=null},this.saveState=function(){i.target0.copy(i.target),i.position0.copy(i.object.position),i.zoom0=i.object.zoom},this.reset=function(){i.target.copy(i.target0),i.object.position.copy(i.position0),i.object.zoom=i.zoom0,i.object.updateProjectionMatrix(),i.dispatchEvent(EN),i.update(),o=r.NONE},this.update=function(){const F=new R,me=(new gi).setFromUnitVectors(e.up,new R(0,1,0)),ge=me.clone().invert(),ee=new R,Ge=new gi,Ke=new R,Xe=2*Math.PI;return function(){const He=i.object.position;F.copy(He).sub(i.target),F.applyQuaternion(me),a.setFromVector3(F),i.autoRotate&&o===r.NONE&&C(function D(){return 2*Math.PI/60/60*i.autoRotateSpeed}()),i.enableDamping?(a.theta+=l.theta*i.dampingFactor,a.phi+=l.phi*i.dampingFactor):(a.theta+=l.theta,a.phi+=l.phi);let st=i.minAzimuthAngle,Nt=i.maxAzimuthAngle;return isFinite(st)&&isFinite(Nt)&&(st<-Math.PI?st+=Xe:st>Math.PI&&(st-=Xe),Nt<-Math.PI?Nt+=Xe:Nt>Math.PI&&(Nt-=Xe),a.theta=st<=Nt?Math.max(st,Math.min(Nt,a.theta)):a.theta>(st+Nt)/2?Math.max(st,a.theta):Math.min(Nt,a.theta)),a.phi=Math.max(i.minPolarAngle,Math.min(i.maxPolarAngle,a.phi)),a.makeSafe(),a.radius*=c,a.radius=Math.max(i.minDistance,Math.min(i.maxDistance,a.radius)),!0===i.enableDamping?i.target.addScaledVector(d,i.dampingFactor):i.target.add(d),F.setFromSpherical(a),F.applyQuaternion(ge),He.copy(i.target).add(F),i.object.lookAt(i.target),!0===i.enableDamping?(l.theta*=1-i.dampingFactor,l.phi*=1-i.dampingFactor,d.multiplyScalar(1-i.dampingFactor)):(l.set(0,0,0),d.set(0,0,0)),c=1,!!(u||ee.distanceToSquared(i.object.position)>s||8*(1-Ge.dot(i.object.quaternion))>s||Ke.distanceToSquared(i.target)>0)&&(i.dispatchEvent(EN),ee.copy(i.object.position),Ge.copy(i.object.quaternion),Ke.copy(i.target),u=!1,!0)}}(),this.dispose=function(){i.domElement.removeEventListener("contextmenu",k),i.domElement.removeEventListener("pointerdown",de),i.domElement.removeEventListener("pointercancel",pe),i.domElement.removeEventListener("wheel",Ue),i.domElement.removeEventListener("pointermove",Me),i.domElement.removeEventListener("pointerup",pe),null!==i._domElementKeyEvents&&(i._domElementKeyEvents.removeEventListener("keydown",ot),i._domElementKeyEvents=null)};const i=this,r={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let o=r.NONE;const s=1e-6,a=new gN,l=new gN;let c=1;const d=new R;let u=!1;const h=new ce,f=new ce,p=new ce,_=new ce,m=new ce,g=new ce,b=new ce,v=new ce,y=new ce,x=[],S={};function I(){return Math.pow(.95,i.zoomSpeed)}function C(F){l.theta-=F}function T(F){l.phi-=F}const j=function(){const F=new R;return function(ge,ee){F.setFromMatrixColumn(ee,0),F.multiplyScalar(-ge),d.add(F)}}(),ie=function(){const F=new R;return function(ge,ee){!0===i.screenSpacePanning?F.setFromMatrixColumn(ee,1):(F.setFromMatrixColumn(ee,0),F.crossVectors(i.object.up,F)),F.multiplyScalar(ge),d.add(F)}}(),V=function(){const F=new R;return function(ge,ee){const Ge=i.domElement;if(i.object.isPerspectiveCamera){F.copy(i.object.position).sub(i.target);let Xe=F.length();Xe*=Math.tan(i.object.fov/2*Math.PI/180),j(2*ge*Xe/Ge.clientHeight,i.object.matrix),ie(2*ee*Xe/Ge.clientHeight,i.object.matrix)}else i.object.isOrthographicCamera?(j(ge*(i.object.right-i.object.left)/i.object.zoom/Ge.clientWidth,i.object.matrix),ie(ee*(i.object.top-i.object.bottom)/i.object.zoom/Ge.clientHeight,i.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),i.enablePan=!1)}}();function G(F){i.object.isPerspectiveCamera?c/=F:i.object.isOrthographicCamera?(i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom*F)),i.object.updateProjectionMatrix(),u=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function $(F){i.object.isPerspectiveCamera?c*=F:i.object.isOrthographicCamera?(i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/F)),i.object.updateProjectionMatrix(),u=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function z(F){h.set(F.clientX,F.clientY)}function W(F){_.set(F.clientX,F.clientY)}function re(){1===x.length?h.set(x[0].pageX,x[0].pageY):h.set(.5*(x[0].pageX+x[1].pageX),.5*(x[0].pageY+x[1].pageY))}function De(){1===x.length?_.set(x[0].pageX,x[0].pageY):_.set(.5*(x[0].pageX+x[1].pageX),.5*(x[0].pageY+x[1].pageY))}function Ee(){const F=x[0].pageX-x[1].pageX,me=x[0].pageY-x[1].pageY,ge=Math.sqrt(F*F+me*me);b.set(0,ge)}function Ve(F){if(1==x.length)f.set(F.pageX,F.pageY);else{const ge=ve(F);f.set(.5*(F.pageX+ge.x),.5*(F.pageY+ge.y))}p.subVectors(f,h).multiplyScalar(i.rotateSpeed);const me=i.domElement;C(2*Math.PI*p.x/me.clientHeight),T(2*Math.PI*p.y/me.clientHeight),h.copy(f)}function mt(F){if(1===x.length)m.set(F.pageX,F.pageY);else{const me=ve(F);m.set(.5*(F.pageX+me.x),.5*(F.pageY+me.y))}g.subVectors(m,_).multiplyScalar(i.panSpeed),V(g.x,g.y),_.copy(m)}function Ze(F){const me=ve(F),ge=F.pageX-me.x,ee=F.pageY-me.y,Ge=Math.sqrt(ge*ge+ee*ee);v.set(0,Ge),y.set(0,Math.pow(v.y/b.y,i.zoomSpeed)),G(y.y),b.copy(v)}function de(F){!1!==i.enabled&&(0===x.length&&(i.domElement.setPointerCapture(F.pointerId),i.domElement.addEventListener("pointermove",Me),i.domElement.addEventListener("pointerup",pe)),function E(F){x.push(F)}(F),"touch"===F.pointerType?function Ot(F){switch(be(F),x.length){case 1:switch(i.touches.ONE){case 0:if(!1===i.enableRotate)return;re(),o=r.TOUCH_ROTATE;break;case 1:if(!1===i.enablePan)return;De(),o=r.TOUCH_PAN;break;default:o=r.NONE}break;case 2:switch(i.touches.TWO){case 2:if(!1===i.enableZoom&&!1===i.enablePan)return;(function Se(){i.enableZoom&&Ee(),i.enablePan&&De()})(),o=r.TOUCH_DOLLY_PAN;break;case 3:if(!1===i.enableZoom&&!1===i.enableRotate)return;(function $e(){i.enableZoom&&Ee(),i.enableRotate&&re()})(),o=r.TOUCH_DOLLY_ROTATE;break;default:o=r.NONE}break;default:o=r.NONE}o!==r.NONE&&i.dispatchEvent(UC)}(F):function qe(F){let me;switch(F.button){case 0:me=i.mouseButtons.LEFT;break;case 1:me=i.mouseButtons.MIDDLE;break;case 2:me=i.mouseButtons.RIGHT;break;default:me=-1}switch(me){case 1:if(!1===i.enableZoom)return;(function H(F){b.set(F.clientX,F.clientY)})(F),o=r.DOLLY;break;case 0:if(F.ctrlKey||F.metaKey||F.shiftKey){if(!1===i.enablePan)return;W(F),o=r.PAN}else{if(!1===i.enableRotate)return;z(F),o=r.ROTATE}break;case 2:if(F.ctrlKey||F.metaKey||F.shiftKey){if(!1===i.enableRotate)return;z(F),o=r.ROTATE}else{if(!1===i.enablePan)return;W(F),o=r.PAN}break;default:o=r.NONE}o!==r.NONE&&i.dispatchEvent(UC)}(F))}function Me(F){!1!==i.enabled&&("touch"===F.pointerType?function pn(F){switch(be(F),o){case r.TOUCH_ROTATE:if(!1===i.enableRotate)return;Ve(F),i.update();break;case r.TOUCH_PAN:if(!1===i.enablePan)return;mt(F),i.update();break;case r.TOUCH_DOLLY_PAN:if(!1===i.enableZoom&&!1===i.enablePan)return;(function N(F){i.enableZoom&&Ze(F),i.enablePan&&mt(F)})(F),i.update();break;case r.TOUCH_DOLLY_ROTATE:if(!1===i.enableZoom&&!1===i.enableRotate)return;(function we(F){i.enableZoom&&Ze(F),i.enableRotate&&Ve(F)})(F),i.update();break;default:o=r.NONE}}(F):function Be(F){switch(o){case r.ROTATE:if(!1===i.enableRotate)return;!function K(F){f.set(F.clientX,F.clientY),p.subVectors(f,h).multiplyScalar(i.rotateSpeed);const me=i.domElement;C(2*Math.PI*p.x/me.clientHeight),T(2*Math.PI*p.y/me.clientHeight),h.copy(f),i.update()}(F);break;case r.DOLLY:if(!1===i.enableZoom)return;!function ae(F){v.set(F.clientX,F.clientY),y.subVectors(v,b),y.y>0?G(I()):y.y<0&&$(I()),b.copy(v),i.update()}(F);break;case r.PAN:if(!1===i.enablePan)return;!function Ce(F){m.set(F.clientX,F.clientY),g.subVectors(m,_).multiplyScalar(i.panSpeed),V(g.x,g.y),_.copy(m),i.update()}(F)}}(F))}function pe(F){(function oe(F){delete S[F.pointerId];for(let me=0;me<x.length;me++)if(x[me].pointerId==F.pointerId)return void x.splice(me,1)})(F),0===x.length&&(i.domElement.releasePointerCapture(F.pointerId),i.domElement.removeEventListener("pointermove",Me),i.domElement.removeEventListener("pointerup",pe)),i.dispatchEvent(TN),o=r.NONE}function Ue(F){!1===i.enabled||!1===i.enableZoom||o!==r.NONE||(F.preventDefault(),i.dispatchEvent(UC),function X(F){F.deltaY<0?$(I()):F.deltaY>0&&G(I()),i.update()}(F),i.dispatchEvent(TN))}function ot(F){!1===i.enabled||!1===i.enablePan||function ue(F){let me=!1;switch(F.code){case i.keys.UP:F.ctrlKey||F.metaKey||F.shiftKey?T(2*Math.PI*i.rotateSpeed/i.domElement.clientHeight):V(0,i.keyPanSpeed),me=!0;break;case i.keys.BOTTOM:F.ctrlKey||F.metaKey||F.shiftKey?T(-2*Math.PI*i.rotateSpeed/i.domElement.clientHeight):V(0,-i.keyPanSpeed),me=!0;break;case i.keys.LEFT:F.ctrlKey||F.metaKey||F.shiftKey?C(2*Math.PI*i.rotateSpeed/i.domElement.clientHeight):V(i.keyPanSpeed,0),me=!0;break;case i.keys.RIGHT:F.ctrlKey||F.metaKey||F.shiftKey?C(-2*Math.PI*i.rotateSpeed/i.domElement.clientHeight):V(-i.keyPanSpeed,0),me=!0}me&&(F.preventDefault(),i.update())}(F)}function k(F){!1!==i.enabled&&F.preventDefault()}function be(F){let me=S[F.pointerId];void 0===me&&(me=new ce,S[F.pointerId]=me),me.set(F.pageX,F.pageY)}function ve(F){return S[(F.pointerId===x[0].pointerId?x[1]:x[0]).pointerId]}i.domElement.addEventListener("contextmenu",k),i.domElement.addEventListener("pointerdown",de),i.domElement.addEventListener("pointercancel",pe),i.domElement.addEventListener("wheel",Ue,{passive:!1}),this.update()}}function DN(n,e){if(0===e)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),n;if(2===e||1===e){let t=n.getIndex();if(null===t){const s=[],a=n.getAttribute("position");if(void 0===a)return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),n;for(let l=0;l<a.count;l++)s.push(l);n.setIndex(s),t=n.getIndex()}const i=t.count-2,r=[];if(2===e)for(let s=1;s<=i;s++)r.push(t.getX(0)),r.push(t.getX(s)),r.push(t.getX(s+1));else for(let s=0;s<i;s++)s%2==0?(r.push(t.getX(s)),r.push(t.getX(s+1)),r.push(t.getX(s+2))):(r.push(t.getX(s+2)),r.push(t.getX(s+1)),r.push(t.getX(s)));r.length/3!==i&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const o=n.clone();return o.setIndex(r),o.clearGroups(),o}return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),n}class ste extends Kh{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new ute(t)}),this.register(function(t){return new bte(t)}),this.register(function(t){return new yte(t)}),this.register(function(t){return new xte(t)}),this.register(function(t){return new fte(t)}),this.register(function(t){return new pte(t)}),this.register(function(t){return new mte(t)}),this.register(function(t){return new gte(t)}),this.register(function(t){return new dte(t)}),this.register(function(t){return new _te(t)}),this.register(function(t){return new hte(t)}),this.register(function(t){return new vte(t)}),this.register(function(t){return new lte(t)}),this.register(function(t){return new Cte(t)}),this.register(function(t){return new Mte(t)})}load(e,t,i,r){const o=this;let s;s=""!==this.resourcePath?this.resourcePath:""!==this.path?this.path:Jh.extractUrlBase(e),this.manager.itemStart(e);const a=function(c){r?r(c):console.error(c),o.manager.itemError(e),o.manager.itemEnd(e)},l=new qo(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(c){try{o.parse(c,s,function(d){t(d),o.manager.itemEnd(e)},a)}catch(d){a(d)}},i,a)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return-1===this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.push(e),this}unregister(e){return-1!==this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,i,r){let o;const s={},a={},l=new TextDecoder;if("string"==typeof e)o=JSON.parse(e);else if(e instanceof ArrayBuffer)if(l.decode(new Uint8Array(e,0,4))===AN){try{s[Ut.KHR_BINARY_GLTF]=new wte(e)}catch(u){return void(r&&r(u))}o=JSON.parse(s[Ut.KHR_BINARY_GLTF].content)}else o=JSON.parse(l.decode(e));else o=e;if(void 0===o.asset||o.asset.version[0]<2)return void(r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported.")));const c=new Lte(o,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});c.fileLoader.setRequestHeader(this.requestHeader);for(let d=0;d<this.pluginCallbacks.length;d++){const u=this.pluginCallbacks[d](c);a[u.name]=u,s[u.name]=!0}if(o.extensionsUsed)for(let d=0;d<o.extensionsUsed.length;++d){const u=o.extensionsUsed[d],h=o.extensionsRequired||[];switch(u){case Ut.KHR_MATERIALS_UNLIT:s[u]=new cte;break;case Ut.KHR_DRACO_MESH_COMPRESSION:s[u]=new Ste(o,this.dracoLoader);break;case Ut.KHR_TEXTURE_TRANSFORM:s[u]=new Ete;break;case Ut.KHR_MESH_QUANTIZATION:s[u]=new Tte;break;default:h.indexOf(u)>=0&&void 0===a[u]&&console.warn('THREE.GLTFLoader: Unknown extension "'+u+'".')}}c.setExtensions(s),c.setPlugins(a),c.parse(i,r)}parseAsync(e,t){const i=this;return new Promise(function(r,o){i.parse(e,t,r,o)})}}function ate(){let n={};return{get:function(e){return n[e]},add:function(e,t){n[e]=t},remove:function(e){delete n[e]},removeAll:function(){n={}}}}const Ut={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class lte{constructor(e){this.parser=e,this.name=Ut.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let i=0,r=t.length;i<r;i++){const o=t[i];o.extensions&&o.extensions[this.name]&&void 0!==o.extensions[this.name].light&&e._addNodeRef(this.cache,o.extensions[this.name].light)}}_loadLight(e){const t=this.parser,i="light:"+e;let r=t.cache.get(i);if(r)return r;const o=t.json,l=((o.extensions&&o.extensions[this.name]||{}).lights||[])[e];let c;const d=new Pe(16777215);void 0!==l.color&&d.fromArray(l.color);const u=void 0!==l.range?l.range:0;switch(l.type){case"directional":c=new iN(d),c.target.position.set(0,0,-1),c.add(c.target);break;case"point":c=new nN(d),c.distance=u;break;case"spot":c=new eN(d),c.distance=u,l.spot=l.spot||{},l.spot.innerConeAngle=void 0!==l.spot.innerConeAngle?l.spot.innerConeAngle:0,l.spot.outerConeAngle=void 0!==l.spot.outerConeAngle?l.spot.outerConeAngle:Math.PI/4,c.angle=l.spot.outerConeAngle,c.penumbra=1-l.spot.innerConeAngle/l.spot.outerConeAngle,c.target.position.set(0,0,-1),c.add(c.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+l.type)}return c.position.set(0,0,0),c.decay=2,va(c,l),void 0!==l.intensity&&(c.intensity=l.intensity),c.name=t.createUniqueName(l.name||"light_"+e),r=Promise.resolve(c),t.cache.add(i,r),r}getDependency(e,t){if("light"===e)return this._loadLight(t)}createNodeAttachment(e){const t=this,i=this.parser,o=i.json.nodes[e],a=(o.extensions&&o.extensions[this.name]||{}).light;return void 0===a?null:this._loadLight(a).then(function(l){return i._getNodeRef(t.cache,a,l)})}}class cte{constructor(){this.name=Ut.KHR_MATERIALS_UNLIT}getMaterialType(){return Br}extendParams(e,t,i){const r=[];e.color=new Pe(1,1,1),e.opacity=1;const o=t.pbrMetallicRoughness;if(o){if(Array.isArray(o.baseColorFactor)){const s=o.baseColorFactor;e.color.fromArray(s),e.opacity=s[3]}void 0!==o.baseColorTexture&&r.push(i.assignTexture(e,"map",o.baseColorTexture,lt))}return Promise.all(r)}}class dte{constructor(e){this.parser=e,this.name=Ut.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const o=r.extensions[this.name].emissiveStrength;return void 0!==o&&(t.emissiveIntensity=o),Promise.resolve()}}class ute{constructor(e){this.parser=e,this.name=Ut.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const i=this.parser.json.materials[e];return i.extensions&&i.extensions[this.name]?Rs:null}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const o=[],s=r.extensions[this.name];if(void 0!==s.clearcoatFactor&&(t.clearcoat=s.clearcoatFactor),void 0!==s.clearcoatTexture&&o.push(i.assignTexture(t,"clearcoatMap",s.clearcoatTexture)),void 0!==s.clearcoatRoughnessFactor&&(t.clearcoatRoughness=s.clearcoatRoughnessFactor),void 0!==s.clearcoatRoughnessTexture&&o.push(i.assignTexture(t,"clearcoatRoughnessMap",s.clearcoatRoughnessTexture)),void 0!==s.clearcoatNormalTexture&&(o.push(i.assignTexture(t,"clearcoatNormalMap",s.clearcoatNormalTexture)),void 0!==s.clearcoatNormalTexture.scale)){const a=s.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new ce(a,a)}return Promise.all(o)}}class hte{constructor(e){this.parser=e,this.name=Ut.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const i=this.parser.json.materials[e];return i.extensions&&i.extensions[this.name]?Rs:null}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const o=[],s=r.extensions[this.name];return void 0!==s.iridescenceFactor&&(t.iridescence=s.iridescenceFactor),void 0!==s.iridescenceTexture&&o.push(i.assignTexture(t,"iridescenceMap",s.iridescenceTexture)),void 0!==s.iridescenceIor&&(t.iridescenceIOR=s.iridescenceIor),void 0===t.iridescenceThicknessRange&&(t.iridescenceThicknessRange=[100,400]),void 0!==s.iridescenceThicknessMinimum&&(t.iridescenceThicknessRange[0]=s.iridescenceThicknessMinimum),void 0!==s.iridescenceThicknessMaximum&&(t.iridescenceThicknessRange[1]=s.iridescenceThicknessMaximum),void 0!==s.iridescenceThicknessTexture&&o.push(i.assignTexture(t,"iridescenceThicknessMap",s.iridescenceThicknessTexture)),Promise.all(o)}}class fte{constructor(e){this.parser=e,this.name=Ut.KHR_MATERIALS_SHEEN}getMaterialType(e){const i=this.parser.json.materials[e];return i.extensions&&i.extensions[this.name]?Rs:null}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const o=[];t.sheenColor=new Pe(0,0,0),t.sheenRoughness=0,t.sheen=1;const s=r.extensions[this.name];return void 0!==s.sheenColorFactor&&t.sheenColor.fromArray(s.sheenColorFactor),void 0!==s.sheenRoughnessFactor&&(t.sheenRoughness=s.sheenRoughnessFactor),void 0!==s.sheenColorTexture&&o.push(i.assignTexture(t,"sheenColorMap",s.sheenColorTexture,lt)),void 0!==s.sheenRoughnessTexture&&o.push(i.assignTexture(t,"sheenRoughnessMap",s.sheenRoughnessTexture)),Promise.all(o)}}class pte{constructor(e){this.parser=e,this.name=Ut.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const i=this.parser.json.materials[e];return i.extensions&&i.extensions[this.name]?Rs:null}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const o=[],s=r.extensions[this.name];return void 0!==s.transmissionFactor&&(t.transmission=s.transmissionFactor),void 0!==s.transmissionTexture&&o.push(i.assignTexture(t,"transmissionMap",s.transmissionTexture)),Promise.all(o)}}class mte{constructor(e){this.parser=e,this.name=Ut.KHR_MATERIALS_VOLUME}getMaterialType(e){const i=this.parser.json.materials[e];return i.extensions&&i.extensions[this.name]?Rs:null}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const o=[],s=r.extensions[this.name];t.thickness=void 0!==s.thicknessFactor?s.thicknessFactor:0,void 0!==s.thicknessTexture&&o.push(i.assignTexture(t,"thicknessMap",s.thicknessTexture)),t.attenuationDistance=s.attenuationDistance||1/0;const a=s.attenuationColor||[1,1,1];return t.attenuationColor=new Pe(a[0],a[1],a[2]),Promise.all(o)}}class gte{constructor(e){this.parser=e,this.name=Ut.KHR_MATERIALS_IOR}getMaterialType(e){const i=this.parser.json.materials[e];return i.extensions&&i.extensions[this.name]?Rs:null}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const o=r.extensions[this.name];return t.ior=void 0!==o.ior?o.ior:1.5,Promise.resolve()}}class _te{constructor(e){this.parser=e,this.name=Ut.KHR_MATERIALS_SPECULAR}getMaterialType(e){const i=this.parser.json.materials[e];return i.extensions&&i.extensions[this.name]?Rs:null}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const o=[],s=r.extensions[this.name];t.specularIntensity=void 0!==s.specularFactor?s.specularFactor:1,void 0!==s.specularTexture&&o.push(i.assignTexture(t,"specularIntensityMap",s.specularTexture));const a=s.specularColorFactor||[1,1,1];return t.specularColor=new Pe(a[0],a[1],a[2]),void 0!==s.specularColorTexture&&o.push(i.assignTexture(t,"specularColorMap",s.specularColorTexture,lt)),Promise.all(o)}}class vte{constructor(e){this.parser=e,this.name=Ut.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const i=this.parser.json.materials[e];return i.extensions&&i.extensions[this.name]?Rs:null}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const o=[],s=r.extensions[this.name];return void 0!==s.anisotropyStrength&&(t.anisotropy=s.anisotropyStrength),void 0!==s.anisotropyRotation&&(t.anisotropyRotation=s.anisotropyRotation),void 0!==s.anisotropyTexture&&o.push(i.assignTexture(t,"anisotropyMap",s.anisotropyTexture)),Promise.all(o)}}class bte{constructor(e){this.parser=e,this.name=Ut.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,i=t.json,r=i.textures[e];if(!r.extensions||!r.extensions[this.name])return null;const o=r.extensions[this.name],s=t.options.ktx2Loader;if(!s){if(i.extensionsRequired&&i.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,o.source,s)}}class yte{constructor(e){this.parser=e,this.name=Ut.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,i=this.parser,r=i.json,o=r.textures[e];if(!o.extensions||!o.extensions[t])return null;const s=o.extensions[t],a=r.images[s.source];let l=i.textureLoader;if(a.uri){const c=i.options.manager.getHandler(a.uri);null!==c&&(l=c)}return this.detectSupport().then(function(c){if(c)return i.loadTextureImage(e,s.source,l);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(1===t.height)}})),this.isSupported}}class xte{constructor(e){this.parser=e,this.name=Ut.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const t=this.name,i=this.parser,r=i.json,o=r.textures[e];if(!o.extensions||!o.extensions[t])return null;const s=o.extensions[t],a=r.images[s.source];let l=i.textureLoader;if(a.uri){const c=i.options.manager.getHandler(a.uri);null!==c&&(l=c)}return this.detectSupport().then(function(c){if(c)return i.loadTextureImage(e,s.source,l);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(1===t.height)}})),this.isSupported}}class Cte{constructor(e){this.name=Ut.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,i=t.bufferViews[e];if(i.extensions&&i.extensions[this.name]){const r=i.extensions[this.name],o=this.parser.getDependency("buffer",r.buffer),s=this.parser.options.meshoptDecoder;if(!s||!s.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return o.then(function(a){const d=r.count,u=r.byteStride,h=new Uint8Array(a,r.byteOffset||0,r.byteLength||0);return s.decodeGltfBufferAsync?s.decodeGltfBufferAsync(d,u,h,r.mode,r.filter).then(function(f){return f.buffer}):s.ready.then(function(){const f=new ArrayBuffer(d*u);return s.decodeGltfBuffer(new Uint8Array(f),d,u,h,r.mode,r.filter),f})})}return null}}class Mte{constructor(e){this.name=Ut.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,i=t.nodes[e];if(!i.extensions||!i.extensions[this.name]||void 0===i.mesh)return null;const r=t.meshes[i.mesh];for(const c of r.primitives)if(c.mode!==Hr.TRIANGLES&&c.mode!==Hr.TRIANGLE_STRIP&&c.mode!==Hr.TRIANGLE_FAN&&void 0!==c.mode)return null;const s=i.extensions[this.name].attributes,a=[],l={};for(const c in s)a.push(this.parser.getDependency("accessor",s[c]).then(d=>(l[c]=d,l[c])));return a.length<1?null:(a.push(this.parser.createNodeMesh(e)),Promise.all(a).then(c=>{const d=c.pop(),u=d.isGroup?d.children:[d],h=c[0].count,f=[];for(const p of u){const _=new ct,m=new R,g=new gi,b=new R(1,1,1),v=new SF(p.geometry,p.material,h);for(let y=0;y<h;y++)l.TRANSLATION&&m.fromBufferAttribute(l.TRANSLATION,y),l.ROTATION&&g.fromBufferAttribute(l.ROTATION,y),l.SCALE&&b.fromBufferAttribute(l.SCALE,y),v.setMatrixAt(y,_.compose(m,g,b));for(const y in l)"TRANSLATION"!==y&&"ROTATION"!==y&&"SCALE"!==y&&p.geometry.setAttribute(y,l[y]);oi.prototype.copy.call(v,p),this.parser.assignFinalMaterial(v),f.push(v)}return d.isGroup?(d.clear(),d.add(...f),d):f[0]}))}}const AN="glTF";class wte{constructor(e){this.name=Ut.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,12),i=new TextDecoder;if(this.header={magic:i.decode(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==AN)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const r=this.header.length-12,o=new DataView(e,12);let s=0;for(;s<r;){const a=o.getUint32(s,!0);s+=4;const l=o.getUint32(s,!0);if(s+=4,1313821514===l){const c=new Uint8Array(e,12+s,a);this.content=i.decode(c)}else if(5130562===l){const c=12+s;this.body=e.slice(c,c+a)}s+=a}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class Ste{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=Ut.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const i=this.json,r=this.dracoLoader,o=e.extensions[this.name].bufferView,s=e.extensions[this.name].attributes,a={},l={},c={};for(const d in s){const u=GC[d]||d.toLowerCase();a[u]=s[d]}for(const d in e.attributes){const u=GC[d]||d.toLowerCase();if(void 0!==s[d]){const h=i.accessors[e.attributes[d]];c[u]=Bd[h.componentType].name,l[u]=!0===h.normalized}}return t.getDependency("bufferView",o).then(function(d){return new Promise(function(u){r.decodeDracoFile(d,function(h){for(const f in h.attributes){const _=l[f];void 0!==_&&(h.attributes[f].normalized=_)}u(h)},a,c)})})}}class Ete{constructor(){this.name=Ut.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return(void 0===t.texCoord||t.texCoord===e.channel)&&void 0===t.offset&&void 0===t.rotation&&void 0===t.scale||(e=e.clone(),void 0!==t.texCoord&&(e.channel=t.texCoord),void 0!==t.offset&&e.offset.fromArray(t.offset),void 0!==t.rotation&&(e.rotation=t.rotation),void 0!==t.scale&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class Tte{constructor(){this.name=Ut.KHR_MESH_QUANTIZATION}}class RN extends qh{constructor(e,t,i,r){super(e,t,i,r)}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,o=e*r*3+r;for(let s=0;s!==r;s++)t[s]=i[o+s];return t}interpolate_(e,t,i,r){const o=this.resultBuffer,s=this.sampleValues,a=this.valueSize,l=2*a,c=3*a,d=r-t,u=(i-t)/d,h=u*u,f=h*u,p=e*c,_=p-c,m=-2*f+3*h,g=f-h,b=1-m,v=g-h+u;for(let y=0;y!==a;y++)o[y]=b*s[_+y+a]+v*(s[_+y+l]*d)+m*s[p+y+a]+g*(s[p+y]*d);return o}}const Dte=new gi;class Ate extends RN{interpolate_(e,t,i,r){const o=super.interpolate_(e,t,i,r);return Dte.fromArray(o).normalize().toArray(o),o}}const Hr={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},Bd={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},PN={9728:Rn,9729:xn,9984:1004,9985:1007,9986:1005,9987:bs},ON={33071:Ti,33648:1002,10497:il},zC={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},GC={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},_a={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},Ite={CUBICSPLINE:void 0,LINEAR:ed,STEP:Mh};function Al(n,e,t){for(const i in t.extensions)void 0===n[i]&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[i]=t.extensions[i])}function va(n,e){void 0!==e.extras&&("object"==typeof e.extras?Object.assign(n.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function Ote(n,e){if(n.updateMorphTargets(),void 0!==e.weights)for(let t=0,i=e.weights.length;t<i;t++)n.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(n.morphTargetInfluences.length===t.length){n.morphTargetDictionary={};for(let i=0,r=t.length;i<r;i++)n.morphTargetDictionary[t[i]]=i}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function kte(n){let e;const t=n.extensions&&n.extensions[Ut.KHR_DRACO_MESH_COMPRESSION];if(e=t?"draco:"+t.bufferView+":"+t.indices+":"+WC(t.attributes):n.indices+":"+WC(n.attributes)+":"+n.mode,void 0!==n.targets)for(let i=0,r=n.targets.length;i<r;i++)e+=":"+WC(n.targets[i]);return e}function WC(n){let e="";const t=Object.keys(n).sort();for(let i=0,r=t.length;i<r;i++)e+=t[i]+":"+n[t[i]]+";";return e}function $C(n){switch(n){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}const Nte=new ct;class Lte{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new ate,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let i=!1,r=!1,o=-1;typeof navigator<"u"&&(i=!0===/^((?!chrome|android).)*safari/i.test(navigator.userAgent),r=navigator.userAgent.indexOf("Firefox")>-1,o=r?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),this.textureLoader=typeof createImageBitmap>"u"||i||r&&o<98?new Aee(this.options.manager):new Hee(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new qo(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const i=this,r=this.json,o=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(s){return s._markDefs&&s._markDefs()}),Promise.all(this._invokeAll(function(s){return s.beforeRoot&&s.beforeRoot()})).then(function(){return Promise.all([i.getDependencies("scene"),i.getDependencies("animation"),i.getDependencies("camera")])}).then(function(s){const a={scene:s[0][r.scene||0],scenes:s[0],animations:s[1],cameras:s[2],asset:r.asset,parser:i,userData:{}};Al(o,a,r),va(a,r),Promise.all(i._invokeAll(function(l){return l.afterRoot&&l.afterRoot(a)})).then(function(){e(a)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],i=this.json.meshes||[];for(let r=0,o=t.length;r<o;r++){const s=t[r].joints;for(let a=0,l=s.length;a<l;a++)e[s[a]].isBone=!0}for(let r=0,o=e.length;r<o;r++){const s=e[r];void 0!==s.mesh&&(this._addNodeRef(this.meshCache,s.mesh),void 0!==s.skin&&(i[s.mesh].isSkinnedMesh=!0)),void 0!==s.camera&&this._addNodeRef(this.cameraCache,s.camera)}}_addNodeRef(e,t){void 0!==t&&(void 0===e.refs[t]&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,i){if(e.refs[t]<=1)return i;const r=i.clone(),o=(s,a)=>{const l=this.associations.get(s);null!=l&&this.associations.set(a,l);for(const[c,d]of s.children.entries())o(d,a.children[c])};return o(i,r),r.name+="_instance_"+e.uses[t]++,r}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let i=0;i<t.length;i++){const r=e(t[i]);if(r)return r}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const i=[];for(let r=0;r<t.length;r++){const o=e(t[r]);o&&i.push(o)}return i}getDependency(e,t){const i=e+":"+t;let r=this.cache.get(i);if(!r){switch(e){case"scene":r=this.loadScene(t);break;case"node":r=this._invokeOne(function(o){return o.loadNode&&o.loadNode(t)});break;case"mesh":r=this._invokeOne(function(o){return o.loadMesh&&o.loadMesh(t)});break;case"accessor":r=this.loadAccessor(t);break;case"bufferView":r=this._invokeOne(function(o){return o.loadBufferView&&o.loadBufferView(t)});break;case"buffer":r=this.loadBuffer(t);break;case"material":r=this._invokeOne(function(o){return o.loadMaterial&&o.loadMaterial(t)});break;case"texture":r=this._invokeOne(function(o){return o.loadTexture&&o.loadTexture(t)});break;case"skin":r=this.loadSkin(t);break;case"animation":r=this._invokeOne(function(o){return o.loadAnimation&&o.loadAnimation(t)});break;case"camera":r=this.loadCamera(t);break;default:if(r=this._invokeOne(function(o){return o!=this&&o.getDependency&&o.getDependency(e,t)}),!r)throw new Error("Unknown type: "+e)}this.cache.add(i,r)}return r}getDependencies(e){let t=this.cache.get(e);if(!t){const i=this;t=Promise.all((this.json[e+("mesh"===e?"es":"s")]||[]).map(function(o,s){return i.getDependency(e,s)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],i=this.fileLoader;if(t.type&&"arraybuffer"!==t.type)throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(void 0===t.uri&&0===e)return Promise.resolve(this.extensions[Ut.KHR_BINARY_GLTF].body);const r=this.options;return new Promise(function(o,s){i.load(Jh.resolveURL(t.uri,r.path),o,void 0,function(){s(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(i){const o=t.byteOffset||0;return i.slice(o,o+(t.byteLength||0))})}loadAccessor(e){const t=this,i=this.json,r=this.json.accessors[e];if(void 0===r.bufferView&&void 0===r.sparse){const s=zC[r.type],l=!0===r.normalized,c=new(0,Bd[r.componentType])(r.count*s);return Promise.resolve(new Mn(c,s,l))}const o=[];return o.push(void 0!==r.bufferView?this.getDependency("bufferView",r.bufferView):null),void 0!==r.sparse&&(o.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),o.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(o).then(function(s){const a=s[0],l=zC[r.type],c=Bd[r.componentType],d=c.BYTES_PER_ELEMENT,h=r.byteOffset||0,f=void 0!==r.bufferView?i.bufferViews[r.bufferView].byteStride:void 0,p=!0===r.normalized;let _,m;if(f&&f!==d*l){const g=Math.floor(h/f),b="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+g+":"+r.count;let v=t.cache.get(b);v||(_=new c(a,g*f,r.count*f/d),v=new Yx(_,f/d),t.cache.add(b,v)),m=new vl(v,l,h%f/d,p)}else _=null===a?new c(r.count*l):new c(a,h,r.count*l),m=new Mn(_,l,p);if(void 0!==r.sparse){const y=r.sparse.values.byteOffset||0,x=new(0,Bd[r.sparse.indices.componentType])(s[1],r.sparse.indices.byteOffset||0,r.sparse.count*zC.SCALAR),S=new c(s[2],y,r.sparse.count*l);null!==a&&(m=new Mn(m.array.slice(),m.itemSize,m.normalized));for(let D=0,I=x.length;D<I;D++){const C=x[D];if(m.setX(C,S[D*l]),l>=2&&m.setY(C,S[D*l+1]),l>=3&&m.setZ(C,S[D*l+2]),l>=4&&m.setW(C,S[D*l+3]),l>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return m})}loadTexture(e){const t=this.json,o=t.textures[e].source,s=t.images[o];let a=this.textureLoader;if(s.uri){const l=this.options.manager.getHandler(s.uri);null!==l&&(a=l)}return this.loadTextureImage(e,o,a)}loadTextureImage(e,t,i){const r=this,o=this.json,s=o.textures[e],a=o.images[t],l=(a.uri||a.bufferView)+":"+s.sampler;if(this.textureCache[l])return this.textureCache[l];const c=this.loadImageSource(t,i).then(function(d){d.flipY=!1,d.name=s.name||a.name||"",""===d.name&&"string"==typeof a.uri&&!1===a.uri.startsWith("data:image/")&&(d.name=a.uri);const h=(o.samplers||{})[s.sampler]||{};return d.magFilter=PN[h.magFilter]||xn,d.minFilter=PN[h.minFilter]||bs,d.wrapS=ON[h.wrapS]||il,d.wrapT=ON[h.wrapT]||il,r.associations.set(d,{textures:e}),d}).catch(function(){return null});return this.textureCache[l]=c,c}loadImageSource(e,t){const r=this.json,o=this.options;if(void 0!==this.sourceCache[e])return this.sourceCache[e].then(u=>u.clone());const s=r.images[e],a=self.URL||self.webkitURL;let l=s.uri||"",c=!1;if(void 0!==s.bufferView)l=this.getDependency("bufferView",s.bufferView).then(function(u){c=!0;const h=new Blob([u],{type:s.mimeType});return l=a.createObjectURL(h),l});else if(void 0===s.uri)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const d=Promise.resolve(l).then(function(u){return new Promise(function(h,f){let p=h;!0===t.isImageBitmapLoader&&(p=function(_){const m=new co(_);m.needsUpdate=!0,h(m)}),t.load(Jh.resolveURL(u,o.path),p,void 0,f)})}).then(function(u){return!0===c&&a.revokeObjectURL(l),u.userData.mimeType=s.mimeType||function Fte(n){return n.search(/\.jpe?g($|\?)/i)>0||0===n.search(/^data\:image\/jpeg/)?"image/jpeg":n.search(/\.webp($|\?)/i)>0||0===n.search(/^data\:image\/webp/)?"image/webp":"image/png"}(s.uri),u}).catch(function(u){throw console.error("THREE.GLTFLoader: Couldn't load texture",l),u});return this.sourceCache[e]=d,d}assignTexture(e,t,i,r){const o=this;return this.getDependency("texture",i.index).then(function(s){if(!s)return null;if(void 0!==i.texCoord&&i.texCoord>0&&((s=s.clone()).channel=i.texCoord),o.extensions[Ut.KHR_TEXTURE_TRANSFORM]){const a=void 0!==i.extensions?i.extensions[Ut.KHR_TEXTURE_TRANSFORM]:void 0;if(a){const l=o.associations.get(s);s=o.extensions[Ut.KHR_TEXTURE_TRANSFORM].extendTexture(s,a),o.associations.set(s,l)}}return void 0!==r&&(s.colorSpace=r),e[t]=s,s})}assignFinalMaterial(e){const t=e.geometry;let i=e.material;const r=void 0===t.attributes.tangent,o=void 0!==t.attributes.color,s=void 0===t.attributes.normal;if(e.isPoints){const a="PointsMaterial:"+i.uuid;let l=this.cache.get(a);l||(l=new nC,po.prototype.copy.call(l,i),l.color.copy(i.color),l.map=i.map,l.sizeAttenuation=!1,this.cache.add(a,l)),i=l}else if(e.isLine){const a="LineBasicMaterial:"+i.uuid;let l=this.cache.get(a);l||(l=new ir,po.prototype.copy.call(l,i),l.color.copy(i.color),l.map=i.map,this.cache.add(a,l)),i=l}if(r||o||s){let a="ClonedMaterial:"+i.uuid+":";r&&(a+="derivative-tangents:"),o&&(a+="vertex-colors:"),s&&(a+="flat-shading:");let l=this.cache.get(a);l||(l=i.clone(),o&&(l.vertexColors=!0),s&&(l.flatShading=!0),r&&(l.normalScale&&(l.normalScale.y*=-1),l.clearcoatNormalScale&&(l.clearcoatNormalScale.y*=-1)),this.cache.add(a,l),this.associations.set(l,this.associations.get(i))),i=l}e.material=i}getMaterialType(){return zg}loadMaterial(e){const t=this,r=this.extensions,o=this.json.materials[e];let s;const a={},c=[];if((o.extensions||{})[Ut.KHR_MATERIALS_UNLIT]){const u=r[Ut.KHR_MATERIALS_UNLIT];s=u.getMaterialType(),c.push(u.extendParams(a,o,t))}else{const u=o.pbrMetallicRoughness||{};if(a.color=new Pe(1,1,1),a.opacity=1,Array.isArray(u.baseColorFactor)){const h=u.baseColorFactor;a.color.fromArray(h),a.opacity=h[3]}void 0!==u.baseColorTexture&&c.push(t.assignTexture(a,"map",u.baseColorTexture,lt)),a.metalness=void 0!==u.metallicFactor?u.metallicFactor:1,a.roughness=void 0!==u.roughnessFactor?u.roughnessFactor:1,void 0!==u.metallicRoughnessTexture&&(c.push(t.assignTexture(a,"metalnessMap",u.metallicRoughnessTexture)),c.push(t.assignTexture(a,"roughnessMap",u.metallicRoughnessTexture))),s=this._invokeOne(function(h){return h.getMaterialType&&h.getMaterialType(e)}),c.push(Promise.all(this._invokeAll(function(h){return h.extendMaterialParams&&h.extendMaterialParams(e,a)})))}!0===o.doubleSided&&(a.side=2);const d=o.alphaMode||"OPAQUE";if("BLEND"===d?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,"MASK"===d&&(a.alphaTest=void 0!==o.alphaCutoff?o.alphaCutoff:.5)),void 0!==o.normalTexture&&s!==Br&&(c.push(t.assignTexture(a,"normalMap",o.normalTexture)),a.normalScale=new ce(1,1),void 0!==o.normalTexture.scale)){const u=o.normalTexture.scale;a.normalScale.set(u,u)}return void 0!==o.occlusionTexture&&s!==Br&&(c.push(t.assignTexture(a,"aoMap",o.occlusionTexture)),void 0!==o.occlusionTexture.strength&&(a.aoMapIntensity=o.occlusionTexture.strength)),void 0!==o.emissiveFactor&&s!==Br&&(a.emissive=(new Pe).fromArray(o.emissiveFactor)),void 0!==o.emissiveTexture&&s!==Br&&c.push(t.assignTexture(a,"emissiveMap",o.emissiveTexture,lt)),Promise.all(c).then(function(){const u=new s(a);return o.name&&(u.name=o.name),va(u,o),t.associations.set(u,{materials:e}),o.extensions&&Al(r,u,o),u})}createUniqueName(e){const t=on.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){const t=this,i=this.extensions,r=this.primitiveCache;function o(a){return i[Ut.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(a,t).then(function(l){return kN(l,a,t)})}const s=[];for(let a=0,l=e.length;a<l;a++){const c=e[a],d=kte(c),u=r[d];if(u)s.push(u.promise);else{let h;h=c.extensions&&c.extensions[Ut.KHR_DRACO_MESH_COMPRESSION]?o(c):kN(new It,c,t),r[d]={primitive:c,promise:h},s.push(h)}}return Promise.all(s)}loadMesh(e){const t=this,r=this.extensions,o=this.json.meshes[e],s=o.primitives,a=[];for(let l=0,c=s.length;l<c;l++){const d=void 0===s[l].material?(void 0===(n=this.cache).DefaultMaterial&&(n.DefaultMaterial=new zg({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:0})),n.DefaultMaterial):this.getDependency("material",s[l].material);a.push(d)}var n;return a.push(t.loadGeometries(s)),Promise.all(a).then(function(l){const c=l.slice(0,l.length-1),d=l[l.length-1],u=[];for(let f=0,p=d.length;f<p;f++){const _=d[f],m=s[f];let g;const b=c[f];if(m.mode===Hr.TRIANGLES||m.mode===Hr.TRIANGLE_STRIP||m.mode===Hr.TRIANGLE_FAN||void 0===m.mode)g=!0===o.isSkinnedMesh?new xF(_,b):new Ii(_,b),!0===g.isSkinnedMesh&&g.normalizeSkinWeights(),m.mode===Hr.TRIANGLE_STRIP?g.geometry=DN(g.geometry,1):m.mode===Hr.TRIANGLE_FAN&&(g.geometry=DN(g.geometry,2));else if(m.mode===Hr.LINES)g=new tC(_,b);else if(m.mode===Hr.LINE_STRIP)g=new bl(_,b);else if(m.mode===Hr.LINE_LOOP)g=new RF(_,b);else{if(m.mode!==Hr.POINTS)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+m.mode);g=new OF(_,b)}Object.keys(g.geometry.morphAttributes).length>0&&Ote(g,o),g.name=t.createUniqueName(o.name||"mesh_"+e),va(g,o),m.extensions&&Al(r,g,m),t.assignFinalMaterial(g),u.push(g)}for(let f=0,p=u.length;f<p;f++)t.associations.set(u[f],{meshes:e,primitives:f});if(1===u.length)return o.extensions&&Al(r,u[0],o),u[0];const h=new As;o.extensions&&Al(r,h,o),t.associations.set(h,{meshes:e});for(let f=0,p=u.length;f<p;f++)h.add(u[f]);return h})}loadCamera(e){let t;const i=this.json.cameras[e],r=i[i.type];if(r)return"perspective"===i.type?t=new ai(nY_radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):"orthographic"===i.type&&(t=new vg(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),i.name&&(t.name=this.createUniqueName(i.name)),va(t,i),Promise.resolve(t);console.warn("THREE.GLTFLoader: Missing camera parameters.")}loadSkin(e){const t=this.json.skins[e],i=[];for(let r=0,o=t.joints.length;r<o;r++)i.push(this._loadNodeShallow(t.joints[r]));return i.push(void 0!==t.inverseBindMatrices?this.getDependency("accessor",t.inverseBindMatrices):null),Promise.all(i).then(function(r){const o=r.pop(),s=r,a=[],l=[];for(let c=0,d=s.length;c<d;c++){const u=s[c];if(u){a.push(u);const h=new ct;null!==o&&h.fromArray(o.array,16*c),l.push(h)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[c])}return new Eg(a,l)})}loadAnimation(e){const i=this.json.animations[e],r=i.name?i.name:"animation_"+e,o=[],s=[],a=[],l=[],c=[];for(let d=0,u=i.channels.length;d<u;d++){const h=i.channels[d],f=i.samplers[h.sampler],p=h.target,m=void 0!==i.parameters?i.parameters[f.input]:f.input,g=void 0!==i.parameters?i.parameters[f.output]:f.output;void 0!==p.node&&(o.push(this.getDependency("node",p.node)),s.push(this.getDependency("accessor",m)),a.push(this.getDependency("accessor",g)),l.push(f),c.push(p))}return Promise.all([Promise.all(o),Promise.all(s),Promise.all(a),Promise.all(l),Promise.all(c)]).then(function(d){const u=d[0],h=d[1],f=d[2],p=d[3],_=d[4],m=[];for(let g=0,b=u.length;g<b;g++){const v=u[g],y=h[g],x=f[g],S=p[g],D=_[g];if(void 0===v)continue;let I;switch(v.updateMatrix(),_a[D.path]){case _a.weights:I=Xh;break;case _a.rotation:I=Ml;break;default:I=Yh}const C=v.name?v.name:v.uuid,T=void 0!==S.interpolation?Ite[S.interpolation]:ed,j=[];_a[D.path]===_a.weights?v.traverse(function(V){V.morphTargetInfluences&&j.push(V.name?V.name:V.uuid)}):j.push(C);let ie=x.array;if(x.normalized){const V=$C(ie.constructor),G=new Float32Array(ie.length);for(let $=0,z=ie.length;$<z;$++)G[$]=ie[$]*V;ie=G}for(let V=0,G=j.length;V<G;V++){const $=new I(j[V]+"."+_a[D.path],y.array,ie,T);"CUBICSPLINE"===S.interpolation&&($.createInterpolant=function(H){return new(this instanceof Ml?Ate:RN)(this.times,this.values,this.getValueSize()/3,H)},$.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),m.push($)}}return new Zh(r,void 0,m)})}createNodeMesh(e){const i=this,r=this.json.nodes[e];return void 0===r.mesh?null:i.getDependency("mesh",r.mesh).then(function(o){const s=i._getNodeRef(i.meshCache,r.mesh,o);return void 0!==r.weights&&s.traverse(function(a){if(a.isMesh)for(let l=0,c=r.weights.length;l<c;l++)a.morphTargetInfluences[l]=r.weights[l]}),s})}loadNode(e){const i=this,r=this.json.nodes[e],o=i._loadNodeShallow(e),s=[],a=r.children||[];for(let c=0,d=a.length;c<d;c++)s.push(i.getDependency("node",a[c]));const l=void 0===r.skin?Promise.resolve(null):i.getDependency("skin",r.skin);return Promise.all([o,Promise.all(s),l]).then(function(c){const d=c[0],u=c[1],h=c[2];null!==h&&d.traverse(function(f){f.isSkinnedMesh&&f.bind(h,Nte)});for(let f=0,p=u.length;f<p;f++)d.add(u[f]);return d})}_loadNodeShallow(e){const i=this.extensions,r=this;if(void 0!==this.nodeCache[e])return this.nodeCache[e];const o=this.json.nodes[e],s=o.name?r.createUniqueName(o.name):"",a=[],l=r._invokeOne(function(c){return c.createNodeMesh&&c.createNodeMesh(e)});return l&&a.push(l),void 0!==o.camera&&a.push(r.getDependency("camera",o.camera).then(function(c){return r._getNodeRef(r.cameraCache,o.camera,c)})),r._invokeAll(function(c){return c.createNodeAttachment&&c.createNodeAttachment(e)}).forEach(function(c){a.push(c)}),this.nodeCache[e]=Promise.all(a).then(function(c){let d;if(d=!0===o.isBone?new Jx:c.length>1?new As:1===c.length?c[0]:new oi,d!==c[0])for(let u=0,h=c.length;u<h;u++)d.add(c[u]);if(o.name&&(d.userData.name=o.name,d.name=s),va(d,o),o.extensions&&Al(i,d,o),void 0!==o.matrix){const u=new ct;u.fromArray(o.matrix),d.applyMatrix4(u)}else void 0!==o.translation&&d.position.fromArray(o.translation),void 0!==o.rotation&&d.quaternion.fromArray(o.rotation),void 0!==o.scale&&d.scale.fromArray(o.scale);return r.associations.has(d)||r.associations.set(d,{}),r.associations.get(d).nodes=e,d}),this.nodeCache[e]}loadScene(e){const t=this.extensions,i=this.json.scenes[e],r=this,o=new As;i.name&&(o.name=r.createUniqueName(i.name)),va(o,i),i.extensions&&Al(t,o,i);const s=i.nodes||[],a=[];for(let l=0,c=s.length;l<c;l++)a.push(r.getDependency("node",s[l]));return Promise.all(a).then(function(l){for(let d=0,u=l.length;d<u;d++)o.add(l[d]);return r.associations=(d=>{const u=new Map;for(const[h,f]of r.associations)(h instanceof po||h instanceof co)&&u.set(h,f);return d.traverse(h=>{const f=r.associations.get(h);null!=f&&u.set(h,f)}),u})(o),o})}}function kN(n,e,t){const i=e.attributes,r=[];function o(s,a){return t.getDependency("accessor",s).then(function(l){n.setAttribute(a,l)})}for(const s in i){const a=GC[s]||s.toLowerCase();a in n.attributes||r.push(o(i[s],a))}if(void 0!==e.indices&&!n.index){const s=t.getDependency("accessor",e.indices).then(function(a){n.setIndex(a)});r.push(s)}return va(n,e),function Bte(n,e,t){const i=e.attributes,r=new Go;if(void 0===i.POSITION)return;{const a=t.json.accessors[i.POSITION],l=a.min,c=a.max;if(void 0===l||void 0===c)return void console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");if(r.set(new R(l[0],l[1],l[2]),new R(c[0],c[1],c[2])),a.normalized){const d=$C(Bd[a.componentType]);r.min.multiplyScalar(d),r.max.multiplyScalar(d)}}const o=e.targets;if(void 0!==o){const a=new R,l=new R;for(let c=0,d=o.length;c<d;c++){const u=o[c];if(void 0!==u.POSITION){const h=t.json.accessors[u.POSITION],f=h.min,p=h.max;if(void 0!==f&&void 0!==p){if(l.setX(Math.max(Math.abs(f[0]),Math.abs(p[0]))),l.setY(Math.max(Math.abs(f[1]),Math.abs(p[1]))),l.setZ(Math.max(Math.abs(f[2]),Math.abs(p[2]))),h.normalized){const _=$C(Bd[h.componentType]);l.multiplyScalar(_)}a.max(l)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}r.expandByVector(a)}n.boundingBox=r;const s=new uo;r.getCenter(s.center),s.radius=r.min.distanceTo(r.max)/2,n.boundingSphere=s}(n,e,t),Promise.all(r).then(function(){return void 0!==e.targets?function Pte(n,e,t){let i=!1,r=!1,o=!1;for(let c=0,d=e.length;c<d;c++){const u=e[c];if(void 0!==u.POSITION&&(i=!0),void 0!==u.NORMAL&&(r=!0),void 0!==u.COLOR_0&&(o=!0),i&&r&&o)break}if(!i&&!r&&!o)return Promise.resolve(n);const s=[],a=[],l=[];for(let c=0,d=e.length;c<d;c++){const u=e[c];if(i){const h=void 0!==u.POSITION?t.getDependency("accessor",u.POSITION):n.attributes.position;s.push(h)}if(r){const h=void 0!==u.NORMAL?t.getDependency("accessor",u.NORMAL):n.attributes.normal;a.push(h)}if(o){const h=void 0!==u.COLOR_0?t.getDependency("accessor",u.COLOR_0):n.attributes.color;l.push(h)}}return Promise.all([Promise.all(s),Promise.all(a),Promise.all(l)]).then(function(c){const u=c[1],h=c[2];return i&&(n.morphAttributes.position=c[0]),r&&(n.morphAttributes.normal=u),o&&(n.morphAttributes.color=h),n.morphTargetsRelative=!0,n})}(n,e.targets,t):n})}let Ute=(()=>{class n{ngOnInit(){this.createThreeJsBox()}createThreeJsBox(){const t=document.getElementById("canvas-box"),i=new dF;let r=new As,o=new fN(r);const s_width=window.innerWidth,s_height=window.innerHeight,a=new ai(75,s_width/s_height,.1,200);if(a.aspect=t.clientWidth/t.clientHeight,a.updateProjectionMatrix(),a.position.set(-4,1,1),!t)return;const l=new cF({canvas:t,alpha:!0});l.setClearColor(16777215,0);const c=new rte(a,l.domElement);c.target.set(0,0,0),c.update(),c.enablePan=!1,c.enableDamping=!0,c.enableZoom=!1,c.maxPolarAngle=Math.PI/2,c.minPolarAngle=Math.PI/2,(new ste).load("../../assets/planet/scene.gltf",function(f){r=f.scene,r.rotation.y=0,r.position.y=0,r.scale.set(2.5,2.5,2.5),i.add(r),o=new fN(r),o.clipAction(f.animations[0]).play(),h()},void 0,function(f){console.error(f)});const u=new cN;function h(){requestAnimationFrame(h);const f=u.getDelta();o.update(f),c.update(),l.render(i,a)}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=yt({type:n,selectors:[["app-planet"]],decls:1,vars:0,consts:[["id","canvas-box","width","720","height","480"]],template:function(t,i){1&t&&Ie(0,"canvas",0)},styles:["canvas[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slide-out 1s forwards;-webkit-animation:_ngcontent-%COMP%_slide-out 1s forwards}@keyframes _ngcontent-%COMP%_slide-out{0%{transform:translate(100%)}to{transform:translate(0)}}"]}),n})();const Vte=function(){return["/auth/register"]};let Hte=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=yt({type:n,selectors:[["app-hero"]],decls:7,vars:2,consts:[[1,"md:flex-row","flex-col-reverse","flex","overflow-hidden","mt-12"],[1,"m-auto"],[1,"mt-12"],["type","submit","data-te-ripple-init","","data-te-ripple-color","light",1,"m-auto","rounded","bg-success","px-7","py-3","flex-wrap","text-sm","font-medium","uppercase","text-white","shadow-[0_4px_9px_-4px_#2eb85c]","transition","duration-150","ease-in-out","hover:shadow-[0_4px_18px_18px_rgba(46,184,92,0.2)]",3,"routerLink"],[1,"xl:flex-0","md:w-[500px]","h-[300px]","md:mx-auto"],[1,"topDiv"]],template:function(t,i){1&t&&(M(0,"div",0)(1,"div",1)(2,"div",2)(3,"a",3),O(4," Get started "),w()()(),M(5,"div",4),Ie(6,"app-planet",5),w()()),2&t&&(B(3),Q("routerLink",Ln(1,Vte)))},dependencies:[er,Ute],styles:[".topDiv[_ngcontent-%COMP%]{box-sizing:border-box;display:flex;flex-direction:column}#slider[_ngcontent-%COMP%]{transform:translate(-100%);-webkit-transform:translateX(-100%)}.slide-left[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slide-left .9s forwards;-webkit-animation:_ngcontent-%COMP%_slide-left .9s forwards}@keyframes _ngcontent-%COMP%_slide-left{to{transform:translate(0)}}"]}),n})(),zte=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=yt({type:n,selectors:[["app-newsletter"]],decls:19,vars:0,consts:[["id","newsletter"],[1,"container","bg-black","mb-24","pb-5","mx-auto","md:px-6","xl:px-32"],[1,"mb-32","text-center","lg:text-left"],[1,"block","rounded-lg","bg-gray-900","shadow-[0_2px_15px_-3px_rgba(0,0,0,0.07),0_10px_20px_-2px_rgba(0,0,0,0.04)]"],[1,"flex","flex-wrap","items-center"],[1,"hidden","shrink-0","grow-0","basis-auto","lg:flex","lg:w-6/12","xl:w-4/12"],["src","https://images.ctfassets.net/hnk2vsx53n6l/34WwTVAeh7izZKwNuWYHgr/306ffc17bba391b2daf559d5b8a4f4f5/Running_Tips_for_Beginners_Cover_Image.jpg?w=600&h=800&fm=png&f=center&fit=fill&q=80","alt","Trendy Pants and Shoes",1,"w-full","rounded-t-lg","lg:rounded-tr-none","lg:rounded-bl-lg"],[1,"w-full","shrink-0","grow-0","basis-auto","lg:w-6/12","xl:w-8/12"],[1,"px-6","py-12","md:px-12"],[1,"mb-6","text-3xl","text-gray-200","font-bold"],[1,"text-green-400"],[1,"mb-6","flex-col","md:mb-0","md:flex"],["data-te-input-wrapper-init","",1,"relative","mb-3","w-full","md:mr-3","md:mb-0"],["type","text","id","exampleFormControlInput2","placeholder","Enter your email",1,"peer","block","min-h-[auto]","w-full","rounded","border-1","bg-transparent","px-3","focus:border-green-500","focus:text-gray-300"],["type","submit","data-te-ripple-init","","data-te-ripple-color","light",1,"m-auto","rounded","bg-green-500","px-7","py-3","text-sm","font-medium","uppercase","text-white","shadow-[0_4px_9px_-4px_#3b71ca]","transition","duration-150","ease-in-out","hover:bg-green-600","hover:shadow-[0_8px_9px_-4px_rgba(59,113,202,0.3),0_4px_18px_0_rgba(59,113,202,0.2)]","focus:bg-green-600","focus:shadow-[0_8px_9px_-4px_rgba(59,113,202,0.3),0_4px_18px_0_rgba(59,113,202,0.2)]","focus:outline-none","focus:ring-0","active:bg-green-700","active:shadow-[0_8px_9px_-4px_rgba(59,113,202,0.3),0_4px_18px_0_rgba(59,113,202,0.2)]"]],template:function(t,i){1&t&&(M(0,"div",0)(1,"div",1)(2,"section",2)(3,"div",3)(4,"div",4)(5,"div",5),Ie(6,"img",6),w(),M(7,"div",7)(8,"div",8)(9,"h2",9),O(10," Do not miss any updates. "),Ie(11,"br"),M(12,"span",10),O(13,"Subscribe to the newsletter!"),w()(),M(14,"div",11)(15,"div",12),Ie(16,"input",13),w(),M(17,"button",14),O(18," Subscribe "),w()()()()()()()()())}}),n})();const Gte=function(){return["/clubs/create"]},jte=function(){return["/races/create"]};let Wte=(()=>{class n{constructor(){this.styles={paddingX:"sm:px-16 px-6",paddingY:"sm:py-16 py-6",padding:"sm:px-16 px-6 sm:py-16 py-10",heroHeadText:"font-black text-white lg:text-[80px] sm:text-[60px] xs:text-[50px] text-[40px] lg:leading-[98px] mt-2",heroSubText:"text-[#dfd9ff] font-medium lg:text-[30px] sm:text-[26px] xs:text-[20px] text-[16px] lg:leading-[40px]",sectionHeadText:"text-white font-black md:text-[60px] sm:text-[50px] xs:text-[40px] text-[30px]",sectionSubText:"sm:text-[18px] text-[14px] text-secondary uppercase tracking-wider"}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=yt({type:n,selectors:[["app-main"]],decls:28,vars:25,consts:[[1,"w-75","mx-auto","pt-24"],[1,"flex","flex-col","justify-start","items-start"],[1,"app-green"],[1,"inset-0","mt-12","pt-36","pb-12","max-w-7xl","mx-auto","flex","rounded-t-lg","bg-gradient-to-t","from-gray-900","to-[#000015]"],[1,"text-lg","lg:text-xl","xl:text-2xl","2xl:text-5xl","text-white","font-bold"],["routerLinkActive","router-link-active",1,"btn","bg-app-green","mt-12","text-white",3,"routerLink"],[1,"inset-0","max-w-7xl","mx-auto","flex","bg-gradient-to-r","from-[#000015]","via-gray-900","to-[#000015]"],[1,"inset-0","mb-24","pt-24","pb-36","max-w-7xl","mx-auto","flex","rounded-b-lg","bg-gradient-to-b","from-gray-900","to-[#000015]"]],template:function(t,i){1&t&&(M(0,"section",0)(1,"div")(2,"div",1)(3,"h1"),O(4,"Welcome to "),M(5,"span",2),O(6,"RunGroops"),w()(),M(7,"p"),O(8," Meet and compete with other runners near you! "),w()()(),Ie(9,"app-hero"),M(10,"div")(11,"div",3)(12,"div")(13,"h1",4),O(14,"Start building your own running community"),w(),M(15,"a",5),O(16,"Start a Club"),w()()(),M(17,"div",6)(18,"div")(19,"h1",4),O(20,"OR"),w()()(),M(21,"div",7)(22,"div")(23,"h1",4),O(24,"Start your own competition"),w(),M(25,"a",5),O(26,"Create a Race"),w()()()(),Ie(27,"app-newsletter"),w()),2&t&&(B(1),Va("",i.styles.paddingX," inset-0 \n    max-w-7xl mx-auto flex flex-row items-start gap-5"),B(2),Va("",i.styles.heroHeadText," text-white"),B(4),Va("",i.styles.heroSubText," mt-2 text-white-100"),B(2),Rr(i.styles.paddingX),B(3),Va(" ",i.styles.paddingX," pt-6 flex flex-col justify-center items-center text-center mx-auto "),B(3),Q("routerLink",Ln(23,Gte)),B(3),Va(" ",i.styles.paddingX," flex flex-col justify-center items-center text-center mx-auto "),B(4),Va(" ",i.styles.paddingX," pb-6 flex flex-col justify-center items-center text-center mx-auto "),B(3),Q("routerLink",Ln(24,jte)))},dependencies:[er,no,Hte,zte],styles:["#fadein[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInAnimation ease .9s;animation-iteration-count:1;animation-fill-mode:forwards}@keyframes _ngcontent-%COMP%_fadeInAnimation{0%{opacity:0}to{opacity:1}}"]}),n})();const $te=function(){return["/auth/login"]};let qte=(()=>{class n{onFileSelected(t){this.selectedFile=t.target.files[0]}constructor(t,i,r){this.authService=t,this.router=i,this.toastrService=r,this.tailwindConfig={darkMode:"class",theme:{extend:{colors:{primary:{50:"#eff6ff",100:"#dbeafe",200:"#bfdbfe",300:"#93c5fd",400:"#60a5fa",500:"#3b82f6",600:"#2563eb",700:"#1d4ed8",800:"#1e40af",900:"#1e3a8a",950:"#172554"}}},fontFamily:{body:["Inter","ui-sans-serif","system-ui","-apple-system","system-ui","Segoe UI","Roboto","Helvetica Neue","Arial","Noto Sans","sans-serif","Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji"],sans:["Inter","ui-sans-serif","system-ui","-apple-system","system-ui","Segoe UI","Roboto","Helvetica Neue","Arial","Noto Sans","sans-serif","Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji"]}}}}handleRegister(t){const i=new FormData;i.append("file",this.selectedFile,this.selectedFile.name),i.append("NickName",t.NickName),i.append("Email",t.Email),i.append("Password",t.Password),i.append("Mileage",t.Mileage),i.append("Pace",t.Pace),i.append("UserCategory",t.UserCategory),this.authService.register(i).subscribe({next:r=>{this.toastrService.success("Welcome to RunGroops!","Registration successful"),this.router.navigate(["/auth/login"])},error:r=>{this.toastrService.error(r?.error.errors[0].description,"Registration failed")}})}}return n.\u0275fac=function(t){return new(t||n)(L(kr),L(dn),L(ro))},n.\u0275cmp=yt({type:n,selectors:[["app-register"]],decls:66,vars:10,consts:[[1,"bg-black"],[1,"flex","flex-col","items-center","justify-center","px-6","py-8","mx-auto"],[1,"w-full","rounded-lg","shadow","border","md:mt-0","sm:max-w-md","xl:p-0","bg-black","border-gray-700"],[1,"p-6","space-y-4","md:space-y-6","sm:p-8"],[1,"text-xl","font-bold","leading-tight","tracking-tight","md:text-2xl","text-white"],["enctype","multipart/form-data",1,"space-y-4","md:space-y-6",3,"ngSubmit"],["registerForm","ngForm"],["for","Email",1,"block","mb-2","text-sm","font-medium","text-white"],["type","email","name","Email","ngModel","","id","Email","placeholder","name@company.com","required","",1,"border","sm:text-sm","rounded-lg","block","w-full","p-2.5","bg-gray-700","border-gray-600","placeholder-gray-400","text-white","focus:ring-green-500","focus:border-green-500"],["for","NickName",1,"block","mb-2","text-sm","font-medium","text-white"],["type","text","name","NickName","ngModel","","placeholder","Johnny","required","",1,"border","sm:text-sm","rounded-lg","block","w-full","p-2.5","bg-gray-700","border-gray-600","placeholder-gray-400","text-white","focus:ring-green-500","focus:border-green-500"],["for","Password",1,"block","mb-2","text-sm","font-medium","text-white"],["type","password","name","Password","ngModel","","id","Password","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022","required","",1,"border","sm:text-sm","rounded-lg","block","w-full","p-2.5","bg-gray-700","border-gray-600","placeholder-gray-400","text-white","focus:ring-green-500","focus:border-green-500"],["for","Mileage",1,"block","mb-2","text-sm","font-medium","text-white"],["type","Mileage","name","Mileage","ngModel","","id","Mileage","placeholder","Ex. 20","required","",1,"border","sm:text-sm","rounded-lg","block","w-full","p-2.5","bg-gray-700","border-gray-600","placeholder-gray-400","text-white","focus:ring-green-500","focus:border-green-500"],["for","Pace",1,"block","mb-2","text-sm","font-medium","text-white"],["type","Pace","name","Pace","ngModel","","id","Pace","placeholder","4","required","",1,"border","sm:text-sm","rounded-lg","block","w-full","p-2.5","bg-gray-700","border-gray-600","placeholder-gray-400","text-white","focus:ring-green-500","focus:border-green-500"],["for","profilePicture",1,"block","mb-2","text-sm","font-medium","text-white"],["name","file","ngModel","","aria-describedby","user_avatar_help","id","file","type","file",1,"block","w-full","text-sm","text-gray-900","border","border-gray-300","rounded-lg","cursor-pointer","bg-gray-50","dark:text-gray-400","focus:outline-none","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400",3,"change"],["for","UserCategory",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["name","UserCategory","id","UserCategory","ngModel","",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-green-500","focus:border-green-500","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-green-500","dark:focus:border-green-500"],[3,"ngValue"],[1,"flex","items-start"],[1,"flex","items-center","h-5"],["id","terms","aria-describedby","terms","type","checkbox","required","",1,"w-4","h-4","border","rounded","bg-gray-700","border-green-500","focus:ring-green-500","ring-offset-green-800"],[1,"ml-3","text-sm"],["for","terms",1,"font-light","text-gray-300"],["href","#",1,"font-medium","hover:underline","text-green-500","hover:text-green-400"],["type","submit",1,"w-full","text-white","focus:ring-4","focus:outline-none","font-medium","rounded-lg","text-sm","px-5","py-2.5","text-center","bg-green-600","hover:bg-green-700","focus:ring-green-800"],[1,"text-sm","font-light","text-gray-400"],["routerLinkActive","router-link-active",1,"font-medium","hover:underline","text-green-500","hover:text-green-400",3,"routerLink"]],template:function(t,i){if(1&t){const r=Ni();M(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1",4),O(5," Create and account "),w(),M(6,"form",5,6),Oe("ngSubmit",function(){ni(r);const s=ss(7);return ii(i.handleRegister(s.value))}),M(8,"div")(9,"label",7),O(10,"Email"),w(),Ie(11,"input",8),w(),M(12,"div")(13,"label",9),O(14,"Nickname"),w(),Ie(15,"input",10),w(),M(16,"div")(17,"label",11),O(18,"Password"),w(),Ie(19,"input",12),w(),M(20,"div")(21,"label",13),O(22,"Your weekly milage:"),w(),Ie(23,"input",14),w(),M(24,"div")(25,"label",15),O(26,"Your pace (in minutes):"),w(),Ie(27,"input",16),w(),M(28,"div")(29,"label",17),O(30,"Profile picture:"),w(),M(31,"input",18),Oe("change",function(s){return i.onFileSelected(s)}),w()(),M(32,"div")(33,"label",19),O(34,"Category:"),w(),M(35,"select",20)(36,"option",21),O(37,"Walker"),w(),M(38,"option",21),O(39,"Beginner"),w(),M(40,"option",21),O(41,"Intermediate"),w(),M(42,"option",21),O(43,"Trail"),w(),M(44,"option",21),O(45,"Athlete"),w(),M(46,"option",21),O(47,"FiveK"),w(),M(48,"option",21),O(49,"Marathoner"),w(),M(50,"option",21),O(51,"Ultra"),w()()(),M(52,"div",22)(53,"div",23),Ie(54,"input",24),w(),M(55,"div",25)(56,"label",26),O(57,"I accept the "),M(58,"a",27),O(59,"Terms and Conditions"),w()()()(),M(60,"button",28),O(61,"Create an account"),w(),M(62,"p",29),O(63," Already have an account? "),M(64,"a",30),O(65,"Login here"),w()()()()()()()}2&t&&(B(36),Q("ngValue",1),B(2),Q("ngValue",2),B(2),Q("ngValue",3),B(2),Q("ngValue",4),B(2),Q("ngValue",5),B(2),Q("ngValue",6),B(2),Q("ngValue",7),B(2),Q("ngValue",8),B(14),Q("routerLink",Ln(9,$te)))},dependencies:[er,no,gr,so,ao,pr,sa,oo,mr,Vo,Nr,Vi]}),n})(),Ud=(()=>{class n{constructor(t,i){this.httpClient=t,this.authService=i,this.baseURL=Ka_apiURL}getClubs(t,i){return this.httpClient.get(this.baseURL+"/club?page="+t+"&pageSize="+i)}getUserClubs(t){return this.httpClient.get(this.baseURL+"/user/clubs?userId="+t,this.authService.getHttpOptions())}getClubsByName(t,i,r){return this.httpClient.get(this.baseURL+"/club/name="+t+"?page="+i+"&pageSize="+r)}getClubById(t){return this.httpClient.get(this.baseURL+"/club/"+t)}createClub(t){return this.httpClient.post(this.baseURL+"/club",t,this.authService.getHttpOptions())}updateClub(t,i){return this.httpClient.put(this.baseURL+"/club?clubId="+i,t,this.authService.getHttpOptions())}deleteClub(t){return this.httpClient.delete(this.baseURL+"/club?clubId="+t,this.authService.getHttpOptions())}}return n.\u0275fac=function(t){return new(t||n)(J(na),J(kr))},n.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Xte=function(n){return["/clubs/",n]};function Yte(n,e){if(1&n&&(M(0,"div",22)(1,"div",23),Ie(2,"img",24),w(),M(3,"div",25)(4,"div")(5,"h3",26)(6,"h1",27),Ie(7,"span",28),O(8),w()(),M(9,"p",29),O(10),w(),M(11,"p",30),O(12),w()()()()),2&n){const t=e.$implicit;B(2),Ar("src",t.imageURL,dr),B(4),Q("routerLink",Xs(6,Xte,t.id)),B(2),cn(" ",t.name," "),B(2),Tc("",t.address.city,", ",t.address.country,""),B(2),Yn(t.clubCategory)}}function Zte(n,e){if(1&n){const t=Ni();M(0,"div",16),rt(1,Yte,13,8,"div",17),M(2,"div",18)(3,"a",19),Oe("click",function(){return ni(t),ii(Et().prevPage())}),O(4,"Prev"),w(),M(5,"span",20),O(6),w(),M(7,"a",21),Oe("click",function(){return ni(t),ii(Et().nextPage())}),O(8,"Next"),w()()()}if(2&n){const t=Et();B(1),Q("ngForOf",t.clubs),B(2),Q("ngClass",t.hasPreviousPage?"":"disabled"),B(3),cn("Page ",t.pageNumber+1,""),B(1),Q("ngClass",t.hasNextPage?"":"disabled")}}function Kte(n,e){1&n&&(M(0,"div",16)(1,"h1",31),O(2,"No users found."),w()())}const Qte=function(){return["/clubs/create"]};let Jte=(()=>{class n{constructor(t){this.clubService=t,this.clubs=[],this.searchTerm="",this.pageSize=5,this.pageNumber=0,this.hasPreviousPage=!1,this.hasNextPage=!1,this.searchedByName=!1}ngOnInit(){this.getClubs(this.pageNumber,this.pageSize)}getClubs(t,i){t<0?this.pageNumber=0:this.clubService.getClubs(t,i).subscribe({next:r=>{this.clubs=r.list,this.hasPreviousPage=r.hasPreviousPage,this.hasNextPage=r.hasNextPage}})}searchByName(t){this.clubs=[],this.clubService.getClubsByName(t,this.pageNumber,this.pageSize).subscribe({next:i=>{this.clubs=i.list,this.hasPreviousPage=i.hasPreviousPage,this.hasNextPage=i.hasNextPage,this.searchTerm=t,this.searchedByName=!0}})}nextPage(){this.hasNextPage&&(this.pageNumber++,this.searchedByName?this.searchByName(this.searchTerm):this.getClubs(this.pageNumber,this.pageSize))}prevPage(){this.hasPreviousPage&&(this.pageNumber--,this.searchedByName?this.searchByName(this.searchTerm):this.getClubs(this.pageNumber,this.pageSize))}}return n.\u0275fac=function(t){return new(t||n)(L(Ud))},n.\u0275cmp=yt({type:n,selectors:[["app-clubs"]],decls:23,vars:4,consts:[[1,"mx-auto","py-12","flex","flex-col","xl:mt-12","lg:mt-12"],[1,"bg-black","rounded","top-[120px]","max-w-2xl","mx-auto","flex","flex-row"],[1,"max-w-2xl","w-3/4","mx-auto"],[1,"flex","justify-content-around","flex-row","flex-wrap","gap-y-10","gap-x-3","lg:gap-x-6"],[1,"text-2xl","font-bold","tracking-tight","text-white"],[1,"app-green"],[3,"ngSubmit"],["searchForm","ngForm"],[1,"flex"],["id","searchBy",1,"border","text-sm","rounded-l-lg","cursor-pointer","block","w-full","p-2.5","bg-gray-700","border-green-600","placeholder-gray-400","text-white","focus:ring-green-500","focus:border-green-500"],["selected",""],["value","name"],["value","city"],["type","text","ngModel","","name","name","placeholder","Search...",1,"py-1","pl-3","text-white","rounded-r-lg","bg-transparent","focus:outline-none","focus:border-green-500","focus:ring-1","focus:ring-sky-500"],[1,"btn","btn-outline-success","text-white","py-1",3,"routerLink"],["class","mt-6 grid grid-cols-1 gap-x-6  sm:grid-cols-1 lg:grid-cols-1 xl:gap-x-8",4,"ngIf"],[1,"mt-6","grid","grid-cols-1","gap-x-6","sm:grid-cols-1","lg:grid-cols-1","xl:gap-x-8"],["class","group relative flex flex-row items-start gap-5 border-green-900 border-t-2 py-4",4,"ngFor","ngForOf"],[1,"pt-2","flex","justify-center"],["type","button",1,"btn","btn-sm","btn-outline-success",3,"ngClass","click"],[1,"ms-3","text-muted","text-small"],["type","button",1,"btn","btn-sm","btn-outline-success","ms-3",3,"ngClass","click"],[1,"group","relative","flex","flex-row","items-start","gap-5","border-green-900","border-t-2","py-4"],[1,"w-[150px]","h-[150px]","overflow-hidden","rounded-md","bg-gray-200","lg:aspect-none","group-hover:opacity-75","justify-start"],["alt","Front of men's Basic Tee in black.",1,"h-full","w-full","object-cover","object-center","lg:h-full","lg:w-full",3,"src"],[1,"mt-4","flex","justify-center","align-content-center"],[1,"text-sm","md:text-lg","text-light"],["routerLinkActive","router-link-active","routerLinkActive","router-link-active",1,"text-light","font-bold","cursor-pointer","text-sm","md:text-lg",3,"routerLink"],["aria-hidden","true",1,"absolute","inset-0"],[1,"mt-1","text-sm","md:text-md","font-semibold"],[1,"mt-3","text-sm","md:text-md","font-semibold","text-green-700"],[1,"text-2xl","font-bold","tracking-tight","text-white","mx-auto","my-24"]],template:function(t,i){if(1&t){const r=Ni();M(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1",4),O(5,"Featured "),M(6,"span",5),O(7,"Running Clubs"),w()(),M(8,"form",6,7),Oe("ngSubmit",function(){ni(r);const s=ss(9);return ii(i.searchByName(s.value.name))}),M(10,"div",8)(11,"select",9)(12,"option",10),O(13,"Search by"),w(),M(14,"option",11),O(15,"Name"),w(),M(16,"option",12),O(17,"City"),w()(),Ie(18,"input",13),w()(),M(19,"a",14),O(20,"Start a Club"),w()(),rt(21,Zte,9,4,"div",15),rt(22,Kte,3,0,"div",15),w()()()}2&t&&(B(19),Q("routerLink",Ln(3,Qte)),B(2),Q("ngIf",i.clubs.length),B(1),Q("ngIf",!i.clubs.length))},dependencies:[qu,ja,No,er,no,gr,so,ao,pr,oo,mr,Nr,Vi]}),n})();class Kg{}class ene{constructor(){this.address=new Kg}}let tne=(()=>{class n{constructor(t,i,r,o){this.clubService=t,this.authService=i,this.router=r,this.toastrService=o,this.club=new ene,this.baseUrl=Ka_apiURL,this.club.address=new Kg}ngOnInit(){this.authService.loggedIn()||(this.toastrService.warning("You must be logged in to create new clubs."),this.router.navigate(["auth/login"]))}onFileSelected(t){this.selectedFile=t.target.files[0]}handleCreate(){const t=new FormData;t.append("file",this.selectedFile,this.selectedFile.name),t.append("name",this.club.name),t.append("description",this.club.description),t.append("clubCategory",this.club.clubCategory.toString()),t.append("address.country",this.club.address.country),t.append("address.city",this.club.address.city),t.append("address.street",this.club.address.street),t.append("address.zip",this.club.address.zip.toString()),this.clubService.createClub(t).subscribe({next:i=>{this.toastrService.success("Club created successfully!"),this.router.navigate(["/"])},error:i=>{this.toastrService.error("Something went wrong."),console.log(i)}})}}return n.\u0275fac=function(t){return new(t||n)(L(Ud),L(kr),L(dn),L(ro))},n.\u0275cmp=yt({type:n,selectors:[["app-club-create"]],inputs:{club:"club"},decls:52,vars:12,consts:[[1,"bg-black"],[1,"flex","flex-col","items-center","justify-center","px-6","py-12","mx-auto","md:h-window"],[1,"w-full","bg-gray-900","rounded-lg","shadow","dark:border","md:mt-0","sm:max-w-md","xl:p-0","dark:border-gray-700"],[1,"p-6","space-y-4","md:space-y-6","sm:p-8"],[1,"text-xl","font-bold","leading-tight","tracking-tight","text-gray-900","md:text-2xl","dark:text-white"],["enctype","multipart/form-data",3,"ngSubmit"],["createClubForm","ngForm"],[1,"mb-6"],["for","name",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["type","text","name","name","id","name","required","",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-green-500","focus:border-green-500","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-green-500","dark:focus:border-green-500",3,"ngModel","ngModelChange"],["for","description",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["id","description","name","description","rows","4",1,"block","p-2.5","w-full","text-sm","text-gray-900","bg-gray-50","rounded-lg","border","border-gray-300","focus:ring-green-500","focus:border-green-500","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-green-500","dark:focus:border-green-500",3,"ngModel","ngModelChange"],["for","club.address.country",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["type","text","name","country","id","club.address.country","required","",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-green-500","focus:border-green-500","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-green-500","dark:focus:border-green-500",3,"ngModel","ngModelChange"],["for","city",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["type","text","name","city","id","city","required","",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-green-500","focus:border-green-500","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-green-500","dark:focus:border-green-500",3,"ngModel","ngModelChange"],["for","street",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["type","text","id","street","name","street","required","",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-green-500","focus:border-green-500","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-green-500","dark:focus:border-green-500",3,"ngModel","ngModelChange"],["for","zip",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["type","number","id","zip","name","zip","required","",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-green-500","focus:border-green-500","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-green-500","dark:focus:border-green-500",3,"ngModel","ngModelChange"],[1,"relative","z-0","w-full","mb-6","group"],["for","file",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["name","file","aria-describedby","user_avatar_help","id","file","type","file",1,"block","w-full","text-sm","text-gray-900","border","border-gray-300","rounded-lg","cursor-pointer","bg-gray-50","dark:text-gray-400","focus:outline-none","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400",3,"change"],["for","clubCategory",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["name","clubCategory","id","clubCategory",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-green-500","focus:border-green-500","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-green-500","dark:focus:border-green-500",3,"ngModel","ngModelChange"],[3,"ngValue"],["type","submit",1,"text-white","bg-green-700","hover:bg-green-800","focus:ring-4","focus:outline-none","focus:ring-green-300","font-medium","rounded-lg","text-sm","w-full","sm:w-auto","px-5","py-2.5","text-center","dark:bg-green-600","dark:hover:bg-green-700","dark:focus:ring-green-800"]],template:function(t,i){1&t&&(M(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1",4),O(5," Start a new club! "),w(),M(6,"form",5,6),Oe("ngSubmit",function(){return i.handleCreate()}),M(8,"div",7)(9,"label",8),O(10,"Name:"),w(),M(11,"input",9),Oe("ngModelChange",function(o){return i.club.name=o}),w()(),M(12,"div",7)(13,"label",10),O(14,"Description:"),w(),M(15,"textarea",11),Oe("ngModelChange",function(o){return i.club.description=o}),w()(),M(16,"div",7)(17,"label",12),O(18,"Country:"),w(),M(19,"input",13),Oe("ngModelChange",function(o){return i.club.address.country=o}),w()(),M(20,"div",7)(21,"label",14),O(22,"City:"),w(),M(23,"input",15),Oe("ngModelChange",function(o){return i.club.address.city=o}),w()(),M(24,"div",7)(25,"label",16),O(26,"Street:"),w(),M(27,"input",17),Oe("ngModelChange",function(o){return i.club.address.street=o}),w()(),M(28,"div",7)(29,"label",18),O(30,"Zip:"),w(),M(31,"input",19),Oe("ngModelChange",function(o){return i.club.address.zip=o}),w()(),M(32,"div",20)(33,"label",21),O(34,"Logo:"),w(),M(35,"input",22),Oe("change",function(o){return i.onFileSelected(o)}),w()(),M(36,"div",20)(37,"label",23),O(38,"Category:"),w(),M(39,"select",24),Oe("ngModelChange",function(o){return i.club.clubCategory=o}),M(40,"option",25),O(41,"RoadRunner"),w(),M(42,"option",25),O(43,"Womans"),w(),M(44,"option",25),O(45,"City"),w(),M(46,"option",25),O(47,"Trail"),w(),M(48,"option",25),O(49,"Endurance"),w()()(),M(50,"button",26),O(51,"Submit"),w()()()()()()),2&t&&(B(11),Q("ngModel",i.club.name),B(4),Q("ngModel",i.club.description),B(4),Q("ngModel",i.club.address.country),B(4),Q("ngModel",i.club.address.city),B(4),Q("ngModel",i.club.address.street),B(4),Q("ngModel",i.club.address.zip),B(8),Q("ngModel",i.club.clubCategory),B(1),Q("ngValue",1),B(2),Q("ngValue",2),B(2),Q("ngValue",3),B(2),Q("ngValue",4),B(2),Q("ngValue",5))},dependencies:[gr,so,ao,pr,Xc,sa,oo,mr,Vo,Nr,Vi]}),n})();class FN{}let nne=(()=>{class n{constructor(t,i,r){this.route=t,this.clubService=i,this.router=r,this.club=new FN,this.club.address=new Wc}ngOnInit(){let t=this.route.snapshot.paramMap.get("id");if(null!=t){let i=parseInt(t);this.clubService.getClubById(i).subscribe({next:r=>this.club=r,error:r=>this.router.navigate(["/"])})}}}return n.\u0275fac=function(t){return new(t||n)(L(eo),L(Ud),L(dn))},n.\u0275cmp=yt({type:n,selectors:[["app-club-single"]],outputs:{club:"club"},decls:88,vars:6,consts:[[1,"bg-black"],[1,"container","w-75","pt-12"],[1,"row"],[1,"col-lg-7","mb-4","mb-sm-0"],["alt","Image",1,"rounded","img-fluid",3,"src"],[1,"col-lg-4","d-flex","flex-column","justify-content-between","mx-auto"],[1,"text-gray-300","text-lg","font-bold","mb-2"],[1,"text-gray-500","text-md","font-medium","mb-3"],[1,"badge","bg-gray-700","text-gray-300","me-3"],[1,"col-12","py-12"],[1,"list-group-item"],[1,"d-flex","justify-content-between"],[1,"icon-text-document","mr-1"],[1,"icon-edit","mr-1"],[1,"icon-thumbs-up","mr-1"],[1,"icon-share","mr-1"],[1,"pt-3"],[1,"btn-group","mb-2"],["type","number","hidden","","data-val","true","data-val-required","The Id field is required.","id","Id","name","Id","value","152"],["type","submit",1,"btn","btn-outline-success"],[1,"space-sm"],[1,"container","w-75","py-8"],[1,"row","justify-content-between"],[1,"col-12","col-md-8","col-lg-7","bg-gray-900","rounded","pt-3"],[1,"mb-4","text-lg","text-gray-300","font-bold"],["id","description"],[1,"text-gray-500","font-medium"],[1,"pt-4"],[1,"mb-4","text-gray-300","font-bold"],[1,"mb-3"],["data-target","#comment-reply","data-toggle","collapse","aria-expanded","false","aria-controls","comment-reply",1,"btn","btn-success"],[1,"d-flex","align-items-center"],[1,"mr-2","text-muted","text-small","text-nowrap"],[1,"custom-select","rounded","ps-1"],["value","old-new","selected",""],["value","new-old"],["id","comment-reply",1,"collapse"],["onsubmit","submitComment(event);",1,"card-body"],[1,"form-group"],["id","comment-text","rows","4","placeholder","Type your comment here",1,"form-control","from-control-lg"],[1,"mb-2"],[1,"custom-control","custom-checkbox"],["type","checkbox","name","notify-reply","id","check-notify",1,"custom-control-input"],["for","check-notify",1,"custom-control-label","text-small"],["type","submit",1,"btn","btn-success","mr-3"],["href","#comment-reply","data-toggle","collapse","aria-expanded","true","aria-controls","comment-reply",1,"text-small","text-muted"],[1,"list-group","list-group-flush","list-group-comments"]],template:function(t,i){1&t&&(M(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3),Ie(4,"img",4),w(),M(5,"div",5)(6,"div")(7,"h1",6),O(8),w(),M(9,"h2",7),O(10),w(),M(11,"div")(12,"span",8),O(13),w()(),M(14,"div",9)(15,"li",10)(16,"div",11)(17,"div"),Ie(18,"i",12),O(19," Created"),w(),M(20,"span"),O(21,"1/13/2022"),w()()(),M(22,"li",10)(23,"div",11)(24,"div"),Ie(25,"i",13),O(26," Last updated"),w(),M(27,"span"),O(28,"23/06/2023"),w()()(),M(29,"li",10)(30,"div",11)(31,"div"),Ie(32,"i",14),O(33," Owner"),w(),M(34,"span"),O(35,"Mictostrasto"),w()()(),M(36,"li",10)(37,"div",11)(38,"div"),Ie(39,"i",15),O(40," Shares"),w(),M(41,"span"),O(42,"52"),w()()()()(),M(43,"div",16)(44,"div",17)(45,"form"),Ie(46,"input",18),M(47,"button",19),O(48,"Join Club"),w()()()()()()()(),M(49,"section",20)(50,"div",21)(51,"div",22)(52,"div",23)(53,"h5",24),O(54,"Overview"),w(),M(55,"article",25)(56,"p",26),O(57),w()(),Ie(58,"hr",27),M(59,"h5",28),O(60,"Discussion"),w(),M(61,"div",29)(62,"div",11)(63,"button",30),O(64," Comment "),w(),M(65,"form",31)(66,"span",32),O(67,"Sort by:"),w(),M(68,"select",33)(69,"option",34),O(70,"Newest"),w(),M(71,"option",35),O(72,"Popular"),w()()()(),M(73,"div",36)(74,"form",37)(75,"div",38),Ie(76,"textarea",39),w(),M(77,"div",40)(78,"div",41),Ie(79,"input",42),M(80,"label",43),O(81,"Notify me when someone replies"),w()()(),M(82,"div",31)(83,"button",44),O(84,"Submit comment"),w(),M(85,"a",45),O(86,"Cancel"),w()()()(),Ie(87,"ul",46),w()()()()()),2&t&&(B(4),Ar("src",i.club.imageURL,dr),B(4),Yn(i.club.name),B(2),Tc("",i.club.address.city,", ",i.club.address.country,""),B(3),Yn(i.club.clubCategory),B(44),Yn(i.club.description))},dependencies:[gr,so,ao,mr,Vi]}),n})(),ine=(()=>{class n{onFileSelected(t){this.selectedFile=t.target.files[0]}constructor(t,i,r,o,s){this.route=t,this.clubService=i,this.router=r,this.toastrService=o,this.authService=s,this.jwtHelper=new Am,this.club=new FN,this.club.address=new Wc}ngOnInit(){this.authService.loggedIn()||(this.toastrService.error("You must be logged in to update this club!"),this.router.navigate(["/auth/login"]));let t=this.route.snapshot.paramMap.get("id");if(t){const r=localStorage.getItem("token");if(null!=r){var i=this.jwtHelper.decodeToken(r);let o=parseInt(t);this.clubService.getClubById(o).subscribe({next:s=>{s.appUserId==i.nameid?this.club=s:this.router.navigate(["/"])},error:()=>this.router.navigate(["/"])})}}}handleUpdate(){const t=new FormData;t.append("file",this.selectedFile,this.selectedFile.name),t.append("name",this.club.name),t.append("description",this.club.description),t.append("clubCategory",this.club.clubCategory.toString()),t.append("address.country",this.club.address.country),t.append("address.city",this.club.address.city),t.append("address.street",this.club.address.street),t.append("address.zip",this.club.address.zip.toString()),this.clubService.updateClub(t,this.club.id).subscribe({next:i=>{this.toastrService.success("Club updated successfully!"),this.router.navigate(["/clubs/"+this.club.id])},error:i=>{this.toastrService.error("Something went wrong."),console.log(i)}})}}return n.\u0275fac=function(t){return new(t||n)(L(eo),L(Ud),L(dn),L(ro),L(kr))},n.\u0275cmp=yt({type:n,selectors:[["app-update-club"]],inputs:{club:"club"},decls:52,vars:12,consts:[[1,"bg-black"],[1,"flex","flex-col","items-center","justify-center","px-6","py-12","mx-auto","md:h-window"],[1,"w-full","bg-gray-900","rounded-lg","shadow","dark:border","md:mt-0","sm:max-w-md","xl:p-0","dark:border-gray-700"],[1,"p-6","space-y-4","md:space-y-6","sm:p-8"],[1,"text-xl","font-bold","leading-tight","tracking-tight","text-gray-900","md:text-2xl","dark:text-white"],["enctype","multipart/form-data",3,"ngSubmit"],["updateClubForm","ngForm"],[1,"mb-6"],["for","name",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["type","text","name","name","id","name","required","",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-green-500","focus:border-green-500","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-green-500","dark:focus:border-green-500",3,"ngModel","ngModelChange"],["for","description",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["id","description","name","description","rows","4",1,"block","p-2.5","w-full","text-sm","text-gray-900","bg-gray-50","rounded-lg","border","border-gray-300","focus:ring-green-500","focus:border-green-500","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-green-500","dark:focus:border-green-500",3,"ngModel","ngModelChange"],["for","club.address.country",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["type","text","name","country","id","club.address.country","required","",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-green-500","focus:border-green-500","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-green-500","dark:focus:border-green-500",3,"ngModel","ngModelChange"],["for","city",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["type","text","name","city","id","city","required","",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-green-500","focus:border-green-500","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-green-500","dark:focus:border-green-500",3,"ngModel","ngModelChange"],["for","street",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["type","text","id","street","name","street","required","",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-green-500","focus:border-green-500","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-green-500","dark:focus:border-green-500",3,"ngModel","ngModelChange"],["for","zip",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["type","number","id","zip","name","zip","required","",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-green-500","focus:border-green-500","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-green-500","dark:focus:border-green-500",3,"ngModel","ngModelChange"],[1,"relative","z-0","w-full","mb-6","group"],["for","file",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["name","file","aria-describedby","user_avatar_help","id","file","type","file",1,"block","w-full","text-sm","text-gray-900","border","border-gray-300","rounded-lg","cursor-pointer","bg-gray-50","dark:text-gray-400","focus:outline-none","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400",3,"change"],["for","clubCategory",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["name","clubCategory","id","clubCategory",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-green-500","focus:border-green-500","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-green-500","dark:focus:border-green-500",3,"ngModel","ngModelChange"],[3,"ngValue"],["type","submit",1,"text-white","bg-green-700","hover:bg-green-800","focus:ring-4","focus:outline-none","focus:ring-green-300","font-medium","rounded-lg","text-sm","w-full","sm:w-auto","px-5","py-2.5","text-center","dark:bg-green-600","dark:hover:bg-green-700","dark:focus:ring-green-800"]],template:function(t,i){1&t&&(M(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1",4),O(5," Update your club: "),w(),M(6,"form",5,6),Oe("ngSubmit",function(){return i.handleUpdate()}),M(8,"div",7)(9,"label",8),O(10,"Name:"),w(),M(11,"input",9),Oe("ngModelChange",function(o){return i.club.name=o}),w()(),M(12,"div",7)(13,"label",10),O(14,"Description:"),w(),M(15,"textarea",11),Oe("ngModelChange",function(o){return i.club.description=o}),w()(),M(16,"div",7)(17,"label",12),O(18,"Country:"),w(),M(19,"input",13),Oe("ngModelChange",function(o){return i.club.address.country=o}),w()(),M(20,"div",7)(21,"label",14),O(22,"City:"),w(),M(23,"input",15),Oe("ngModelChange",function(o){return i.club.address.city=o}),w()(),M(24,"div",7)(25,"label",16),O(26,"Street:"),w(),M(27,"input",17),Oe("ngModelChange",function(o){return i.club.address.street=o}),w()(),M(28,"div",7)(29,"label",18),O(30,"Zip:"),w(),M(31,"input",19),Oe("ngModelChange",function(o){return i.club.address.zip=o}),w()(),M(32,"div",20)(33,"label",21),O(34,"Logo:"),w(),M(35,"input",22),Oe("change",function(o){return i.onFileSelected(o)}),w()(),M(36,"div",20)(37,"label",23),O(38,"Category:"),w(),M(39,"select",24),Oe("ngModelChange",function(o){return i.club.clubCategory=o}),M(40,"option",25),O(41,"RoadRunner"),w(),M(42,"option",25),O(43,"Womans"),w(),M(44,"option",25),O(45,"City"),w(),M(46,"option",25),O(47,"Trail"),w(),M(48,"option",25),O(49,"Endurance"),w()()(),M(50,"button",26),O(51,"Submit"),w()()()()()()),2&t&&(B(11),Q("ngModel",i.club.name),B(4),Q("ngModel",i.club.description),B(4),Q("ngModel",i.club.address.country),B(4),Q("ngModel",i.club.address.city),B(4),Q("ngModel",i.club.address.street),B(4),Q("ngModel",i.club.address.zip),B(8),Q("ngModel",i.club.clubCategory),B(1),Q("ngValue",1),B(2),Q("ngValue",2),B(2),Q("ngValue",3),B(2),Q("ngValue",4),B(2),Q("ngValue",5))},dependencies:[gr,so,ao,pr,Xc,sa,oo,mr,Vo,Nr,Vi]}),n})(),Vd=(()=>{class n{constructor(t,i){this.httpClient=t,this.authService=i,this.baseUrl=Ka_apiURL}getRaces(t,i){return this.httpClient.get(this.baseUrl+"/Race?page="+t+"&pageSize="+i)}getRaceById(t){return this.httpClient.get(this.baseUrl+"/Race/"+t)}getRacesByCity(t,i,r){return this.httpClient.get(this.baseUrl+"/Race/City/"+t+"?page="+i+"&pageSize="+r)}getUserRaces(t){return this.httpClient.get(this.baseUrl+"/User/Races?userId="+t,this.authService.getHttpOptions())}deleteRace(t){return this.httpClient.delete(this.baseUrl+"/Race?raceId="+t,this.authService.getHttpOptions())}updateRace(t,i){return this.httpClient.put(this.baseUrl+"/Race?raceId="+i,t,this.authService.getHttpOptions())}getRacesByName(t,i,r){return this.httpClient.get(this.baseUrl+"/Race/name="+t+"?page="+i+"&pageSize="+r)}createRace(t){return this.httpClient.post(this.baseUrl+"/Race",t,this.authService.getHttpOptions())}}return n.\u0275fac=function(t){return new(t||n)(J(na),J(kr))},n.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const rne=function(n){return["/races/",n]};function one(n,e){if(1&n&&(M(0,"div",22)(1,"div",23),Ie(2,"img",24),w(),M(3,"div",25)(4,"div")(5,"h3",26)(6,"h1",27),Ie(7,"span",28),O(8),w()(),M(9,"p",29),O(10),w(),M(11,"p",30),O(12),w()()()()),2&n){const t=e.$implicit;B(2),Ar("src",t.imageURL,dr),B(4),Q("routerLink",Xs(6,rne,t.id)),B(2),cn(" ",t.name," "),B(2),Tc("",t.address.city,", ",t.address.country,""),B(2),Yn(t.raceCategory)}}function sne(n,e){if(1&n){const t=Ni();M(0,"div",16),rt(1,one,13,8,"div",17),M(2,"div",18)(3,"a",19),Oe("click",function(){return ni(t),ii(Et().prevPage())}),O(4,"Prev"),w(),M(5,"span",20),O(6),w(),M(7,"a",21),Oe("click",function(){return ni(t),ii(Et().nextPage())}),O(8,"Next"),w()()()}if(2&n){const t=Et();B(1),Q("ngForOf",t.races),B(2),Q("ngClass",t.hasPreviousPage?"":"disabled"),B(3),cn("Page ",t.pageNumber+1,""),B(1),Q("ngClass",t.hasNextPage?"":"disabled")}}function ane(n,e){1&n&&(M(0,"div",16)(1,"h1",31),O(2,"No users found."),w()())}const lne=function(){return["/races/create"]};let cne=(()=>{class n{constructor(t){this.raceService=t,this.races=[],this.searchTerm="",this.pageSize=5,this.pageNumber=0,this.hasPreviousPage=!1,this.hasNextPage=!1,this.searchedByName=!1}ngOnInit(){this.getRaces(this.pageNumber,this.pageSize)}getRaces(t,i){t<0?this.pageNumber=0:this.raceService.getRaces(t,i).subscribe({next:r=>{this.races=r.list,this.hasPreviousPage=r.hasPreviousPage,this.hasNextPage=r.hasNextPage}})}searchByName(t){this.races=[],this.raceService.getRacesByName(t,this.pageNumber,this.pageSize).subscribe({next:i=>{this.races=i.list,this.hasPreviousPage=i.hasPreviousPage,this.hasNextPage=i.hasNextPage,this.searchTerm=t,this.searchedByName=!0}})}nextPage(){this.hasNextPage&&(this.pageNumber++,this.searchedByName?this.searchByName(this.searchTerm):this.getRaces(this.pageNumber,this.pageSize))}prevPage(){this.hasPreviousPage&&(this.pageNumber--,this.searchedByName?this.searchByName(this.searchTerm):this.getRaces(this.pageNumber,this.pageSize))}}return n.\u0275fac=function(t){return new(t||n)(L(Vd))},n.\u0275cmp=yt({type:n,selectors:[["app-races"]],decls:23,vars:4,consts:[[1,"mx-auto","py-12","flex","flex-col","xl:mt-12","lg:mt-12"],[1,"bg-black","rounded","top-[120px]","max-w-2xl","mx-auto","flex","flex-row"],[1,"max-w-2xl","w-3/4","mx-auto"],[1,"flex","justify-content-around","flex-row","flex-wrap","gap-y-10","gap-x-3","lg:gap-x-6"],[1,"text-2xl","font-bold","tracking-tight","text-white"],[1,"app-green"],[3,"ngSubmit"],["searchForm","ngForm"],[1,"flex"],["id","searchBy",1,"border","text-sm","rounded-l-lg","cursor-pointer","block","w-full","p-2.5","bg-gray-700","border-green-600","placeholder-gray-400","text-white","focus:ring-green-500","focus:border-green-500"],["selected",""],["value","name"],["value","city"],["type","text","ngModel","","name","raceName","placeholder","Search...",1,"py-1","pl-3","text-white","rounded-r-lg","bg-transparent","focus:outline-none","focus:border-green-500","focus:ring-1","focus:ring-green-500"],[1,"btn","btn-outline-success","text-white","py-1",3,"routerLink"],["class","mt-6 grid grid-cols-1 gap-x-6  sm:grid-cols-1 lg:grid-cols-1 xl:gap-x-8",4,"ngIf"],[1,"mt-6","grid","grid-cols-1","gap-x-6","sm:grid-cols-1","lg:grid-cols-1","xl:gap-x-8"],["class","group relative flex flex-row items-start gap-5 border-green-900 border-t-2 py-4",4,"ngFor","ngForOf"],[1,"pt-2","flex","justify-center"],["type","button",1,"btn","btn-sm","btn-outline-success",3,"ngClass","click"],[1,"ms-3","text-muted","text-small"],["type","button",1,"btn","btn-sm","btn-outline-success","ms-3",3,"ngClass","click"],[1,"group","relative","flex","flex-row","items-start","gap-5","border-green-900","border-t-2","py-4"],[1,"w-[150px]","h-[150px]","overflow-hidden","rounded-md","bg-gray-200","lg:aspect-none","group-hover:opacity-75","justify-start"],["alt","Front of men's Basic Tee in black.",1,"h-full","w-full","object-cover","object-center","lg:h-full","lg:w-full",3,"src"],[1,"mt-4","flex","justify-center","align-content-center"],[1,"text-sm","md:text-lg","text-light"],["routerLinkActive","router-link-active","routerLinkActive","router-link-active",1,"text-light","font-bold","cursor-pointer","text-sm","md:text-lg",3,"routerLink"],["aria-hidden","true",1,"absolute","inset-0"],[1,"mt-1","text-sm","md:text-md","font-semibold"],[1,"mt-3","text-sm","md:text-md","font-semibold","text-green-900"],[1,"text-2xl","font-bold","tracking-tight","text-white","mx-auto","my-24"]],template:function(t,i){if(1&t){const r=Ni();M(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1",4),O(5,"Featured "),M(6,"span",5),O(7,"Races"),w()(),M(8,"form",6,7),Oe("ngSubmit",function(){ni(r);const s=ss(9);return ii(i.searchByName(s.value.raceName))}),M(10,"div",8)(11,"select",9)(12,"option",10),O(13,"Search by"),w(),M(14,"option",11),O(15,"Name"),w(),M(16,"option",12),O(17,"City"),w()(),Ie(18,"input",13),w()(),M(19,"a",14),O(20,"Create new race"),w()(),rt(21,sne,9,4,"div",15),rt(22,ane,3,0,"div",15),w()()()}2&t&&(B(19),Q("routerLink",Ln(3,lne)),B(2),Q("ngIf",i.races.length),B(1),Q("ngIf",!i.races.length))},dependencies:[qu,ja,No,er,no,gr,so,ao,pr,oo,mr,Nr,Vi]}),n})();class dne{constructor(){this.address=new Kg}}let une=(()=>{class n{constructor(t,i,r,o){this.raceService=t,this.authService=i,this.router=r,this.toastrService=o,this.race=new dne,this.baseUrl=Ka_apiURL,this.race.address=new Kg}ngOnInit(){this.authService.loggedIn()||(this.toastrService.warning("You must be logged in to create new races."),this.router.navigate(["auth/login"]))}onFileSelected(t){this.selectedFile=t.target.files[0]}handleCreate(){const t=new FormData;t.append("file",this.selectedFile,this.selectedFile.name),t.append("name",this.race.name),t.append("description",this.race.description),t.append("raceCategory",this.race.raceCategory.toString()),t.append("address.country",this.race.address.country),t.append("address.city",this.race.address.city),t.append("address.street",this.race.address.street),t.append("address.zip",this.race.address.zip.toString()),this.raceService.createRace(t).subscribe({next:i=>{this.toastrService.success("Race created successfully!"),this.router.navigate(["/"])},error:i=>{this.toastrService.error("Something went wrong."),console.log(i)}})}}return n.\u0275fac=function(t){return new(t||n)(L(Vd),L(kr),L(dn),L(ro))},n.\u0275cmp=yt({type:n,selectors:[["app-race-create"]],inputs:{race:"race"},decls:52,vars:12,consts:[[1,"bg-black"],[1,"flex","flex-col","items-center","justify-center","px-6","py-12","mx-auto","md:h-window"],[1,"w-full","bg-gray-900","rounded-lg","shadow","dark:border","md:mt-0","sm:max-w-md","xl:p-0","dark:border-gray-700"],[1,"p-6","space-y-4","md:space-y-6","sm:p-8"],[1,"text-xl","font-bold","leading-tight","tracking-tight","text-gray-900","md:text-2xl","dark:text-white"],["enctype","multipart/form-data",3,"ngSubmit"],["createraceForm","ngForm"],[1,"mb-6"],["for","name",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["type","text","name","name","id","name","required","",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-green-500","focus:border-green-500","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-green-500","dark:focus:border-green-500",3,"ngModel","ngModelChange"],["for","description",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["id","description","name","description","rows","4",1,"block","p-2.5","w-full","text-sm","text-gray-900","bg-gray-50","rounded-lg","border","border-gray-300","focus:ring-green-500","focus:border-green-500","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-green-500","dark:focus:border-green-500",3,"ngModel","ngModelChange"],["for","race.address.country",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["type","text","name","country","id","race.address.country","required","",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-green-500","focus:border-green-500","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-green-500","dark:focus:border-green-500",3,"ngModel","ngModelChange"],["for","city",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["type","text","name","city","id","city","required","",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-green-500","focus:border-green-500","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-green-500","dark:focus:border-green-500",3,"ngModel","ngModelChange"],["for","street",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["type","text","id","street","name","street","required","",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-green-500","focus:border-green-500","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-green-500","dark:focus:border-green-500",3,"ngModel","ngModelChange"],["for","zip",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["type","number","id","zip","name","zip","required","",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-green-500","focus:border-green-500","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-green-500","dark:focus:border-green-500",3,"ngModel","ngModelChange"],[1,"relative","z-0","w-full","mb-6","group"],["for","file",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["name","file","aria-describedby","user_avatar_help","id","file","type","file",1,"block","w-full","text-sm","text-gray-900","border","border-gray-300","rounded-lg","cursor-pointer","bg-gray-50","dark:text-gray-400","focus:outline-none","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400",3,"change"],["for","raceCategory",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["name","raceCategory","id","raceCategory",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-green-500","focus:border-green-500","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-green-500","dark:focus:border-green-500",3,"ngModel","ngModelChange"],[3,"ngValue"],["type","submit",1,"text-white","bg-green-700","hover:bg-green-800","focus:ring-4","focus:outline-none","focus:ring-green-300","font-medium","rounded-lg","text-sm","w-full","sm:w-auto","px-5","py-2.5","text-center","dark:bg-green-600","dark:hover:bg-green-700","dark:focus:ring-green-800"]],template:function(t,i){1&t&&(M(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1",4),O(5," Start a new race! "),w(),M(6,"form",5,6),Oe("ngSubmit",function(){return i.handleCreate()}),M(8,"div",7)(9,"label",8),O(10,"Name:"),w(),M(11,"input",9),Oe("ngModelChange",function(o){return i.race.name=o}),w()(),M(12,"div",7)(13,"label",10),O(14,"Description:"),w(),M(15,"textarea",11),Oe("ngModelChange",function(o){return i.race.description=o}),w()(),M(16,"div",7)(17,"label",12),O(18,"Country:"),w(),M(19,"input",13),Oe("ngModelChange",function(o){return i.race.address.country=o}),w()(),M(20,"div",7)(21,"label",14),O(22,"City:"),w(),M(23,"input",15),Oe("ngModelChange",function(o){return i.race.address.city=o}),w()(),M(24,"div",7)(25,"label",16),O(26,"Street:"),w(),M(27,"input",17),Oe("ngModelChange",function(o){return i.race.address.street=o}),w()(),M(28,"div",7)(29,"label",18),O(30,"Zip:"),w(),M(31,"input",19),Oe("ngModelChange",function(o){return i.race.address.zip=o}),w()(),M(32,"div",20)(33,"label",21),O(34,"Logo:"),w(),M(35,"input",22),Oe("change",function(o){return i.onFileSelected(o)}),w()(),M(36,"div",20)(37,"label",23),O(38,"Category:"),w(),M(39,"select",24),Oe("ngModelChange",function(o){return i.race.raceCategory=o}),M(40,"option",25),O(41,"RoadRunner"),w(),M(42,"option",25),O(43,"Womans"),w(),M(44,"option",25),O(45,"City"),w(),M(46,"option",25),O(47,"Trail"),w(),M(48,"option",25),O(49,"Endurance"),w()()(),M(50,"button",26),O(51,"Submit"),w()()()()()()),2&t&&(B(11),Q("ngModel",i.race.name),B(4),Q("ngModel",i.race.description),B(4),Q("ngModel",i.race.address.country),B(4),Q("ngModel",i.race.address.city),B(4),Q("ngModel",i.race.address.street),B(4),Q("ngModel",i.race.address.zip),B(8),Q("ngModel",i.race.raceCategory),B(1),Q("ngValue",1),B(2),Q("ngValue",2),B(2),Q("ngValue",3),B(2),Q("ngValue",4),B(2),Q("ngValue",5))},dependencies:[gr,so,ao,pr,Xc,sa,oo,mr,Vo,Nr,Vi]}),n})();class NN{}let qC,hne=(()=>{class n{onFileSelected(t){this.selectedFile=t.target.files[0]}constructor(t,i,r,o,s){this.route=t,this.raceService=i,this.router=r,this.toastrService=o,this.authService=s,this.jwtHelper=new Am,this.race=new NN,this.race.address=new Wc}ngOnInit(){this.authService.loggedIn()||(this.toastrService.error("You must be logged in to update this race!"),this.router.navigate(["/auth/login"]));let t=this.route.snapshot.paramMap.get("id");if(t){const r=localStorage.getItem("token");if(null!=r){var i=this.jwtHelper.decodeToken(r);let o=parseInt(t);this.raceService.getRaceById(o).subscribe({next:s=>{s.appUserId==i.nameid?this.race=s:this.router.navigate(["/"])},error:()=>this.router.navigate(["/"])})}}}handleUpdate(){const t=new FormData;t.append("file",this.selectedFile,this.selectedFile.name),t.append("name",this.race.name),t.append("description",this.race.description),t.append("clubCategory",this.race.raceCategory.toString()),t.append("address.country",this.race.address.country),t.append("address.city",this.race.address.city),t.append("address.street",this.race.address.street),t.append("address.zip",this.race.address.zip.toString()),this.raceService.updateRace(t,this.race.id).subscribe({next:i=>{this.toastrService.success("Club updated successfully!"),this.router.navigate(["/clubs/"+this.race.id])},error:i=>{this.toastrService.error("Something went wrong."),console.log(i)}})}}return n.\u0275fac=function(t){return new(t||n)(L(eo),L(Vd),L(dn),L(ro),L(kr))},n.\u0275cmp=yt({type:n,selectors:[["app-race-update"]],inputs:{race:"race"},decls:52,vars:12,consts:[[1,"bg-black"],[1,"flex","flex-col","items-center","justify-center","px-6","py-12","mx-auto","md:h-window"],[1,"w-full","bg-gray-900","rounded-lg","shadow","dark:border","md:mt-0","sm:max-w-md","xl:p-0","dark:border-gray-700"],[1,"p-6","space-y-4","md:space-y-6","sm:p-8"],[1,"text-xl","font-bold","leading-tight","tracking-tight","text-gray-900","md:text-2xl","dark:text-white"],["enctype","multipart/form-data",3,"ngSubmit"],["createraceForm","ngForm"],[1,"mb-6"],["for","name",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["type","text","name","name","id","name","required","",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-green-500","focus:border-green-500","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-green-500","dark:focus:border-green-500",3,"ngModel","ngModelChange"],["for","description",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["id","description","name","description","rows","4",1,"block","p-2.5","w-full","text-sm","text-gray-900","bg-gray-50","rounded-lg","border","border-gray-300","focus:ring-green-500","focus:border-green-500","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-green-500","dark:focus:border-green-500",3,"ngModel","ngModelChange"],["for","race.address.country",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["type","text","name","country","id","race.address.country","required","",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-green-500","focus:border-green-500","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-green-500","dark:focus:border-green-500",3,"ngModel","ngModelChange"],["for","city",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["type","text","name","city","id","city","required","",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-green-500","focus:border-green-500","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-green-500","dark:focus:border-green-500",3,"ngModel","ngModelChange"],["for","street",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["type","text","id","street","name","street","required","",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-green-500","focus:border-green-500","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-green-500","dark:focus:border-green-500",3,"ngModel","ngModelChange"],["for","zip",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["type","number","id","zip","name","zip","required","",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-green-500","focus:border-green-500","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-green-500","dark:focus:border-green-500",3,"ngModel","ngModelChange"],[1,"relative","z-0","w-full","mb-6","group"],["for","file",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["name","file","aria-describedby","user_avatar_help","id","file","type","file",1,"block","w-full","text-sm","text-gray-900","border","border-gray-300","rounded-lg","cursor-pointer","bg-gray-50","dark:text-gray-400","focus:outline-none","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400",3,"change"],["for","raceCategory",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["name","raceCategory","id","raceCategory",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-green-500","focus:border-green-500","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-green-500","dark:focus:border-green-500",3,"ngModel","ngModelChange"],[3,"ngValue"],["type","submit",1,"text-white","bg-green-700","hover:bg-green-800","focus:ring-4","focus:outline-none","focus:ring-green-300","font-medium","rounded-lg","text-sm","w-full","sm:w-auto","px-5","py-2.5","text-center","dark:bg-green-600","dark:hover:bg-green-700","dark:focus:ring-green-800"]],template:function(t,i){1&t&&(M(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1",4),O(5," Start a new race! "),w(),M(6,"form",5,6),Oe("ngSubmit",function(){return i.handleUpdate()}),M(8,"div",7)(9,"label",8),O(10,"Name:"),w(),M(11,"input",9),Oe("ngModelChange",function(o){return i.race.name=o}),w()(),M(12,"div",7)(13,"label",10),O(14,"Description:"),w(),M(15,"textarea",11),Oe("ngModelChange",function(o){return i.race.description=o}),w()(),M(16,"div",7)(17,"label",12),O(18,"Country:"),w(),M(19,"input",13),Oe("ngModelChange",function(o){return i.race.address.country=o}),w()(),M(20,"div",7)(21,"label",14),O(22,"City:"),w(),M(23,"input",15),Oe("ngModelChange",function(o){return i.race.address.city=o}),w()(),M(24,"div",7)(25,"label",16),O(26,"Street:"),w(),M(27,"input",17),Oe("ngModelChange",function(o){return i.race.address.street=o}),w()(),M(28,"div",7)(29,"label",18),O(30,"Zip:"),w(),M(31,"input",19),Oe("ngModelChange",function(o){return i.race.address.zip=o}),w()(),M(32,"div",20)(33,"label",21),O(34,"Logo:"),w(),M(35,"input",22),Oe("change",function(o){return i.onFileSelected(o)}),w()(),M(36,"div",20)(37,"label",23),O(38,"Category:"),w(),M(39,"select",24),Oe("ngModelChange",function(o){return i.race.raceCategory=o}),M(40,"option",25),O(41,"RoadRunner"),w(),M(42,"option",25),O(43,"Womans"),w(),M(44,"option",25),O(45,"City"),w(),M(46,"option",25),O(47,"Trail"),w(),M(48,"option",25),O(49,"Endurance"),w()()(),M(50,"button",26),O(51,"Submit"),w()()()()()()),2&t&&(B(11),Q("ngModel",i.race.name),B(4),Q("ngModel",i.race.description),B(4),Q("ngModel",i.race.address.country),B(4),Q("ngModel",i.race.address.city),B(4),Q("ngModel",i.race.address.street),B(4),Q("ngModel",i.race.address.zip),B(8),Q("ngModel",i.race.raceCategory),B(1),Q("ngValue",1),B(2),Q("ngValue",2),B(2),Q("ngValue",3),B(2),Q("ngValue",4),B(2),Q("ngValue",5))},dependencies:[gr,so,ao,pr,Xc,sa,oo,mr,Vo,Nr,Vi]}),n})(),fne=(()=>{class n{constructor(t,i,r){this.route=t,this.raceService=i,this.router=r,this.race=new NN,this.race.address=new Wc}ngOnInit(){let t=this.route.snapshot.paramMap.get("id");if(null!=t){let i=parseInt(t);this.raceService.getRaceById(i).subscribe({next:r=>this.race=r,error:r=>this.router.navigate(["/"])})}}}return n.\u0275fac=function(t){return new(t||n)(L(eo),L(Vd),L(dn))},n.\u0275cmp=yt({type:n,selectors:[["app-race-single"]],outputs:{race:"race"},decls:88,vars:6,consts:[[1,"bg-black"],[1,"container","w-75","pt-12"],[1,"row"],[1,"col-lg-7","mb-4","mb-sm-0"],["alt","Image",1,"rounded","img-fluid",3,"src"],[1,"col-lg-4","d-flex","flex-column","justify-content-between","mx-auto"],[1,"text-gray-300","text-lg","font-bold","mb-2"],[1,"text-gray-500","text-md","font-medium","mb-3"],[1,"badge","bg-gray-700","text-gray-300","me-3"],[1,"col-12","py-12"],[1,"list-group-item"],[1,"d-flex","justify-content-between"],[1,"icon-text-document","mr-1"],[1,"icon-edit","mr-1"],[1,"icon-thumbs-up","mr-1"],[1,"icon-share","mr-1"],[1,"pt-3"],[1,"btn-group","mb-2"],["type","number","hidden","","data-val","true","data-val-required","The Id field is required.","id","Id","name","Id","value","152"],["type","submit",1,"btn","btn-outline-success"],[1,"space-sm"],[1,"container","w-75","py-8"],[1,"row","justify-content-between"],[1,"col-12","col-md-8","col-lg-7","bg-gray-900","rounded","pt-3"],[1,"mb-4","text-lg","text-gray-300","font-bold"],["id","description"],[1,"text-gray-500","font-medium"],[1,"pt-4"],[1,"mb-4","text-gray-300","font-bold"],[1,"mb-3"],["data-target","#comment-reply","data-toggle","collapse","aria-expanded","false","aria-controls","comment-reply",1,"btn","btn-success"],[1,"d-flex","align-items-center"],[1,"mr-2","text-muted","text-small","text-nowrap"],[1,"custom-select","rounded","ps-1"],["value","old-new","selected",""],["value","new-old"],["id","comment-reply",1,"collapse"],["onsubmit","submitComment(event);",1,"card-body"],[1,"form-group"],["id","comment-text","rows","4","placeholder","Type your comment here",1,"form-control","from-control-lg"],[1,"mb-2"],[1,"custom-control","custom-checkbox"],["type","checkbox","name","notify-reply","id","check-notify",1,"custom-control-input"],["for","check-notify",1,"custom-control-label","text-small"],["type","submit",1,"btn","btn-success","mr-3"],["href","#comment-reply","data-toggle","collapse","aria-expanded","true","aria-controls","comment-reply",1,"text-small","text-muted"],[1,"list-group","list-group-flush","list-group-comments"]],template:function(t,i){1&t&&(M(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3),Ie(4,"img",4),w(),M(5,"div",5)(6,"div")(7,"h1",6),O(8),w(),M(9,"h2",7),O(10),w(),M(11,"div")(12,"span",8),O(13),w()(),M(14,"div",9)(15,"li",10)(16,"div",11)(17,"div"),Ie(18,"i",12),O(19," Created"),w(),M(20,"span"),O(21,"1/13/2022"),w()()(),M(22,"li",10)(23,"div",11)(24,"div"),Ie(25,"i",13),O(26," Last updated"),w(),M(27,"span"),O(28,"23/06/2023"),w()()(),M(29,"li",10)(30,"div",11)(31,"div"),Ie(32,"i",14),O(33," Owner"),w(),M(34,"span"),O(35,"Mictostrasto"),w()()(),M(36,"li",10)(37,"div",11)(38,"div"),Ie(39,"i",15),O(40," Shares"),w(),M(41,"span"),O(42,"52"),w()()()()(),M(43,"div",16)(44,"div",17)(45,"form"),Ie(46,"input",18),M(47,"button",19),O(48,"Participate"),w()()()()()()()(),M(49,"section",20)(50,"div",21)(51,"div",22)(52,"div",23)(53,"h5",24),O(54,"Overview"),w(),M(55,"article",25)(56,"p",26),O(57),w()(),Ie(58,"hr",27),M(59,"h5",28),O(60,"Discussion"),w(),M(61,"div",29)(62,"div",11)(63,"button",30),O(64," Comment "),w(),M(65,"form",31)(66,"span",32),O(67,"Sort by:"),w(),M(68,"select",33)(69,"option",34),O(70,"Newest"),w(),M(71,"option",35),O(72,"Popular"),w()()()(),M(73,"div",36)(74,"form",37)(75,"div",38),Ie(76,"textarea",39),w(),M(77,"div",40)(78,"div",41),Ie(79,"input",42),M(80,"label",43),O(81,"Notify me when someone replies"),w()()(),M(82,"div",31)(83,"button",44),O(84,"Submit comment"),w(),M(85,"a",45),O(86,"Cancel"),w()()()(),Ie(87,"ul",46),w()()()()()),2&t&&(B(4),Ar("src",i.race.imageURL,dr),B(4),Yn(i.race.name),B(2),Tc("",i.race.address.city,", ",i.race.address.country,""),B(3),Yn(i.race.raceCategory),B(44),Yn(i.race.description))},dependencies:[gr,so,ao,mr,Vi]}),n})(),LN=(()=>{class n{constructor(t){this.httpClient=t,this.baseUrl=Ka_apiURL}getUserAccountById(t){return this.httpClient.get(this.baseUrl+"/user/"+t)}updateAccount(t,i,r){return this.httpClient.put(this.baseUrl+"/user?userId="+i,t,r)}}return n.\u0275fac=function(t){return new(t||n)(J(na))},n.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),pne=(()=>{class n{onFileSelected(t){this.selectedFile=t.target.files[0]}constructor(t,i,r,o){this.accountService=t,this.authService=i,this.toastrService=r,this.router=o,this.user=new Uy,this.user.address=new Wc}ngOnInit(){this.getUserDetails(this.authService.currentUser.id)}getUserDetails(t){this.accountService.getUserAccountById(t).subscribe({next:i=>this.user=i,error:i=>console.log(i)})}handleUpdate(t){const i=new FormData;i.append("File",this.selectedFile,this.selectedFile.name),i.append("UserName",t.userName),i.append("Description",t.description),i.append("Pace",t.pace),i.append("Mileage",t.mileage),this.accountService.updateAccount(i,this.authService.currentUser.id,this.authService.getHttpOptions()).subscribe({next:r=>{this.toastrService.success("Updated successfully!"),this.router.navigate(["/users/"+this.authService.currentUser.id])},error:r=>{this.toastrService.error(r?.error.errors[0].description,"Registration failed")}})}}return n.\u0275fac=function(t){return new(t||n)(L(LN),L(kr),L(ro),L(dn))},n.\u0275cmp=yt({type:n,selectors:[["app-edit-profile"]],inputs:{user:"user"},decls:30,vars:5,consts:[[1,"p-16","w-100","md:w-50","mx-auto"],[1,"p-8","bg-gray-900","rounded","shadow","mt-24"],[1,"grid","grid-cols-1"],["enctype","multipart/form-data",3,"ngSubmit"],["updateUserForm","ngForm"],[1,"grid","md:grid-cols-2","md:gap-6"],[1,"relative","z-0","w-full","mb-6","group"],[1,"w-48","h-48","bg-indigo-100","mx-auto","rounded-full","shadow-2xl","flex","items-center","justify-center","text-indigo-500",3,"src"],["name","file","aria-describedby","user_avatar_help","id","file","type","file",1,"block","w-full","md:mt-20","text-sm","text-gray-900","border","border-gray-300","rounded-lg","cursor-pointer","bg-gray-50","dark:text-gray-400","focus:outline-none","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400",3,"change"],[1,"mb-6"],["for","name",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["type","text","name","userName","id","userName","required","",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-green-500","focus:border-green-500","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-green-500","dark:focus:border-green-500",3,"ngModel","ngModelChange"],["type","text","rows","3","name","description","id","description","required","",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-green-500","focus:border-green-500","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-green-500","dark:focus:border-green-500",3,"ngModel","ngModelChange"],["for","club.address.country",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["type","text","name","pace","id","user.pace","required","",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-green-500","focus:border-green-500","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-green-500","dark:focus:border-green-500",3,"ngModel","ngModelChange"],["for","description",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["type","text","name","mileage","id","user.mileage","required","",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-green-500","focus:border-green-500","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-green-500","dark:focus:border-green-500",3,"ngModel","ngModelChange"],["type","submit",1,"text-white","bg-green-700","hover:bg-green-800","focus:ring-4","focus:outline-none","focus:ring-green-300","font-medium","rounded-lg","text-sm","w-full","sm:w-auto","px-5","py-2.5","text-center","dark:bg-green-600","dark:hover:bg-green-700","dark:focus:ring-green-800"]],template:function(t,i){if(1&t){const r=Ni();M(0,"div",0)(1,"div",1)(2,"div",2)(3,"form",3,4),Oe("ngSubmit",function(){ni(r);const s=ss(4);return ii(i.handleUpdate(s.value))}),M(5,"div",5)(6,"div",6),Ie(7,"img",7),w(),M(8,"div",6)(9,"input",8),Oe("change",function(s){return i.onFileSelected(s)}),w()()(),M(10,"div",9)(11,"label",10),O(12,"Username:"),w(),M(13,"input",11),Oe("ngModelChange",function(s){return i.user.userName=s}),w()(),M(14,"div",9)(15,"label",10),O(16,"About me:"),w(),M(17,"textarea",12),Oe("ngModelChange",function(s){return i.user.description=s}),O(18,"                "),w()(),M(19,"div",5)(20,"div",6)(21,"label",13),O(22,"Pace:"),w(),M(23,"input",14),Oe("ngModelChange",function(s){return i.user.pace=s}),w()(),M(24,"div",6)(25,"label",15),O(26,"Mileage:"),w(),M(27,"input",16),Oe("ngModelChange",function(s){return i.user.mileage=s}),w()()(),M(28,"button",17),O(29,"Save Changes"),w()()()()()}2&t&&(B(7),Ar("src",i.user.imageURL,dr),B(6),Q("ngModel",i.user.userName),B(4),Q("ngModel",i.user.description),B(6),Q("ngModel",i.user.pace),B(4),Q("ngModel",i.user.mileage))},dependencies:[gr,pr,oo,mr,Vo,Nr,Vi]}),n})();try{qC=typeof Intl<"u"&&Intl.v8BreakIterator}catch{qC=!1}let tf,Il,ba=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?function mW(n){return n===pI}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!qC)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return n.\u0275fac=function(t){return new(t||n)(J($s))},n.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function nf(n){return function mne(){if(null==tf&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>tf=!0}))}finally{tf=tf||!1}return tf}()?n:!!n.capture}function gne(){if(null==Il){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return Il=!1,Il;if("scrollBehavior"in document.documentElement.style)Il=!0;else{const n=Element.prototype.scrollTo;Il=!!n&&!/\{\s*\[native code\]\s*\}/.test(n.toString())}}return Il}function YC(n){return n.composedPath?n.composedPath()[0]:n.target}function ZC(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}let Mne=(()=>{class n{create(t){return typeof MutationObserver>"u"?null:new MutationObserver(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),UN=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=At({type:n}),n.\u0275inj=St({providers:[Mne]}),n})();function Jg(n){return Array.isArray(n)?n:[n]}function zn(n){return null==n?"":"string"==typeof n?n:`${n}px`}function KC(n){return n instanceof ln?n.nativeElement:n}class Ene extends di{constructor(e,t){super()}schedule(e,t=0){return this}}const e_={setInterval(n,e,...t){const{delegate:i}=e_;return i?.setInterval?i.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){const{delegate:e}=e_;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};class QC extends Ene{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var i;if(this.closed)return this;this.state=e;const r=this.id,o=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(o,r,t)),this.pending=!0,this.delay=t,this.id=null!==(i=this.id)&&void 0!==i?i:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,i=0){return e_.setInterval(e.flush.bind(e,this),i)}recycleAsyncId(e,t,i=0){if(null!=i&&this.delay===i&&!1===this.pending)return t;null!=t&&e_.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const i=this._execute(e,t);if(i)return i;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r,i=!1;try{this.work(e)}catch(o){i=!0,r=o||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:i}=t;this.work=this.state=this.scheduler=null,this.pending=!1,Hl(i,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}}const VN={now:()=>(VN.delegate||Date).now(),delegate:void 0};class sf{constructor(e,t=sf.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,i){return new this.schedulerActionCtor(this,e).schedule(i,t)}}sf.now=VN.now;class JC extends sf{constructor(e,t=sf.now){super(e,t),this.actions=[],this._active=!1}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let i;this._active=!0;do{if(i=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,i){for(;e=t.shift();)e.unsubscribe();throw i}}}const eM=new JC(QC),Tne=eM;function Rl(n){return Dn((e,t)=>{Ri(n).subscribe(mn(t,()=>t.complete(),B_)),!t.closed&&e.subscribe(t)})}const HN=new Set;let Pl,Ane=(()=>{class n{constructor(t,i){this._platform=t,this._nonce=i,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):Rne}matchMedia(t){return(this._platform.WEBKIT||this._platform.BLINK)&&function Ine(n,e){if(!HN.has(n))try{Pl||(Pl=document.createElement("style"),e&&(Pl.nonce=e),Pl.setAttribute("type","text/css"),document.head.appendChild(Pl)),Pl.sheet&&(Pl.sheet.insertRule(`@media ${n} {body{ }}`,0),HN.add(n))}catch(t){console.error(t)}}(t,this._nonce),this._matchMedia(t)}}return n.\u0275fac=function(t){return new(t||n)(J(ba),J(ub,8))},n.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Rne(n){return{matches:"all"===n||""===n,media:n,addListener:()=>{},removeListener:()=>{}}}let Pne=(()=>{class n{constructor(t,i){this._mediaMatcher=t,this._zone=i,this._queries=new Map,this._destroySubject=new Kt}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(t){return zN(Jg(t)).some(r=>this._registerQuery(r).mql.matches)}observe(t){let o=sm(zN(Jg(t)).map(s=>this._registerQuery(s).observable));return o=lm(o.pipe(Jr(1)),o.pipe(function Sne(n){return Si((e,t)=>n<=t)}(1),function Dne(n,e=eM){return Dn((t,i)=>{let r=null,o=null,s=null;const a=()=>{if(r){r.unsubscribe(),r=null;const c=o;o=null,i.next(c)}};function l(){const c=s+n,d=e.now();if(d<c)return r=this.schedule(void 0,c-d),void i.add(r);a()}t.subscribe(mn(i,c=>{o=c,s=e.now(),r||(r=e.schedule(l,n),i.add(r))},()=>{a(),i.complete()},void 0,()=>{o=r=null}))})}(0))),o.pipe(wt(s=>{const a={matches:!1,breakpoints:{}};return s.forEach(({matches:l,query:c})=>{a.matches=a.matches||l,a.breakpoints[c]=l}),a}))}_registerQuery(t){if(this._queries.has(t))return this._queries.get(t);const i=this._mediaMatcher.matchMedia(t),o={observable:new sn(s=>{const a=l=>this._zone.run(()=>s.next(l));return i.addListener(a),()=>{i.removeListener(a)}}).pipe(WI(i),wt(({matches:s})=>({query:t,matches:s})),Rl(this._destroySubject)),mql:i};return this._queries.set(t,o),o}}return n.\u0275fac=function(t){return new(t||n)(J(Ane),J(Rt))},n.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function zN(n){return n.map(e=>e.split(",")).reduce((e,t)=>e.concat(t)).map(e=>e.trim())}const $N="cdk-high-contrast-black-on-white",qN="cdk-high-contrast-white-on-black",tM="cdk-high-contrast-active";let XN=(()=>{class n{constructor(t,i){this._platform=t,this._document=i,this._breakpointSubscription=Te(Pne).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const i=this._document.defaultView||window,r=i&&i.getComputedStyle?i.getComputedStyle(t):null,o=(r&&r.backgroundColor||"").replace(/ /g,"");switch(t.remove(),o){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return 2;case"rgb(255,255,255)":case"rgb(255,250,239)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(tM,$N,qN),this._hasCheckedHighContrastMode=!0;const i=this.getHighContrastMode();1===i?t.add(tM,$N):2===i&&t.add(tM,qN)}}}return n.\u0275fac=function(t){return new(t||n)(J(ba),J(Bt))},n.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Gne=(()=>{class n{constructor(t){t._applyBodyHighContrastModeCssClasses()}}return n.\u0275fac=function(t){return new(t||n)(J(XN))},n.\u0275mod=At({type:n}),n.\u0275inj=St({imports:[UN]}),n})();const jne=new he("cdk-dir-doc",{providedIn:"root",factory:function Wne(){return Te(Bt)}}),$ne=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let YN=(()=>{class n{constructor(t){this.value="ltr",this.change=new hn,t&&(this.value=function qne(n){const e=n?.toLowerCase()||"";return"auto"===e&&typeof navigator<"u"&&navigator?.language?$ne.test(navigator.language)?"rtl":"ltr":"rtl"===e?"rtl":"ltr"}((t.body?t.body.dir:null)||(t.documentElement?t.documentElement.dir:null)||"ltr"))}ngOnDestroy(){this.change.complete()}}return n.\u0275fac=function(t){return new(t||n)(J(jne,8))},n.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),af=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=At({type:n}),n.\u0275inj=St({}),n})();const Yne=new he("mat-sanity-checks",{providedIn:"root",factory:function Xne(){return!0}});let li=(()=>{class n{constructor(t,i,r){this._sanityChecks=i,this._document=r,this._hasDoneGlobalChecks=!1,t._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return!ZC()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[t])}}return n.\u0275fac=function(t){return new(t||n)(J(XN),J(Yne,8),J(Bt))},n.\u0275mod=At({type:n}),n.\u0275inj=St({imports:[af,af]}),n})();function Zne(n,e){return class extends n{get color(){return this._color}set color(t){const i=t||this.defaultColor;i!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),i&&this._elementRef.nativeElement.classList.add(`mat-${i}`),this._color=i)}constructor(...t){super(...t),this.defaultColor=e,this.color=e}}}class Qne{constructor(e,t,i,r=!1){this._renderer=e,this.element=t,this.config=i,this._animationForciblyDisabledThroughCss=r,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const QN=nf({passive:!0,capture:!0});class Jne{constructor(){this._events=new Map,this._delegateEventHandler=e=>{const t=YC(e);t&&this._events.get(e.type)?.forEach((i,r)=>{(r===t||r.contains(t))&&i.forEach(o=>o.handleEvent(e))})}}addHandler(e,t,i,r){const o=this._events.get(t);if(o){const s=o.get(i);s?s.add(r):o.set(i,new Set([r]))}else this._events.set(t,new Map([[i,new Set([r])]])),e.runOutsideAngular(()=>{document.addEventListener(t,this._delegateEventHandler,QN)})}removeHandler(e,t,i){const r=this._events.get(e);if(!r)return;const o=r.get(t);o&&(o.delete(i),0===o.size&&r.delete(t),0===r.size&&(this._events.delete(e),document.removeEventListener(e,this._delegateEventHandler,QN)))}}const JN={enterDuration:225,exitDuration:150},e2=nf({passive:!0,capture:!0}),t2=["mousedown","touchstart"],n2=["mouseup","mouseleave","touchend","touchcancel"];class t_{constructor(e,t,i,r){this._target=e,this._ngZone=t,this._platform=r,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=KC(i))}fadeInRipple(e,t,i={}){const r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),o={...JN,...i.animation};i.centered&&(e=r.left+r.width/2,t=r.top+r.height/2);const s=i.radius||function tie(n,e,t){const i=Math.max(Math.abs(n-t.left),Math.abs(n-t.right)),r=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(i*i+r*r)}(e,t,r),a=e-r.left,l=t-r.top,c=o.enterDuration,d=document.createElement("div");d.classList.add("mat-ripple-element"),d.style.left=a-s+"px",d.style.top=l-s+"px",d.style.height=2*s+"px",d.style.width=2*s+"px",null!=i.color&&(d.style.backgroundColor=i.color),d.style.transitionDuration=`${c}ms`,this._containerElement.appendChild(d);const u=window.getComputedStyle(d),f=u.transitionDuration,p="none"===u.transitionProperty||"0s"===f||"0s, 0s"===f||0===r.width&&0===r.height,_=new Qne(this,d,i,p);d.style.transform="scale3d(1, 1, 1)",_.state=0,i.persistent||(this._mostRecentTransientRipple=_);let m=null;return!p&&(c||o.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const g=()=>this._finishRippleTransition(_),b=()=>this._destroyRipple(_);d.addEventListener("transitionend",g),d.addEventListener("transitioncancel",b),m={onTransitionEnd:g,onTransitionCancel:b}}),this._activeRipples.set(_,m),(p||!c)&&this._finishRippleTransition(_),_}fadeOutRipple(e){if(2===e.state||3===e.state)return;const t=e.element,i={...JN,...e.config.animation};t.style.transitionDuration=`${i.exitDuration}ms`,t.style.opacity="0",e.state=2,(e._animationForciblyDisabledThroughCss||!i.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){const t=KC(e);!this._platform.isBrowser||!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,t2.forEach(i=>{t_._eventManager.addHandler(this._ngZone,i,t,this)}))}handleEvent(e){"mousedown"===e.type?this._onMousedown(e):"touchstart"===e.type?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{n2.forEach(t=>{this._triggerElement.addEventListener(t,this,e2)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){0===e.state?this._startFadeOutTransition(e):2===e.state&&this._destroyRipple(e)}_startFadeOutTransition(e){const t=e===this._mostRecentTransientRipple,{persistent:i}=e.config;e.state=1,!i&&(!t||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){const t=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=3,null!==t&&(e.element.removeEventListener("transitionend",t.onTransitionEnd),e.element.removeEventListener("transitioncancel",t.onTransitionCancel)),e.element.remove()}_onMousedown(e){const t=function Vne(n){return 0===n.buttons||0===n.offsetX&&0===n.offsetY}(e),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!t&&!i&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!function Hne(n){const e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const t=e.changedTouches;for(let i=0;i<t.length;i++)this.fadeInRipple(t[i].clientX,t[i].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{!e.config.persistent&&(1===e.state||e.config.terminateOnPointerUp&&0===e.state)&&e.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){const e=this._triggerElement;e&&(t2.forEach(t=>t_._eventManager.removeHandler(t,e,this)),this._pointerUpEventsRegistered&&n2.forEach(t=>e.removeEventListener(t,this,e2)))}}t_._eventManager=new Jne;let r2=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=At({type:n}),n.\u0275inj=St({imports:[li,li]}),n})(),nie=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=At({type:n}),n.\u0275inj=St({imports:[li]}),n})(),o2=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=At({type:n}),n.\u0275inj=St({imports:[r2,ds,li,nie]}),n})();const iie=["*"];let n_;function cf(n){return function rie(){if(void 0===n_&&(n_=null,typeof window<"u")){const n=window;void 0!==n.trustedTypes&&(n_=n.trustedTypes.createPolicy("angular#components",{createHTML:e=>e}))}return n_}()?.createHTML(n)||n}function s2(n){return Error(`Unable to find icon with the name "${n}"`)}function a2(n){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${n}".`)}function l2(n){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${n}".`)}class Ol{constructor(e,t,i){this.url=e,this.svgText=t,this.options=i}}let i_=(()=>{class n{constructor(t,i,r,o){this._httpClient=t,this._sanitizer=i,this._errorHandler=o,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass=["material-icons","mat-ligature-font"],this._document=r}addSvgIcon(t,i,r){return this.addSvgIconInNamespace("",t,i,r)}addSvgIconLiteral(t,i,r){return this.addSvgIconLiteralInNamespace("",t,i,r)}addSvgIconInNamespace(t,i,r,o){return this._addSvgIconConfig(t,i,new Ol(r,null,o))}addSvgIconResolver(t){return this._resolvers.push(t),this}addSvgIconLiteralInNamespace(t,i,r,o){const s=this._sanitizer.sanitize(jt.HTML,r);if(!s)throw l2(r);const a=cf(s);return this._addSvgIconConfig(t,i,new Ol("",a,o))}addSvgIconSet(t,i){return this.addSvgIconSetInNamespace("",t,i)}addSvgIconSetLiteral(t,i){return this.addSvgIconSetLiteralInNamespace("",t,i)}addSvgIconSetInNamespace(t,i,r){return this._addSvgIconSetConfig(t,new Ol(i,null,r))}addSvgIconSetLiteralInNamespace(t,i,r){const o=this._sanitizer.sanitize(jt.HTML,i);if(!o)throw l2(i);const s=cf(o);return this._addSvgIconSetConfig(t,new Ol("",s,r))}registerFontClassAlias(t,i=t){return this._fontCssClassesByAlias.set(t,i),this}classNameForFontAlias(t){return this._fontCssClassesByAlias.get(t)||t}setDefaultFontSetClass(...t){return this._defaultFontSetClass=t,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(t){const i=this._sanitizer.sanitize(jt.RESOURCE_URL,t);if(!i)throw a2(t);const r=this._cachedIconsByUrl.get(i);return r?Ye(r_(r)):this._loadSvgIconFromConfig(new Ol(t,null)).pipe(ri(o=>this._cachedIconsByUrl.set(i,o)),wt(o=>r_(o)))}getNamedSvgIcon(t,i=""){const r=c2(i,t);let o=this._svgIconConfigs.get(r);if(o)return this._getSvgFromConfig(o);if(o=this._getIconConfigFromResolvers(i,t),o)return this._svgIconConfigs.set(r,o),this._getSvgFromConfig(o);const s=this._iconSetConfigs.get(i);return s?this._getSvgFromIconSetConfigs(t,s):Fc(s2(r))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(t){return t.svgText?Ye(r_(this._svgElementFromConfig(t))):this._loadSvgIconFromConfig(t).pipe(wt(i=>r_(i)))}_getSvgFromIconSetConfigs(t,i){const r=this._extractIconWithNameFromAnySet(t,i);return r?Ye(r):_P(i.filter(s=>!s.svgText).map(s=>this._loadSvgIconSetFromConfig(s).pipe(Js(a=>{const c=`Loading icon set URL: ${this._sanitizer.sanitize(jt.RESOURCE_URL,s.url)} failed: ${a.message}`;return this._errorHandler.handleError(new Error(c)),Ye(null)})))).pipe(wt(()=>{const s=this._extractIconWithNameFromAnySet(t,i);if(!s)throw s2(t);return s}))}_extractIconWithNameFromAnySet(t,i){for(let r=i.length-1;r>=0;r--){const o=i[r];if(o.svgText&&o.svgText.toString().indexOf(t)>-1){const s=this._svgElementFromConfig(o),a=this._extractSvgIconFromSet(s,t,o.options);if(a)return a}}return null}_loadSvgIconFromConfig(t){return this._fetchIcon(t).pipe(ri(i=>t.svgText=i),wt(()=>this._svgElementFromConfig(t)))}_loadSvgIconSetFromConfig(t){return t.svgText?Ye(null):this._fetchIcon(t).pipe(ri(i=>t.svgText=i))}_extractSvgIconFromSet(t,i,r){const o=t.querySelector(`[id="${i}"]`);if(!o)return null;const s=o.cloneNode(!0);if(s.removeAttribute("id"),"svg"===s.nodeName.toLowerCase())return this._setSvgAttributes(s,r);if("symbol"===s.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(s),r);const a=this._svgElementFromString(cf("<svg></svg>"));return a.appendChild(s),this._setSvgAttributes(a,r)}_svgElementFromString(t){const i=this._document.createElement("DIV");i.innerHTML=t;const r=i.querySelector("svg");if(!r)throw Error("<svg> tag not found");return r}_toSvgElement(t){const i=this._svgElementFromString(cf("<svg></svg>")),r=t.attributes;for(let o=0;o<r.length;o++){const{name:s,value:a}=r[o];"id"!==s&&i.setAttribute(s,a)}for(let o=0;o<t.childNodes.length;o++)t.childNodes[o].nodeType===this._document.ELEMENT_NODE&&i.appendChild(t.childNodes[o].cloneNode(!0));return i}_setSvgAttributes(t,i){return t.setAttribute("fit",""),t.setAttribute("height","100%"),t.setAttribute("width","100%"),t.setAttribute("preserveAspectRatio","xMidYMid meet"),t.setAttribute("focusable","false"),i&&i.viewBox&&t.setAttribute("viewBox",i.viewBox),t}_fetchIcon(t){const{url:i,options:r}=t,o=r?.withCredentials??!1;if(!this._httpClient)throw function oie(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}();if(null==i)throw Error(`Cannot fetch icon from URL "${i}".`);const s=this._sanitizer.sanitize(jt.RESOURCE_URL,i);if(!s)throw a2(i);const a=this._inProgressUrlFetches.get(s);if(a)return a;const l=this._httpClient.get(s,{responseType:"text",withCredentials:o}).pipe(wt(c=>cf(c)),$a(()=>this._inProgressUrlFetches.delete(s)),Z_());return this._inProgressUrlFetches.set(s,l),l}_addSvgIconConfig(t,i,r){return this._svgIconConfigs.set(c2(t,i),r),this}_addSvgIconSetConfig(t,i){const r=this._iconSetConfigs.get(t);return r?r.push(i):this._iconSetConfigs.set(t,[i]),this}_svgElementFromConfig(t){if(!t.svgElement){const i=this._svgElementFromString(t.svgText);this._setSvgAttributes(i,t.options),t.svgElement=i}return t.svgElement}_getIconConfigFromResolvers(t,i){for(let r=0;r<this._resolvers.length;r++){const o=this._resolvers[r](i,t);if(o)return aie(o)?new Ol(o.url,null,o.options):new Ol(o,null)}}}return n.\u0275fac=function(t){return new(t||n)(J(na,8),J(Zu),J(Bt,8),J(Do))},n.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function r_(n){return n.cloneNode(!0)}function c2(n,e){return n+":"+e}function aie(n){return!(!n.url||!n.options)}const lie=Zne(class{constructor(n){this._elementRef=n}}),cie=new he("MAT_ICON_DEFAULT_OPTIONS"),die=new he("mat-icon-location",{providedIn:"root",factory:function uie(){const n=Te(Bt),e=n?n.location:null;return{getPathname:()=>e?e.pathname+e.search:""}}}),d2=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],hie=d2.map(n=>`[${n}]`).join(", "),fie=/^url\(['"]?#(.*?)['"]?\)$/;let pie=(()=>{class n extends lie{get inline(){return this._inline}set inline(t){this._inline=function rf(n){return null!=n&&"false"!=`${n}`}(t)}get svgIcon(){return this._svgIcon}set svgIcon(t){t!==this._svgIcon&&(t?this._updateSvgIcon(t):this._svgIcon&&this._clearSvgElement(),this._svgIcon=t)}get fontSet(){return this._fontSet}set fontSet(t){const i=this._cleanupFontValue(t);i!==this._fontSet&&(this._fontSet=i,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(t){const i=this._cleanupFontValue(t);i!==this._fontIcon&&(this._fontIcon=i,this._updateFontIconClasses())}constructor(t,i,r,o,s,a){super(t),this._iconRegistry=i,this._location=o,this._errorHandler=s,this._inline=!1,this._previousFontSetClass=[],this._currentIconFetch=di.EMPTY,a&&(a.color&&(this.color=this.defaultColor=a.color),a.fontSet&&(this.fontSet=a.fontSet)),r||t.nativeElement.setAttribute("aria-hidden","true")}_splitIconName(t){if(!t)return["",""];const i=t.split(":");switch(i.length){case 1:return["",i[0]];case 2:return i;default:throw Error(`Invalid icon name: "${t}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const t=this._elementsWithExternalReferences;if(t&&t.size){const i=this._location.getPathname();i!==this._previousPath&&(this._previousPath=i,this._prependPathToReferences(i))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(t){this._clearSvgElement();const i=this._location.getPathname();this._previousPath=i,this._cacheChildrenWithExternalReferences(t),this._prependPathToReferences(i),this._elementRef.nativeElement.appendChild(t)}_clearSvgElement(){const t=this._elementRef.nativeElement;let i=t.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();i--;){const r=t.childNodes[i];(1!==r.nodeType||"svg"===r.nodeName.toLowerCase())&&r.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const t=this._elementRef.nativeElement,i=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(r=>r.length>0);this._previousFontSetClass.forEach(r=>t.classList.remove(r)),i.forEach(r=>t.classList.add(r)),this._previousFontSetClass=i,this.fontIcon!==this._previousFontIconClass&&!i.includes("mat-ligature-font")&&(this._previousFontIconClass&&t.classList.remove(this._previousFontIconClass),this.fontIcon&&t.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(t){return"string"==typeof t?t.trim().split(" ")[0]:t}_prependPathToReferences(t){const i=this._elementsWithExternalReferences;i&&i.forEach((r,o)=>{r.forEach(s=>{o.setAttribute(s.name,`url('${t}#${s.value}')`)})})}_cacheChildrenWithExternalReferences(t){const i=t.querySelectorAll(hie),r=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let o=0;o<i.length;o++)d2.forEach(s=>{const a=i[o],l=a.getAttribute(s),c=l?l.match(fie):null;if(c){let d=r.get(a);d||(d=[],r.set(a,d)),d.push({name:s,value:c[1]})}})}_updateSvgIcon(t){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),t){const[i,r]=this._splitIconName(t);i&&(this._svgNamespace=i),r&&(this._svgName=r),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(r,i).pipe(Jr(1)).subscribe(o=>this._setSvgElement(o),o=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${i}:${r}! ${o.message}`))})}}}return n.\u0275fac=function(t){return new(t||n)(L(ln),L(i_),tc("aria-hidden"),L(die),L(Do),L(cie,8))},n.\u0275cmp=yt({type:n,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:8,hostBindings:function(t,i){2&t&&(Fi("data-mat-icon-type",i._usingFontIcon()?"font":"svg")("data-mat-icon-name",i._svgName||i.fontIcon)("data-mat-icon-namespace",i._svgNamespace||i.fontSet)("fontIcon",i._usingFontIcon()?i.fontIcon:null),Ir("mat-icon-inline",i.inline)("mat-icon-no-color","primary"!==i.color&&"accent"!==i.color&&"warn"!==i.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[Qe],ngContentSelectors:iie,decls:1,vars:0,template:function(t,i){1&t&&(function Ba(n){const e=fe()[Nn][vi];if(!e.projection){const i=e.projection=uu(n?n.length:1,null),r=i.slice();let o=e.child;for(;null!==o;){const s=n?Kz(o,n):0;null!==s&&(r[s]?r[s].projectionNext=o:i[s]=o,r[s]=o),o=o.next}}}(),function hr(n,e=0,t){const i=fe(),r=Vt(),o=gc(r,Ft+n,16,null,t||null);null===o.projection&&(o.projection=e),_v(),(!i[Jo]||Kl())&&32!=(32&o.flags)&&function rV(n,e,t){yE(e[ft],0,e,t,Wv(n,t,e),pE(t.parent||e[vi],t,e))}(r,i,o)}(0))},styles:[".mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],encapsulation:2,changeDetection:0}),n})(),mie=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=At({type:n}),n.\u0275inj=St({imports:[li,li]}),n})();const gie=function(n){return["/clubs/edit/",n]};function _ie(n,e){if(1&n){const t=Ni();M(0,"tr")(1,"td",20)(2,"div",21)(3,"div",22),Ie(4,"img",23),w(),M(5,"div",24),O(6),w()()(),M(7,"td",25)(8,"a",26),Ie(9,"mat-icon",27),w(),M(10,"a",28),Oe("click",function(){const o=ni(t).$implicit;return ii(Et(2).handleDeleteClub(o.id,o.name))}),Ie(11,"mat-icon",29),w()()()}if(2&n){const t=e.$implicit;B(4),Ar("src",t.imageURL,dr),B(2),Yn(t.name),B(2),Q("routerLink",Xs(3,gie,t.id))}}function vie(n,e){if(1&n&&(M(0,"tbody"),rt(1,_ie,12,5,"tr",19),w()),2&n){const t=Et();B(1),Q("ngForOf",t.userClubs)}}function bie(n,e){1&n&&(M(0,"tbody")(1,"tr")(2,"td",20)(3,"div",30),O(4,"You have no clubs."),w()()()())}const yie=function(n){return["/races/edit/",n]};function xie(n,e){if(1&n){const t=Ni();M(0,"tr")(1,"td",20)(2,"div",21)(3,"div",31),Ie(4,"img",23),w(),M(5,"div",24),O(6),w()()(),M(7,"td",25)(8,"a",26),Ie(9,"mat-icon",27),w(),M(10,"a",28),Oe("click",function(){const o=ni(t).$implicit;return ii(Et(2).handleDeleteRace(o.id,o.name))}),Ie(11,"mat-icon",29),w()()()}if(2&n){const t=e.$implicit;B(4),Ar("src",t.imageURL,dr),B(2),Yn(t.name),B(2),Q("routerLink",Xs(3,yie,t.id))}}function Cie(n,e){if(1&n&&(M(0,"tbody"),rt(1,xie,12,5,"tr",19),w()),2&n){const t=Et();B(1),Q("ngForOf",t.userRaces)}}function Mie(n,e){1&n&&(M(0,"tbody")(1,"tr")(2,"td",20)(3,"div",30),O(4,"You have no races."),w()()()())}let wie=(()=>{class n{constructor(t,i,r,o,s){this.clubService=t,this.raceService=i,this.toastrService=r,this.authService=o,this.router=s,this.userClubs=[],this.userRaces=[],this.jwtHelper=new Am}ngOnInit(){this.authService.loggedIn()||this.router.navigate(["auth/login"]),this.getClubs(),this.getRaces()}getClubs(){this.clubService.getUserClubs(this.authService.getUserId()).subscribe({next:t=>{this.userClubs=t},error:t=>{console.log(t)}})}getRaces(){this.raceService.getUserRaces(this.authService.getUserId()).subscribe({next:t=>{this.userRaces=t},error:t=>{console.log(t)}})}handleDeleteClub(t,i){confirm("Are you sure that you want to delete club "+i)&&this.clubService.deleteClub(t).subscribe({next:r=>{this.toastrService.success("Club has been successfully deleted!"),this.getClubs()},error:r=>console.log(r)})}handleDeleteRace(t,i){confirm("Are you sure that you want to delete club "+i)&&this.raceService.deleteRace(t).subscribe({next:r=>{this.toastrService.success("Club has been successfully deleted!"),this.getRaces()},error:r=>console.log(r)})}}return n.\u0275fac=function(t){return new(t||n)(L(Ud),L(Vd),L(ro),L(kr),L(dn))},n.\u0275cmp=yt({type:n,selectors:[["app-dashboard"]],decls:45,vars:6,consts:[[1,"md:flex","bg-gray-900","rounded","my-12","antialiased","w-75","mx-auto"],[1,"w-full","rounded"],[1,"rounded"],[1,"border-b","border-solid","rounded-t-lg","border-gray-700","bg-gray-800"],[1,"p-6","mx-auto","text-green-500","font-bold"],[1,"m-4","bg-gray-850","border","border-gray-900","border-solid","rounded","shadow"],[1,"border-b","border-solid","border-gray-300","p-4","text-lg","font-medium","text-gray-300"],[1,"flex","flex-row","flex-wrap","items-center","text-center","border-b","border-solid","border-gray-900"],[1,"p-4","w-full","sm:w-1/1","md:w-1/3","border-b","border-solid","border-gray-300","md:border-b-0","sm:border-r"],[1,"text-sm","font-medium","text-gray-400","uppercase"],[1,"py-3","flex","items-center","justify-center","text-center"],[1,"text-3xl","text-gray-500"],[1,"flex","flex-wrap","flex-row"],[1,"w-full","lg:w-1/2"],[1,"m-4","bg-gray-900","border","border-gray-300","border-solid","rounded","shadow"],[1,"border-b","bg-gray-800","text-gray-300","border-solid","border-gray-300","p-4","text-lg","font-medium"],[1,"w-full"],["cellpadding","0","cellspacing","0","border","0",1,"w-full"],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"p-1","py-3","border-b","border-solid","border-gray-300"],[1,"flex","flex-wrap","flex-row","items-center"],[1,"mr-2","h-12","w-12","rounded-full","block","flex","flex-row","justify-center","items-center","text-white"],[1,"rounded-xl",3,"src"],[1,"text-gray-300","font-md"],[1,"text-right","p-1","pr-3","border-b","border-solid","border-gray-300","text-gray-700"],["routerLinkActive","router-link-active",1,"cursor-pointer","m-1","text-yellow-500","hover:text-yellow-600",3,"routerLink"],["fontIcon","edit"],[1,"m-1","cursor-pointer","text-red-500","hover:text-red-700",3,"click"],["fontIcon","delete"],[1,"text-gray-300","text-lg","font-md"],[1,"mr-2","h-12","w-12","rounded-lg","block","flex","flex-row","justify-center","items-center","text-white"]],template:function(t,i){1&t&&(M(0,"div",0)(1,"main",1)(2,"section",2)(3,"header",3)(4,"h1",4),O(5,"DASHBOARD"),w()(),M(6,"section",5)(7,"header",6),O(8," Quick Overview "),w(),M(9,"section",7)(10,"div",8)(11,"span",9),O(12,"TOTAL CLUBS"),w(),M(13,"div",10)(14,"span",11),O(15),w()()(),M(16,"div",8)(17,"span",9),O(18,"TOTAL RACES"),w(),M(19,"div",10)(20,"span",11),O(21),w()()(),M(22,"div",8)(23,"span",9),O(24,"TOTAL FRIENDS"),w(),M(25,"div",10)(26,"span",11),O(27,"0"),w()()()()(),M(28,"div",12)(29,"div",13)(30,"section",14)(31,"header",15),O(32," YOUR CLUBS: "),w(),M(33,"section",16)(34,"table",17),rt(35,vie,2,1,"tbody",18),rt(36,bie,5,0,"tbody",18),w()()()(),M(37,"div",13)(38,"section",14)(39,"header",15),O(40," YOUR RACES: "),w(),M(41,"section",16)(42,"table",17),rt(43,Cie,2,1,"tbody",18),rt(44,Mie,5,0,"tbody",18),w()()()()()()()()),2&t&&(B(15),Yn(i.userClubs.length),B(6),Yn(i.userRaces.length),B(14),Q("ngIf",i.userClubs.length),B(1),Q("ngIf",!i.userClubs.length),B(7),Q("ngIf",i.userRaces.length),B(1),Q("ngIf",!i.userRaces.length))},dependencies:[ja,No,er,no,pie]}),n})(),u2=(()=>{class n{constructor(t){this.httpClient=t,this.baseUrl=Ka_apiURL}getUsers(t,i){return this.httpClient.get(this.baseUrl+"/user?page="+t+"&pageSize="+i)}getUserById(t){return this.httpClient.get(this.baseUrl+"/user/"+t)}getUsersByName(t,i,r){return this.httpClient.get(this.baseUrl+"/user/userName="+t+"?page="+i+"&pageSize="+r)}getUserClubs(t){return this.httpClient.get(this.baseUrl+"/user/clubs?userId="+t)}}return n.\u0275fac=function(t){return new(t||n)(J(na))},n.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Sie=function(n){return["/users/",n]};function Eie(n,e){if(1&n&&(M(0,"div",21)(1,"div",22),Ie(2,"img",23),w(),M(3,"div",24)(4,"div")(5,"h3",25)(6,"h1",26),Ie(7,"span",27),O(8),w()(),M(9,"p",28),O(10),w(),M(11,"p",28),O(12),w()()()()),2&n){const t=e.$implicit;B(2),Ar("src",null!=t.imageURL?t.imageURL:"https://img.freepik.com/free-vector/businessman-character-avatar-isolated_24877-60111.jpg?w=2000",dr),B(4),Q("routerLink",Xs(5,Sie,t.id)),B(2),cn(" ",t.userName," "),B(2),cn("Mileage: ",t.mileage,""),B(2),cn("Pace: ",t.mileage,"")}}function Tie(n,e){if(1&n){const t=Ni();M(0,"div",15),rt(1,Eie,13,7,"div",16),M(2,"div",17)(3,"a",18),Oe("click",function(){return ni(t),ii(Et().prevPage())}),O(4,"Prev"),w(),M(5,"span",19),O(6),w(),M(7,"a",20),Oe("click",function(){return ni(t),ii(Et().nextPage())}),O(8,"Next"),w()()()}if(2&n){const t=Et();B(1),Q("ngForOf",t.users),B(2),Q("ngClass",t.hasPreviousPage?"":"disabled"),B(3),cn("Page ",t.pageNumber+1,""),B(1),Q("ngClass",t.hasNextPage?"":"disabled")}}function Die(n,e){1&n&&(M(0,"div",15)(1,"h1",29),O(2,"No users found."),w()())}function Iie(n,e){1&n&&(M(0,"div",17)(1,"h1",18),O(2,"User has no clubs."),w()())}const Rie=function(n){return["/clubs/",n]};function Pie(n,e){if(1&n&&(M(0,"div",23)(1,"div",24),Ie(2,"img",25),w(),M(3,"div",26)(4,"div")(5,"h3",27)(6,"h1",28),Ie(7,"span",29),O(8),w()(),M(9,"p",30),O(10),w()()()()),2&n){const t=e.$implicit;B(2),Ar("src",t.imageURL,dr),B(4),Q("routerLink",Xs(4,Rie,t.id)),B(2),cn(" ",t.name," "),B(2),Yn(t.clubCategory)}}function Oie(n,e){if(1&n&&(M(0,"div",17)(1,"h1",19),O(2,"Clubs:"),w(),M(3,"div",20),rt(4,Pie,11,6,"div",21),M(5,"a",22),O(6," Show more "),w()()()),2&n){const t=Et();B(4),Q("ngForOf",t.userClubs)}}const kie=[{path:"",component:Wte},{path:"auth/login",component:Hq},{path:"auth/register",component:qte},{path:"profile/dashboard",component:wie},{path:"profile/edit",component:pne},{path:"clubs",component:Jte},{path:"clubs/create",component:tne},{path:"clubs/edit/:id",component:ine},{path:"clubs/:id",component:nne},{path:"races",component:cne},{path:"races/create",component:une},{path:"races/edit/:id",component:hne},{path:"races/:id",component:fne},{path:"users",component:(()=>{class n{constructor(t){this.userService=t,this.users=[],this.searchTerm="",this.pageSize=5,this.pageNumber=0,this.hasPreviousPage=!1,this.hasNextPage=!1,this.searchedByName=!1}ngOnInit(){this.getUsers(this.pageNumber,this.pageSize)}getUsers(t,i){t<0?this.pageNumber=0:this.userService.getUsers(t,i).subscribe({next:r=>{this.users=r.list,this.hasPreviousPage=r.hasPreviousPage,this.hasNextPage=r.hasNextPage}})}searchByName(t){this.users=[],this.userService.getUsersByName(t,this.pageNumber,this.pageSize).subscribe({next:i=>{this.users=i.list,this.hasPreviousPage=i.hasPreviousPage,this.hasNextPage=i.hasNextPage,this.searchTerm=t,this.searchedByName=!0}})}nextPage(){this.hasNextPage&&(this.pageNumber++,this.searchedByName?this.searchByName(this.searchTerm):this.getUsers(this.pageNumber,this.pageSize))}prevPage(){this.hasPreviousPage&&(this.pageNumber--,this.searchedByName?this.searchByName(this.searchTerm):this.getUsers(this.pageNumber,this.pageSize))}}return n.\u0275fac=function(t){return new(t||n)(L(u2))},n.\u0275cmp=yt({type:n,selectors:[["app-users"]],decls:21,vars:2,consts:[[1,"mx-auto","py-12","flex","flex-col","xl:mt-12","lg:mt-12"],[1,"bg-black","rounded","top-[120px]","max-w-2xl","mx-auto","flex","flex-row"],[1,"max-w-2xl","w-3/4","mx-auto"],[1,"flex","justify-content-around","flex-row","flex-wrap","gap-y-10","gap-x-3","lg:gap-x-6"],[1,"text-2xl","font-bold","tracking-tight","text-white"],[1,"app-green"],[3,"ngSubmit"],["searchForm","ngForm"],[1,"flex"],["id","searchBy",1,"border","text-sm","rounded-l-lg","cursor-pointer","block","w-full","p-2.5","bg-gray-700","border-green-600","placeholder-gray-400","text-white","focus:ring-green-500","focus:border-green-500"],["selected",""],["value","name"],["value","city"],["type","text","ngModel","","name","userName","placeholder","Search...",1,"py-1","pl-3","text-white","rounded-r-lg","bg-transparent","focus:outline-none","focus:border-green-500","focus:ring-1","focus:ring-green-500"],["class","mt-6 grid grid-cols-1 gap-x-6  sm:grid-cols-1 lg:grid-cols-1 xl:gap-x-8",4,"ngIf"],[1,"mt-6","grid","grid-cols-1","gap-x-6","sm:grid-cols-1","lg:grid-cols-1","xl:gap-x-8"],["class","group relative flex flex-row items-start gap-5 border-green-900 border-t-2 py-4",4,"ngFor","ngForOf"],[1,"pt-2","flex","justify-center"],["type","button",1,"btn","btn-sm","btn-outline-success",3,"ngClass","click"],[1,"ms-3","text-muted","text-small"],["type","button",1,"btn","btn-sm","btn-outline-success","ms-3",3,"ngClass","click"],[1,"group","relative","flex","flex-row","items-start","gap-5","border-green-900","border-t-2","py-4"],[1,"w-[150px]","h-[150px]","overflow-hidden","rounded-md","bg-gray-200","lg:aspect-none","group-hover:opacity-75","justify-start"],["alt","Front of men's Basic Tee in black.",1,"h-full","w-full","object-cover","object-center","lg:h-full","lg:w-full",3,"src"],[1,"mt-4","flex","justify-center","align-content-center"],[1,"text-sm","md:text-lg","text-light"],["routerLinkActive","router-link-active","routerLinkActive","router-link-active",1,"text-light","font-bold","cursor-pointer","text-sm","md:text-lg",3,"routerLink"],["aria-hidden","true",1,"absolute","inset-0"],[1,"mt-3","text-sm","md:text-md","font-semibold","text-green-900"],[1,"text-2xl","font-bold","tracking-tight","text-white","mx-auto","my-24"]],template:function(t,i){if(1&t){const r=Ni();M(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1",4),O(5,"Featured "),M(6,"span",5),O(7,"Users"),w()(),M(8,"form",6,7),Oe("ngSubmit",function(){ni(r);const s=ss(9);return ii(i.searchByName(s.value.userName))}),M(10,"div",8)(11,"select",9)(12,"option",10),O(13,"Search by"),w(),M(14,"option",11),O(15,"Name"),w(),M(16,"option",12),O(17,"City"),w()(),Ie(18,"input",13),w()()(),rt(19,Tie,9,4,"div",14),rt(20,Die,3,0,"div",14),w()()()}2&t&&(B(19),Q("ngIf",i.users.length),B(1),Q("ngIf",!i.users.length))},dependencies:[qu,ja,No,er,no,gr,so,ao,pr,oo,mr,Nr,Vi]}),n})()},{path:"users/:id",component:(()=>{class n{constructor(t,i,r){this.route=t,this.userService=i,this.router=r,this.user=new Uy,this.userClubs=[]}ngOnInit(){let t=this.route.snapshot.paramMap.get("id");null!=t&&(this.userService.getUserById(t).subscribe({next:i=>{this.user=i},error:i=>this.router.navigate(["/"])}),this.getUserClubs(t))}getUserClubs(t){this.userService.getUserClubs(t).subscribe({next:i=>this.userClubs=i,error:i=>console.log(i)})}}return n.\u0275fac=function(t){return new(t||n)(L(eo),L(u2),L(dn))},n.\u0275cmp=yt({type:n,selectors:[["app-user-single"]],outputs:{user:"user",userClubs:"userClubs"},decls:32,vars:7,consts:[[1,"p-16"],[1,"p-8","bg-gray-900","rounded","shadow","mt-24"],[1,"grid","grid-cols-1","md:grid-cols-3"],[1,"grid","grid-cols-2","text-center","order-last","md:order-first","mt-20","md:mt-0"],[1,"font-bold","text-gray-400","text-xl"],[1,"text-gray-400"],[1,"relative"],[1,"w-48","h-48","bg-indigo-100","mx-auto","rounded-full","shadow-2xl","absolute","inset-x-0","top-0","-mt-24","flex","items-center","justify-center","text-indigo-500",3,"src"],[1,"space-x-8","flex","justify-between","mt-32","md:mt-0","md:justify-center"],[1,"text-white","py-2","px-4","uppercase","rounded","bg-green-400","hover:bg-green-500","shadow","hover:shadow-lg","font-medium","transition","transform","hover:-translate-y-0.5"],[1,"text-white","py-2","px-4","uppercase","rounded","bg-gray-700","hover:bg-gray-800","shadow","hover:shadow-lg","font-medium","transition","transform","hover:-translate-y-0.5"],[1,"mt-12","text-center","border-b","pb-12","md:mt-20"],[1,"text-xl","font-medium","text-gray-200","md:text-2xl","lg:text-4xl"],[1,"font-light","text-md","text-gray-400","mt-3","md:text-lg","lg:text-xl"],[1,"mt-8","text-sm","text-gray-300","md:text-lg","lg:text-xl"],[1,"mt-2","text-sm","text-gray-300","md:text-lg","lg:text-xl"],["class","mt-6 flex flex-col mx-auto",4,"ngIf"],[1,"mt-6","flex","flex-col","mx-auto"],[1,"text-lg","font-medium","text-gray-200","mx-auto","md:text-xl","lg:text-2xl"],[1,"text-md","font-medium","text-gray-200","md:text-lg","lg:text-xl"],[1,"mt-6","grid","grid-cols-1","gap-x-3","xl:gap-x-5"],["class","group relative flex flex-row items-start gap-5 border-t py-4",4,"ngFor","ngForOf"],[1,"text-green-800","hover:text-green-600","py-2","mx-auto","font-medium","mt-4","cursor-pointer"],[1,"group","relative","flex","flex-row","items-start","gap-5","border-t","py-4"],[1,"w-[75px]","h-[75px]","overflow-hidden","rounded-md","bg-gray-200","lg:aspect-none","group-hover:opacity-75","justify-start"],["alt","Front of men's Basic Tee in black.",1,"h-full","w-full","object-cover","object-center","lg:h-full","lg:w-full",3,"src"],[1,"flex","justify-center","align-content-center"],[1,"text-sm","md:text-lg","text-light"],["routerLinkActive","router-link-active","routerLinkActive","router-link-active",1,"text-light","cursor-pointer","text-sm","md:text-lg",3,"routerLink"],["aria-hidden","true",1,"absolute","inset-0"],[1,"mt-2","text-sm","md:text-md","font-semibold","text-green-900"]],template:function(t,i){1&t&&(M(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div")(5,"p",4),O(6,"97"),w(),M(7,"p",5),O(8,"Friends"),w()(),M(9,"div")(10,"p",4),O(11),w(),M(12,"p",5),O(13,"Clubs"),w()()(),M(14,"div",6),Ie(15,"img",7),w(),M(16,"div",8)(17,"button",9),O(18," Connect "),w(),M(19,"button",10),O(20," Message "),w()()(),M(21,"div",11)(22,"h1",12),O(23),w(),M(24,"p",13),O(25,"Bucharest, Romania"),w(),M(26,"p",14),O(27),w(),M(28,"p",15),O(29),w()(),rt(30,Iie,3,0,"div",16),rt(31,Oie,7,1,"div",16),w()()),2&t&&(B(11),Yn(i.userClubs.length),B(4),Ar("src",null!=i.user.imageURL?i.user.imageURL:"https://img.freepik.com/free-vector/businessman-character-avatar-isolated_24877-60111.jpg?w=2000",dr),B(8),Yn(i.user.userName),B(4),cn("Pace: ",i.user.pace,""),B(2),cn("Mileage: ",i.user.mileage,""),B(1),Q("ngIf",!i.userClubs.length),B(1),Q("ngIf",i.userClubs.length))},dependencies:[ja,No,er,no]}),n})()}];let Fie=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=At({type:n}),n.\u0275inj=St({imports:[$R.forRoot(kie),$R]}),n})();function Nie(n,e){if(1&n&&Ie(0,"div",9),2&n){const t=Et();Mi("height",t.pbThickness,"px")("color",t.pbColor),Ir("ngx-position-absolute",t.loaderId!==t.defaultConfig.masterLoaderId)("loading-foreground",t.showForeground)("foreground-closing",t.foregroundClosing)("fast-closing",t.foregroundClosing&&t.fastFadeOut),Q("ngClass","ngx-progress-bar-"+t.pbDirection)}}function Lie(n,e){if(1&n&&Ie(0,"img",10),2&n){const t=Et();Mi("width",t.logoSize,"px")("height",t.logoSize,"px")("top",t.logoTop),Q("ngClass",t.logoPosition)("src",t.trustedLogoUrl,dr)}}function Bie(n,e){1&n&&Ie(0,"div")}function Uie(n,e){if(1&n&&(M(0,"div"),rt(1,Bie,1,0,"div",11),w()),2&n){const t=Et();Rr(t.fgSpinnerClass),B(1),Q("ngForOf",t.fgDivs)}}function Vie(n,e){1&n&&Dr(0)}function Hie(n,e){1&n&&rt(0,Vie,1,0,"ng-container",12),2&n&&Q("ngTemplateOutlet",Et().fgsTemplate)}function zie(n,e){1&n&&Ie(0,"div")}function Gie(n,e){if(1&n&&(M(0,"div"),rt(1,zie,1,0,"div",11),w()),2&n){const t=Et();Rr(t.bgSpinnerClass),B(1),Q("ngForOf",t.bgDivs)}}function jie(n,e){1&n&&Dr(0)}function Wie(n,e){1&n&&rt(0,jie,1,0,"ng-container",12),2&n&&Q("ngTemplateOutlet",Et().bgsTemplate)}var en=(()=>((en=en||{}).ballScaleMultiple="ball-scale-multiple",en.ballSpin="ball-spin",en.ballSpinClockwise="ball-spin-clockwise",en.ballSpinClockwiseFadeRotating="ball-spin-clockwise-fade-rotating",en.ballSpinFadeRotating="ball-spin-fade-rotating",en.chasingDots="chasing-dots",en.circle="circle",en.cubeGrid="cube-grid",en.doubleBounce="double-bounce",en.fadingCircle="fading-circle",en.foldingCube="folding-cube",en.pulse="pulse",en.rectangleBounce="rectangle-bounce",en.rectangleBounceParty="rectangle-bounce-party",en.rectangleBouncePulseOut="rectangle-bounce-pulse-out",en.rectangleBouncePulseOutRapid="rectangle-bounce-pulse-out-rapid",en.rotatingPlane="rotating-plane",en.squareJellyBox="square-jelly-box",en.squareLoader="square-loader",en.threeBounce="three-bounce",en.threeStrings="three-strings",en.wanderingCubes="wandering-cubes",en))(),Sn=(()=>((Sn=Sn||{}).bottomCenter="bottom-center",Sn.bottomLeft="bottom-left",Sn.bottomRight="bottom-right",Sn.centerCenter="center-center",Sn.centerLeft="center-left",Sn.centerRight="center-right",Sn.topCenter="top-center",Sn.topLeft="top-left",Sn.topRight="top-right",Sn))(),zd=(()=>((zd=zd||{}).leftToRight="ltr",zd.rightToLeft="rtl",zd))();const o_="fg-default",s_="bg-default",qie={},Gd=!1,df=!0,a_="$_http-loader",l_={"ball-scale-multiple":{divs:3,class:"sk-ball-scale-multiple"},"ball-spin":{divs:8,class:"sk-ball-spin"},"ball-spin-clockwise":{divs:8,class:"sk-ball-spin-clockwise"},"ball-spin-clockwise-fade-rotating":{divs:8,class:"sk-ball-spin-clockwise-fade-rotating"},"ball-spin-fade-rotating":{divs:8,class:"sk-ball-spin-fade-rotating"},"chasing-dots":{divs:2,class:"sk-chasing-dots"},circle:{divs:12,class:"sk-circle"},"cube-grid":{divs:9,class:"sk-cube-grid"},"double-bounce":{divs:2,class:"sk-double-bounce"},"fading-circle":{divs:12,class:"sk-fading-circle"},"folding-cube":{divs:4,class:"sk-folding-cube"},pulse:{divs:1,class:"sk-pulse"},"rectangle-bounce":{divs:5,class:"sk-rectangle-bounce"},"rectangle-bounce-party":{divs:5,class:"sk-rectangle-bounce-party"},"rectangle-bounce-pulse-out":{divs:5,class:"sk-rectangle-bounce-pulse-out"},"rectangle-bounce-pulse-out-rapid":{divs:5,class:"sk-rectangle-bounce-pulse-out-rapid"},"rotating-plane":{divs:1,class:"sk-rotating-plane"},"square-jelly-box":{divs:2,class:"sk-square-jelly-box"},"square-loader":{divs:1,class:"sk-square-loader"},"three-bounce":{divs:3,class:"sk-three-bounce"},"three-strings":{divs:3,class:"sk-three-strings"},"wandering-cubes":{divs:2,class:"sk-wandering-cubes"}},Zie={bgsColor:"#00ACC1",bgsOpacity:.5,bgsPosition:Sn.bottomRight,bgsSize:60,bgsType:en.ballSpinClockwise,blur:5,delay:0,fastFadeOut:!1,fgsColor:"#00ACC1",fgsPosition:Sn.centerCenter,fgsSize:60,fgsType:en.ballSpinClockwise,gap:24,logoPosition:Sn.centerCenter,logoSize:120,logoUrl:"",masterLoaderId:"master",overlayBorderRadius:"0",overlayColor:"rgba(40, 40, 40, 0.8)",pbColor:"#00ACC1",pbDirection:zd.leftToRight,pbThickness:3,hasProgressBar:!0,text:"",textColor:"#FFFFFF",textPosition:Sn.centerCenter,maxTime:-1,minTime:300},m2=new he("ngxUiLoaderCustom.config");let g2=(()=>{class n{constructor(t){this.config=t,this.defaultConfig={...Zie},this.config&&(this.config.minTime&&this.config.minTime<0&&(this.config.minTime=0),this.defaultConfig={...this.defaultConfig,...this.config}),this.loaders={},this.showForeground=new ui({loaderId:"",isShow:!1}),this.showForeground$=this.showForeground.asObservable(),this.showBackground=new ui({loaderId:"",isShow:!1}),this.showBackground$=this.showBackground.asObservable(),this.fgClosing=new ui({loaderId:"",isShow:!1}),this.foregroundClosing$=this.fgClosing.asObservable(),this.bgClosing=new ui({loaderId:"",isShow:!1}),this.backgroundClosing$=this.bgClosing.asObservable()}bindLoaderData(t){const i=t===this.defaultConfig.masterLoaderId;if(this.loaders[t]){if(this.loaders[t].isBound)throw new Error(`[ngx-ui-loader] - loaderId "${t}" is duplicated.`);this.loaders[t].isBound=!0,this.loaders[t].isMaster=i,this.hasRunningTask(df,t)?this.showForeground.next({loaderId:t,isShow:!0}):this.hasRunningTask(Gd,t)&&this.showBackground.next({loaderId:t,isShow:!0})}else this.createLoaderData(t,i,!0)}destroyLoaderData(t){this.stopAllLoader(t),delete this.loaders[t]}getDefaultConfig(){return{...this.defaultConfig}}getLoaders(){return JSON.parse(JSON.stringify(this.loaders))}getLoader(t){return this.loaders[t=t||this.defaultConfig.masterLoaderId]?JSON.parse(JSON.stringify(this.loaders[t])):null}startLoader(t,i=o_,r){this.readyToStart(t,i,!0,r)&&(this.loaders[t].tasks[i].isOtherRunning||(this.hasRunningTask(Gd,t)&&(this.backgroundCloseout(t),this.showBackground.next({loaderId:t,isShow:!1})),this.showForeground.next({loaderId:t,isShow:!0})))}start(t=o_,i){this.startLoader(this.defaultConfig.masterLoaderId,t,i)}startBackgroundLoader(t,i=s_,r){this.readyToStart(t,i,!1,r)&&!this.hasRunningTask(df,t)&&!this.loaders[t].tasks[i].isOtherRunning&&this.showBackground.next({loaderId:t,isShow:!0})}startBackground(t=s_,i){this.startBackgroundLoader(this.defaultConfig.masterLoaderId,t,i)}stopLoader(t,i=o_){this.readyToStop(t,i)&&(this.hasRunningTask(df,t)||(this.foregroundCloseout(t),this.showForeground.next({loaderId:t,isShow:!1}),this.hasRunningTask(Gd,t)&&setTimeout(()=>{this.hasRunningTask(Gd,t)&&this.showBackground.next({loaderId:t,isShow:!0})},this.defaultConfig.fastFadeOut?300:500)))}stop(t=o_){this.stopLoader(this.defaultConfig.masterLoaderId,t)}stopBackgroundLoader(t,i=s_){this.readyToStop(t,i)&&!this.hasRunningTask(df,t)&&!this.hasRunningTask(Gd,t)&&(this.backgroundCloseout(t),this.showBackground.next({loaderId:t,isShow:!1}))}stopBackground(t=s_){this.stopBackgroundLoader(this.defaultConfig.masterLoaderId,t)}stopAllLoader(t){this.loaders[t]?(this.hasRunningTask(df,t)?(this.foregroundCloseout(t),this.showForeground.next({loaderId:t,isShow:!1})):this.hasRunningTask(Gd,t)&&(this.backgroundCloseout(t),this.showBackground.next({loaderId:t,isShow:!1})),this.clearAllTimers(this.loaders[t].tasks),this.loaders[t].tasks={}):console.warn(`[ngx-ui-loader] - loaderId "${t}" does not exist.`)}stopAll(){this.stopAllLoader(this.defaultConfig.masterLoaderId)}hasRunningTask(t,i,r){if(this.loaders[i]){const o=this.loaders[i].tasks;return r?!!o[r]&&!!o[r].startAt:Object.keys(o).some(s=>!!o[s].startAt&&o[s].isForeground===t)}return!1}createLoaderData(t,i,r){this.loaders[t]||(this.loaders[t]={loaderId:t,tasks:{},isMaster:i,isBound:r})}foregroundCloseout(t){this.fgClosing.next({loaderId:t,isShow:!0}),setTimeout(()=>{this.fgClosing.next({loaderId:t,isShow:!1})},this.defaultConfig.fastFadeOut?601:1001)}backgroundCloseout(t){this.bgClosing.next({loaderId:t,isShow:!0}),setTimeout(()=>{this.bgClosing.next({loaderId:t,isShow:!1})},this.defaultConfig.fastFadeOut?601:1001)}clearTimers(t){clearTimeout(t.delayTimer),clearTimeout(t.maxTimer),clearTimeout(t.minTimer)}clearAllTimers(t){Object.keys(t).map(i=>{this.clearTimers(t[i])})}readyToStart(t,i,r,o=qie){this.createLoaderData(t,void 0,!1);const s=this.hasRunningTask(r,t);if(this.loaders[t].tasks[i]){if(this.loaders[t].tasks[i].isForeground!==r)throw new Error(`[ngx-ui-loader] - taskId "${i}" is duplicated.`)}else this.loaders[t].tasks[i]={taskId:i,isForeground:r,minTime:o.minTime>=0?o.minTime:this.defaultConfig.minTime,maxTime:o.maxTime?o.maxTime:this.defaultConfig.maxTime,delay:o.delay>=0?o.delay:this.defaultConfig.delay};return!(this.setDelayTimer(this.loaders[t].tasks[i],t)||(this.loaders[t].tasks[i]={...this.loaders[t].tasks[i],isOtherRunning:s,startAt:Date.now()},this.setMaxTimer(this.loaders[t].tasks[i],t),!this.loaders[t].isBound))}readyToStop(t,i){if(!this.loaders[t])return console.warn(`[ngx-ui-loader] - loaderId "${t}" does not exist.`),!1;const r=this.loaders[t].tasks[i];return!(!r||(r.isDelayed?(this.clearTimers(r),delete this.loaders[t].tasks[i],1):this.setMinTimer(r,t)||(this.clearTimers(r),delete this.loaders[t].tasks[i],0)))}setDelayTimer(t,i){if(t.delay>0){if(t.isDelayed)return!0;if(!t.delayTimer)return t.isDelayed=!0,t.delayTimer=setTimeout(()=>{t.isDelayed=!1,t.isForeground?this.startLoader(i,t.taskId):this.startBackgroundLoader(i,t.taskId)},t.delay),!0}return!1}setMaxTimer(t,i){t.maxTime>t.minTime&&(clearTimeout(t.maxTimer),t.maxTimer=setTimeout(()=>{t.isForeground?this.stopLoader(i,t.taskId):this.stopBackgroundLoader(i,t.taskId)},t.maxTime))}setMinTimer(t,i){const r=Date.now();return!!(t.startAt&&t.startAt+t.minTime>r)&&(t.minTimer=setTimeout(()=>{t.isForeground?this.stopLoader(i,t.taskId):this.stopBackgroundLoader(i,t.taskId)},t.startAt+t.minTime-r),!0)}}return n.\u0275fac=function(t){return new(t||n)(J(m2,8))},n.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Kie=(()=>{class n{constructor(t,i,r){this.domSanitizer=t,this.changeDetectorRef=i,this.ngxService=r,this.initialized=!1,this.defaultConfig=this.ngxService.getDefaultConfig(),this.bgsColor=this.defaultConfig.bgsColor,this.bgsOpacity=this.defaultConfig.bgsOpacity,this.bgsPosition=this.defaultConfig.bgsPosition,this.bgsSize=this.defaultConfig.bgsSize,this.bgsType=this.defaultConfig.bgsType,this.fastFadeOut=this.defaultConfig.fastFadeOut,this.fgsColor=this.defaultConfig.fgsColor,this.fgsPosition=this.defaultConfig.fgsPosition,this.fgsSize=this.defaultConfig.fgsSize,this.fgsType=this.defaultConfig.fgsType,this.gap=this.defaultConfig.gap,this.loaderId=this.defaultConfig.masterLoaderId,this.logoPosition=this.defaultConfig.logoPosition,this.logoSize=this.defaultConfig.logoSize,this.logoUrl=this.defaultConfig.logoUrl,this.overlayBorderRadius=this.defaultConfig.overlayBorderRadius,this.overlayColor=this.defaultConfig.overlayColor,this.pbColor=this.defaultConfig.pbColor,this.pbDirection=this.defaultConfig.pbDirection,this.pbThickness=this.defaultConfig.pbThickness,this.hasProgressBar=this.defaultConfig.hasProgressBar,this.text=this.defaultConfig.text,this.textColor=this.defaultConfig.textColor,this.textPosition=this.defaultConfig.textPosition}ngOnInit(){this.initializeSpinners(),this.ngxService.bindLoaderData(this.loaderId),this.determinePositions(),this.trustedLogoUrl=this.domSanitizer.bypassSecurityTrustResourceUrl(this.logoUrl),this.showForegroundWatcher=this.ngxService.showForeground$.pipe(Si(t=>this.loaderId===t.loaderId)).subscribe(t=>{this.showForeground=t.isShow,this.changeDetectorRef.markForCheck()}),this.showBackgroundWatcher=this.ngxService.showBackground$.pipe(Si(t=>this.loaderId===t.loaderId)).subscribe(t=>{this.showBackground=t.isShow,this.changeDetectorRef.markForCheck()}),this.foregroundClosingWatcher=this.ngxService.foregroundClosing$.pipe(Si(t=>this.loaderId===t.loaderId)).subscribe(t=>{this.foregroundClosing=t.isShow,this.changeDetectorRef.markForCheck()}),this.backgroundClosingWatcher=this.ngxService.backgroundClosing$.pipe(Si(t=>this.loaderId===t.loaderId)).subscribe(t=>{this.backgroundClosing=t.isShow,this.changeDetectorRef.markForCheck()}),this.initialized=!0}ngOnChanges(t){if(!this.initialized)return;const o=t.logoUrl;(t.fgsType||t.bgsType)&&this.initializeSpinners(),this.determinePositions(),o&&(this.trustedLogoUrl=this.domSanitizer.bypassSecurityTrustResourceUrl(this.logoUrl))}ngOnDestroy(){this.ngxService.destroyLoaderData(this.loaderId),this.showForegroundWatcher&&this.showForegroundWatcher.unsubscribe(),this.showBackgroundWatcher&&this.showBackgroundWatcher.unsubscribe(),this.foregroundClosingWatcher&&this.foregroundClosingWatcher.unsubscribe(),this.backgroundClosingWatcher&&this.backgroundClosingWatcher.unsubscribe()}initializeSpinners(){this.fgDivs=Array(l_[this.fgsType].divs).fill(1),this.fgSpinnerClass=l_[this.fgsType].class,this.bgDivs=Array(l_[this.bgsType].divs).fill(1),this.bgSpinnerClass=l_[this.bgsType].class}determinePositions(){this.logoTop="initial",this.spinnerTop="initial",this.textTop="initial",this.logoPosition.startsWith("center")?this.logoTop="50%":this.logoPosition.startsWith("top")&&(this.logoTop="30px"),this.fgsPosition.startsWith("center")?this.spinnerTop="50%":this.fgsPosition.startsWith("top")&&(this.spinnerTop="30px"),this.textPosition.startsWith("center")?this.textTop="50%":this.textPosition.startsWith("top")&&(this.textTop="30px"),this.fgsPosition===Sn.centerCenter?this.logoUrl&&this.logoPosition===Sn.centerCenter?this.text&&this.textPosition===Sn.centerCenter?(this.logoTop=this.domSanitizer.bypassSecurityTrustStyle(`calc(50% - ${this.fgsSize/2}px - 12px - ${this.gap}px)`),this.spinnerTop=this.domSanitizer.bypassSecurityTrustStyle(`calc(50% + ${this.logoSize/2}px - 12px)`),this.textTop=this.domSanitizer.bypassSecurityTrustStyle(`calc(50% + ${this.logoSize/2}px + ${this.gap}px + ${this.fgsSize/2}px)`)):(this.logoTop=this.domSanitizer.bypassSecurityTrustStyle(`calc(50% - ${this.fgsSize/2}px - ${this.gap/2}px)`),this.spinnerTop=this.domSanitizer.bypassSecurityTrustStyle(`calc(50% + ${this.logoSize/2}px + ${this.gap/2}px)`)):this.text&&this.textPosition===Sn.centerCenter&&(this.spinnerTop=this.domSanitizer.bypassSecurityTrustStyle(`calc(50% - 12px - ${this.gap/2}px)`),this.textTop=this.domSanitizer.bypassSecurityTrustStyle(`calc(50% + ${this.fgsSize/2}px + ${this.gap/2}px)`)):this.logoUrl&&this.logoPosition===Sn.centerCenter&&this.text&&this.textPosition===Sn.centerCenter&&(this.logoTop=this.domSanitizer.bypassSecurityTrustStyle(`calc(50% - 12px - ${this.gap/2}px)`),this.textTop=this.domSanitizer.bypassSecurityTrustStyle(`calc(50% + ${this.logoSize/2}px + ${this.gap/2}px)`))}}return n.\u0275fac=function(t){return new(t||n)(L(Zu),L(Oc),L(g2))},n.\u0275cmp=yt({type:n,selectors:[["ngx-ui-loader"]],inputs:{bgsColor:"bgsColor",bgsOpacity:"bgsOpacity",bgsPosition:"bgsPosition",bgsSize:"bgsSize",bgsTemplate:"bgsTemplate",bgsType:"bgsType",fgsColor:"fgsColor",fgsPosition:"fgsPosition",fgsSize:"fgsSize",fgsTemplate:"fgsTemplate",fgsType:"fgsType",gap:"gap",loaderId:"loaderId",logoPosition:"logoPosition",logoSize:"logoSize",logoUrl:"logoUrl",overlayBorderRadius:"overlayBorderRadius",overlayColor:"overlayColor",pbColor:"pbColor",pbDirection:"pbDirection",pbThickness:"pbThickness",hasProgressBar:"hasProgressBar",text:"text",textColor:"textColor",textPosition:"textPosition"},features:[yi],decls:14,vars:50,consts:[["class","ngx-progress-bar",3,"ngx-position-absolute","ngClass","height","color","loading-foreground","foreground-closing","fast-closing",4,"ngIf"],[1,"ngx-overlay"],["class","ngx-loading-logo",3,"ngClass","src","width","height","top",4,"ngIf"],[1,"ngx-foreground-spinner",3,"ngClass"],[3,"class",4,"ngIf","ngIfElse"],["foregroundTemplate",""],[1,"ngx-loading-text",3,"ngClass"],[1,"ngx-background-spinner",3,"ngClass"],["backgroundTemplate",""],[1,"ngx-progress-bar",3,"ngClass"],[1,"ngx-loading-logo",3,"ngClass","src"],[4,"ngFor","ngForOf"],[4,"ngTemplateOutlet"]],template:function(t,i){if(1&t&&(rt(0,Nie,1,13,"div",0),M(1,"div",1),rt(2,Lie,1,8,"img",2),M(3,"div",3),rt(4,Uie,2,3,"div",4),rt(5,Hie,1,1,"ng-template",null,5,p0),w(),M(7,"div",6)(8,"span"),O(9),w()()(),M(10,"div",7),rt(11,Gie,2,3,"div",4),rt(12,Wie,1,1,"ng-template",null,8,p0),w()),2&t){const r=ss(6),o=ss(13);Q("ngIf",i.hasProgressBar),B(1),Mi("background-color",i.overlayColor)("border-radius",i.overlayBorderRadius),Ir("ngx-position-absolute",i.loaderId!==i.defaultConfig.masterLoaderId)("loading-foreground",i.showForeground)("foreground-closing",i.foregroundClosing)("fast-closing",i.foregroundClosing&&i.fastFadeOut),B(1),Q("ngIf",i.logoUrl),B(1),Mi("color",i.fgsColor)("width",i.fgsSize,"px")("height",i.fgsSize,"px")("top",i.spinnerTop),Q("ngClass",i.fgsPosition),B(1),Q("ngIf",!i.fgsTemplate)("ngIfElse",r),B(3),Mi("top",i.textTop)("color",i.textColor),Q("ngClass",i.textPosition),B(2),Yn(i.text),B(1),Mi("width",i.bgsSize,"px")("height",i.bgsSize,"px")("color",i.bgsColor)("opacity",i.bgsOpacity),Ir("ngx-position-absolute",i.loaderId!==i.defaultConfig.masterLoaderId)("loading-background",i.showBackground)("background-closing",i.backgroundClosing)("fast-closing",i.backgroundClosing&&i.fastFadeOut),Q("ngClass",i.bgsPosition),B(1),Q("ngIf",!i.bgsTemplate)("ngIfElse",o)}},dependencies:[No,qu,ja,hI],styles:['.ngx-progress-bar[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:3px;z-index:99999!important;display:none;color:#00acc1;overflow:hidden}.ngx-progress-bar.loading-foreground[_ngcontent-%COMP%], .ngx-progress-bar.foreground-closing[_ngcontent-%COMP%]{display:block}.ngx-progress-bar.foreground-closing[_ngcontent-%COMP%]{opacity:0!important;transition:opacity .5s ease-out .5s}.ngx-progress-bar.fast-closing[_ngcontent-%COMP%]{transition:opacity .3s ease-out .3s!important}.ngx-progress-bar[_ngcontent-%COMP%]:before, .ngx-progress-bar[_ngcontent-%COMP%]:after{background-color:currentColor;content:"";display:block;width:100%;height:100%;position:absolute;top:0}.ngx-progress-bar-ltr[_ngcontent-%COMP%]:before{transform:translate3d(-100%,0,0)}.ngx-progress-bar-ltr[_ngcontent-%COMP%]:after{animation:_ngcontent-%COMP%_progressBar-slide-ltr 12s ease-out 0s 1 normal;transform:translate3d(-5%,0,0)}.ngx-progress-bar-rtl[_ngcontent-%COMP%]:before{transform:translate3d(100%,0,0)}.ngx-progress-bar-rtl[_ngcontent-%COMP%]:after{animation:_ngcontent-%COMP%_progressBar-slide-rtl 12s ease-out 0s 1 normal;transform:translate3d(5%,0,0)}.foreground-closing.ngx-progress-bar-ltr[_ngcontent-%COMP%]:before{animation:_ngcontent-%COMP%_progressBar-slide-complete-ltr 1s ease-out 0s 1;transform:translateZ(0)}.fast-closing.ngx-progress-bar-ltr[_ngcontent-%COMP%]:before{animation:_ngcontent-%COMP%_progressBar-slide-complete-ltr .6s ease-out 0s 1!important}.foreground-closing.ngx-progress-bar-rtl[_ngcontent-%COMP%]:before{animation:_ngcontent-%COMP%_progressBar-slide-complete-rtl 1s ease-out 0s 1;transform:translateZ(0)}.fast-closing.ngx-progress-bar-rtl[_ngcontent-%COMP%]:before{animation:_ngcontent-%COMP%_progressBar-slide-complete-rtl .6s ease-out 0s 1!important}@keyframes _ngcontent-%COMP%_progressBar-slide-ltr{0%{transform:translate3d(-100%,0,0)}to{transform:translate3d(-5%,0,0)}}@keyframes _ngcontent-%COMP%_progressBar-slide-rtl{0%{transform:translate3d(100%,0,0)}to{transform:translate3d(5%,0,0)}}@keyframes _ngcontent-%COMP%_progressBar-slide-complete-ltr{0%{transform:translate3d(-75%,0,0)}50%{transform:translateZ(0)}}@keyframes _ngcontent-%COMP%_progressBar-slide-complete-rtl{0%{transform:translate3d(75%,0,0)}50%{transform:translateZ(0)}}.ngx-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;z-index:99998!important;background-color:#282828cc;cursor:progress;display:none}.ngx-overlay.loading-foreground[_ngcontent-%COMP%], .ngx-overlay.foreground-closing[_ngcontent-%COMP%]{display:block}.ngx-overlay.foreground-closing[_ngcontent-%COMP%]{opacity:0!important;transition:opacity .5s ease-out .5s}.ngx-overlay.fast-closing[_ngcontent-%COMP%]{transition:opacity .3s ease-out .3s!important}.ngx-overlay[_ngcontent-%COMP%] > .ngx-foreground-spinner[_ngcontent-%COMP%]{position:fixed;width:60px;height:60px;margin:0;color:#00acc1}.ngx-overlay[_ngcontent-%COMP%] > .ngx-loading-logo[_ngcontent-%COMP%]{position:fixed;margin:0;width:120px;height:120px}.ngx-overlay[_ngcontent-%COMP%] > .ngx-loading-text[_ngcontent-%COMP%]{position:fixed;margin:0;font-family:sans-serif;font-weight:400;font-size:1.2em;color:#fff}.ngx-background-spinner[_ngcontent-%COMP%]{position:fixed;z-index:99997!important;width:60px;height:60px;margin:0;color:#00acc1;opacity:.6;display:none}.ngx-background-spinner.loading-background[_ngcontent-%COMP%], .ngx-background-spinner.background-closing[_ngcontent-%COMP%]{display:block}.ngx-background-spinner.background-closing[_ngcontent-%COMP%]{opacity:0!important;transition:opacity .7s ease-out}.ngx-background-spinner.fast-closing[_ngcontent-%COMP%]{transition:opacity .4s ease-out!important}.ngx-position-absolute[_ngcontent-%COMP%]{position:absolute!important}.ngx-position-absolute[_ngcontent-%COMP%] > .ngx-foreground-spinner[_ngcontent-%COMP%], .ngx-position-absolute[_ngcontent-%COMP%] > .ngx-loading-logo[_ngcontent-%COMP%], .ngx-position-absolute[_ngcontent-%COMP%] > .ngx-loading-text[_ngcontent-%COMP%]{position:absolute!important}.ngx-position-absolute.ngx-progress-bar[_ngcontent-%COMP%]{z-index:99996!important}.ngx-position-absolute.ngx-overlay[_ngcontent-%COMP%]{z-index:99995!important}.ngx-position-absolute.ngx-background-spinner[_ngcontent-%COMP%]{z-index:99994!important}.ngx-position-absolute[_ngcontent-%COMP%]   .sk-square-jelly-box[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(1){z-index:99994!important}.top-left[_ngcontent-%COMP%]{top:30px;left:30px}.top-center[_ngcontent-%COMP%]{top:30px;left:50%;transform:translate(-50%)}.top-right[_ngcontent-%COMP%]{top:30px;right:30px}.center-left[_ngcontent-%COMP%]{top:50%;left:30px;transform:translateY(-50%)}.center-center[_ngcontent-%COMP%]{top:50%;left:50%;transform:translate(-50%,-50%)}.center-right[_ngcontent-%COMP%]{top:50%;right:30px;transform:translateY(-50%)}.bottom-left[_ngcontent-%COMP%]{bottom:30px;left:30px}.bottom-center[_ngcontent-%COMP%]{bottom:30px;left:50%;transform:translate(-50%)}.bottom-right[_ngcontent-%COMP%]{bottom:30px;right:30px}.sk-ball-scale-multiple[_ngcontent-%COMP%], .sk-ball-scale-multiple[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{position:relative;box-sizing:border-box}.sk-ball-scale-multiple[_ngcontent-%COMP%]{width:100%;height:100%;font-size:0}.sk-ball-scale-multiple[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:inline-block;float:none;background-color:currentColor;border:0 solid currentColor}.sk-ball-scale-multiple[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;border-radius:100%;opacity:0;animation:_ngcontent-%COMP%_ball-scale-multiple 1s 0s linear infinite}.sk-ball-scale-multiple[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2){animation-delay:.2s}.sk-ball-scale-multiple[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(3){animation-delay:.4s}@keyframes _ngcontent-%COMP%_ball-scale-multiple{0%{opacity:0;transform:scale(0)}5%{opacity:.75}to{opacity:0;transform:scale(1)}}.sk-ball-spin[_ngcontent-%COMP%], .sk-ball-spin[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{position:relative;box-sizing:border-box}.sk-ball-spin[_ngcontent-%COMP%]{width:100%;height:100%;font-size:0}.sk-ball-spin[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:inline-block;float:none;background-color:currentColor;border:0 solid currentColor}.sk-ball-spin[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;width:25%;height:25%;margin-top:-12.5%;margin-left:-12.5%;border-radius:100%;animation:_ngcontent-%COMP%_ball-spin-clockwise 1s infinite ease-in-out}.sk-ball-spin[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(1){top:5%;left:50%;animation-delay:-1.125s}.sk-ball-spin[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2){top:18.1801948466%;left:81.8198051534%;animation-delay:-1.25s}.sk-ball-spin[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(3){top:50%;left:95%;animation-delay:-1.375s}.sk-ball-spin[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(4){top:81.8198051534%;left:81.8198051534%;animation-delay:-1.5s}.sk-ball-spin[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(5){top:94.9999999966%;left:50.0000000005%;animation-delay:-1.625s}.sk-ball-spin[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(6){top:81.8198046966%;left:18.1801949248%;animation-delay:-1.75s}.sk-ball-spin[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(7){top:49.9999750815%;left:5.0000051215%;animation-delay:-1.875s}.sk-ball-spin[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(8){top:18.179464974%;left:18.1803700518%;animation-delay:-2s}@keyframes _ngcontent-%COMP%_ball-spin{0%,to{opacity:1;transform:scale(1)}20%{opacity:1}80%{opacity:0;transform:scale(0)}}.sk-ball-spin-clockwise[_ngcontent-%COMP%], .sk-ball-spin-clockwise[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{position:relative;box-sizing:border-box}.sk-ball-spin-clockwise[_ngcontent-%COMP%]{width:100%;height:100%;font-size:0}.sk-ball-spin-clockwise[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:inline-block;float:none;background-color:currentColor;border:0 solid currentColor}.sk-ball-spin-clockwise[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;width:25%;height:25%;margin-top:-12.5%;margin-left:-12.5%;border-radius:100%;animation:_ngcontent-%COMP%_ball-spin-clockwise 1s infinite ease-in-out}.sk-ball-spin-clockwise[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(1){top:5%;left:50%;animation-delay:-.875s}.sk-ball-spin-clockwise[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2){top:18.1801948466%;left:81.8198051534%;animation-delay:-.75s}.sk-ball-spin-clockwise[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(3){top:50%;left:95%;animation-delay:-.625s}.sk-ball-spin-clockwise[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(4){top:81.8198051534%;left:81.8198051534%;animation-delay:-.5s}.sk-ball-spin-clockwise[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(5){top:94.9999999966%;left:50.0000000005%;animation-delay:-.375s}.sk-ball-spin-clockwise[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(6){top:81.8198046966%;left:18.1801949248%;animation-delay:-.25s}.sk-ball-spin-clockwise[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(7){top:49.9999750815%;left:5.0000051215%;animation-delay:-.125s}.sk-ball-spin-clockwise[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(8){top:18.179464974%;left:18.1803700518%;animation-delay:0s}@keyframes _ngcontent-%COMP%_ball-spin-clockwise{0%,to{opacity:1;transform:scale(1)}20%{opacity:1}80%{opacity:0;transform:scale(0)}}.sk-ball-spin-clockwise-fade-rotating[_ngcontent-%COMP%], .sk-ball-spin-clockwise-fade-rotating[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{position:relative;box-sizing:border-box}.sk-ball-spin-clockwise-fade-rotating[_ngcontent-%COMP%]{font-size:0;width:100%;height:100%;animation:_ngcontent-%COMP%_ball-spin-clockwise-fade-rotating-rotate 6s infinite linear}.sk-ball-spin-clockwise-fade-rotating[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:inline-block;float:none;background-color:currentColor;border:0 solid currentColor}.sk-ball-spin-clockwise-fade-rotating[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;width:25%;height:25%;margin-top:-12.5%;margin-left:-12.5%;border-radius:100%;animation:_ngcontent-%COMP%_ball-spin-clockwise-fade-rotating 1s infinite linear}.sk-ball-spin-clockwise-fade-rotating[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(1){top:5%;left:50%;animation-delay:-.875s}.sk-ball-spin-clockwise-fade-rotating[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2){top:18.1801948466%;left:81.8198051534%;animation-delay:-.75s}.sk-ball-spin-clockwise-fade-rotating[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(3){top:50%;left:95%;animation-delay:-.625s}.sk-ball-spin-clockwise-fade-rotating[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(4){top:81.8198051534%;left:81.8198051534%;animation-delay:-.5s}.sk-ball-spin-clockwise-fade-rotating[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(5){top:94.9999999966%;left:50.0000000005%;animation-delay:-.375s}.sk-ball-spin-clockwise-fade-rotating[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(6){top:81.8198046966%;left:18.1801949248%;animation-delay:-.25s}.sk-ball-spin-clockwise-fade-rotating[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(7){top:49.9999750815%;left:5.0000051215%;animation-delay:-.125s}.sk-ball-spin-clockwise-fade-rotating[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(8){top:18.179464974%;left:18.1803700518%;animation-delay:0s}@keyframes _ngcontent-%COMP%_ball-spin-clockwise-fade-rotating-rotate{to{transform:rotate(-360deg)}}@keyframes _ngcontent-%COMP%_ball-spin-clockwise-fade-rotating{50%{opacity:.25;transform:scale(.5)}to{opacity:1;transform:scale(1)}}.sk-ball-spin-fade-rotating[_ngcontent-%COMP%], .sk-ball-spin-fade-rotating[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{position:relative;box-sizing:border-box}.sk-ball-spin-fade-rotating[_ngcontent-%COMP%]{width:100%;height:100%;font-size:0;animation:_ngcontent-%COMP%_ball-spin-fade-rotate 6s infinite linear}.sk-ball-spin-fade-rotating[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:inline-block;float:none;background-color:currentColor;border:0 solid currentColor}.sk-ball-spin-fade-rotating[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;width:25%;height:25%;margin-top:-12.5%;margin-left:-12.5%;border-radius:100%;animation:_ngcontent-%COMP%_ball-spin-fade 1s infinite linear}.sk-ball-spin-fade-rotating[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(1){top:5%;left:50%;animation-delay:-1.125s}.sk-ball-spin-fade-rotating[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2){top:18.1801948466%;left:81.8198051534%;animation-delay:-1.25s}.sk-ball-spin-fade-rotating[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(3){top:50%;left:95%;animation-delay:-1.375s}.sk-ball-spin-fade-rotating[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(4){top:81.8198051534%;left:81.8198051534%;animation-delay:-1.5s}.sk-ball-spin-fade-rotating[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(5){top:94.9999999966%;left:50.0000000005%;animation-delay:-1.625s}.sk-ball-spin-fade-rotating[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(6){top:81.8198046966%;left:18.1801949248%;animation-delay:-1.75s}.sk-ball-spin-fade-rotating[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(7){top:49.9999750815%;left:5.0000051215%;animation-delay:-1.875s}.sk-ball-spin-fade-rotating[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(8){top:18.179464974%;left:18.1803700518%;animation-delay:-2s}@keyframes _ngcontent-%COMP%_ball-spin-fade-rotate{to{transform:rotate(360deg)}}@keyframes _ngcontent-%COMP%_ball-spin-fade{0%,to{opacity:1;transform:scale(1)}50%{opacity:.25;transform:scale(.5)}}.sk-chasing-dots[_ngcontent-%COMP%]{margin:auto;width:100%;height:100%;position:absolute;text-align:center;animation:_ngcontent-%COMP%_sk-chasingDots-rotate 2s infinite linear}.sk-chasing-dots[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{width:60%;height:60%;display:inline-block;position:absolute;top:0;background-color:currentColor;border-radius:100%;animation:_ngcontent-%COMP%_sk-chasingDots-bounce 2s infinite ease-in-out}.sk-chasing-dots[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2){top:auto;bottom:0;animation-delay:-1s}@keyframes _ngcontent-%COMP%_sk-chasingDots-rotate{to{transform:rotate(360deg)}}@keyframes _ngcontent-%COMP%_sk-chasingDots-bounce{0%,to{transform:scale(0)}50%{transform:scale(1)}}.sk-circle[_ngcontent-%COMP%]{margin:auto;width:100%;height:100%;position:relative}.sk-circle[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{width:100%;height:100%;position:absolute;left:0;top:0}.sk-circle[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:before{content:"";display:block;margin:0 auto;width:15%;height:15%;background-color:currentColor;border-radius:100%;animation:_ngcontent-%COMP%_sk-circle-bounceDelay 1.2s infinite ease-in-out both}.sk-circle[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2){transform:rotate(30deg)}.sk-circle[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(3){transform:rotate(60deg)}.sk-circle[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(4){transform:rotate(90deg)}.sk-circle[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(5){transform:rotate(120deg)}.sk-circle[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(6){transform:rotate(150deg)}.sk-circle[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(7){transform:rotate(180deg)}.sk-circle[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(8){transform:rotate(210deg)}.sk-circle[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(9){transform:rotate(240deg)}.sk-circle[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(10){transform:rotate(270deg)}.sk-circle[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(11){transform:rotate(300deg)}.sk-circle[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(12){transform:rotate(330deg)}.sk-circle[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2):before{animation-delay:-1.1s}.sk-circle[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(3):before{animation-delay:-1s}.sk-circle[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(4):before{animation-delay:-.9s}.sk-circle[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(5):before{animation-delay:-.8s}.sk-circle[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(6):before{animation-delay:-.7s}.sk-circle[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(7):before{animation-delay:-.6s}.sk-circle[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(8):before{animation-delay:-.5s}.sk-circle[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(9):before{animation-delay:-.4s}.sk-circle[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(10):before{animation-delay:-.3s}.sk-circle[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(11):before{animation-delay:-.2s}.sk-circle[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(12):before{animation-delay:-.1s}@keyframes _ngcontent-%COMP%_sk-circle-bounceDelay{0%,80%,to{transform:scale(0)}40%{transform:scale(1)}}.sk-cube-grid[_ngcontent-%COMP%]{width:100%;height:100%;margin:auto}.sk-cube-grid[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{width:33%;height:33%;background-color:currentColor;float:left;animation:_ngcontent-%COMP%_sk-cubeGrid-scaleDelay 1.3s infinite ease-in-out}.sk-cube-grid[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(1){animation-delay:.2s}.sk-cube-grid[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2){animation-delay:.3s}.sk-cube-grid[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(3){animation-delay:.4s}.sk-cube-grid[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(4){animation-delay:.1s}.sk-cube-grid[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(5){animation-delay:.2s}.sk-cube-grid[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(6){animation-delay:.3s}.sk-cube-grid[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(7){animation-delay:0s}.sk-cube-grid[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(8){animation-delay:.1s}.sk-cube-grid[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(9){animation-delay:.2s}@keyframes _ngcontent-%COMP%_sk-cubeGrid-scaleDelay{0%,70%,to{transform:scaleZ(1)}35%{transform:scale3D(0,0,1)}}.sk-double-bounce[_ngcontent-%COMP%]{width:100%;height:100%;position:relative;margin:auto}.sk-double-bounce[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{width:100%;height:100%;border-radius:50%;background-color:currentColor;opacity:.6;position:absolute;top:0;left:0;animation:_ngcontent-%COMP%_sk-doubleBounce-bounce 2s infinite ease-in-out}.sk-double-bounce[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2){animation-delay:-1s}@keyframes _ngcontent-%COMP%_sk-doubleBounce-bounce{0%,to{transform:scale(0)}50%{transform:scale(1)}}.sk-fading-circle[_ngcontent-%COMP%]{margin:auto;width:100%;height:100%;position:relative}.sk-fading-circle[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{width:100%;height:100%;position:absolute;left:0;top:0}.sk-fading-circle[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:before{content:"";display:block;margin:0 auto;width:15%;height:15%;background-color:currentColor;border-radius:100%;animation:_ngcontent-%COMP%_sk-fadingCircle-FadeDelay 1.2s infinite ease-in-out both}.sk-fading-circle[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2){transform:rotate(30deg)}.sk-fading-circle[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(3){transform:rotate(60deg)}.sk-fading-circle[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(4){transform:rotate(90deg)}.sk-fading-circle[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(5){transform:rotate(120deg)}.sk-fading-circle[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(6){transform:rotate(150deg)}.sk-fading-circle[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(7){transform:rotate(180deg)}.sk-fading-circle[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(8){transform:rotate(210deg)}.sk-fading-circle[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(9){transform:rotate(240deg)}.sk-fading-circle[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(10){transform:rotate(270deg)}.sk-fading-circle[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(11){transform:rotate(300deg)}.sk-fading-circle[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(12){transform:rotate(330deg)}.sk-fading-circle[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2):before{animation-delay:-1.1s}.sk-fading-circle[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(3):before{animation-delay:-1s}.sk-fading-circle[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(4):before{animation-delay:-.9s}.sk-fading-circle[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(5):before{animation-delay:-.8s}.sk-fading-circle[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(6):before{animation-delay:-.7s}.sk-fading-circle[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(7):before{animation-delay:-.6s}.sk-fading-circle[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(8):before{animation-delay:-.5s}.sk-fading-circle[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(9):before{animation-delay:-.4s}.sk-fading-circle[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(10):before{animation-delay:-.3s}.sk-fading-circle[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(11):before{animation-delay:-.2s}.sk-fading-circle[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(12):before{animation-delay:-.1s}@keyframes _ngcontent-%COMP%_sk-fadingCircle-FadeDelay{0%,39%,to{opacity:0}40%{opacity:1}}.sk-folding-cube[_ngcontent-%COMP%]{margin:auto;width:100%;height:100%;position:relative;transform:rotate(45deg)}.sk-folding-cube[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{float:left;width:50%;height:50%;position:relative;transform:scale(1.1)}.sk-folding-cube[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;width:100%;height:100%;background-color:currentColor;animation:_ngcontent-%COMP%_sk-foldingCube-angle 2.4s infinite linear both;transform-origin:100% 100%}.sk-folding-cube[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2){transform:scale(1.1) rotate(90deg)}.sk-folding-cube[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(3){transform:scale(1.1) rotate(270deg)}.sk-folding-cube[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(4){transform:scale(1.1) rotate(180deg)}.sk-folding-cube[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2):before{animation-delay:.3s}.sk-folding-cube[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(3):before{animation-delay:.9s}.sk-folding-cube[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(4):before{animation-delay:.6s}@keyframes _ngcontent-%COMP%_sk-foldingCube-angle{0%,10%{transform:perspective(140px) rotateX(-180deg);opacity:0}25%,75%{transform:perspective(140px) rotateX(0);opacity:1}90%,to{transform:perspective(140px) rotateY(180deg);opacity:0}}.sk-pulse[_ngcontent-%COMP%]{width:100%;height:100%;margin:auto}.sk-pulse[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{width:100%;height:100%;background-color:currentColor;border-radius:100%;animation:_ngcontent-%COMP%_sk-pulse-scaleOut 1s infinite ease-in-out}@keyframes _ngcontent-%COMP%_sk-pulse-scaleOut{0%{transform:scale(0)}to{transform:scale(1);opacity:0}}.sk-rectangle-bounce[_ngcontent-%COMP%]{margin:auto;width:100%;height:100%;text-align:center;font-size:0}.sk-rectangle-bounce[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{background-color:currentColor;height:100%;width:10%;margin:0 5%;display:inline-block;animation:_ngcontent-%COMP%_sk-rectangleBounce-stretchDelay 1.2s infinite ease-in-out}.sk-rectangle-bounce[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2){animation-delay:-1.1s}.sk-rectangle-bounce[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(3){animation-delay:-1s}.sk-rectangle-bounce[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(4){animation-delay:-.9s}.sk-rectangle-bounce[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(5){animation-delay:-.8s}@keyframes _ngcontent-%COMP%_sk-rectangleBounce-stretchDelay{0%,40%,to{transform:scaleY(.4)}20%{transform:scaleY(1)}}.sk-rectangle-bounce-party[_ngcontent-%COMP%], .sk-rectangle-bounce-party[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{position:relative;box-sizing:border-box}.sk-rectangle-bounce-party[_ngcontent-%COMP%]{margin:auto;width:100%;height:100%;text-align:center;font-size:0}.sk-rectangle-bounce-party[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:inline-block;float:none;background-color:currentColor;border:0 solid currentColor}.sk-rectangle-bounce-party[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{width:10%;height:100%;margin:0 5%;border-radius:0;animation-name:_ngcontent-%COMP%_rectangle-bounce-party;animation-iteration-count:infinite}.sk-rectangle-bounce-party[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(1){animation-duration:.43s;animation-delay:-.23s}.sk-rectangle-bounce-party[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2){animation-duration:.62s;animation-delay:-.32s}.sk-rectangle-bounce-party[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(3){animation-duration:.43s;animation-delay:-.44s}.sk-rectangle-bounce-party[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(4){animation-duration:.8s;animation-delay:-.31s}.sk-rectangle-bounce-party[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(5){animation-duration:.74s;animation-delay:-.24s}@keyframes _ngcontent-%COMP%_rectangle-bounce-party{0%{transform:scaleY(1)}50%{transform:scaleY(.4)}to{transform:scaleY(1)}}.sk-rectangle-bounce-pulse-out[_ngcontent-%COMP%], .sk-rectangle-bounce-pulse-out[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{position:relative;box-sizing:border-box}.sk-rectangle-bounce-pulse-out[_ngcontent-%COMP%]{margin:auto;width:100%;height:100%;text-align:center;font-size:0}.sk-rectangle-bounce-pulse-out[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:inline-block;float:none;background-color:currentColor;border:0 solid currentColor}.sk-rectangle-bounce-pulse-out[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{width:10%;height:100%;margin:0 5%;border-radius:0;animation:_ngcontent-%COMP%_rectangle-bounce-pulse-out .9s infinite cubic-bezier(.85,.25,.37,.85)}.sk-rectangle-bounce-pulse-out[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(3){animation-delay:-.9s}.sk-rectangle-bounce-pulse-out[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2), .sk-rectangle-bounce-pulse-out[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(4){animation-delay:-.7s}.sk-rectangle-bounce-pulse-out[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(1), .sk-rectangle-bounce-pulse-out[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(5){animation-delay:-.5s}@keyframes _ngcontent-%COMP%_rectangle-bounce-pulse-out{0%{transform:scaley(1)}50%{transform:scaley(.4)}to{transform:scaley(1)}}.sk-rectangle-bounce-pulse-out-rapid[_ngcontent-%COMP%], .sk-rectangle-bounce-pulse-out-rapid[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{position:relative;box-sizing:border-box}.sk-rectangle-bounce-pulse-out-rapid[_ngcontent-%COMP%]{margin:auto;width:100%;height:100%;text-align:center;font-size:0}.sk-rectangle-bounce-pulse-out-rapid[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:inline-block;float:none;background-color:currentColor;border:0 solid currentColor}.sk-rectangle-bounce-pulse-out-rapid[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{width:10%;height:100%;margin:0 5%;border-radius:0;animation:_ngcontent-%COMP%_rectangle-bounce-pulse-out-rapid .9s infinite cubic-bezier(.11,.49,.38,.78)}.sk-rectangle-bounce-pulse-out-rapid[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(3){animation-delay:-.9s}.sk-rectangle-bounce-pulse-out-rapid[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2), .sk-rectangle-bounce-pulse-out-rapid[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(4){animation-delay:-.65s}.sk-rectangle-bounce-pulse-out-rapid[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(1), .sk-rectangle-bounce-pulse-out-rapid[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(5){animation-delay:-.4s}@keyframes _ngcontent-%COMP%_rectangle-bounce-pulse-out-rapid{0%{transform:scaley(1)}80%{transform:scaley(.4)}90%{transform:scaley(1)}}.sk-rotating-plane[_ngcontent-%COMP%]{width:100%;height:100%;text-align:center;margin:auto}.sk-rotating-plane[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{width:100%;height:100%;background-color:currentColor;animation:_ngcontent-%COMP%_sk-rotatePlane 1.2s infinite ease-in-out}@keyframes _ngcontent-%COMP%_sk-rotatePlane{0%{transform:perspective(120px) rotateX(0) rotateY(0)}50%{transform:perspective(120px) rotateX(-180.1deg) rotateY(0)}to{transform:perspective(120px) rotateX(-180deg) rotateY(-179.9deg)}}.sk-square-jelly-box[_ngcontent-%COMP%], .sk-square-jelly-box[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{position:relative;box-sizing:border-box}.sk-square-jelly-box[_ngcontent-%COMP%]{width:100%;height:100%;font-size:0}.sk-square-jelly-box[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:inline-block;float:none;background-color:currentColor;border:0 solid currentColor}.sk-square-jelly-box[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(1), .sk-square-jelly-box[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2){position:absolute;left:0;width:100%}.sk-square-jelly-box[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(1){top:-25%;z-index:99997;height:100%;border-radius:10%;animation:_ngcontent-%COMP%_square-jelly-box-animate .6s -.1s linear infinite}.sk-square-jelly-box[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2){bottom:-9%;height:10%;background:#000;border-radius:50%;opacity:.2;animation:_ngcontent-%COMP%_square-jelly-box-shadow .6s -.1s linear infinite}@keyframes _ngcontent-%COMP%_square-jelly-box-animate{17%{border-bottom-right-radius:10%}25%{transform:translateY(25%) rotate(22.5deg)}50%{border-bottom-right-radius:100%;transform:translateY(50%) scaleY(.9) rotate(45deg)}75%{transform:translateY(25%) rotate(67.5deg)}to{transform:translateY(0) rotate(90deg)}}@keyframes _ngcontent-%COMP%_square-jelly-box-shadow{50%{transform:scaleX(1.25)}}.sk-square-loader[_ngcontent-%COMP%], .sk-square-loader[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{position:relative;box-sizing:border-box}.sk-square-loader[_ngcontent-%COMP%]{font-size:0;width:100%;height:100%}.sk-square-loader[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:inline-block;float:none;background-color:currentColor;border:0 solid currentColor}.sk-square-loader[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{width:100%;height:100%;background:transparent;border-width:3px;border-radius:0;animation:_ngcontent-%COMP%_square-loader 2s infinite ease}.sk-square-loader[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:after{display:inline-block;width:100%;vertical-align:top;content:"";background-color:currentColor;animation:_ngcontent-%COMP%_square-loader-inner 2s infinite ease-in}@keyframes _ngcontent-%COMP%_square-loader{0%{transform:rotate(0)}25%{transform:rotate(180deg)}50%{transform:rotate(180deg)}75%{transform:rotate(360deg)}to{transform:rotate(360deg)}}@keyframes _ngcontent-%COMP%_square-loader-inner{0%{height:0}25%{height:0}50%{height:100%}75%{height:100%}to{height:0}}.sk-three-bounce[_ngcontent-%COMP%]{margin:auto;width:100%;height:100%;text-align:center}.sk-three-bounce[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{margin-top:35%;width:30%;height:30%;background-color:currentColor;border-radius:100%;display:inline-block;animation:_ngcontent-%COMP%_sk-threeBounce-bounceDelay 1.4s infinite ease-in-out both}.bottom-center[_ngcontent-%COMP%] > .sk-three-bounce[_ngcontent-%COMP%] > div[_ngcontent-%COMP%], .bottom-left[_ngcontent-%COMP%] > .sk-three-bounce[_ngcontent-%COMP%] > div[_ngcontent-%COMP%], .bottom-right[_ngcontent-%COMP%] > .sk-three-bounce[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{margin-top:70%!important}.top-center[_ngcontent-%COMP%] > .sk-three-bounce[_ngcontent-%COMP%] > div[_ngcontent-%COMP%], .top-left[_ngcontent-%COMP%] > .sk-three-bounce[_ngcontent-%COMP%] > div[_ngcontent-%COMP%], .top-right[_ngcontent-%COMP%] > .sk-three-bounce[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{margin-top:0!important}.sk-three-bounce[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(1){animation-delay:-.32s}.sk-three-bounce[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2){animation-delay:-.16s}@keyframes _ngcontent-%COMP%_sk-threeBounce-bounceDelay{0%,80%,to{transform:scale(0)}40%{transform:scale(1)}}.sk-three-strings[_ngcontent-%COMP%]{width:100%;height:100%}.sk-three-strings[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{position:absolute;box-sizing:border-box;width:100%;height:100%;border-radius:50%}.sk-three-strings[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(1){left:0%;top:0%;animation:_ngcontent-%COMP%_sk-threeStrings-rotateOne 1s linear infinite;border-bottom:3px solid currentColor}.sk-three-strings[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2){right:0%;top:0%;animation:_ngcontent-%COMP%_sk-threeStrings-rotateTwo 1s linear infinite;border-right:3px solid currentColor}.sk-three-strings[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(3){right:0%;bottom:0%;animation:_ngcontent-%COMP%_sk-threeStrings-rotateThree 1s linear infinite;border-top:3px solid currentColor}@keyframes _ngcontent-%COMP%_sk-threeStrings-rotateOne{0%{transform:rotateX(35deg) rotateY(-45deg) rotate(0)}to{transform:rotateX(35deg) rotateY(-45deg) rotate(360deg)}}@keyframes _ngcontent-%COMP%_sk-threeStrings-rotateTwo{0%{transform:rotateX(50deg) rotateY(10deg) rotate(0)}to{transform:rotateX(50deg) rotateY(10deg) rotate(360deg)}}@keyframes _ngcontent-%COMP%_sk-threeStrings-rotateThree{0%{transform:rotateX(35deg) rotateY(55deg) rotate(0)}to{transform:rotateX(35deg) rotateY(55deg) rotate(360deg)}}.sk-wandering-cubes[_ngcontent-%COMP%]{margin:auto;width:100%;height:100%;position:relative;text-align:center}.sk-wandering-cubes[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{background-color:currentColor;width:25%;height:25%;position:absolute;top:0;left:0;animation:_ngcontent-%COMP%_sk-wanderingCubes-cubeMove 1.8s infinite ease-in-out}.sk-wandering-cubes[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2){animation-delay:-.9s}@keyframes _ngcontent-%COMP%_sk-wanderingCubes-cubeMove{25%{transform:translate(290%) rotate(-90deg) scale(.5)}50%{transform:translate(290%) translateY(290%) rotate(-179deg)}50.1%{transform:translate(290%) translateY(290%) rotate(-180deg)}75%{transform:translate(0) translateY(290%) rotate(-270deg) scale(.5)}to{transform:rotate(-360deg)}}'],changeDetection:0}),n})(),Qie=(()=>{class n{static forRoot(t){return{ngModule:n,providers:[{provide:m2,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=At({type:n}),n.\u0275inj=St({imports:[[ds]]}),n})();new he("ngxUiLoaderRouterCustom.config");const _2=new he("ngxUiLoaderHttpCustom.config");let tre=(()=>{class n{constructor(t,i){this.loader=i,this.count=0,this.config={loaderId:this.loader.getDefaultConfig().masterLoaderId,showForeground:!1},this.exclude=function Jie(n){let e,t;return n&&(n.exclude&&(e=n.exclude.map(i=>i.toLowerCase())),n.excludeRegexp&&(t=n.excludeRegexp.map(i=>new RegExp(i,"i")))),{strs:e,regExps:t}}(t),t&&(this.config={...this.config,...t})}intercept(t,i){return function ere(n,e,t){return!!(e&&-1!==e.findIndex(i=>n.toLowerCase().startsWith(i))||t&&-1!==t.findIndex(i=>i.test(n)))}(t.url,this.exclude.strs,this.exclude.regExps)?i.handle(t):(this.count++,this.config.showForeground?this.loader.startLoader(this.config.loaderId,a_,this.config):this.loader.startBackgroundLoader(this.config.loaderId,a_,this.config),i.handle(t).pipe($a(()=>{this.count--,0===this.count&&(this.config.showForeground?this.loader.stopLoader(this.config.loaderId,a_):this.loader.stopBackgroundLoader(this.config.loaderId,a_))})))}}return n.\u0275fac=function(t){return new(t||n)(J(_2,8),J(g2))},n.\u0275prov=ye({token:n,factory:n.\u0275fac}),n})(),nre=(()=>{class n{constructor(t){if(t)throw new Error("[ngx-ui-loader] - NgxUiLoaderHttpModule is already loaded. It should be imported in the root `AppModule` only!")}static forRoot(t){return{ngModule:n,providers:[{provide:_2,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)(J(n,12))},n.\u0275mod=At({type:n}),n.\u0275inj=St({providers:[{provide:nP,useClass:tre,multi:!0}]}),n})();const ire=function(){return["/auth/login"]};function rre(n,e){1&n&&(M(0,"a",11),O(1,"Login"),w()),2&n&&Q("routerLink",Ln(1,ire))}const ore=function(){return["/auth/register"]};function sre(n,e){1&n&&(M(0,"a",11),O(1,"Register"),w()),2&n&&Q("routerLink",Ln(1,ore))}const are=function(n){return["/users/",n]},lre=function(){return["/profile/dashboard"]},cre=function(){return["/profile/edit"]};function dre(n,e){if(1&n){const t=Ni();M(0,"li")(1,"div",15)(2,"button",16)(3,"span",5),O(4,"Open user menu"),w(),Ie(5,"img",17),O(6),Da(),M(7,"svg",18),Ie(8,"path",19),w()(),Aa(),M(9,"div",20)(10,"div",21)(11,"div",22),O(12),w()(),M(13,"ul",23)(14,"li")(15,"a",24),O(16,"View Profile"),w()(),M(17,"li")(18,"a",25),O(19,"Dashboard"),w()(),M(20,"li")(21,"a",26),O(22,"Settings"),w()()(),M(23,"div",27)(24,"a",28),Oe("click",function(){return ni(t),ii(Et().logout())}),O(25,"Sign out"),w()()()()()}if(2&n){const t=Et();B(6),cn(" ",t.authService.currentUser.userName," "),B(6),Yn(t.authService.currentUser.email),B(3),Q("routerLink",Xs(5,are,t.authService.currentUser.id)),B(3),Q("routerLink",Ln(7,lre)),B(3),Q("routerLink",Ln(8,cre))}}const ure=function(){return[""]},hre=function(){return["/clubs"]},fre=function(){return["/races"]},pre=function(){return["/users"]};let mre=(()=>{class n{constructor(t,i,r){this.authService=t,this.toastrService=i,this.router=r}logout(){localStorage.getItem("token")?(this.authService.logout(),this.toastrService.success("Logout successful!")):this.toastrService.warning("You must be logged in.","Logout falied.")}showUserProfile(){let t=this.authService.getUserId();t&&this.router.navigate(["/users/"+t])}hideNavbar(t){t.hide()}}return n.\u0275fac=function(t){return new(t||n)(L(kr),L(ro),L(dn))},n.\u0275cmp=yt({type:n,selectors:[["app-navbar"]],decls:28,vars:11,consts:[["id","navbar",1,"bg-gray"],[1,"max-w-screen-xl","flex","flex-wrap","items-center","justify-between","mx-auto","p-3"],["href","/",1,"flex","items-center"],["src","../../assets/logo.png",1,"self-center","w-48"],["data-collapse-toggle","navbar-default","type","button","aria-controls","navbar-default","aria-expanded","false",1,"inline-flex","items-center","p-2","ml-3","text-sm","rounded-lg","md:hidden","focus:outline-none","focus:ring-2","text-gray-400","hover:bg-gray-700","focus:ring-gray-600"],[1,"sr-only"],["aria-hidden","true","fill","currentColor","viewBox","0 0 20 20","xmlns","http://www.w3.org/2000/svg",1,"w-6","h-6"],["fill-rule","evenodd","d","M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z","clip-rule","evenodd"],["id","navbar-default",1,"hidden","w-full","md:block","md:w-auto"],[1,"font-medium","flex","flex-col","mt-2","md:p-0","md:flex-row","md:space-x-8","md:mt-0","md:border-0"],[1,"block","py-2","pl-3","pr-4","rounded","md:border-0","text-white","hover:bg-gray-700",3,"routerLink"],["routerLinkActive","bg-gray-800",1,"block","py-2","pl-3","pr-4","rounded","md:border-0","text-white","hover:bg-gray-700",3,"routerLink"],["routerLinkActive","bg-gray-800",1,"block","py-2","pl-3","pr-3","rounded","md:border-0","text-white","hover:bg-gray-700",3,"routerLink"],["routerLinkActive","bg-gray-800","class","block py-2 pl-3 pr-4 rounded md:border-0 text-white hover:bg-gray-700",3,"routerLink",4,"ngIf"],[4,"ngIf"],[1,"block","z-50","py-2","pl-3","pr-4","rounded","md:border-0","text-white","hover:bg-gray-700"],["id","dropdownAvatarNameButton","data-dropdown-toggle","dropdownAvatarName","type","button",1,"flex","items-center","font-medium","text-white"],["src","https://img.freepik.com/free-vector/businessman-character-avatar-isolated_24877-60111.jpg?w=2000","alt","user photo",1,"w-8","h-8","mr-2","rounded-full"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 10 6",1,"w-2.5","h-2.5","ml-2.5"],["stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","m1 1 4 4 4-4"],["id","dropdownAvatarName",1,"z-50","hidden","divide-y","rounded-lg","shadow","w-44","bg-gray-700","divide-gray-600"],[1,"px-4","py-3","text-sm","text-white"],[1,"truncate"],["aria-labelledby","dropdownInformdropdownAvatarNameButtonationButton",1,"py-2","text-sm","text-gray-200"],["routerLinkActive","router-link-active",1,"block","px-4","py-2","cursor-pointer","hover:bg-gray-600","hover:text-white",3,"routerLink"],["routerLinkActive","router-link-active",1,"block","px-4","py-2","hover:bg-gray-600","hover:text-white",3,"routerLink"],[1,"block","px-4","py-2","hover:bg-gray-600","hover:text-white",3,"routerLink"],[1,"py-2"],[1,"block","px-4","py-2","cursor-pointer","text-sm","hover:bg-gray-600","text-gray-200","hover:text-white",3,"click"]],template:function(t,i){1&t&&(M(0,"nav",0)(1,"div",1)(2,"a",2),Ie(3,"img",3),w(),M(4,"button",4)(5,"span",5),O(6,"Open main menu"),w(),Da(),M(7,"svg",6),Ie(8,"path",7),w()(),Aa(),M(9,"div",8)(10,"ul",9)(11,"li")(12,"a",10),O(13,"Home"),w()(),M(14,"li")(15,"a",11),O(16,"Clubs"),w()(),M(17,"li")(18,"a",11),O(19,"Races"),w()(),M(20,"li")(21,"a",12),O(22,"People"),w()(),M(23,"li"),rt(24,rre,2,2,"a",13),w(),M(25,"li"),rt(26,sre,2,2,"a",13),w(),rt(27,dre,26,9,"li",14),w()()()()),2&t&&(B(12),Q("routerLink",Ln(7,ure)),B(3),Q("routerLink",Ln(8,hre)),B(3),Q("routerLink",Ln(9,fre)),B(3),Q("routerLink",Ln(10,pre)),B(3),Q("ngIf",!i.authService.loggedIn()),B(2),Q("ngIf",!i.authService.loggedIn()),B(1),Q("ngIf",i.authService.loggedIn()))},dependencies:[No,er,no],styles:["nav[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInAnimation ease .9s;animation-iteration-count:1;animation-fill-mode:forwards}@keyframes _ngcontent-%COMP%_fadeInAnimation{0%{opacity:0}to{opacity:1}}"]}),n})();const gre=function(){return["/users"]},_re=function(){return["/clubs"]},vre=function(){return["/races"]};let bre=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=yt({type:n,selectors:[["app-footer"]],decls:71,vars:6,consts:[[1,"bg-gray-900"],[1,"mx-auto","w-full","max-w-screen-xl","p-4","py-6","lg:py-8"],[1,"md:flex","md:justify-between"],[1,"mb-6","md:mb-0"],["href","/",1,"flex","items-center"],["src","../../assets/logo.png","alt","RunGroops Logo",1,"h-8","mr-3"],[1,"grid","grid-cols-2","gap-8","sm:gap-6","sm:grid-cols-3"],[1,"mb-6","text-sm","font-semibold","uppercase","text-white"],[1,"text-gray-400","font-medium"],[1,"mb-4"],["routerLinkActive","router-link-active",1,"hover:text-gray-400","hover:underline",3,"routerLink"],[1,"hover:text-gray-400","hover:underline",3,"routerLink"],["href","#",1,"hover:text-gray-400","hover:underline"],[1,"my-6","sm:mx-auto","border-gray-700","lg:my-8"],[1,"sm:flex","sm:items-center","sm:justify-between"],[1,"text-sm","sm:text-center","text-gray-400"],["href","/",1,"hover:text-gray-400","hover:underline"],[1,"flex","mt-4","md:mt-0","space-x-5","sm:justify-center","sm:mt-0"],["href","#",1,"text-gray-500","hover:text-white"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","fill","currentColor","viewBox","0 0 8 19",1,"w-4","h-4"],["fill-rule","evenodd","d","M6.135 3H8V0H6.135a4.147 4.147 0 0 0-4.142 4.142V6H0v3h2v9.938h3V9h2.021l.592-3H5V3.591A.6.6 0 0 1 5.592 3h.543Z","clip-rule","evenodd"],[1,"sr-only"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","fill","currentColor","viewBox","0 0 21 16",1,"w-4","h-4"],["d","M16.942 1.556a16.3 16.3 0 0 0-4.126-1.3 12.04 12.04 0 0 0-.529 1.1 15.175 15.175 0 0 0-4.573 0 11.585 11.585 0 0 0-.535-1.1 16.274 16.274 0 0 0-4.129 1.3A17.392 17.392 0 0 0 .182 13.218a15.785 15.785 0 0 0 4.963 2.521c.41-.564.773-1.16 1.084-1.785a10.63 10.63 0 0 1-1.706-.83c.143-.106.283-.217.418-.33a11.664 11.664 0 0 0 10.118 0c.137.113.277.224.418.33-.544.328-1.116.606-1.71.832a12.52 12.52 0 0 0 1.084 1.785 16.46 16.46 0 0 0 5.064-2.595 17.286 17.286 0 0 0-2.973-11.59ZM6.678 10.813a1.941 1.941 0 0 1-1.8-2.045 1.93 1.93 0 0 1 1.8-2.047 1.919 1.919 0 0 1 1.8 2.047 1.93 1.93 0 0 1-1.8 2.045Zm6.644 0a1.94 1.94 0 0 1-1.8-2.045 1.93 1.93 0 0 1 1.8-2.047 1.918 1.918 0 0 1 1.8 2.047 1.93 1.93 0 0 1-1.8 2.045Z"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","fill","currentColor","viewBox","0 0 20 17",1,"w-4","h-4"],["fill-rule","evenodd","d","M20 1.892a8.178 8.178 0 0 1-2.355.635 4.074 4.074 0 0 0 1.8-2.235 8.344 8.344 0 0 1-2.605.98A4.13 4.13 0 0 0 13.85 0a4.068 4.068 0 0 0-4.1 4.038 4 4 0 0 0 .105.919A11.705 11.705 0 0 1 1.4.734a4.006 4.006 0 0 0 1.268 5.392 4.165 4.165 0 0 1-1.859-.5v.05A4.057 4.057 0 0 0 4.1 9.635a4.19 4.19 0 0 1-1.856.07 4.108 4.108 0 0 0 3.831 2.807A8.36 8.36 0 0 1 0 14.184 11.732 11.732 0 0 0 6.291 16 11.502 11.502 0 0 0 17.964 4.5c0-.177 0-.35-.012-.523A8.143 8.143 0 0 0 20 1.892Z","clip-rule","evenodd"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","fill","currentColor","viewBox","0 0 20 20",1,"w-4","h-4"],["fill-rule","evenodd","d","M10 .333A9.911 9.911 0 0 0 6.866 19.65c.5.092.678-.215.678-.477 0-.237-.01-1.017-.014-1.845-2.757.6-3.338-1.169-3.338-1.169a2.627 2.627 0 0 0-1.1-1.451c-.9-.615.07-.6.07-.6a2.084 2.084 0 0 1 1.518 1.021 2.11 2.11 0 0 0 2.884.823c.044-.503.268-.973.63-1.325-2.2-.25-4.516-1.1-4.516-4.9A3.832 3.832 0 0 1 4.7 7.068a3.56 3.56 0 0 1 .095-2.623s.832-.266 2.726 1.016a9.409 9.409 0 0 1 4.962 0c1.89-1.282 2.717-1.016 2.717-1.016.366.83.402 1.768.1 2.623a3.827 3.827 0 0 1 1.02 2.659c0 3.807-2.319 4.644-4.525 4.889a2.366 2.366 0 0 1 .673 1.834c0 1.326-.012 2.394-.012 2.72 0 .263.18.572.681.475A9.911 9.911 0 0 0 10 .333Z","clip-rule","evenodd"]],template:function(t,i){1&t&&(M(0,"footer",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"a",4),Ie(5,"img",5),w()(),M(6,"div",6)(7,"div")(8,"h2",7),O(9,"Navigate"),w(),M(10,"ul",8)(11,"li",9)(12,"a",10),O(13,"Runners"),w()(),M(14,"li",9)(15,"a",11),O(16,"Clubs"),w()(),M(17,"li")(18,"a",11),O(19,"Races"),w()()()(),M(20,"div")(21,"h2",7),O(22,"Follow us"),w(),M(23,"ul",8)(24,"li",9)(25,"a",12),O(26,"Github"),w()(),M(27,"li",9)(28,"a",12),O(29,"Discord"),w()(),M(30,"li")(31,"a",12),O(32,"Twitter"),w()()()(),M(33,"div")(34,"h2",7),O(35,"Legal"),w(),M(36,"ul",8)(37,"li",9)(38,"a",12),O(39,"Privacy Policy"),w()(),M(40,"li")(41,"a",12),O(42,"Terms & Conditions"),w()()()()()(),Ie(43,"hr",13),M(44,"div",14)(45,"span",15),O(46,"\xa9 2023 "),M(47,"a",16),O(48,"RunGroops"),w(),O(49,". All Rights Reserved. "),w(),M(50,"div",17)(51,"a",18),Da(),M(52,"svg",19),Ie(53,"path",20),w(),Aa(),M(54,"span",21),O(55,"Facebook page"),w()(),M(56,"a",18),Da(),M(57,"svg",22),Ie(58,"path",23),w(),Aa(),M(59,"span",21),O(60,"Discord community"),w()(),M(61,"a",18),Da(),M(62,"svg",24),Ie(63,"path",25),w(),Aa(),M(64,"span",21),O(65,"Twitter page"),w()(),M(66,"a",18),Da(),M(67,"svg",26),Ie(68,"path",27),w(),Aa(),M(69,"span",21),O(70,"GitHub account"),w()()()()()()),2&t&&(B(12),Q("routerLink",Ln(3,gre)),B(3),Q("routerLink",Ln(4,_re)),B(3),Q("routerLink",Ln(5,vre)))},dependencies:[er,no]}),n})(),yre=(()=>{class n{constructor(){this.title="RunGroopsUI"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=yt({type:n,selectors:[["app-root"]],decls:4,vars:0,consts:[["fgsColor","#16a34a","pbColor","#16a34a","text","Loading.."]],template:function(t,i){1&t&&Ie(0,"ngx-ui-loader",0)(1,"app-navbar")(2,"router-outlet")(3,"app-footer")},dependencies:[Ey,Kie,mre,bre]}),n})();function v2(n,e){return!0===e.left}function b2(n,e){return!1===e.left}Rm([Kn("{{ time }} {{ easing }}")]),Rm([Qt({height:"*",minHeight:"*"}),Kn("{{ time }} {{ easing }}",Qt({height:0,minHeight:0}))]),Rm([Kn("{{ time }} {{ easing }}")]),Rm([Kn("{{ time }} {{ easing }}")]),Qa("slideAnimation",[ps("*",Qt({transform:"translateX(0)",display:"block",opacity:1})),Fr(v2,Im([ms(":leave",[Kn("0.6s ease-in-out",Qt({transform:"translateX(-100%)"}))],{optional:!0}),ms(":enter",[Qt({transform:"translateX(100%)"}),Kn("0.6s ease-in-out",Qt("*"))],{optional:!0})])),Fr(b2,Im([ms(":enter",[Qt({transform:"translateX(-100%)"}),Kn("0.6s ease-in-out",Qt("*"))],{optional:!0}),ms(":leave",[Kn("0.6s ease-in-out",Qt({transform:"translateX(100%)"}))],{optional:!0})]))]),Qa("fadeAnimation",[ps("*",Qt({zIndex:1,opacity:1})),Fr(v2,Im([ms(":leave",[Kn("0.6s ease-in-out",Qt({zIndex:0,opacity:0}))],{optional:!0}),ms(":enter",[Qt({zIndex:1,opacity:1}),Kn("0.6s ease-in-out",Qt("*"))],{optional:!0})])),Fr(b2,Im([ms(":enter",[Qt({zIndex:1,opacity:1}),Kn("0.6s ease-in-out",Qt("*"))],{optional:!0}),ms(":leave",[Kn("0.6s ease-in-out",Qt({zIndex:0,opacity:0}))],{optional:!0})]))]);let soe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=At({type:n}),n.\u0275inj=St({}),n})(),aoe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=At({type:n}),n.\u0275inj=St({}),n})(),loe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=At({type:n}),n.\u0275inj=St({}),n})();const coe=["addListener","removeListener"],doe=["addEventListener","removeEventListener"],uoe=["on","off"];function oM(n,e,t,i){if(Lt(t)&&(i=t,t=void 0),i)return oM(n,e,t).pipe(dy(i));const[r,o]=function poe(n){return Lt(n.addEventListener)&&Lt(n.removeEventListener)}(n)?doe.map(s=>a=>n[s](e,a,t)):function hoe(n){return Lt(n.addListener)&&Lt(n.removeListener)}(n)?coe.map(C2(n,e)):function foe(n){return Lt(n.on)&&Lt(n.off)}(n)?uoe.map(C2(n,e)):[];if(!r&&X_(n))return ei(s=>oM(s,e,t))(Ri(n));if(!r)throw new TypeError("Invalid event target");return new sn(s=>{const a=(...l)=>s.next(1<l.length?l:l[0]);return r(a),()=>o(a)})}function C2(n,e){return t=>i=>n[t](e,i)}const hf={schedule(n){let e=requestAnimationFrame,t=cancelAnimationFrame;const{delegate:i}=hf;i&&(e=i.requestAnimationFrame,t=i.cancelAnimationFrame);const r=e(o=>{t=void 0,n(o)});return new di(()=>t?.(r))},requestAnimationFrame(...n){const{delegate:e}=hf;return(e?.requestAnimationFrame||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){const{delegate:e}=hf;return(e?.cancelAnimationFrame||cancelAnimationFrame)(...n)},delegate:void 0};new class goe extends JC{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let r;e=e||i.shift();do{if(r=e.execute(e.state,e.delay))break}while((e=i[0])&&e.id===t&&i.shift());if(this._active=!1,r){for(;(e=i[0])&&e.id===t&&i.shift();)e.unsubscribe();throw r}}}(class moe extends QC{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,i=0){return null!==i&&i>0?super.requestAsyncId(e,t,i):(e.actions.push(this),e._scheduled||(e._scheduled=hf.requestAnimationFrame(()=>e.flush(void 0))))}recycleAsyncId(e,t,i=0){var r;if(null!=i?i>0:this.delay>0)return super.recycleAsyncId(e,t,i);const{actions:o}=e;null!=t&&(null===(r=o[o.length-1])||void 0===r?void 0:r.id)!==t&&(hf.cancelAnimationFrame(t),e._scheduled=void 0)}});let sM,voe=1;const c_={};function M2(n){return n in c_&&(delete c_[n],!0)}const boe={setImmediate(n){const e=voe++;return c_[e]=!0,sM||(sM=Promise.resolve()),sM.then(()=>M2(e)&&n()),e},clearImmediate(n){M2(n)}},{setImmediate:yoe,clearImmediate:xoe}=boe,d_={setImmediate(...n){const{delegate:e}=d_;return(e?.setImmediate||yoe)(...n)},clearImmediate(n){const{delegate:e}=d_;return(e?.clearImmediate||xoe)(n)},delegate:void 0};new class Moe extends JC{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let r;e=e||i.shift();do{if(r=e.execute(e.state,e.delay))break}while((e=i[0])&&e.id===t&&i.shift());if(this._active=!1,r){for(;(e=i[0])&&e.id===t&&i.shift();)e.unsubscribe();throw r}}}(class Coe extends QC{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,i=0){return null!==i&&i>0?super.requestAsyncId(e,t,i):(e.actions.push(this),e._scheduled||(e._scheduled=d_.setImmediate(e.flush.bind(e,void 0))))}recycleAsyncId(e,t,i=0){var r;if(null!=i?i>0:this.delay>0)return super.recycleAsyncId(e,t,i);const{actions:o}=e;null!=t&&(null===(r=o[o.length-1])||void 0===r?void 0:r.id)!==t&&(d_.clearImmediate(t),e._scheduled===t&&(e._scheduled=void 0))}});function w2(n,e=eM){return function Soe(n){return Dn((e,t)=>{let i=!1,r=null,o=null,s=!1;const a=()=>{if(o?.unsubscribe(),o=null,i){i=!1;const c=r;r=null,t.next(c)}s&&t.complete()},l=()=>{o=null,s&&t.complete()};e.subscribe(mn(t,c=>{i=!0,r=c,o||Ri(n(c)).subscribe(o=mn(t,a,l))},()=>{s=!0,(!i||!o||o.closed)&&t.complete()}))})}(()=>function Toe(n=0,e,t=Tne){let i=-1;return null!=e&&(gw(e)?t=e:i=e),new sn(r=>{let o=function Eoe(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;o<0&&(o=0);let s=0;return t.schedule(function(){r.closed||(r.next(s++),0<=i?this.schedule(void 0,i):r.complete())},o)})}(n,e))}let Aoe=(()=>{class n{constructor(t,i,r){this._ngZone=t,this._platform=i,this._scrolled=new Kt,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=r}register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){const i=this.scrollContainers.get(t);i&&(i.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=20){return this._platform.isBrowser?new sn(i=>{this._globalSubscription||this._addGlobalListener();const r=t>0?this._scrolled.pipe(w2(t)).subscribe(i):this._scrolled.subscribe(i);return this._scrolledCount++,()=>{r.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):Ye()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((t,i)=>this.deregister(i)),this._scrolled.complete()}ancestorScrolled(t,i){const r=this.getAncestorScrollContainers(t);return this.scrolled(i).pipe(Si(o=>!o||r.indexOf(o)>-1))}getAncestorScrollContainers(t){const i=[];return this.scrollContainers.forEach((r,o)=>{this._scrollableContainsElement(o,t)&&i.push(o)}),i}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(t,i){let r=KC(i),o=t.getElementRef().nativeElement;do{if(r==o)return!0}while(r=r.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>oM(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return n.\u0275fac=function(t){return new(t||n)(J(Rt),J(ba),J(Bt,8))},n.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),aM=(()=>{class n{constructor(t,i,r){this._platform=t,this._change=new Kt,this._changeListener=o=>{this._change.next(o)},this._document=r,i.runOutsideAngular(()=>{if(t.isBrowser){const o=this._getWindow();o.addEventListener("resize",this._changeListener),o.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const t=this._getWindow();t.removeEventListener("resize",this._changeListener),t.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){const t=this.getViewportScrollPosition(),{width:i,height:r}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+r,right:t.left+i,height:r,width:i}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const t=this._document,i=this._getWindow(),r=t.documentElement,o=r.getBoundingClientRect();return{top:-o.top||t.body.scrollTop||i.scrollY||r.scrollTop||0,left:-o.left||t.body.scrollLeft||i.scrollX||r.scrollLeft||0}}change(t=20){return t>0?this._change.pipe(w2(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}}return n.\u0275fac=function(t){return new(t||n)(J(ba),J(Rt),J(Bt,8))},n.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),u_=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=At({type:n}),n.\u0275inj=St({}),n})(),lM=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=At({type:n}),n.\u0275inj=St({imports:[af,u_,af,u_]}),n})(),joe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=At({type:n}),n.\u0275inj=St({imports:[lM]}),n})(),Joe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=At({type:n}),n.\u0275inj=St({imports:[li,joe,li]}),n})(),ase=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=At({type:n}),n.\u0275inj=St({imports:[li,ds,li]}),n})(),dse=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=At({type:n}),n.\u0275inj=St({imports:[li,r2,li]}),n})();class bM{attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;null!=e&&(this._attachedHost=null,e.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class use extends bM{constructor(e,t,i,r,o){super(),this.component=e,this.viewContainerRef=t,this.injector=i,this.componentFactoryResolver=r,this.projectableNodes=o}}class hse extends bM{constructor(e,t,i,r){super(),this.templateRef=e,this.viewContainerRef=t,this.context=i,this.injector=r}get origin(){return this.templateRef.elementRef}attach(e,t=this.context){return this.context=t,super.attach(e)}detach(){return this.context=void 0,super.detach()}}class fse extends bM{constructor(e){super(),this.element=e instanceof ln?e.nativeElement:e}}class pse{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(e){return e instanceof use?(this._attachedPortal=e,this.attachComponentPortal(e)):e instanceof hse?(this._attachedPortal=e,this.attachTemplatePortal(e)):this.attachDomPortal&&e instanceof fse?(this._attachedPortal=e,this.attachDomPortal(e)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class mse extends pse{constructor(e,t,i,r,o){super(),this.outletElement=e,this._componentFactoryResolver=t,this._appRef=i,this._defaultInjector=r,this.attachDomPortal=s=>{const a=s.element,l=this._document.createComment("dom-portal");a.parentNode.insertBefore(l,a),this.outletElement.appendChild(a),this._attachedPortal=s,super.setDisposeFn(()=>{l.parentNode&&l.parentNode.replaceChild(a,l)})},this._document=o}attachComponentPortal(e){const i=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component);let r;return e.viewContainerRef?(r=e.viewContainerRef.createComponent(i,e.viewContainerRef.length,e.injector||e.viewContainerRef.injector,e.projectableNodes||void 0),this.setDisposeFn(()=>r.destroy())):(r=i.create(e.injector||this._defaultInjector||ki.NULL),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(r.hostView),r.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(r)),this._attachedPortal=e,r}attachTemplatePortal(e){let t=e.viewContainerRef,i=t.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return i.rootNodes.forEach(r=>this.outletElement.appendChild(r)),i.detectChanges(),this.setDisposeFn(()=>{let r=t.indexOf(i);-1!==r&&t.remove(r)}),this._attachedPortal=e,i}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}let gse=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=At({type:n}),n.\u0275inj=St({}),n})();const N2=gne();class _se{constructor(e,t){this._viewportRuler=e,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=t}attach(){}enable(){if(this._canBeEnabled()){const e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=zn(-this._previousScrollPosition.left),e.style.top=zn(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const e=this._document.documentElement,i=e.style,r=this._document.body.style,o=i.scrollBehavior||"",s=r.scrollBehavior||"";this._isEnabled=!1,i.left=this._previousHTMLStyles.left,i.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),N2&&(i.scrollBehavior=r.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),N2&&(i.scrollBehavior=o,r.scrollBehavior=s)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const t=this._document.body,i=this._viewportRuler.getViewportSize();return t.scrollHeight>i.height||t.scrollWidth>i.width}}class vse{constructor(e,t,i,r){this._scrollDispatcher=e,this._ngZone=t,this._viewportRuler=i,this._config=r,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(e){this._overlayRef=e}enable(){if(this._scrollSubscription)return;const e=this._scrollDispatcher.scrolled(0).pipe(Si(t=>!t||!this._overlayRef.overlayElement.contains(t.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{const t=this._viewportRuler.getViewportScrollPosition().top;Math.abs(t-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class L2{enable(){}disable(){}attach(){}}function yM(n,e){return e.some(t=>n.bottom<t.top||n.top>t.bottom||n.right<t.left||n.left>t.right)}function B2(n,e){return e.some(t=>n.top<t.top||n.bottom>t.bottom||n.left<t.left||n.right>t.right)}class bse{constructor(e,t,i,r){this._scrollDispatcher=e,this._viewportRuler=t,this._ngZone=i,this._config=r,this._scrollSubscription=null}attach(e){this._overlayRef=e}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const t=this._overlayRef.overlayElement.getBoundingClientRect(),{width:i,height:r}=this._viewportRuler.getViewportSize();yM(t,[{width:i,height:r,bottom:r,right:i,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let yse=(()=>{class n{constructor(t,i,r,o){this._scrollDispatcher=t,this._viewportRuler=i,this._ngZone=r,this.noop=()=>new L2,this.close=s=>new vse(this._scrollDispatcher,this._ngZone,this._viewportRuler,s),this.block=()=>new _se(this._viewportRuler,this._document),this.reposition=s=>new bse(this._scrollDispatcher,this._viewportRuler,this._ngZone,s),this._document=o}}return n.\u0275fac=function(t){return new(t||n)(J(Aoe),J(aM),J(Rt),J(Bt))},n.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class xse{constructor(e){if(this.scrollStrategy=new L2,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,e){const t=Object.keys(e);for(const i of t)void 0!==e[i]&&(this[i]=e[i])}}}class Cse{constructor(e,t){this.connectionPair=e,this.scrollableViewProperties=t}}let U2=(()=>{class n{constructor(t){this._attachedOverlays=[],this._document=t}ngOnDestroy(){this.detach()}add(t){this.remove(t),this._attachedOverlays.push(t)}remove(t){const i=this._attachedOverlays.indexOf(t);i>-1&&this._attachedOverlays.splice(i,1),0===this._attachedOverlays.length&&this.detach()}}return n.\u0275fac=function(t){return new(t||n)(J(Bt))},n.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Mse=(()=>{class n extends U2{constructor(t,i){super(t),this._ngZone=i,this._keydownListener=r=>{const o=this._attachedOverlays;for(let s=o.length-1;s>-1;s--)if(o[s]._keydownEvents.observers.length>0){const a=o[s]._keydownEvents;this._ngZone?this._ngZone.run(()=>a.next(r)):a.next(r);break}}}add(t){super.add(t),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return n.\u0275fac=function(t){return new(t||n)(J(Bt),J(Rt,8))},n.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),wse=(()=>{class n extends U2{constructor(t,i,r){super(t),this._platform=i,this._ngZone=r,this._cursorStyleIsSet=!1,this._pointerDownListener=o=>{this._pointerDownEventTarget=YC(o)},this._clickListener=o=>{const s=YC(o),a="click"===o.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:s;this._pointerDownEventTarget=null;const l=this._attachedOverlays.slice();for(let c=l.length-1;c>-1;c--){const d=l[c];if(d._outsidePointerEvents.observers.length<1||!d.hasAttached())continue;if(d.overlayElement.contains(s)||d.overlayElement.contains(a))break;const u=d._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>u.next(o)):u.next(o)}}}add(t){if(super.add(t),!this._isAttached){const i=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(i)):this._addEventListeners(i),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=i.style.cursor,i.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const t=this._document.body;t.removeEventListener("pointerdown",this._pointerDownListener,!0),t.removeEventListener("click",this._clickListener,!0),t.removeEventListener("auxclick",this._clickListener,!0),t.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(t.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(t){t.addEventListener("pointerdown",this._pointerDownListener,!0),t.addEventListener("click",this._clickListener,!0),t.addEventListener("auxclick",this._clickListener,!0),t.addEventListener("contextmenu",this._clickListener,!0)}}return n.\u0275fac=function(t){return new(t||n)(J(Bt),J(ba),J(Rt,8))},n.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),V2=(()=>{class n{constructor(t,i){this._platform=i,this._document=t}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t="cdk-overlay-container";if(this._platform.isBrowser||ZC()){const r=this._document.querySelectorAll(`.${t}[platform="server"], .${t}[platform="test"]`);for(let o=0;o<r.length;o++)r[o].remove()}const i=this._document.createElement("div");i.classList.add(t),ZC()?i.setAttribute("platform","test"):this._platform.isBrowser||i.setAttribute("platform","server"),this._document.body.appendChild(i),this._containerElement=i}}return n.\u0275fac=function(t){return new(t||n)(J(Bt),J(ba))},n.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class Sse{constructor(e,t,i,r,o,s,a,l,c,d=!1){this._portalOutlet=e,this._host=t,this._pane=i,this._config=r,this._ngZone=o,this._keyboardDispatcher=s,this._document=a,this._location=l,this._outsideClickDispatcher=c,this._animationsDisabled=d,this._backdropElement=null,this._backdropClick=new Kt,this._attachments=new Kt,this._detachments=new Kt,this._locationChanges=di.EMPTY,this._backdropClickHandler=u=>this._backdropClick.next(u),this._backdropTransitionendHandler=u=>{this._disposeBackdrop(u.target)},this._keydownEvents=new Kt,this._outsidePointerEvents=new Kt,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(e){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const t=this._portalOutlet.attach(e);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(Jr(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),"function"==typeof t?.onDestroy&&t.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),t}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){const e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,e&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config={...this._config,...e},this._updateElementSize()}setDirection(e){this._config={...this._config,direction:e},this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){const e=this._config.direction;return e?"string"==typeof e?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const e=this._pane.style;e.width=zn(this._config.width),e.height=zn(this._config.height),e.minWidth=zn(this._config.minWidth),e.minHeight=zn(this._config.minHeight),e.maxWidth=zn(this._config.maxWidth),e.maxHeight=zn(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){const e="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(e)})}):this._backdropElement.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const e=this._backdropElement;if(e){if(this._animationsDisabled)return void this._disposeBackdrop(e);e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{e.addEventListener("transitionend",this._backdropTransitionendHandler)}),e.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(e)},500))}}_toggleClasses(e,t,i){const r=Jg(t||[]).filter(o=>!!o);r.length&&(i?e.classList.add(...r):e.classList.remove(...r))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const e=this._ngZone.onStable.pipe(Rl(xw(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),e.unsubscribe())})})}_disposeScrollStrategy(){const e=this._scrollStrategy;e&&(e.disable(),e.detach&&e.detach())}_disposeBackdrop(e){e&&(e.removeEventListener("click",this._backdropClickHandler),e.removeEventListener("transitionend",this._backdropTransitionendHandler),e.remove(),this._backdropElement===e&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}const H2="cdk-overlay-connected-position-bounding-box",Ese=/([A-Za-z%]+)$/;class Tse{get positions(){return this._preferredPositions}constructor(e,t,i,r,o){this._viewportRuler=t,this._document=i,this._platform=r,this._overlayContainer=o,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new Kt,this._resizeSubscription=di.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(e)}attach(e){this._validatePositions(),e.hostElement.classList.add(H2),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const e=this._originRect,t=this._overlayRect,i=this._viewportRect,r=this._containerRect,o=[];let s;for(let a of this._preferredPositions){let l=this._getOriginPoint(e,r,a),c=this._getOverlayPoint(l,t,a),d=this._getOverlayFit(c,t,i,a);if(d.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(a,l);this._canFitWithFlexibleDimensions(d,c,i)?o.push({position:a,origin:l,overlayRect:t,boundingBoxRect:this._calculateBoundingBoxRect(l,a)}):(!s||s.overlayFit.visibleArea<d.visibleArea)&&(s={overlayFit:d,overlayPoint:c,originPoint:l,position:a,overlayRect:t})}if(o.length){let a=null,l=-1;for(const c of o){const d=c.boundingBoxRect.width*c.boundingBoxRect.height*(c.position.weight||1);d>l&&(l=d,a=c)}return this._isPushed=!1,void this._applyPosition(a.position,a.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(s.position,s.originPoint);this._applyPosition(s.position,s.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&kl(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(H2),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const e=this._lastPosition;if(e){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const t=this._getOriginPoint(this._originRect,this._containerRect,e);this._applyPosition(e,t)}else this.apply()}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,-1===e.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,t,i){let r,o;if("center"==i.originX)r=e.left+e.width/2;else{const s=this._isRtl()?e.right:e.left,a=this._isRtl()?e.left:e.right;r="start"==i.originX?s:a}return t.left<0&&(r-=t.left),o="center"==i.originY?e.top+e.height/2:"top"==i.originY?e.top:e.bottom,t.top<0&&(o-=t.top),{x:r,y:o}}_getOverlayPoint(e,t,i){let r,o;return r="center"==i.overlayX?-t.width/2:"start"===i.overlayX?this._isRtl()?-t.width:0:this._isRtl()?0:-t.width,o="center"==i.overlayY?-t.height/2:"top"==i.overlayY?0:-t.height,{x:e.x+r,y:e.y+o}}_getOverlayFit(e,t,i,r){const o=G2(t);let{x:s,y:a}=e,l=this._getOffset(r,"x"),c=this._getOffset(r,"y");l&&(s+=l),c&&(a+=c);let h=0-a,f=a+o.height-i.height,p=this._subtractOverflows(o.width,0-s,s+o.width-i.width),_=this._subtractOverflows(o.height,h,f),m=p*_;return{visibleArea:m,isCompletelyWithinViewport:o.width*o.height===m,fitsInViewportVertically:_===o.height,fitsInViewportHorizontally:p==o.width}}_canFitWithFlexibleDimensions(e,t,i){if(this._hasFlexibleDimensions){const r=i.bottom-t.y,o=i.right-t.x,s=z2(this._overlayRef.getConfig().minHeight),a=z2(this._overlayRef.getConfig().minWidth);return(e.fitsInViewportVertically||null!=s&&s<=r)&&(e.fitsInViewportHorizontally||null!=a&&a<=o)}return!1}_pushOverlayOnScreen(e,t,i){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};const r=G2(t),o=this._viewportRect,s=Math.max(e.x+r.width-o.width,0),a=Math.max(e.y+r.height-o.height,0),l=Math.max(o.top-i.top-e.y,0),c=Math.max(o.left-i.left-e.x,0);let d=0,u=0;return d=r.width<=o.width?c||-s:e.x<this._viewportMargin?o.left-i.left-e.x:0,u=r.height<=o.height?l||-a:e.y<this._viewportMargin?o.top-i.top-e.y:0,this._previousPushAmount={x:d,y:u},{x:e.x+d,y:e.y+u}}_applyPosition(e,t){if(this._setTransformOrigin(e),this._setOverlayElementStyles(t,e),this._setBoundingBoxStyles(t,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._lastPosition=e,this._positionChanges.observers.length){const i=this._getScrollVisibility(),r=new Cse(e,i);this._positionChanges.next(r)}this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;const t=this._boundingBox.querySelectorAll(this._transformOriginSelector);let i,r=e.overlayY;i="center"===e.overlayX?"center":this._isRtl()?"start"===e.overlayX?"right":"left":"start"===e.overlayX?"left":"right";for(let o=0;o<t.length;o++)t[o].style.transformOrigin=`${i} ${r}`}_calculateBoundingBoxRect(e,t){const i=this._viewportRect,r=this._isRtl();let o,s,a,d,u,h;if("top"===t.overlayY)s=e.y,o=i.height-s+this._viewportMargin;else if("bottom"===t.overlayY)a=i.height-e.y+2*this._viewportMargin,o=i.height-a+this._viewportMargin;else{const f=Math.min(i.bottom-e.y+i.top,e.y),p=this._lastBoundingBoxSize.height;o=2*f,s=e.y-f,o>p&&!this._isInitialRender&&!this._growAfterOpen&&(s=e.y-p/2)}if("end"===t.overlayX&&!r||"start"===t.overlayX&&r)h=i.width-e.x+this._viewportMargin,d=e.x-this._viewportMargin;else if("start"===t.overlayX&&!r||"end"===t.overlayX&&r)u=e.x,d=i.right-e.x;else{const f=Math.min(i.right-e.x+i.left,e.x),p=this._lastBoundingBoxSize.width;d=2*f,u=e.x-f,d>p&&!this._isInitialRender&&!this._growAfterOpen&&(u=e.x-p/2)}return{top:s,left:u,bottom:a,right:h,width:d,height:o}}_setBoundingBoxStyles(e,t){const i=this._calculateBoundingBoxRect(e,t);!this._isInitialRender&&!this._growAfterOpen&&(i.height=Math.min(i.height,this._lastBoundingBoxSize.height),i.width=Math.min(i.width,this._lastBoundingBoxSize.width));const r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{const o=this._overlayRef.getConfig().maxHeight,s=this._overlayRef.getConfig().maxWidth;r.height=zn(i.height),r.top=zn(i.top),r.bottom=zn(i.bottom),r.width=zn(i.width),r.left=zn(i.left),r.right=zn(i.right),r.alignItems="center"===t.overlayX?"center":"end"===t.overlayX?"flex-end":"flex-start",r.justifyContent="center"===t.overlayY?"center":"bottom"===t.overlayY?"flex-end":"flex-start",o&&(r.maxHeight=zn(o)),s&&(r.maxWidth=zn(s))}this._lastBoundingBoxSize=i,kl(this._boundingBox.style,r)}_resetBoundingBoxStyles(){kl(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){kl(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,t){const i={},r=this._hasExactPosition(),o=this._hasFlexibleDimensions,s=this._overlayRef.getConfig();if(r){const d=this._viewportRuler.getViewportScrollPosition();kl(i,this._getExactOverlayY(t,e,d)),kl(i,this._getExactOverlayX(t,e,d))}else i.position="static";let a="",l=this._getOffset(t,"x"),c=this._getOffset(t,"y");l&&(a+=`translateX(${l}px) `),c&&(a+=`translateY(${c}px)`),i.transform=a.trim(),s.maxHeight&&(r?i.maxHeight=zn(s.maxHeight):o&&(i.maxHeight="")),s.maxWidth&&(r?i.maxWidth=zn(s.maxWidth):o&&(i.maxWidth="")),kl(this._pane.style,i)}_getExactOverlayY(e,t,i){let r={top:"",bottom:""},o=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,i)),"bottom"===e.overlayY?r.bottom=this._document.documentElement.clientHeight-(o.y+this._overlayRect.height)+"px":r.top=zn(o.y),r}_getExactOverlayX(e,t,i){let s,r={left:"",right:""},o=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,i)),s=this._isRtl()?"end"===e.overlayX?"left":"right":"end"===e.overlayX?"right":"left","right"===s?r.right=this._document.documentElement.clientWidth-(o.x+this._overlayRect.width)+"px":r.left=zn(o.x),r}_getScrollVisibility(){const e=this._getOriginRect(),t=this._pane.getBoundingClientRect(),i=this._scrollables.map(r=>r.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:B2(e,i),isOriginOutsideView:yM(e,i),isOverlayClipped:B2(t,i),isOverlayOutsideView:yM(t,i)}}_subtractOverflows(e,...t){return t.reduce((i,r)=>i-Math.max(r,0),e)}_getNarrowedViewportRect(){const e=this._document.documentElement.clientWidth,t=this._document.documentElement.clientHeight,i=this._viewportRuler.getViewportScrollPosition();return{top:i.top+this._viewportMargin,left:i.left+this._viewportMargin,right:i.left+e-this._viewportMargin,bottom:i.top+t-this._viewportMargin,width:e-2*this._viewportMargin,height:t-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,t){return"x"===t?null==e.offsetX?this._offsetX:e.offsetX:null==e.offsetY?this._offsetY:e.offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&Jg(e).forEach(t=>{""!==t&&-1===this._appliedPanelClasses.indexOf(t)&&(this._appliedPanelClasses.push(t),this._pane.classList.add(t))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){const e=this._origin;if(e instanceof ln)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();const t=e.width||0,i=e.height||0;return{top:e.y,bottom:e.y+i,left:e.x,right:e.x+t,height:i,width:t}}}function kl(n,e){for(let t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}function z2(n){if("number"!=typeof n&&null!=n){const[e,t]=n.split(Ese);return t&&"px"!==t?null:parseFloat(e)}return n||null}function G2(n){return{top:Math.floor(n.top),right:Math.floor(n.right),bottom:Math.floor(n.bottom),left:Math.floor(n.left),width:Math.floor(n.width),height:Math.floor(n.height)}}const j2="cdk-global-overlay-wrapper";class Dse{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(e){const t=e.getConfig();this._overlayRef=e,this._width&&!t.width&&e.updateSize({width:this._width}),this._height&&!t.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(j2),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._xOffset=e,this._xPosition="left",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._xOffset=e,this._xPosition="right",this}start(e=""){return this._xOffset=e,this._xPosition="start",this}end(e=""){return this._xOffset=e,this._xPosition="end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._xPosition="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement.style,i=this._overlayRef.getConfig(),{width:r,height:o,maxWidth:s,maxHeight:a}=i,l=!("100%"!==r&&"100vw"!==r||s&&"100%"!==s&&"100vw"!==s),c=!("100%"!==o&&"100vh"!==o||a&&"100%"!==a&&"100vh"!==a),d=this._xPosition,u=this._xOffset,h="rtl"===this._overlayRef.getConfig().direction;let f="",p="",_="";l?_="flex-start":"center"===d?(_="center",h?p=u:f=u):h?"left"===d||"end"===d?(_="flex-end",f=u):("right"===d||"start"===d)&&(_="flex-start",p=u):"left"===d||"start"===d?(_="flex-start",f=u):("right"===d||"end"===d)&&(_="flex-end",p=u),e.position=this._cssPosition,e.marginLeft=l?"0":f,e.marginTop=c?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=l?"0":p,t.justifyContent=_,t.alignItems=c?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement,i=t.style;t.classList.remove(j2),i.justifyContent=i.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}}let Ase=(()=>{class n{constructor(t,i,r,o){this._viewportRuler=t,this._document=i,this._platform=r,this._overlayContainer=o}global(){return new Dse}flexibleConnectedTo(t){return new Tse(t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return n.\u0275fac=function(t){return new(t||n)(J(aM),J(Bt),J(ba),J(V2))},n.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Ise=0,x_=(()=>{class n{constructor(t,i,r,o,s,a,l,c,d,u,h,f){this.scrollStrategies=t,this._overlayContainer=i,this._componentFactoryResolver=r,this._positionBuilder=o,this._keyboardDispatcher=s,this._injector=a,this._ngZone=l,this._document=c,this._directionality=d,this._location=u,this._outsideClickDispatcher=h,this._animationsModuleType=f}create(t){const i=this._createHostElement(),r=this._createPaneElement(i),o=this._createPortalOutlet(r),s=new xse(t);return s.direction=s.direction||this._directionality.value,new Sse(o,i,r,s,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,"NoopAnimations"===this._animationsModuleType)}position(){return this._positionBuilder}_createPaneElement(t){const i=this._document.createElement("div");return i.id="cdk-overlay-"+Ise++,i.classList.add("cdk-overlay-pane"),t.appendChild(i),i}_createHostElement(){const t=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(t),t}_createPortalOutlet(t){return this._appRef||(this._appRef=this._injector.get(Fo)),new mse(t,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return n.\u0275fac=function(t){return new(t||n)(J(yse),J(V2),J(fc),J(Ase),J(Mse),J(ki),J(Rt),J(Bt),J(YN),J(qp),J(wse),J(db,8))},n.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Ose={provide:new he("cdk-connected-overlay-scroll-strategy"),deps:[x_],useFactory:function Pse(n){return()=>n.scrollStrategies.reposition()}};let W2=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=At({type:n}),n.\u0275inj=St({providers:[x_,Ose],imports:[af,gse,lM,lM]}),n})(),Vse=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=At({type:n}),n.\u0275inj=St({imports:[li,ds,UN,li]}),n})();const Wse={provide:new he("mat-select-scroll-strategy"),deps:[x_],useFactory:function jse(n){return()=>n.scrollStrategies.reposition()}};let $se=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=At({type:n}),n.\u0275inj=St({providers:[Wse],imports:[ds,W2,o2,li,u_,Vse,o2,li]}),n})();const Zse={provide:new he("mat-tooltip-scroll-strategy"),deps:[x_],useFactory:function Yse(n){return()=>n.scrollStrategies.reposition({scrollThrottle:20})}};let Qse=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=At({type:n}),n.\u0275inj=St({providers:[Zse],imports:[Gne,ds,W2,li,li,u_]}),n})(),xM=(()=>{class n{constructor(){this.changes=new Kt,this.itemsPerPageLabel="Items per page:",this.nextPageLabel="Next page",this.previousPageLabel="Previous page",this.firstPageLabel="First page",this.lastPageLabel="Last page",this.getRangeLabel=(t,i,r)=>{if(0==r||0==i)return`0 of ${r}`;const o=t*i;return`${o+1} \u2013 ${o<(r=Math.max(r,0))?Math.min(o+i,r):o+i} of ${r}`}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const iae={provide:xM,deps:[[new Ws,new ac,xM]],useFactory:function nae(n){return n||new xM}};let rae=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=At({type:n}),n.\u0275inj=St({providers:[iae],imports:[ds,dse,$se,Qse]}),n})();function $2(n){return new ne(3e3,!1)}function ya(n){switch(n.length){case 0:return new ph;case 1:return n[0];default:return new fP(n)}}function q2(n,e,t=new Map,i=new Map){const r=[],o=[];let s=-1,a=null;if(e.forEach(l=>{const c=l.get("offset"),d=c==s,u=d&&a||new Map;l.forEach((h,f)=>{let p=f,_=h;if("offset"!==f)switch(p=n.normalizePropertyName(p,r),_){case"!":_=t.get(f);break;case fs:_=i.get(f);break;default:_=n.normalizeStyleValue(f,p,_,r)}u.set(p,_)}),d||o.push(u),a=u,s=c}),r.length)throw function Tae(n){return new ne(3502,!1)}();return o}function CM(n,e,t,i){switch(e){case"start":n.onStart(()=>i(t&&MM(t,"start",n)));break;case"done":n.onDone(()=>i(t&&MM(t,"done",n)));break;case"destroy":n.onDestroy(()=>i(t&&MM(t,"destroy",n)))}}function MM(n,e,t){const o=wM(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,t.totalTime??n.totalTime,!!t.disabled),s=n._data;return null!=s&&(o._data=s),o}function wM(n,e,t,i,r="",o=0,s){return{element:n,triggerName:e,fromState:t,toState:i,phaseName:r,totalTime:o,disabled:!!s}}function Cr(n,e,t){let i=n.get(e);return i||n.set(e,i=t),i}function X2(n){const e=n.indexOf(":");return[n.substring(1,e),n.slice(e+1)]}const Uae=(()=>typeof document>"u"?null:document.documentElement)();function SM(n){const e=n.parentNode||n.host||null;return e===Uae?null:e}let Fl=null,Y2=!1;function Z2(n,e){for(;e;){if(e===n)return!0;e=SM(e)}return!1}function K2(n,e,t){if(t)return Array.from(n.querySelectorAll(e));const i=n.querySelector(e);return i?[i]:[]}let Q2=(()=>{class n{validateStyleProperty(t){return function Hae(n){Fl||(Fl=function zae(){return typeof document<"u"?document.body:null}()||{},Y2=!!Fl.style&&"WebkitAppearance"in Fl.style);let e=!0;return Fl.style&&!function Vae(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in Fl.style,!e&&Y2&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in Fl.style)),e}(t)}matchesElement(t,i){return!1}containsElement(t,i){return Z2(t,i)}getParentElement(t){return SM(t)}query(t,i,r){return K2(t,i,r)}computeStyle(t,i,r){return r||""}animate(t,i,r,o,s,a=[],l){return new ph(r,o)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=ye({token:n,factory:n.\u0275fac}),n})(),EM=(()=>{class n{}return n.NOOP=new Q2,n})();const Gae=1e3,TM="ng-enter",C_="ng-leave",M_="ng-trigger",w_=".ng-trigger",eL="ng-animating",DM=".ng-animating";function Ns(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:AM(parseFloat(e[1]),e[2])}function AM(n,e){return"s"===e?n*Gae:n}function S_(n,e,t){return n.hasOwnProperty("duration")?n:function Wae(n,e,t){let r,o=0,s="";if("string"==typeof n){const a=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===a)return e.push($2()),{duration:0,delay:0,easing:""};r=AM(parseFloat(a[1]),a[2]);const l=a[3];null!=l&&(o=AM(parseFloat(l),a[4]));const c=a[5];c&&(s=c)}else r=n;if(!t){let a=!1,l=e.length;r<0&&(e.push(function oae(){return new ne(3100,!1)}()),a=!0),o<0&&(e.push(function sae(){return new ne(3101,!1)}()),a=!0),a&&e.splice(l,0,$2())}return{duration:r,delay:o,easing:s}}(n,e,t)}function mf(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function tL(n){const e=new Map;return Object.keys(n).forEach(t=>{e.set(t,n[t])}),e}function xa(n,e=new Map,t){if(t)for(let[i,r]of t)e.set(i,r);for(let[i,r]of n)e.set(i,r);return e}function Xo(n,e,t){e.forEach((i,r)=>{const o=RM(r);t&&!t.has(r)&&t.set(r,n.style[o]),n.style[o]=i})}function Nl(n,e){e.forEach((t,i)=>{const r=RM(i);n.style[r]=""})}function gf(n){return Array.isArray(n)?1==n.length?n[0]:hP(n):n}const IM=new RegExp("{{\\s*(.+?)\\s*}}","g");function iL(n){let e=[];if("string"==typeof n){let t;for(;t=IM.exec(n);)e.push(t[1]);IM.lastIndex=0}return e}function _f(n,e,t){const i=n.toString(),r=i.replace(IM,(o,s)=>{let a=e[s];return null==a&&(t.push(function lae(n){return new ne(3003,!1)}()),a=""),a.toString()});return r==i?n:r}function E_(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const Xae=/-+([a-z0-9])/g;function RM(n){return n.replace(Xae,(...e)=>e[1].toUpperCase())}function Mr(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function cae(n){return new ne(3004,!1)}()}}function rL(n,e){return window.getComputedStyle(n)[e]}const T_="*";function Kae(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(i=>function Qae(n,e,t){if(":"==n[0]){const l=function Jae(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,i)=>parseFloat(i)>parseFloat(t);case":decrement":return(t,i)=>parseFloat(i)<parseFloat(t);default:return e.push(function Mae(n){return new ne(3016,!1)}()),"* => *"}}(n,t);if("function"==typeof l)return void e.push(l);n=l}const i=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==i||i.length<4)return t.push(function Cae(n){return new ne(3015,!1)}()),e;const r=i[1],o=i[2],s=i[3];e.push(oL(r,s));"<"==o[0]&&!(r==T_&&s==T_)&&e.push(oL(s,r))}(i,t,e)):t.push(n),t}const D_=new Set(["true","1"]),A_=new Set(["false","0"]);function oL(n,e){const t=D_.has(n)||A_.has(n),i=D_.has(e)||A_.has(e);return(r,o)=>{let s=n==T_||n==r,a=e==T_||e==o;return!s&&t&&"boolean"==typeof r&&(s=r?D_.has(n):A_.has(n)),!a&&i&&"boolean"==typeof o&&(a=o?D_.has(e):A_.has(e)),s&&a}}const ele=new RegExp("s*:selfs*,?","g");function PM(n,e,t,i){return new tle(n).build(e,t,i)}class tle{constructor(e){this._driver=e}build(e,t,i){const r=new rle(t);return this._resetContextStyleTimingState(r),Mr(this,gf(e),r)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles=new Map,e.collectedStyles.set("",new Map),e.currentTime=0}visitTrigger(e,t){let i=t.queryCount=0,r=t.depCount=0;const o=[],s=[];return"@"==e.name.charAt(0)&&t.errors.push(function uae(){return new ne(3006,!1)}()),e.definitions.forEach(a=>{if(this._resetContextStyleTimingState(t),0==a.type){const l=a,c=l.name;c.toString().split(/\s*,\s*/).forEach(d=>{l.name=d,o.push(this.visitState(l,t))}),l.name=c}else if(1==a.type){const l=this.visitTransition(a,t);i+=l.queryCount,r+=l.depCount,s.push(l)}else t.errors.push(function hae(){return new ne(3007,!1)}())}),{type:7,name:e.name,states:o,transitions:s,queryCount:i,depCount:r,options:null}}visitState(e,t){const i=this.visitStyle(e.styles,t),r=e.options&&e.options.params||null;if(i.containsDynamicStyles){const o=new Set,s=r||{};i.styles.forEach(a=>{a instanceof Map&&a.forEach(l=>{iL(l).forEach(c=>{s.hasOwnProperty(c)||o.add(c)})})}),o.size&&(E_(o.values()),t.errors.push(function fae(n,e){return new ne(3008,!1)}()))}return{type:0,name:e.name,style:i,options:r?{params:r}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const i=Mr(this,gf(e.animation),t);return{type:1,matchers:Kae(e.expr,t.errors),animation:i,queryCount:t.queryCount,depCount:t.depCount,options:Ll(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(i=>Mr(this,i,t)),options:Ll(e.options)}}visitGroup(e,t){const i=t.currentTime;let r=0;const o=e.steps.map(s=>{t.currentTime=i;const a=Mr(this,s,t);return r=Math.max(r,t.currentTime),a});return t.currentTime=r,{type:3,steps:o,options:Ll(e.options)}}visitAnimate(e,t){const i=function sle(n,e){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return OM(S_(n,e).duration,0,"");const t=n;if(t.split(/\s+/).some(o=>"{"==o.charAt(0)&&"{"==o.charAt(1))){const o=OM(0,0,"");return o.dynamic=!0,o.strValue=t,o}const r=S_(t,e);return OM(r.duration,r.delay,r.easing)}(e.timings,t.errors);t.currentAnimateTimings=i;let r,o=e.styles?e.styles:Qt({});if(5==o.type)r=this.visitKeyframes(o,t);else{let s=e.styles,a=!1;if(!s){a=!0;const c={};i.easing&&(c.easing=i.easing),s=Qt(c)}t.currentTime+=i.duration+i.delay;const l=this.visitStyle(s,t);l.isEmptyStep=a,r=l}return t.currentAnimateTimings=null,{type:4,timings:i,style:r,options:null}}visitStyle(e,t){const i=this._makeStyleAst(e,t);return this._validateStyleAst(i,t),i}_makeStyleAst(e,t){const i=[],r=Array.isArray(e.styles)?e.styles:[e.styles];for(let a of r)"string"==typeof a?a===fs?i.push(a):t.errors.push(new ne(3002,!1)):i.push(tL(a));let o=!1,s=null;return i.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(s=a.get("easing"),a.delete("easing")),!o))for(let l of a.values())if(l.toString().indexOf("{{")>=0){o=!0;break}}),{type:6,styles:i,easing:s,offset:e.offset,containsDynamicStyles:o,options:null}}_validateStyleAst(e,t){const i=t.currentAnimateTimings;let r=t.currentTime,o=t.currentTime;i&&o>0&&(o-=i.duration+i.delay),e.styles.forEach(s=>{"string"!=typeof s&&s.forEach((a,l)=>{const c=t.collectedStyles.get(t.currentQuerySelector),d=c.get(l);let u=!0;d&&(o!=r&&o>=d.startTime&&r<=d.endTime&&(t.errors.push(function mae(n,e,t,i,r){return new ne(3010,!1)}()),u=!1),o=d.startTime),u&&c.set(l,{startTime:o,endTime:r}),t.options&&function qae(n,e,t){const i=e.params||{},r=iL(n);r.length&&r.forEach(o=>{i.hasOwnProperty(o)||t.push(function aae(n){return new ne(3001,!1)}())})}(a,t.options,t.errors)})})}visitKeyframes(e,t){const i={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function gae(){return new ne(3011,!1)}()),i;let o=0;const s=[];let a=!1,l=!1,c=0;const d=e.steps.map(g=>{const b=this._makeStyleAst(g,t);let v=null!=b.offset?b.offset:function ole(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){const i=t;e=parseFloat(i.get("offset")),i.delete("offset")}});else if(n instanceof Map&&n.has("offset")){const t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}(b.styles),y=0;return null!=v&&(o++,y=b.offset=v),l=l||y<0||y>1,a=a||y<c,c=y,s.push(y),b});l&&t.errors.push(function _ae(){return new ne(3012,!1)}()),a&&t.errors.push(function vae(){return new ne(3200,!1)}());const u=e.steps.length;let h=0;o>0&&o<u?t.errors.push(function bae(){return new ne(3202,!1)}()):0==o&&(h=1/(u-1));const f=u-1,p=t.currentTime,_=t.currentAnimateTimings,m=_.duration;return d.forEach((g,b)=>{const v=h>0?b==f?1:h*b:s[b],y=v*m;t.currentTime=p+_.delay+y,_.duration=y,this._validateStyleAst(g,t),g.offset=v,i.styles.push(g)}),i}visitReference(e,t){return{type:8,animation:Mr(this,gf(e.animation),t),options:Ll(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:Ll(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:Ll(e.options)}}visitQuery(e,t){const i=t.currentQuerySelector,r=e.options||{};t.queryCount++,t.currentQuery=e;const[o,s]=function nle(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(ele,"")),n=n.replace(/@\*/g,w_).replace(/@\w+/g,t=>w_+"-"+t.slice(1)).replace(/:animating/g,DM),[n,e]}(e.selector);t.currentQuerySelector=i.length?i+" "+o:o,Cr(t.collectedStyles,t.currentQuerySelector,new Map);const a=Mr(this,gf(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=i,{type:11,selector:o,limit:r.limit||0,optional:!!r.optional,includeSelf:s,animation:a,originalSelector:e.selector,options:Ll(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function yae(){return new ne(3013,!1)}());const i="full"===e.timings?{duration:0,delay:0,easing:"full"}:S_(e.timings,t.errors,!0);return{type:12,animation:Mr(this,gf(e.animation),t),timings:i,options:null}}}class rle{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function Ll(n){return n?(n=mf(n)).params&&(n.params=function ile(n){return n?mf(n):null}(n.params)):n={},n}function OM(n,e,t){return{duration:n,delay:e,easing:t}}function kM(n,e,t,i,r,o,s=null,a=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:i,duration:r,delay:o,totalTime:r+o,easing:s,subTimeline:a}}class I_{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let i=this._map.get(e);i||this._map.set(e,i=[]),i.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const cle=new RegExp(":enter","g"),ule=new RegExp(":leave","g");function FM(n,e,t,i,r,o=new Map,s=new Map,a,l,c=[]){return(new hle).buildKeyframes(n,e,t,i,r,o,s,a,l,c)}class hle{buildKeyframes(e,t,i,r,o,s,a,l,c,d=[]){c=c||new I_;const u=new NM(e,t,c,r,o,d,[]);u.options=l;const h=l.delay?Ns(l.delay):0;u.currentTimeline.delayNextStep(h),u.currentTimeline.setStyles([s],null,u.errors,l),Mr(this,i,u);const f=u.timelines.filter(p=>p.containsAnimation());if(f.length&&a.size){let p;for(let _=f.length-1;_>=0;_--){const m=f[_];if(m.element===t){p=m;break}}p&&!p.allowOnlyTimelineStyles()&&p.setStyles([a],null,u.errors,l)}return f.length?f.map(p=>p.buildKeyframes()):[kM(t,[],[],[],0,h,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const i=t.subInstructions.get(t.element);if(i){const r=t.createSubContext(e.options),o=t.currentTimeline.currentTime,s=this._visitSubInstructions(i,r,r.options);o!=s&&t.transformIntoNewTimeline(s)}t.previousNode=e}visitAnimateRef(e,t){const i=t.createSubContext(e.options);i.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,i),this.visitReference(e.animation,i),t.transformIntoNewTimeline(i.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,i){for(const r of e){const o=r?.delay;if(o){const s="number"==typeof o?o:Ns(_f(o,r?.params??{},t.errors));i.delayNextStep(s)}}}_visitSubInstructions(e,t,i){let o=t.currentTimeline.currentTime;const s=null!=i.duration?Ns(i.duration):null,a=null!=i.delay?Ns(i.delay):null;return 0!==s&&e.forEach(l=>{const c=t.appendInstructionToTimeline(l,s,a);o=Math.max(o,c.duration+c.delay)}),o}visitReference(e,t){t.updateOptions(e.options,!0),Mr(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const i=t.subContextCount;let r=t;const o=e.options;if(o&&(o.params||o.delay)&&(r=t.createSubContext(o),r.transformIntoNewTimeline(),null!=o.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=R_);const s=Ns(o.delay);r.delayNextStep(s)}e.steps.length&&(e.steps.forEach(s=>Mr(this,s,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>i&&r.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const i=[];let r=t.currentTimeline.currentTime;const o=e.options&&e.options.delay?Ns(e.options.delay):0;e.steps.forEach(s=>{const a=t.createSubContext(e.options);o&&a.delayNextStep(o),Mr(this,s,a),r=Math.max(r,a.currentTimeline.currentTime),i.push(a.currentTimeline)}),i.forEach(s=>t.currentTimeline.mergeTimelineCollectedStyles(s)),t.transformIntoNewTimeline(r),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const i=e.strValue;return S_(t.params?_f(i,t.params,t.errors):i,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const i=t.currentAnimateTimings=this._visitTiming(e.timings,t),r=t.currentTimeline;i.delay&&(t.incrementTime(i.delay),r.snapshotCurrentStyles());const o=e.style;5==o.type?this.visitKeyframes(o,t):(t.incrementTime(i.duration),this.visitStyle(o,t),r.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const i=t.currentTimeline,r=t.currentAnimateTimings;!r&&i.hasCurrentStyleProperties()&&i.forwardFrame();const o=r&&r.easing||e.easing;e.isEmptyStep?i.applyEmptyStep(o):i.setStyles(e.styles,o,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const i=t.currentAnimateTimings,r=t.currentTimeline.duration,o=i.duration,a=t.createSubContext().currentTimeline;a.easing=i.easing,e.styles.forEach(l=>{a.forwardTime((l.offset||0)*o),a.setStyles(l.styles,l.easing,t.errors,t.options),a.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(a),t.transformIntoNewTimeline(r+o),t.previousNode=e}visitQuery(e,t){const i=t.currentTimeline.currentTime,r=e.options||{},o=r.delay?Ns(r.delay):0;o&&(6===t.previousNode.type||0==i&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=R_);let s=i;const a=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!r.optional,t.errors);t.currentQueryTotal=a.length;let l=null;a.forEach((c,d)=>{t.currentQueryIndex=d;const u=t.createSubContext(e.options,c);o&&u.delayNextStep(o),c===t.element&&(l=u.currentTimeline),Mr(this,e.animation,u),u.currentTimeline.applyStylesToKeyframe(),s=Math.max(s,u.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(s),l&&(t.currentTimeline.mergeTimelineCollectedStyles(l),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const i=t.parentContext,r=t.currentTimeline,o=e.timings,s=Math.abs(o.duration),a=s*(t.currentQueryTotal-1);let l=s*t.currentQueryIndex;switch(o.duration<0?"reverse":o.easing){case"reverse":l=a-l;break;case"full":l=i.currentStaggerTime}const d=t.currentTimeline;l&&d.delayNextStep(l);const u=d.currentTime;Mr(this,e.animation,t),t.previousNode=e,i.currentStaggerTime=r.currentTime-u+(r.startTime-i.currentTimeline.startTime)}}const R_={};class NM{constructor(e,t,i,r,o,s,a,l){this._driver=e,this.element=t,this.subInstructions=i,this._enterClassName=r,this._leaveClassName=o,this.errors=s,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=R_,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=l||new P_(this._driver,t,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const i=e;let r=this.options;null!=i.duration&&(r.duration=Ns(i.duration)),null!=i.delay&&(r.delay=Ns(i.delay));const o=i.params;if(o){let s=r.params;s||(s=this.options.params={}),Object.keys(o).forEach(a=>{(!t||!s.hasOwnProperty(a))&&(s[a]=_f(o[a],s,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const i=e.params={};Object.keys(t).forEach(r=>{i[r]=t[r]})}}return e}createSubContext(e=null,t,i){const r=t||this.element,o=new NM(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,i||0));return o.previousNode=this.previousNode,o.currentAnimateTimings=this.currentAnimateTimings,o.options=this._copyOptions(),o.updateOptions(e),o.currentQueryIndex=this.currentQueryIndex,o.currentQueryTotal=this.currentQueryTotal,o.parentContext=this,this.subContextCount++,o}transformIntoNewTimeline(e){return this.previousNode=R_,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,i){const r={duration:t??e.duration,delay:this.currentTimeline.currentTime+(i??0)+e.delay,easing:""},o=new fle(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,r,e.stretchStartingKeyframe);return this.timelines.push(o),r}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,i,r,o,s){let a=[];if(r&&a.push(this.element),e.length>0){e=(e=e.replace(cle,"."+this._enterClassName)).replace(ule,"."+this._leaveClassName);let c=this._driver.query(this.element,e,1!=i);0!==i&&(c=i<0?c.slice(c.length+i,c.length):c.slice(0,i)),a.push(...c)}return!o&&0==a.length&&s.push(function xae(n){return new ne(3014,!1)}()),a}}class P_{constructor(e,t,i,r){this._driver=e,this.element=t,this.startTime=i,this._elementTimelineStylesLookup=r,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1===this._keyframes.size&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new P_(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,i]of this._globalTimelineStyles)this._backFill.set(t,i||fs),this._currentKeyframe.set(t,fs);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,i,r){t&&this._previousKeyframe.set("easing",t);const o=r&&r.params||{},s=function ple(n,e){const t=new Map;let i;return n.forEach(r=>{if("*"===r){i=i||e.keys();for(let o of i)t.set(o,fs)}else xa(r,t)}),t}(e,this._globalTimelineStyles);for(let[a,l]of s){const c=_f(l,o,i);this._pendingStyles.set(a,c),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??fs),this._updateStyle(a,c)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,i)=>{const r=this._styleSummary.get(i);(!r||t.time>r.time)&&this._updateStyle(i,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,i=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((a,l)=>{const c=xa(a,new Map,this._backFill);c.forEach((d,u)=>{"!"===d?e.add(u):d===fs&&t.add(u)}),i||c.set("offset",l/this.duration),r.push(c)});const o=e.size?E_(e.values()):[],s=t.size?E_(t.values()):[];if(i){const a=r[0],l=new Map(a);a.set("offset",0),l.set("offset",1),r=[a,l]}return kM(this.element,r,o,s,this.duration,this.startTime,this.easing,!1)}}class fle extends P_{constructor(e,t,i,r,o,s,a=!1){super(e,t,s.delay),this.keyframes=i,this.preStyleProps=r,this.postStyleProps=o,this._stretchStartingKeyframe=a,this.timings={duration:s.duration,delay:s.delay,easing:s.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:i,easing:r}=this.timings;if(this._stretchStartingKeyframe&&t){const o=[],s=i+t,a=t/s,l=xa(e[0]);l.set("offset",0),o.push(l);const c=xa(e[0]);c.set("offset",lL(a)),o.push(c);const d=e.length-1;for(let u=1;u<=d;u++){let h=xa(e[u]);const f=h.get("offset");h.set("offset",lL((t+f*i)/s)),o.push(h)}i=s,t=0,r="",e=o}return kM(this.element,e,this.preStyleProps,this.postStyleProps,i,t,r,!0)}}function lL(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class LM{}const mle=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class gle extends LM{normalizePropertyName(e,t){return RM(e)}normalizeStyleValue(e,t,i,r){let o="";const s=i.toString().trim();if(mle.has(t)&&0!==i&&"0"!==i)if("number"==typeof i)o="px";else{const a=i.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&0==a[1].length&&r.push(function dae(n,e){return new ne(3005,!1)}())}return s+o}}function cL(n,e,t,i,r,o,s,a,l,c,d,u,h){return{type:0,element:n,triggerName:e,isRemovalTransition:r,fromState:t,fromStyles:o,toState:i,toStyles:s,timelines:a,queriedElements:l,preStyleProps:c,postStyleProps:d,totalTime:u,errors:h}}const BM={};class dL{constructor(e,t,i){this._triggerName=e,this.ast=t,this._stateStyles=i}match(e,t,i,r){return function _le(n,e,t,i,r){return n.some(o=>o(e,t,i,r))}(this.ast.matchers,e,t,i,r)}buildStyles(e,t,i){let r=this._stateStyles.get("*");return void 0!==e&&(r=this._stateStyles.get(e?.toString())||r),r?r.buildStyles(t,i):new Map}build(e,t,i,r,o,s,a,l,c,d){const u=[],h=this.ast.options&&this.ast.options.params||BM,p=this.buildStyles(i,a&&a.params||BM,u),_=l&&l.params||BM,m=this.buildStyles(r,_,u),g=new Set,b=new Map,v=new Map,y="void"===r,x={params:vle(_,h),delay:this.ast.options?.delay},S=d?[]:FM(e,t,this.ast.animation,o,s,p,m,x,c,u);let D=0;if(S.forEach(C=>{D=Math.max(C.duration+C.delay,D)}),u.length)return cL(t,this._triggerName,i,r,y,p,m,[],[],b,v,D,u);S.forEach(C=>{const T=C.element,j=Cr(b,T,new Set);C.preStyleProps.forEach(V=>j.add(V));const ie=Cr(v,T,new Set);C.postStyleProps.forEach(V=>ie.add(V)),T!==t&&g.add(T)});const I=E_(g.values());return cL(t,this._triggerName,i,r,y,p,m,S,I,b,v,D)}}function vle(n,e){const t=mf(e);for(const i in n)n.hasOwnProperty(i)&&null!=n[i]&&(t[i]=n[i]);return t}class ble{constructor(e,t,i){this.styles=e,this.defaultParams=t,this.normalizer=i}buildStyles(e,t){const i=new Map,r=mf(this.defaultParams);return Object.keys(e).forEach(o=>{const s=e[o];null!==s&&(r[o]=s)}),this.styles.styles.forEach(o=>{"string"!=typeof o&&o.forEach((s,a)=>{s&&(s=_f(s,r,t));const l=this.normalizer.normalizePropertyName(a,t);s=this.normalizer.normalizeStyleValue(a,l,s,t),i.set(a,s)})}),i}}class xle{constructor(e,t,i){this.name=e,this.ast=t,this._normalizer=i,this.transitionFactories=[],this.states=new Map,t.states.forEach(r=>{this.states.set(r.name,new ble(r.style,r.options&&r.options.params||{},i))}),uL(this.states,"true","1"),uL(this.states,"false","0"),t.transitions.forEach(r=>{this.transitionFactories.push(new dL(e,r,this.states))}),this.fallbackTransition=function Cle(n,e,t){return new dL(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(s,a)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,i,r){return this.transitionFactories.find(s=>s.match(e,t,i,r))||null}matchStyles(e,t,i){return this.fallbackTransition.buildStyles(e,t,i)}}function uL(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}const Mle=new I_;class wle{constructor(e,t,i){this.bodyNode=e,this._driver=t,this._normalizer=i,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){const i=[],o=PM(this._driver,t,i,[]);if(i.length)throw function Dae(n){return new ne(3503,!1)}();this._animations.set(e,o)}_buildPlayer(e,t,i){const r=e.element,o=q2(this._normalizer,e.keyframes,t,i);return this._driver.animate(r,o,e.duration,e.delay,e.easing,[],!0)}create(e,t,i={}){const r=[],o=this._animations.get(e);let s;const a=new Map;if(o?(s=FM(this._driver,t,o,TM,C_,new Map,new Map,i,Mle,r),s.forEach(d=>{const u=Cr(a,d.element,new Map);d.postStyleProps.forEach(h=>u.set(h,null))})):(r.push(function Aae(){return new ne(3300,!1)}()),s=[]),r.length)throw function Iae(n){return new ne(3504,!1)}();a.forEach((d,u)=>{d.forEach((h,f)=>{d.set(f,this._driver.computeStyle(u,f,fs))})});const c=ya(s.map(d=>{const u=a.get(d.element);return this._buildPlayer(d,new Map,u)}));return this._playersById.set(e,c),c.onDestroy(()=>this.destroy(e)),this.players.push(c),c}destroy(e){const t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);const i=this.players.indexOf(t);i>=0&&this.players.splice(i,1)}_getPlayer(e){const t=this._playersById.get(e);if(!t)throw function Rae(n){return new ne(3301,!1)}();return t}listen(e,t,i,r){const o=wM(t,"","","");return CM(this._getPlayer(e),i,o,r),()=>{}}command(e,t,i,r){if("register"==i)return void this.register(e,r[0]);if("create"==i)return void this.create(e,t,r[0]||{});const o=this._getPlayer(e);switch(i){case"play":o.play();break;case"pause":o.pause();break;case"reset":o.reset();break;case"restart":o.restart();break;case"finish":o.finish();break;case"init":o.init();break;case"setPosition":o.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(e)}}}const hL="ng-animate-queued",UM="ng-animate-disabled",Ale=[],fL={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Ile={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},zr="__ng_removed";class VM{get params(){return this.options.params}constructor(e,t=""){this.namespaceId=t;const i=e&&e.hasOwnProperty("value");if(this.value=function kle(n){return n??null}(i?e.value:e),i){const o=mf(e);delete o.value,this.options=o}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){const t=e.params;if(t){const i=this.options.params;Object.keys(t).forEach(r=>{null==i[r]&&(i[r]=t[r])})}}}const vf="void",HM=new VM(vf);class Rle{constructor(e,t,i){this.id=e,this.hostElement=t,this._engine=i,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,Gr(t,this._hostClassName)}listen(e,t,i,r){if(!this._triggers.has(t))throw function Pae(n,e){return new ne(3302,!1)}();if(null==i||0==i.length)throw function Oae(n){return new ne(3303,!1)}();if(!function Fle(n){return"start"==n||"done"==n}(i))throw function kae(n,e){return new ne(3400,!1)}();const o=Cr(this._elementListeners,e,[]),s={name:t,phase:i,callback:r};o.push(s);const a=Cr(this._engine.statesByElement,e,new Map);return a.has(t)||(Gr(e,M_),Gr(e,M_+"-"+t),a.set(t,HM)),()=>{this._engine.afterFlush(()=>{const l=o.indexOf(s);l>=0&&o.splice(l,1),this._triggers.has(t)||a.delete(t)})}}register(e,t){return!this._triggers.has(e)&&(this._triggers.set(e,t),!0)}_getTrigger(e){const t=this._triggers.get(e);if(!t)throw function Fae(n){return new ne(3401,!1)}();return t}trigger(e,t,i,r=!0){const o=this._getTrigger(t),s=new zM(this.id,t,e);let a=this._engine.statesByElement.get(e);a||(Gr(e,M_),Gr(e,M_+"-"+t),this._engine.statesByElement.set(e,a=new Map));let l=a.get(t);const c=new VM(i,this.id);if(!(i&&i.hasOwnProperty("value"))&&l&&c.absorbOptions(l.options),a.set(t,c),l||(l=HM),c.value!==vf&&l.value===c.value){if(!function Ble(n,e){const t=Object.keys(n),i=Object.keys(e);if(t.length!=i.length)return!1;for(let r=0;r<t.length;r++){const o=t[r];if(!e.hasOwnProperty(o)||n[o]!==e[o])return!1}return!0}(l.params,c.params)){const _=[],m=o.matchStyles(l.value,l.params,_),g=o.matchStyles(c.value,c.params,_);_.length?this._engine.reportError(_):this._engine.afterFlush(()=>{Nl(e,m),Xo(e,g)})}return}const h=Cr(this._engine.playersByElement,e,[]);h.forEach(_=>{_.namespaceId==this.id&&_.triggerName==t&&_.queued&&_.destroy()});let f=o.matchTransition(l.value,c.value,e,c.params),p=!1;if(!f){if(!r)return;f=o.fallbackTransition,p=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:f,fromState:l,toState:c,player:s,isFallbackTransition:p}),p||(Gr(e,hL),s.onStart(()=>{qd(e,hL)})),s.onDone(()=>{let _=this.players.indexOf(s);_>=0&&this.players.splice(_,1);const m=this._engine.playersByElement.get(e);if(m){let g=m.indexOf(s);g>=0&&m.splice(g,1)}}),this.players.push(s),h.push(s),s}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,i)=>{this._elementListeners.set(i,t.filter(r=>r.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(i=>i.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const i=this._engine.driver.query(e,w_,!0);i.forEach(r=>{if(r[zr])return;const o=this._engine.fetchNamespacesByElement(r);o.size?o.forEach(s=>s.triggerLeaveAnimation(r,t,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>i.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(e,t,i,r){const o=this._engine.statesByElement.get(e),s=new Map;if(o){const a=[];if(o.forEach((l,c)=>{if(s.set(c,l.value),this._triggers.has(c)){const d=this.trigger(e,c,vf,r);d&&a.push(d)}}),a.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,s),i&&ya(a).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),i=this._engine.statesByElement.get(e);if(t&&i){const r=new Set;t.forEach(o=>{const s=o.name;if(r.has(s))return;r.add(s);const l=this._triggers.get(s).fallbackTransition,c=i.get(s)||HM,d=new VM(vf),u=new zM(this.id,s,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:s,transition:l,fromState:c,toState:d,player:u,isFallbackTransition:!0})})}}removeNode(e,t){const i=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let r=!1;if(i.totalAnimations){const o=i.players.length?i.playersByQueriedElement.get(e):[];if(o&&o.length)r=!0;else{let s=e;for(;s=s.parentNode;)if(i.statesByElement.get(s)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(e),r)i.markElementAsRemoved(this.id,e,!1,t);else{const o=e[zr];(!o||o===fL)&&(i.afterFlush(()=>this.clearElementCache(e)),i.destroyInnerAnimations(e),i._onRemovalComplete(e,t))}}insertNode(e,t){Gr(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(i=>{const r=i.player;if(r.destroyed)return;const o=i.element,s=this._elementListeners.get(o);s&&s.forEach(a=>{if(a.name==i.triggerName){const l=wM(o,i.triggerName,i.fromState.value,i.toState.value);l._data=e,CM(i.player,a.phase,l,a.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):t.push(i)}),this._queue=[],t.sort((i,r)=>{const o=i.transition.ast.depCount,s=r.transition.ast.depCount;return 0==o||0==s?o-s:this._engine.driver.containsElement(i.element,r.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(i=>i.element===e)||t,t}}class Ple{_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}constructor(e,t,i){this.bodyNode=e,this.driver=t,this._normalizer=i,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(r,o)=>{}}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(i=>{i.queued&&e.push(i)})}),e}createNamespace(e,t){const i=new Rle(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(i,t):(this.newHostElements.set(t,i),this.collectEnterElement(t)),this._namespaceLookup[e]=i}_balanceNamespaceList(e,t){const i=this._namespaceList,r=this.namespacesByHostElement;if(i.length-1>=0){let s=!1,a=this.driver.getParentElement(t);for(;a;){const l=r.get(a);if(l){const c=i.indexOf(l);i.splice(c+1,0,e),s=!0;break}a=this.driver.getParentElement(a)}s||i.unshift(e)}else i.push(e);return r.set(t,e),e}register(e,t){let i=this._namespaceLookup[e];return i||(i=this.createNamespace(e,t)),i}registerTrigger(e,t,i){let r=this._namespaceLookup[e];r&&r.register(t,i)&&this.totalAnimations++}destroy(e,t){if(!e)return;const i=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(i.hostElement),delete this._namespaceLookup[e];const r=this._namespaceList.indexOf(i);r>=0&&this._namespaceList.splice(r,1)}),this.afterFlushAnimationsDone(()=>i.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,i=this.statesByElement.get(e);if(i)for(let r of i.values())if(r.namespaceId){const o=this._fetchNamespace(r.namespaceId);o&&t.add(o)}return t}trigger(e,t,i,r){if(O_(t)){const o=this._fetchNamespace(e);if(o)return o.trigger(t,i,r),!0}return!1}insertNode(e,t,i,r){if(!O_(t))return;const o=t[zr];if(o&&o.setForRemoval){o.setForRemoval=!1,o.setForMove=!0;const s=this.collectedLeaveElements.indexOf(t);s>=0&&this.collectedLeaveElements.splice(s,1)}if(e){const s=this._fetchNamespace(e);s&&s.insertNode(t,i)}r&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Gr(e,UM)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),qd(e,UM))}removeNode(e,t,i){if(O_(t)){const r=e?this._fetchNamespace(e):null;r?r.removeNode(t,i):this.markElementAsRemoved(e,t,!1,i);const o=this.namespacesByHostElement.get(t);o&&o.id!==e&&o.removeNode(t,i)}else this._onRemovalComplete(t,i)}markElementAsRemoved(e,t,i,r,o){this.collectedLeaveElements.push(t),t[zr]={namespaceId:e,setForRemoval:r,hasAnimation:i,removedBeforeQueried:!1,previousTriggersValues:o}}listen(e,t,i,r,o){return O_(t)?this._fetchNamespace(e).listen(t,i,r,o):()=>{}}_buildInstruction(e,t,i,r,o){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,i,r,e.fromState.options,e.toState.options,t,o)}destroyInnerAnimations(e){let t=this.driver.query(e,w_,!0);t.forEach(i=>this.destroyActiveAnimationsForElement(i)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,DM,!0),t.forEach(i=>this.finishActiveQueriedAnimationOnElement(i)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(i=>{i.queued?i.markedForDestroy=!0:i.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(i=>i.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return ya(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e[zr];if(t&&t.setForRemoval){if(e[zr]=fL,t.namespaceId){this.destroyInnerAnimations(e);const i=this._fetchNamespace(t.namespaceId);i&&i.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(UM)&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((i,r)=>this._balanceNamespaceList(i,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let i=0;i<this.collectedEnterElements.length;i++)Gr(this.collectedEnterElements[i],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const i=[];try{t=this._flushAnimations(i,e)}finally{for(let r=0;r<i.length;r++)i[r]()}}else for(let i=0;i<this.collectedLeaveElements.length;i++)this.processLeaveNode(this.collectedLeaveElements[i]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(i=>i()),this._flushFns=[],this._whenQuietFns.length){const i=this._whenQuietFns;this._whenQuietFns=[],t.length?ya(t).onDone(()=>{i.forEach(r=>r())}):i.forEach(r=>r())}}reportError(e){throw function Nae(n){return new ne(3402,!1)}()}_flushAnimations(e,t){const i=new I_,r=[],o=new Map,s=[],a=new Map,l=new Map,c=new Map,d=new Set;this.disabledNodes.forEach(z=>{d.add(z);const H=this.driver.query(z,".ng-animate-queued",!0);for(let W=0;W<H.length;W++)d.add(H[W])});const u=this.bodyNode,h=Array.from(this.statesByElement.keys()),f=gL(h,this.collectedEnterElements),p=new Map;let _=0;f.forEach((z,H)=>{const W=TM+_++;p.set(H,W),z.forEach(K=>Gr(K,W))});const m=[],g=new Set,b=new Set;for(let z=0;z<this.collectedLeaveElements.length;z++){const H=this.collectedLeaveElements[z],W=H[zr];W&&W.setForRemoval&&(m.push(H),g.add(H),W.hasAnimation?this.driver.query(H,".ng-star-inserted",!0).forEach(K=>g.add(K)):b.add(H))}const v=new Map,y=gL(h,Array.from(g));y.forEach((z,H)=>{const W=C_+_++;v.set(H,W),z.forEach(K=>Gr(K,W))}),e.push(()=>{f.forEach((z,H)=>{const W=p.get(H);z.forEach(K=>qd(K,W))}),y.forEach((z,H)=>{const W=v.get(H);z.forEach(K=>qd(K,W))}),m.forEach(z=>{this.processLeaveNode(z)})});const x=[],S=[];for(let z=this._namespaceList.length-1;z>=0;z--)this._namespaceList[z].drainQueuedTransitions(t).forEach(W=>{const K=W.player,ae=W.element;if(x.push(K),this.collectedEnterElements.length){const Se=ae[zr];if(Se&&Se.setForMove){if(Se.previousTriggersValues&&Se.previousTriggersValues.has(W.triggerName)){const $e=Se.previousTriggersValues.get(W.triggerName),Ve=this.statesByElement.get(W.element);if(Ve&&Ve.has(W.triggerName)){const mt=Ve.get(W.triggerName);mt.value=$e,Ve.set(W.triggerName,mt)}}return void K.destroy()}}const Ce=!u||!this.driver.containsElement(u,ae),X=v.get(ae),ue=p.get(ae),re=this._buildInstruction(W,i,ue,X,Ce);if(re.errors&&re.errors.length)return void S.push(re);if(Ce)return K.onStart(()=>Nl(ae,re.fromStyles)),K.onDestroy(()=>Xo(ae,re.toStyles)),void r.push(K);if(W.isFallbackTransition)return K.onStart(()=>Nl(ae,re.fromStyles)),K.onDestroy(()=>Xo(ae,re.toStyles)),void r.push(K);const De=[];re.timelines.forEach(Se=>{Se.stretchStartingKeyframe=!0,this.disabledNodes.has(Se.element)||De.push(Se)}),re.timelines=De,i.append(ae,re.timelines),s.push({instruction:re,player:K,element:ae}),re.queriedElements.forEach(Se=>Cr(a,Se,[]).push(K)),re.preStyleProps.forEach((Se,$e)=>{if(Se.size){let Ve=l.get($e);Ve||l.set($e,Ve=new Set),Se.forEach((mt,Ze)=>Ve.add(Ze))}}),re.postStyleProps.forEach((Se,$e)=>{let Ve=c.get($e);Ve||c.set($e,Ve=new Set),Se.forEach((mt,Ze)=>Ve.add(Ze))})});if(S.length){const z=[];S.forEach(H=>{z.push(function Lae(n,e){return new ne(3505,!1)}())}),x.forEach(H=>H.destroy()),this.reportError(z)}const D=new Map,I=new Map;s.forEach(z=>{const H=z.element;i.has(H)&&(I.set(H,H),this._beforeAnimationBuild(z.player.namespaceId,z.instruction,D))}),r.forEach(z=>{const H=z.element;this._getPreviousPlayers(H,!1,z.namespaceId,z.triggerName,null).forEach(K=>{Cr(D,H,[]).push(K),K.destroy()})});const C=m.filter(z=>vL(z,l,c)),T=new Map;mL(T,this.driver,b,c,fs).forEach(z=>{vL(z,l,c)&&C.push(z)});const ie=new Map;f.forEach((z,H)=>{mL(ie,this.driver,new Set(z),l,"!")}),C.forEach(z=>{const H=T.get(z),W=ie.get(z);T.set(z,new Map([...H?.entries()??[],...W?.entries()??[]]))});const V=[],G=[],$={};s.forEach(z=>{const{element:H,player:W,instruction:K}=z;if(i.has(H)){if(d.has(H))return W.onDestroy(()=>Xo(H,K.toStyles)),W.disabled=!0,W.overrideTotalTime(K.totalTime),void r.push(W);let ae=$;if(I.size>1){let X=H;const ue=[];for(;X=X.parentNode;){const re=I.get(X);if(re){ae=re;break}ue.push(X)}ue.forEach(re=>I.set(re,ae))}const Ce=this._buildAnimation(W.namespaceId,K,D,o,ie,T);if(W.setRealPlayer(Ce),ae===$)V.push(W);else{const X=this.playersByElement.get(ae);X&&X.length&&(W.parentPlayer=ya(X)),r.push(W)}}else Nl(H,K.fromStyles),W.onDestroy(()=>Xo(H,K.toStyles)),G.push(W),d.has(H)&&r.push(W)}),G.forEach(z=>{const H=o.get(z.element);if(H&&H.length){const W=ya(H);z.setRealPlayer(W)}}),r.forEach(z=>{z.parentPlayer?z.syncPlayerEvents(z.parentPlayer):z.destroy()});for(let z=0;z<m.length;z++){const H=m[z],W=H[zr];if(qd(H,C_),W&&W.hasAnimation)continue;let K=[];if(a.size){let Ce=a.get(H);Ce&&Ce.length&&K.push(...Ce);let X=this.driver.query(H,DM,!0);for(let ue=0;ue<X.length;ue++){let re=a.get(X[ue]);re&&re.length&&K.push(...re)}}const ae=K.filter(Ce=>!Ce.destroyed);ae.length?Nle(this,H,ae):this.processLeaveNode(H)}return m.length=0,V.forEach(z=>{this.players.push(z),z.onDone(()=>{z.destroy();const H=this.players.indexOf(z);this.players.splice(H,1)}),z.play()}),V}elementContainsData(e,t){let i=!1;const r=t[zr];return r&&r.setForRemoval&&(i=!0),this.playersByElement.has(t)&&(i=!0),this.playersByQueriedElement.has(t)&&(i=!0),this.statesByElement.has(t)&&(i=!0),this._fetchNamespace(e).elementContainsData(t)||i}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,i,r,o){let s=[];if(t){const a=this.playersByQueriedElement.get(e);a&&(s=a)}else{const a=this.playersByElement.get(e);if(a){const l=!o||o==vf;a.forEach(c=>{c.queued||!l&&c.triggerName!=r||s.push(c)})}}return(i||r)&&(s=s.filter(a=>!(i&&i!=a.namespaceId||r&&r!=a.triggerName))),s}_beforeAnimationBuild(e,t,i){const o=t.element,s=t.isRemovalTransition?void 0:e,a=t.isRemovalTransition?void 0:t.triggerName;for(const l of t.timelines){const c=l.element,d=c!==o,u=Cr(i,c,[]);this._getPreviousPlayers(c,d,s,a,t.toState).forEach(f=>{const p=f.getRealPlayer();p.beforeDestroy&&p.beforeDestroy(),f.destroy(),u.push(f)})}Nl(o,t.fromStyles)}_buildAnimation(e,t,i,r,o,s){const a=t.triggerName,l=t.element,c=[],d=new Set,u=new Set,h=t.timelines.map(p=>{const _=p.element;d.add(_);const m=_[zr];if(m&&m.removedBeforeQueried)return new ph(p.duration,p.delay);const g=_!==l,b=function Lle(n){const e=[];return _L(n,e),e}((i.get(_)||Ale).map(D=>D.getRealPlayer())).filter(D=>!!D.element&&D.element===_),v=o.get(_),y=s.get(_),x=q2(this._normalizer,p.keyframes,v,y),S=this._buildPlayer(p,x,b);if(p.subTimeline&&r&&u.add(_),g){const D=new zM(e,a,_);D.setRealPlayer(S),c.push(D)}return S});c.forEach(p=>{Cr(this.playersByQueriedElement,p.element,[]).push(p),p.onDone(()=>function Ole(n,e,t){let i=n.get(e);if(i){if(i.length){const r=i.indexOf(t);i.splice(r,1)}0==i.length&&n.delete(e)}return i}(this.playersByQueriedElement,p.element,p))}),d.forEach(p=>Gr(p,eL));const f=ya(h);return f.onDestroy(()=>{d.forEach(p=>qd(p,eL)),Xo(l,t.toStyles)}),u.forEach(p=>{Cr(r,p,[]).push(f)}),f}_buildPlayer(e,t,i){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,i):new ph(e.duration,e.delay)}}class zM{constructor(e,t,i){this.namespaceId=e,this.triggerName=t,this.element=i,this._player=new ph,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,i)=>{t.forEach(r=>CM(e,i,void 0,r))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){Cr(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function O_(n){return n&&1===n.nodeType}function pL(n,e){const t=n.style.display;return n.style.display=e??"none",t}function mL(n,e,t,i,r){const o=[];t.forEach(l=>o.push(pL(l)));const s=[];i.forEach((l,c)=>{const d=new Map;l.forEach(u=>{const h=e.computeStyle(c,u,r);d.set(u,h),(!h||0==h.length)&&(c[zr]=Ile,s.push(c))}),n.set(c,d)});let a=0;return t.forEach(l=>pL(l,o[a++])),s}function gL(n,e){const t=new Map;if(n.forEach(a=>t.set(a,[])),0==e.length)return t;const r=new Set(e),o=new Map;function s(a){if(!a)return 1;let l=o.get(a);if(l)return l;const c=a.parentNode;return l=t.has(c)?c:r.has(c)?1:s(c),o.set(a,l),l}return e.forEach(a=>{const l=s(a);1!==l&&t.get(l).push(a)}),t}function Gr(n,e){n.classList?.add(e)}function qd(n,e){n.classList?.remove(e)}function Nle(n,e,t){ya(t).onDone(()=>n.processLeaveNode(e))}function _L(n,e){for(let t=0;t<n.length;t++){const i=n[t];i instanceof fP?_L(i.players,e):e.push(i)}}function vL(n,e,t){const i=t.get(n);if(!i)return!1;let r=e.get(n);return r?i.forEach(o=>r.add(o)):e.set(n,i),t.delete(n),!0}class k_{constructor(e,t,i){this.bodyNode=e,this._driver=t,this._normalizer=i,this._triggerCache={},this.onRemovalComplete=(r,o)=>{},this._transitionEngine=new Ple(e,t,i),this._timelineEngine=new wle(e,t,i),this._transitionEngine.onRemovalComplete=(r,o)=>this.onRemovalComplete(r,o)}registerTrigger(e,t,i,r,o){const s=e+"-"+r;let a=this._triggerCache[s];if(!a){const l=[],d=PM(this._driver,o,l,[]);if(l.length)throw function Eae(n,e){return new ne(3404,!1)}();a=function yle(n,e,t){return new xle(n,e,t)}(r,d,this._normalizer),this._triggerCache[s]=a}this._transitionEngine.registerTrigger(t,r,a)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,i,r){this._transitionEngine.insertNode(e,t,i,r)}onRemove(e,t,i){this._transitionEngine.removeNode(e,t,i)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,i,r){if("@"==i.charAt(0)){const[o,s]=X2(i);this._timelineEngine.command(o,t,s,r)}else this._transitionEngine.trigger(e,t,i,r)}listen(e,t,i,r,o){if("@"==i.charAt(0)){const[s,a]=X2(i);return this._timelineEngine.listen(s,t,a,o)}return this._transitionEngine.listen(e,t,i,r,o)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let Vle=(()=>{class n{constructor(t,i,r){this._element=t,this._startStyles=i,this._endStyles=r,this._state=0;let o=n.initialStylesByElement.get(t);o||n.initialStylesByElement.set(t,o=new Map),this._initialStyles=o}start(){this._state<1&&(this._startStyles&&Xo(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Xo(this._element,this._initialStyles),this._endStyles&&(Xo(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(Nl(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Nl(this._element,this._endStyles),this._endStyles=null),Xo(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function GM(n){let e=null;return n.forEach((t,i)=>{(function Hle(n){return"display"===n||"position"===n})(i)&&(e=e||new Map,e.set(i,t))}),e}class bL{constructor(e,t,i,r){this.element=e,this.keyframes=t,this.options=i,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=i.duration,this._delay=i.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){const t=[];return e.forEach(i=>{t.push(Object.fromEntries(i))}),t}_triggerWebAnimation(e,t,i){return e.animate(this._convertKeyframesToObject(t),i)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((i,r)=>{"offset"!==r&&e.set(r,this._finished?i:rL(this.element,r))}),this.currentSnapshot=e}triggerCallback(e){const t="start"===e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}class zle{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}matchesElement(e,t){return!1}containsElement(e,t){return Z2(e,t)}getParentElement(e){return SM(e)}query(e,t,i){return K2(e,t,i)}computeStyle(e,t,i){return window.getComputedStyle(e)[t]}animate(e,t,i,r,o,s=[]){const l={duration:i,delay:r,fill:0==r?"both":"forwards"};o&&(l.easing=o);const c=new Map,d=s.filter(f=>f instanceof bL);(function Yae(n,e){return 0===n||0===e})(i,r)&&d.forEach(f=>{f.currentSnapshot.forEach((p,_)=>c.set(_,p))});let u=function $ae(n){return n.length?n[0]instanceof Map?n:n.map(e=>tL(e)):[]}(t).map(f=>xa(f));u=function Zae(n,e,t){if(t.size&&e.length){let i=e[0],r=[];if(t.forEach((o,s)=>{i.has(s)||r.push(s),i.set(s,o)}),r.length)for(let o=1;o<e.length;o++){let s=e[o];r.forEach(a=>s.set(a,rL(n,a)))}}return e}(e,u,c);const h=function Ule(n,e){let t=null,i=null;return Array.isArray(e)&&e.length?(t=GM(e[0]),e.length>1&&(i=GM(e[e.length-1]))):e instanceof Map&&(t=GM(e)),t||i?new Vle(n,t,i):null}(e,u);return new bL(e,u,l,h)}}let Gle=(()=>{class n extends uP{constructor(t,i){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(i.body,{id:"0",encapsulation:$i.None,styles:[],data:{animation:[]}})}build(t){const i=this._nextAnimationId.toString();this._nextAnimationId++;const r=Array.isArray(t)?hP(t):t;return yL(this._renderer,null,i,"register",[r]),new jle(i,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(J(wu),J(Bt))},n.\u0275prov=ye({token:n,factory:n.\u0275fac}),n})();class jle extends x7{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new Wle(this._id,e,t||{},this._renderer)}}class Wle{constructor(e,t,i,r){this.id=e,this.element=t,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",i)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return yL(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function yL(n,e,t,i,r){return n.setProperty(e,`@@${t}:${i}`,r)}const xL="@.disabled";let $le=(()=>{class n{constructor(t,i,r){this.delegate=t,this.engine=i,this._zone=r,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,i.onRemovalComplete=(o,s)=>{const a=s?.parentNode(o);a&&s.removeChild(a,o)}}createRenderer(t,i){const o=this.delegate.createRenderer(t,i);if(!(t&&i&&i.data&&i.data.animation)){let d=this._rendererCache.get(o);return d||(d=new CL("",o,this.engine,()=>this._rendererCache.delete(o)),this._rendererCache.set(o,d)),d}const s=i.id,a=i.id+"-"+this._currentId;this._currentId++,this.engine.register(a,t);const l=d=>{Array.isArray(d)?d.forEach(l):this.engine.registerTrigger(s,a,t,d.name,d)};return i.data.animation.forEach(l),new qle(this,a,o,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(t,i,r){t>=0&&t<this._microtaskId?this._zone.run(()=>i(r)):(0==this._animationCallbacksBuffer.length&&queueMicrotask(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(o=>{const[s,a]=o;s(a)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([i,r]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(J(wu),J(k_),J(Rt))},n.\u0275prov=ye({token:n,factory:n.\u0275fac}),n})();class CL{constructor(e,t,i,r){this.namespaceId=e,this.delegate=t,this.engine=i,this._onDestroy=r,this.destroyNode=this.delegate.destroyNode?o=>t.destroyNode(o):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy(),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,i,r=!0){this.delegate.insertBefore(e,t,i),this.engine.onInsert(this.namespaceId,t,e,r)}removeChild(e,t,i){this.engine.onRemove(this.namespaceId,t,this.delegate)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,i,r){this.delegate.setAttribute(e,t,i,r)}removeAttribute(e,t,i){this.delegate.removeAttribute(e,t,i)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,i,r){this.delegate.setStyle(e,t,i,r)}removeStyle(e,t,i){this.delegate.removeStyle(e,t,i)}setProperty(e,t,i){"@"==t.charAt(0)&&t==xL?this.disableAnimations(e,!!i):this.delegate.setProperty(e,t,i)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,i){return this.delegate.listen(e,t,i)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class qle extends CL{constructor(e,t,i,r,o){super(t,i,r,o),this.factory=e,this.namespaceId=t}setProperty(e,t,i){"@"==t.charAt(0)?"."==t.charAt(1)&&t==xL?this.disableAnimations(e,i=void 0===i||!!i):this.engine.process(this.namespaceId,e,t.slice(1),i):this.delegate.setProperty(e,t,i)}listen(e,t,i){if("@"==t.charAt(0)){const r=function Xle(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let o=t.slice(1),s="";return"@"!=o.charAt(0)&&([o,s]=function Yle(n){const e=n.indexOf(".");return[n.substring(0,e),n.slice(e+1)]}(o)),this.engine.listen(this.namespaceId,r,o,s,a=>{this.factory.scheduleListenerCallback(a._data||-1,i,a)})}return this.delegate.listen(e,t,i)}}const ML=[{provide:uP,useClass:Gle},{provide:LM,useFactory:function Kle(){return new gle}},{provide:k_,useClass:(()=>{class n extends k_{constructor(t,i,r,o){super(t.body,i,r)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(J(Bt),J(EM),J(LM),J(Fo))},n.\u0275prov=ye({token:n,factory:n.\u0275fac}),n})()},{provide:wu,useFactory:function Qle(n,e,t){return new $le(n,e,t)},deps:[sy,k_,Rt]}],jM=[{provide:EM,useFactory:()=>new zle},{provide:db,useValue:"BrowserAnimations"},...ML],wL=[{provide:EM,useClass:Q2},{provide:db,useValue:"NoopAnimations"},...ML];let Jle=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?wL:jM}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=At({type:n}),n.\u0275inj=St({providers:jM,imports:[kI]}),n})(),ece=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=At({type:n,bootstrap:[yre]}),n.\u0275inj=St({providers:[kr,Ud,Vd,LN],imports:[kI,ds,Fie,Jle,aoe,loe,soe,h7,Bq,Joe,ase,mie,rae,Qie,nre.forRoot({showForeground:!0}),j7.forRoot({timeOut:3e3,positionClass:"toast-bottom-right",preventDuplicates:!0,progressBar:!0})]}),n})();l6().bootstrapModule(ece).catch(n=>console.error(n))}},Lt=>{Lt(Lt.s=835)}]);